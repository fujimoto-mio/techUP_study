var SX=Object.defineProperty;var wX=(pr,ua,Jc)=>ua in pr?SX(pr,ua,{enumerable:!0,configurable:!0,writable:!0,value:Jc}):pr[ua]=Jc;var Ie=(pr,ua,Jc)=>wX(pr,typeof ua!="symbol"?ua+"":ua,Jc);function xX(pr){return pr&&pr.__esModule&&Object.prototype.hasOwnProperty.call(pr,"default")?pr.default:pr}var bX={exports:{}};(function(pr){(function(){var ua=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Jc=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},ec=function(e,t){var o=Array.prototype.slice.call(e);return o.sort(t)},Oc=function(e,t){return tc(function(o,r){return e.eq(t(o),t(r))})},tc=function(e){return{eq:e}},Na=tc(function(e,t){return e===t}),on=Na,bo=function(e){return tc(function(t,o){if(t.length!==o.length)return!1;for(var r=t.length,c=0;c<r;c++)if(!e.eq(t[c],o[c]))return!1;return!0})},qu=function(e,t){return Oc(bo(e),function(o){return ec(o,t)})},Qr=function(e){return tc(function(t,o){var r=Object.keys(t),c=Object.keys(o);if(!qu(on).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(t[b],o[b]))return!1}return!0})},nc=tc(function(e,t){if(e===t)return!0;var o=ua(e),r=ua(t);return o!==r?!1:Jc(o)?e===t:o==="array"?bo(nc).eq(e,t):o==="object"?Qr(nc).eq(e,t):!1});const br=Object.getPrototypeOf,Is=(e,t,o)=>{var r;return o(e,t.prototype)?!0:((r=e.constructor)==null?void 0:r.name)===t.name},oc=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Is(e,String,(o,r)=>r.isPrototypeOf(o))?"string":t},Jn=e=>t=>oc(t)===e,Dt=e=>t=>typeof t===e,Pa=e=>t=>e===t,sc=(e,t)=>en(e)&&Is(e,t,(o,r)=>br(o)===r),Y=Jn("string"),en=Jn("object"),Qc=e=>sc(e,Object),dn=Jn("array"),ie=Pa(null),an=Dt("boolean"),es=Pa(void 0),gn=e=>e==null,ve=e=>!gn(e),ne=Dt("function"),lr=Dt("number"),In=(e,t)=>{if(dn(e)){for(let o=0,r=e.length;o<r;++o)if(!t(e[o]))return!1;return!0}return!1},Ot=()=>{},T=(e,t)=>(...o)=>e(t.apply(null,o)),Uo=(e,t)=>o=>e(t(o)),Xe=e=>()=>e,Zo=e=>e,zt=(e,t)=>e===t;function Me(e,...t){return(...o)=>{const r=t.concat(o);return e.apply(null,r)}}const to=e=>t=>!e(t),js=e=>()=>{throw new Error(e)},Ro=e=>e(),ls=e=>{e()},De=Xe(!1),et=Xe(!0),Xl=class Xl{constructor(t,o){Ie(this,"tag");Ie(this,"value");this.tag=t,this.value=o}static some(t){return new Xl(!0,t)}static none(){return Xl.singletonNone}fold(t,o){return this.tag?o(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?Xl.some(t(this.value)):Xl.none()}bind(t){return this.tag?t(this.value):Xl.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:Xl.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return ve(t)?Xl.some(t):Xl.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(Xl,"singletonNone",new Xl(!1));let N=Xl;const Dc=Array.prototype.slice,no=Array.prototype.indexOf,ts=Array.prototype.push,po=(e,t)=>no.call(e,t),ea=(e,t)=>{const o=po(e,t);return o===-1?N.none():N.some(o)},vt=(e,t)=>po(e,t)>-1,zn=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return!0}return!1},Rt=(e,t)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=t(u,c)}return r},le=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];t(c,o)}},ks=(e,t)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];t(r,o)}},_e=(e,t)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(t(f,c)?o:r).push(f)}return{pass:o,fail:r}},ge=(e,t)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];t(u,r)&&o.push(u)}return o},tn=(e,t)=>{if(e.length===0)return[];{let o=t(e[0]);const r=[];let c=[];for(let u=0,f=e.length;u<f;u++){const b=e[u],v=t(b);v!==o&&(r.push(c),c=[]),o=v,c.push(b)}return c.length!==0&&r.push(c),r}},yn=(e,t,o)=>(ks(e,(r,c)=>{o=t(o,r,c)}),o),cn=(e,t,o)=>(le(e,(r,c)=>{o=t(o,r,c)}),o),Ls=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(t(u,r))return N.some(u);if(o(u,r))break}return N.none()},Qn=(e,t)=>Ls(e,t,De),cl=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return N.some(o)}return N.none()},Lh=(e,t)=>{for(let o=e.length-1;o>=0;o--)if(t(e[o],o))return N.some(o);return N.none()},ta=e=>{const t=[];for(let o=0,r=e.length;o<r;++o){if(!dn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);ts.apply(t,e[o])}return t},Vn=(e,t)=>ta(Rt(e,t)),$a=(e,t)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(t(c,o)!==!0)return!1}return!0},Mo=e=>{const t=Dc.call(e,0);return t.reverse(),t},ns=(e,t)=>ge(e,o=>!vt(t,o)),Ku=(e,t)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=t(u,r)}return o},ki=(e,t)=>{const o=Dc.call(e,0);return o.sort(t),o},Ir=(e,t)=>t>=0&&t<e.length?N.some(e[t]):N.none(),us=e=>Ir(e,0),Fs=e=>Ir(e,e.length-1),Bo=ne(Array.from)?Array.from:e=>Dc.call(e),rc=(e,t)=>{for(let o=0;o<e.length;o++){const r=t(e[o],o);if(r.isSome())return r}return N.none()},ac=(e,t)=>{const o=[],r=ne(t)?c=>zn(o,u=>t(u,c)):c=>vt(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},bt=Object.keys,Mn=Object.hasOwnProperty,hn=(e,t)=>{const o=bt(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];t(f,u)}},cc=(e,t)=>da(e,(o,r)=>({k:r,v:t(o,r)})),da=(e,t)=>{const o={};return hn(e,(r,c)=>{const u=t(r,c);o[u.k]=u.v}),o},pt=e=>(t,o)=>{e[o]=t},il=(e,t,o,r)=>{hn(e,(c,u)=>{(t(c,u)?o:r)(c,u)})},Qm=(e,t)=>{const o={},r={};return il(e,t,pt(o),pt(r)),{t:o,f:r}},tu=(e,t)=>{const o={};return il(e,t,pt(o),Ot),o},Rc=(e,t)=>{const o=[];return hn(e,(r,c)=>{o.push(t(r,c))}),o},Ia=e=>Rc(e,Zo),vo=(e,t)=>Kt(e,t)?N.from(e[t]):N.none(),Kt=(e,t)=>Mn.call(e,t),Wo=(e,t)=>Kt(e,t)&&e[t]!==void 0&&e[t]!==null,ef=(e,t,o=nc)=>Qr(o).eq(e,t),ei={generate:e=>{if(!dn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],o={};return le(e,(r,c)=>{const u=bt(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!dn(b))throw new Error("case arguments must be an array");t.push(f),o[f]=(...v)=>{const w=v.length;if(w!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+w);return{fold:(...O)=>{if(O.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+O.length);return O[c].apply(null,v)},match:O=>{const R=bt(O);if(t.length!==R.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+R.join(","));if(!$a(t,U=>vt(R,U)))throw new Error("Not all branches were specified when using match. Specified: "+R.join(", ")+`
Required: `+t.join(", "));return O[f].apply(null,v)},log:O=>{console.log(O,{constructors:t,constructor:f,params:v})}}}}),o}},Bt=e=>{let t=e;return{get:()=>t,set:c=>{t=c}}},ma=e=>{const t=u=>u(e),o=Xe(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:et,isError:De,map:u=>vr.value(u(e)),mapError:r,bind:t,exists:t,forall:t,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>N.some(e)};return c},ll=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:De,isError:et,map:t,mapError:r=>vr.error(r(e)),bind:t,exists:De,forall:et,getOr:Zo,or:Zo,getOrThunk:Ro,orThunk:Ro,getOrDie:js(String(e)),each:Ot,toOptional:N.none};return o},vr={value:ma,error:ll,fromOption:(e,t)=>e.fold(()=>ll(t),ma)},tf=typeof window<"u"?window:Function("return this;")(),Ko=()=>{const e=window.crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},Wd=()=>{const e=Ko(),t=(o,r)=>{let c="";for(let u=o;u<=r;++u){const f=e[u].toString(16).padStart(2,"0");c+=f}return c};return`${t(0,3)}-${t(4,5)}-${t(6,7)}-${t(8,9)}-${t(10,15)}`},jd=(e,t,o)=>Math.min(Math.max(e,t),o),ul=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let _i=0;const _s=e=>{const o=new Date().getTime(),r=Math.floor(ul()*1e9);return _i++,e+"_"+r+_i+String(o)},nu=()=>window.isSecureContext?window.crypto.randomUUID():Wd(),dg=(e,t)=>t,st=(e,t)=>Qc(e)&&Qc(t)?Gd(e,t):t,La=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<t.length;r++){const c=t[r];for(const u in c)Kt(c,u)&&(o[u]=e(o[u],c[u]))}return o},Gd=La(st),qd=La(dg),ro=(e,t,o=zt)=>e.exists(r=>o(r,t)),Kd=(e,t,o=zt)=>Cs(e,t,o).getOr(e.isNone()&&t.isNone()),ic=e=>{const t=[],o=r=>{t.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return t},Cs=(e,t,o)=>e.isSome()&&t.isSome()?N.some(o(e.getOrDie(),t.getOrDie())):N.none(),Ai=(e,t,o,r)=>e.isSome()&&t.isSome()&&o.isSome()?N.some(r(e.getOrDie(),t.getOrDie(),o.getOrDie())):N.none(),Yd=e=>e.bind(Zo),lc=(e,t)=>e?N.some(t):N.none(),yr=(e,t)=>{let o=t??tf;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},ti=(e,t)=>{const o=e.split(".");return yr(o,t)};ei.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const fa=e=>{const t=[],o=[];return le(e,r=>{r.fold(c=>{t.push(c)},c=>{o.push(c)})}),{errors:t,values:o}},z1=e=>{const t=Bt(N.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(N.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(N.some(b))}}},mg=e=>{const t=Bt(N.none()),o=()=>t.get().each(b=>clearInterval(b));return{clear:()=>{o(),t.set(N.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(N.some(setInterval(b,e)))}}},Mc=()=>{const e=z1(Ot);return{...e,on:o=>e.get().each(o)}},dl=(e,t)=>e.substring(t),ml=(e,t,o)=>t===""||e.length>=t.length&&e.substr(o,o+t.length)===t,fg=(e,t)=>Zt(e,t)?dl(e,t.length):e,ps=(e,t,o=0,r)=>{const c=e.indexOf(t,o);return c!==-1?es(r)?!0:c+t.length<=r:!1},Zt=(e,t)=>ml(e,t,0),Lr=(e,t)=>ml(e,t,e.length-t.length),Cr=e=>t=>t.replace(e,""),os=Cr(/^\s+|\s+$/g),nf=Cr(/^\s+/g),Xd=Cr(/\s+$/g),jo=e=>e.length>0,Xu=e=>!jo(e),ni=(e,t)=>t<=0?"":new Array(t+1).join(e),Hh=(e,t=10)=>{const o=parseInt(e,t);return isNaN(o)?N.none():N.some(o)},ot=(e,t)=>{let o=null;return{cancel:()=>{ie(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ie(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},t))}}},ou=(e,t)=>{let o=null;const r=()=>{ie(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},t)}}},ga=e=>{let t=!1,o;return(...r)=>(t||(t=!0,o=e.apply(null,r)),o)},Ju="\uFEFF",ss=" ",zh="…",oi=e=>e===Ju,Bc=e=>e.replace(/\uFEFF/g,""),gg=e=>{const t={};return le(e,o=>{t[o]={}}),bt(t)},hg=e=>e.length!==void 0,fl=Array.isArray,pg=e=>{if(fl(e))return e;{const t=[];for(let o=0,r=e.length;o<r;o++)t[o]=e[o];return t}},Jd=(e,t,o)=>{if(!e)return!1;if(o=o||e,hg(e)){for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Kt(e,r)&&t.call(o,e[r],r,e)===!1)return!1;return!0},gl=(e,t)=>{const o=[];return Jd(e,(r,c)=>{o.push(t(r,c,e))}),o},Qu=(e,t)=>{const o=[];return Jd(e,(r,c)=>{(!t||t(r,c,e))&&o.push(r)}),o},We=(e,t)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===t)return o}return-1},Qd=(e,t,o,r)=>{let c=es(o)?e[0]:o;for(let u=0;u<e.length;u++)c=t.call(r,c,e[u],u);return c},of=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e))return r;return-1},si=e=>e[e.length-1],su=(e,t,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),v=c||!u&&f&&r("(min-device-width:768px)"),w=u||f&&!v,k=t.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,O=!w&&!v&&!k;return{isiPad:Xe(c),isiPhone:Xe(u),isTablet:Xe(v),isPhone:Xe(w),isTouch:Xe(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Xe(k),isDesktop:Xe(O)}},em=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(t))return r}},ha=(e,t)=>{const o=em(e,t);if(!o)return{major:0,minor:0};const r=c=>Number(t.replace(o,"$"+c));return hl(r(1),r(2))},ed=(e,t)=>{const o=String(t).toLowerCase();return e.length===0?ru():ha(e,o)},ru=()=>hl(0,0),hl=(e,t)=>({major:e,minor:t}),ao={nu:hl,detect:ed,unknown:ru},tm=(e,t)=>rc(t.brands,o=>{const r=o.brand.toLowerCase();return Qn(e,c=>{var u;return r===((u=c.brand)==null?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:ao.nu(parseInt(o.version,10),0)}))}),Fr=(e,t)=>{const o=String(t).toLowerCase();return Qn(e,r=>r.search(o))},B=(e,t)=>Fr(e,t).map(o=>{const r=ao.detect(o.versionRegexes,t);return{current:o.name,version:r}}),V=(e,t)=>Fr(e,t).map(o=>{const r=ao.detect(o.versionRegexes,t);return{current:o.name,version:r}}),X=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ye=e=>t=>ps(t,e),yt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ps(e,"edge/")&&ps(e,"chrome")&&ps(e,"safari")&&ps(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,X],search:e=>ps(e,"chrome")&&!ps(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ps(e,"msie")||ps(e,"trident")},{name:"Opera",versionRegexes:[X,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ye("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ye("firefox")},{name:"Safari",versionRegexes:[X,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ps(e,"safari")||ps(e,"mobile/"))&&ps(e,"applewebkit")}],ln=[{name:"Windows",search:ye("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ps(e,"iphone")||ps(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ye("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ye("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ye("linux"),versionRegexes:[]},{name:"Solaris",search:ye("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ye("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ye("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Oo={browsers:Xe(yt),oses:Xe(ln)},pa="Edge",Nc="Chromium",un="IE",$="Opera",K="Firefox",te="Safari",we=()=>Ue({current:void 0,version:ao.unknown()}),Ue=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isEdge:r(pa),isChromium:r(Nc),isIE:r(un),isOpera:r($),isFirefox:r(K),isSafari:r(te)}},dt={unknown:we,nu:Ue},nn="Windows",Gn="iOS",Un="Android",As="Linux",Ss="macOS",sf="Solaris",rf="FreeBSD",ri="ChromeOS",V1=()=>$S({current:void 0,version:ao.unknown()}),$S=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isWindows:r(nn),isiOS:r(Gn),isAndroid:r(Un),isMacOS:r(Ss),isLinux:r(As),isSolaris:r(sf),isFreeBSD:r(rf),isChromeOS:r(ri)}},Iv={unknown:V1,nu:$S},YT={detect:(e,t,o)=>{const r=Oo.browsers(),c=Oo.oses(),u=t.bind(v=>tm(r,v)).orThunk(()=>B(r,e)).fold(dt.unknown,dt.nu),f=V(c,e).fold(Iv.unknown,Iv.nu),b=su(f,u,e,o);return{browser:u,os:f,deviceType:b}}},XT=e=>window.matchMedia(e).matches;let JT=ga(()=>YT.detect(window.navigator.userAgent,N.from(window.navigator.userAgentData),XT));const au=()=>JT(),QT=(e,t)=>ti(e,t),e3=(e,t)=>{const o=QT(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},Lv=Object.getPrototypeOf,Fv=e=>e3("HTMLElement",e),L5=e=>{const t=ti("ownerDocument.defaultView",e);return en(e)&&(Fv(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Lv(e).constructor.name))},t3=window.navigator.userAgent,Hv=au(),cu=Hv.browser,pl=Hv.os,af=Hv.deviceType,n3=t3.indexOf("Windows Phone")!==-1,Nn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:cu.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!cu.isIE(),windowsPhone:n3,browser:{current:cu.current,version:cu.version,isChromium:cu.isChromium,isEdge:cu.isEdge,isFirefox:cu.isFirefox,isIE:cu.isIE,isOpera:cu.isOpera,isSafari:cu.isSafari},os:{current:pl.current,version:pl.version,isAndroid:pl.isAndroid,isChromeOS:pl.isChromeOS,isFreeBSD:pl.isFreeBSD,isiOS:pl.isiOS,isLinux:pl.isLinux,isMacOS:pl.isMacOS,isSolaris:pl.isSolaris,isWindows:pl.isWindows},deviceType:{isDesktop:af.isDesktop,isiPad:af.isiPad,isiPhone:af.isiPhone,isPhone:af.isPhone,isTablet:af.isTablet,isTouch:af.isTouch,isWebView:af.isWebView}},o3=/^\s*|\s*$/g,zv=e=>gn(e)?"":(""+e).replace(o3,""),bs=(e,t)=>t?t==="array"&&fl(e)?!0:typeof e===t:e!==void 0,s3=(e,t,o={})=>{const r=Y(e)?e.split(t||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},U1=Kt,r3=(e,...t)=>{for(let o=0;o<t.length;o++){const r=t[o];for(const c in r)if(Kt(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Vv=function(e,t,o,r){r=r||this,e&&(o&&(e=e[o]),Jd(e,(c,u)=>t.call(r,c,u,o)===!1?!1:(Vv(c,t,o,r),!0)))},He={trim:zv,isArray:fl,is:bs,toArray:pg,makeMap:s3,each:Jd,map:gl,grep:Qu,inArray:We,hasOwn:U1,extend:r3,walk:Vv,resolve:(e,t=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(t=t[o[r]],!!t);r++);return t},explode:(e,t)=>dn(e)?e:e===""?[]:gl(e.split(t||","),zv),_addCacheSuffix:e=>{const t=Nn.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Pc=(e,t)=>{const r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Vh(r.childNodes[0])},Z1=(e,t)=>{const r=(t||document).createElement(e);return Vh(r)},Oi=(e,t)=>{const r=(t||document).createTextNode(e);return Vh(r)},Vh=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},q={fromHtml:Pc,fromTag:Z1,fromText:Oi,fromDom:Vh,fromPoint:(e,t,o)=>N.from(e.dom.elementFromPoint(t,o)).map(Vh)},uc=(e,t)=>{t.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},nm=(e,t)=>{t.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Zv=(e,t,o)=>{const r=e.document.createRange();return uc(r,t),nm(r,o),r},vg=(e,t,o,r,c)=>{const u=e.document.createRange();return u.setStart(t.dom,o),u.setEnd(r.dom,c),u},na=ei.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),dc=(e,t,o)=>t(q.fromDom(o.startContainer),o.startOffset,q.fromDom(o.endContainer),o.endOffset),Wv=(e,t)=>t.match({domRange:o=>({ltr:Xe(o),rtl:N.none}),relative:(o,r)=>({ltr:ga(()=>Zv(e,o,r)),rtl:ga(()=>N.some(Zv(e,r,o)))}),exact:(o,r,c,u)=>({ltr:ga(()=>vg(e,o,r,c,u)),rtl:ga(()=>N.some(vg(e,c,u,o,r)))})}),jv=(e,t)=>{const o=t.ltr();return o.collapsed?t.rtl().filter(c=>c.collapsed===!1).map(c=>na.rtl(q.fromDom(c.endContainer),c.endOffset,q.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>dc(e,na.ltr,o)):dc(e,na.ltr,o)},Uh=(e,t)=>{const o=Wv(e,t);return jv(e,o)};na.ltr,na.rtl;const Fa=8,Gv=9,iu=11,Zh=1,qv=3,$c=(e,t)=>{const o=e.dom;if(o.nodeType!==Zh)return!1;{const r=o;if(r.matches!==void 0)return r.matches(t);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(t);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Kv=e=>e.nodeType!==Zh&&e.nodeType!==Gv&&e.nodeType!==iu||e.childElementCount===0,bl=(e,t)=>{const o=t===void 0?document:t.dom;return Kv(o)?[]:Rt(o.querySelectorAll(e),q.fromDom)},om=(e,t)=>{const o=t===void 0?document:t.dom;return Kv(o)?N.none():N.from(o.querySelector(e)).map(q.fromDom)},xn=(e,t)=>e.dom===t.dom,ai=(e,t)=>{const o=e.dom,r=t.dom;return o===r?!1:o.contains(r)},W1=$c,IS=(e,t)=>{const o=[],r=u=>(o.push(u),t(u));let c=t(e);do c=c.bind(r);while(c.isSome());return o},mn=e=>e.dom.nodeName.toLowerCase(),td=e=>e.dom.nodeType,Hs=e=>t=>td(t)===e,vl=e=>td(e)===Fa||mn(e)==="#comment",yl=e=>ds(e)&&L5(e.dom),ds=Hs(Zh),qn=Hs(qv),c3=Hs(Gv),i3=Hs(iu),lu=e=>t=>ds(t)&&mn(t)===e,Di=e=>q.fromDom(e.dom.ownerDocument),Cl=e=>c3(e)?e:Di(e),Gs=e=>q.fromDom(Cl(e).dom.documentElement),nd=e=>q.fromDom(Cl(e).dom.defaultView),Ic=e=>N.from(e.dom.parentNode).map(q.fromDom),Ri=e=>N.from(e.dom.parentElement).map(q.fromDom),ci=(e,t)=>{const o=ne(t)?t:De;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=q.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Kn=e=>{const t=o=>ge(o,r=>!xn(e,r));return Ic(e).map(ms).map(t).getOr([])},ii=e=>N.from(e.dom.previousSibling).map(q.fromDom),uu=e=>N.from(e.dom.nextSibling).map(q.fromDom),oa=e=>Mo(IS(e,ii)),ur=e=>IS(e,uu),ms=e=>Rt(e.dom.childNodes,q.fromDom),Mi=(e,t)=>{const o=e.dom.childNodes;return N.from(o[t]).map(q.fromDom)},Sr=e=>Mi(e,0),zs=e=>Mi(e,e.dom.childNodes.length-1),cf=e=>e.dom.childNodes.length,LS=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return q.fromDom(t)},Yv=e=>i3(e)&&ve(e.dom.host),wr=e=>q.fromDom(e.dom.getRootNode()),Xv=e=>Yv(e)?e:LS(Cl(e)),FS=e=>Yv(e)?e:q.fromDom(Cl(e).dom.body),lf=e=>{const t=wr(e);return Yv(t)?N.some(t):N.none()},Nt=e=>q.fromDom(e.dom.host),Jv=e=>{if(ve(e.target)){const t=q.fromDom(e.target);if(ds(t)&&tr(t)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return us(o)}}return N.from(e.target)},tr=e=>ve(e.dom.shadowRoot),xr=(e,t,o,r,c,u,f)=>({target:e,x:t,y:o,stop:r,prevent:c,kill:u,raw:f}),Er=e=>{const t=q.fromDom(Jv(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=T(r,o);return xr(t,e.clientX,e.clientY,o,r,c,e)},No=(e,t)=>o=>{e(o)&&t(Er(o))},uf=(e,t,o,r,c)=>{const u=No(o,r);return e.dom.addEventListener(t,u,c),{unbind:Me(Bi,e,t,u,c)}},j1=(e,t,o,r)=>uf(e,t,o,r,!1),Bi=(e,t,o,r)=>{e.dom.removeEventListener(t,o,r)},Sl=et,Qv=(e,t,o)=>j1(e,t,Sl,o),G1=()=>q.fromDom(document),q1=(e,t=!1)=>e.dom.focus({preventScroll:t}),od=e=>{const t=wr(e).dom;return e.dom===t.activeElement},wl=(e=G1())=>N.from(e.dom.activeElement).map(q.fromDom),l3=e=>wl(wr(e)).filter(t=>e.dom.contains(t.dom)),zr=(e,t)=>{Ic(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},xl=(e,t)=>{uu(e).fold(()=>{Ic(e).each(c=>{Pn(c,t)})},r=>{zr(r,t)})},du=(e,t)=>{Sr(e).fold(()=>{Pn(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},Pn=(e,t)=>{e.dom.appendChild(t.dom)},Lc=(e,t)=>{zr(e,t),Pn(t,e)},HS=(e,t)=>{le(t,o=>{zr(e,o)})},K1=(e,t)=>{le(t,(o,r)=>{const c=r===0?e:t[r-1];xl(c,o)})},li=(e,t)=>{le(t,o=>{Pn(e,o)})},Ft=(e,t,o)=>{if(Y(o)||an(o)||lr(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},rs=(e,t,o)=>{Ft(e.dom,t,o)},Tr=(e,t)=>{const o=e.dom;hn(t,(r,c)=>{Ft(o,c,r)})},Po=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},Ni=(e,t)=>N.from(Po(e,t)),Go=(e,t)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(t):!1},Vs=(e,t)=>{e.dom.removeAttribute(t)},yg=e=>{const t=e.dom.attributes;return t==null||t.length===0},Cn=e=>cn(e.dom.attributes,(t,o)=>(t[o.name]=o.value,t),{}),Pi=e=>{e.dom.textContent="",le(ms(e),t=>{xo(t)})},xo=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},ui=e=>{const t=ms(e);t.length>0&&K1(e,t),xo(e)},nr=(e,t)=>q.fromDom(e.dom.cloneNode(t)),sa=e=>nr(e,!1),Wh=e=>nr(e,!0),zS=(e,t)=>{const o=q.fromTag(t),r=Cn(e);return Tr(o,r),o},jh=(e,t)=>{const o=zS(e,t);xl(e,o);const r=ms(e);return li(o,r),xo(e),o},Gh=(e,t)=>{const r=(t||document).createElement("div");return r.innerHTML=e,ms(q.fromDom(r))},df=e=>Rt(e,q.fromDom),ra=e=>e.dom.innerHTML,sd=(e,t)=>{const r=Di(e).dom,c=q.fromDom(r.createDocumentFragment()),u=Gh(t,r);li(c,u),Pi(e),Pn(e,c)},u3=e=>{const t=q.fromTag("div"),o=q.fromDom(e.dom.cloneNode(!0));return Pn(t,o),ra(t)},mf=e=>e.style!==void 0&&ne(e.style.getPropertyValue),co=e=>{const t=qn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return lf(q.fromDom(t)).fold(()=>o.body.contains(t),Uo(co,Nt))},Y1=(e,t,o)=>{if(!Y(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);mf(e)&&e.style.setProperty(t,o)},X1=(e,t)=>{mf(e)&&e.style.removeProperty(t)},mc=(e,t,o)=>{const r=e.dom;Y1(r,t,o)},di=(e,t)=>{const o=e.dom;hn(t,(r,c)=>{Y1(o,c,r)})},vs=(e,t)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(t);return c===""&&!co(e)?sm(o,t):c},sm=(e,t)=>mf(e)?e.style.getPropertyValue(t):"",qs=(e,t)=>{const o=e.dom,r=sm(o,t);return N.from(r).filter(c=>c.length>0)},Cg=e=>{const t={},o=e.dom;if(mf(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);t[c]=o.style[c]}return t},J1=(e,t)=>{const o=e.dom;X1(o,t),ro(Ni(e,"style").map(os),"")&&Vs(e,"style")},e2=e=>e.dom.offsetWidth,El=((e,t)=>{const o=(b,v)=>{if(!lr(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const w=b.dom;mf(w)&&(w.style[e]=v+"px")},r=b=>{const v=t(b);if(v<=0||v===null){const w=vs(b,e);return parseFloat(w)||0}return v},c=r,u=(b,v)=>cn(v,(w,k)=>{const O=vs(b,k),R=O===void 0?0:parseInt(O,10);return isNaN(R)?w:w+R},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,v,w)=>{const k=u(b,w);return v>k?v-k:0}}})("height",e=>{const t=e.dom;return co(e)?t.getBoundingClientRect().height:t.offsetHeight}),d3=e=>El.get(e),VS=(e,t)=>({left:e,top:t,translate:(r,c)=>VS(e+r,t+c)}),Tl=VS,US=e=>{const t=e.getBoundingClientRect();return Tl(t.left,t.top)},Sg=(e,t)=>e!==void 0?e:t!==void 0?t:0,qh=e=>{const t=e.dom.ownerDocument,o=t.body,r=t.defaultView,c=t.documentElement;if(o===e.dom)return Tl(o.offsetLeft,o.offsetTop);const u=Sg(r==null?void 0:r.pageYOffset,c.scrollTop),f=Sg(r==null?void 0:r.pageXOffset,c.scrollLeft),b=Sg(c.clientTop,o.clientTop),v=Sg(c.clientLeft,o.clientLeft);return Kh(e).translate(f-v,u-b)},Kh=e=>{const t=e.dom,r=t.ownerDocument.body;return r===t?Tl(r.offsetLeft,r.offsetTop):co(e)?US(t):Tl(0,0)},t2=e=>{const t=e!==void 0?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Tl(o,r)},ZS=(e,t,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,t)},$i=(e,t)=>{au().browser.isSafari()&&ne(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},m3=(e,t)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+t+" value of a "+t+" node");return r(u).getOr("")},r=u=>e(u)?N.from(u.dom.nodeValue):N.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+t+" value of a "+t+" node");u.dom.nodeValue=f}}},rm=(e,t)=>{const r=document.createDocumentFragment();return le(e,c=>{r.appendChild(c.dom)}),q.fromDom(r)},oo=m3(qn,"text"),aa=e=>oo.get(e),mu=e=>oo.getOption(e),n2=(e,t)=>oo.set(e,t),am=(e,t)=>{const o=Po(e,t);return o===void 0||o===""?[]:o.split(" ")},o2=(e,t,o)=>{const c=am(e,t).concat([o]);return rs(e,t,c.join(" ")),!0},WS=(e,t,o)=>{const r=ge(am(e,t),c=>c!==o);return r.length>0?rs(e,t,r.join(" ")):Vs(e,t),!1};var fu=(e,t,o,r,c)=>e(o,r)?N.some(o):ne(c)&&c(o)?N.none():t(o,r,c);const gu=(e,t,o)=>{let r=e.dom;const c=ne(o)?o:De;for(;r.parentNode;){r=r.parentNode;const u=q.fromDom(r);if(t(u))return N.some(u);if(c(u))break}return N.none()},mo=(e,t,o)=>fu((c,u)=>u(c),gu,e,t,o),jS=(e,t)=>{const o=e.dom;return o.parentNode?Yo(q.fromDom(o.parentNode),r=>!xn(e,r)&&t(r)):N.none()},Yo=(e,t)=>{const o=c=>t(q.fromDom(c));return Qn(e.dom.childNodes,o).map(q.fromDom)},Yh=(e,t)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=q.fromDom(r.childNodes[c]);if(t(u))return N.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return N.none()};return o(e.dom)},Os=(e,t,o)=>gu(e,r=>$c(r,t),o),hu=(e,t)=>om(t,e),Vr=(e,t,o)=>fu((c,u)=>$c(c,u),Os,e,t,o),rd=e=>e.dom.classList!==void 0,Q1=e=>am(e,"class"),GS=(e,t)=>o2(e,"class",t),s2=(e,t)=>WS(e,"class",t),f3=(e,t)=>vt(Q1(e),t)?s2(e,t):GS(e,t),Fc=(e,t)=>{rd(e)?e.dom.classList.add(t):GS(e,t)},cm=e=>{(rd(e)?e.dom.classList:Q1(e)).length===0&&Vs(e,"class")},or=(e,t)=>{rd(e)?e.dom.classList.remove(t):s2(e,t),cm(e)},kr=(e,t)=>{const o=rd(e)?e.dom.classList.toggle(t):f3(e,t);return cm(e),o},e0=(e,t)=>rd(e)&&e.dom.classList.contains(t),Xh=(e,t)=>{le(t,o=>{Fc(e,o)})},qS=(e,t)=>{le(t,o=>{or(e,o)})},KS=e=>Vr(e,"[contenteditable]"),Ii=(e,t=!1)=>co(e)?e.dom.isContentEditable:KS(e).fold(Xe(t),o=>H5(o)==="true"),H5=e=>e.dom.contentEditable,ff=(e,t)=>{e.dom.contentEditable=t?"true":"false"},ad=(e,t,o)=>ge(ci(e,o),t),g3=(e,t)=>ge(ms(e),t),t0=(e,t)=>{let o=[];return le(ms(e),r=>{t(r)&&(o=o.concat([r])),o=o.concat(t0(r,t))}),o},h3=(e,t,o)=>ad(e,r=>$c(r,t),o),_r=(e,t)=>bl(t,e),wg=(e,t,o)=>gu(e,t,o).isSome(),p3=(e,t)=>jS(e,t).isSome(),xg=(e,t)=>Yh(e,t).isSome(),n0=(e,t)=>wg(e,Me(xn,t)),YS=(e,t,o)=>Os(e,t,o).isSome(),r2=(e,t,o)=>Vr(e,t,o).isSome(),XS=e=>ne(e)?e:De,JS=(e,t,o)=>{let r=e.dom;const c=XS(o);for(;r.parentNode;){r=r.parentNode;const u=q.fromDom(r),f=t(u);if(f.isSome())return f;if(c(u))break}return N.none()},o0=(e,t,o)=>{const r=t(e),c=XS(o);return r.orThunk(()=>c(e)?N.none():JS(e,t,c))},QS=e=>mu(e).filter(t=>t.trim().length!==0||t.indexOf(ss)>-1).isSome(),Eg=e=>yl(e)&&Po(e,"contenteditable")==="false",b3=["img","br"],a2=e=>QS(e)||vt(b3,mn(e))||Eg(e),v3=e=>Yh(e,a2),c2={create:(e,t,o,r)=>({start:e,soffset:t,finish:o,foffset:r})},i2=ei.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),C3=(e,t,o,r)=>e.fold(t,o,r),S3=e=>e.fold(Zo,Zo,Zo),w3=i2.before,s0=i2.on,x3=i2.after,Li={before:w3,on:s0,after:x3,cata:C3,getStart:S3},Tg=ei.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),r0=e=>Tg.exact(e.start,e.soffset,e.finish,e.foffset),Jh=e=>e.match({domRange:t=>q.fromDom(t.startContainer),relative:(t,o)=>Li.getStart(t),exact:(t,o,r,c)=>t}),E3=Tg.domRange,T3=Tg.relative,ew=Tg.exact,cd=e=>{const t=Jh(e);return nd(t)},Qh=c2.create,im={domRange:E3,relative:T3,exact:ew,exactFromRange:r0,getWin:cd,range:Qh},k3=(e,t,o)=>{var r;return N.from((r=e.caretPositionFromPoint)==null?void 0:r.call(e,t,o)).bind(c=>{if(c.offsetNode===null)return N.none();const u=e.createRange();return u.setStart(c.offsetNode,c.offset),u.collapse(),N.some(u)})},Us=(e,t,o)=>{var r;return N.from((r=e.caretRangeFromPoint)==null?void 0:r.call(e,t,o))},Ds=(e,t,o)=>e.caretPositionFromPoint?k3(e,t,o):e.caretRangeFromPoint?Us(e,t,o):N.none(),lm=(e,t,o)=>{const r=e.document;return Ds(r,t,o).map(c=>c2.create(q.fromDom(c.startContainer),c.startOffset,q.fromDom(c.endContainer),c.endOffset))},id=(e,t)=>{const o=mn(e);return o==="input"?Li.after(e):vt(["br","img"],o)?t===0?Li.before(e):Li.after(e):Li.on(e,t)},l2=(e,t)=>{const o=e.fold(Li.before,id,Li.after),r=t.fold(Li.before,id,Li.after);return im.relative(o,r)},Ur=(e,t,o,r)=>{const c=id(e,t),u=id(o,r);return im.relative(c,u)},u2=e=>e.match({domRange:t=>{const o=q.fromDom(t.startContainer),r=q.fromDom(t.endContainer);return Ur(o,t.startOffset,r,t.endOffset)},relative:l2,exact:Ur}),um=e=>{const t=im.getWin(e).dom,o=(c,u,f,b)=>vg(t,c,u,f,b),r=u2(e);return Uh(t,r).match({ltr:o,rtl:o})},a0=(e,t,o)=>lm(e,t,o),Hc=e=>{const t=e===void 0?window:e;return au().browser.isFirefox()?N.none():N.from(t.visualViewport)},d2=(e,t,o,r)=>({x:e,y:t,width:o,height:r,right:e+o,bottom:t+r}),fc=e=>{const t=e===void 0?window:e,o=t.document,r=t2(q.fromDom(o));return Hc(t).fold(()=>{const c=t.document.documentElement,u=c.clientWidth,f=c.clientHeight;return d2(r.left,r.top,u,f)},c=>d2(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))};class fs{constructor(t,o){Ie(this,"rootNode");Ie(this,"node");this.node=t,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,o,r,c){if(t){if(!c&&t[o])return t[o];if(t!==this.rootNode){let u=t[r];if(u)return u;for(let f=t.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(t,o){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=t.parentNode;if(c&&c!==this.rootNode)return c}}}const c0=/^[ \t\r\n]*$/,kg=e=>c0.test(e),tw=e=>{for(const t of e)if(!oi(t))return!1;return!0},m2=e=>" \f	\v".indexOf(e)!==-1,nw=e=>e===`
`||e==="\r",ow=(e,t)=>t<e.length&&t>=0?nw(e[t]):!1,i0=(e,t=4,o=!0,r=!0)=>{const c=ni(" ",t),u=e.replace(/\t/g,c);return cn(u,(b,v)=>m2(v)||v===ss?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||ow(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+ss}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:nw(v),str:b.str+v},{pcIsSpace:!1,str:""}).str},_g=e=>t=>!!t&&t.nodeType===e,l0=e=>!!e&&!Object.getPrototypeOf(e),Ye=_g(1),Ha=e=>Ye(e)&&yl(q.fromDom(e)),_3=e=>Ye(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",ba=e=>{const t=e.toLowerCase();return o=>ve(o)&&o.nodeName.toLowerCase()===t},mi=e=>{const t=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return vt(t,r)}return!1}},u0=(e,t)=>{const o=t.toLowerCase().split(" ");return r=>{if(Ye(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},A3=e=>t=>Ye(t)&&t.hasAttribute(e),dm=e=>Ye(e)&&e.hasAttribute("data-mce-bogus"),O3=e=>Ye(e)&&e.getAttribute("data-mce-bogus")==="all",za=e=>Ye(e)&&e.tagName==="TABLE",sw=e=>t=>!!(Ha(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),fi=mi(["textarea","input"]),ze=_g(3),f2=_g(4),Ks=_g(7),rn=_g(8),ld=_g(9),Ag=_g(11),Xo=ba("br"),gi=ba("img"),ep=ba("a"),gc=sw("true"),$o=sw("false"),ud=e=>Ha(e)&&e.isContentEditable&&ve(e.parentElement)&&!e.parentElement.isContentEditable,Og=mi(["td","th"]),g2=mi(["td","th","caption"]),h2=ba("template"),hi=mi(["video","audio","object","embed"]),tp=ba("li"),np=ba("details"),D3=ba("summary"),rw="uc-video",op=e=>e.nodeName.toLowerCase()===rw,p2={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},d0=(e,t,o)=>{const r=q.fromDom(t),c=q.fromDom(e),u=o.getWhitespaceElements();return wg(c,b=>Kt(u,mn(b)),Me(xn,r))},R3=e=>Ye(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),M3=(e,t)=>Ye(e)&&Kt(t.getNonEmptyElements(),e.nodeName),b2=A3("data-mce-bookmark"),B3=e=>Ri(q.fromDom(e)).exists(t=>!Ii(t)),sp=(e,t,o)=>kg(e.data)&&!d0(e,t,o),z5=(e,t,o,r)=>ze(e)&&!sp(e,t,o)&&(!r.includeZwsp||!tw(e.data)),hc=(e,t,o,r)=>ne(r.isContent)&&r.isContent(t)||M3(t,e)||b2(t)||R3(t)||z5(t,o,e,r)||$o(t)||gc(t)&&B3(t),Tt=(e,t,o)=>{const r={...p2,...o};if(r.checkRootAsContent&&hc(e,t,t,r))return!1;let c=t.firstChild,u=0;if(!c)return!0;const f=new fs(c,t);do{if(r.skipBogus&&Ye(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if(rn(c)){c=f.next(!0);continue}if(Xo(c)){u++,c=f.next();continue}if(hc(e,c,t,r))return!1;c=f.next()}while(c);return u<=1},gs=(e,t,o)=>Tt(e,t.dom,{checkRootAsContent:!0,...o}),Dg=(e,t,o)=>hc(e,t,t,{includeZwsp:p2.includeZwsp,...o}),aw=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},gf=e=>aw(e)!=="html",Rg=e=>gf(e.nodeName),v2=e=>aw(e.nodeName),hf=["svg","math"],cw=()=>{const e=Mc(),t=()=>e.get().map(v2).getOr("html");return{track:c=>(Rg(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},pu="data-mce-block",iw=e=>ge(bt(e),t=>!/[A-Z]/.test(t)),y2=e=>Rt(iw(e),t=>{const o=CSS.escape(t);return`${o}:`+Rt(hf,r=>`not(${r} ${o})`).join(":")}).join(","),qo=(e,t)=>ve(t.querySelector(e))?(t.setAttribute(pu,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(pu),!1),pi=(e,t)=>{const o=y2(e.getTransparentElements()),r=y2(e.getBlockElements());return ge(t.querySelectorAll(o),c=>qo(r,c))},va=(e,t,o)=>{var c;const r=o?"lastChild":"firstChild";for(let u=t[r];u;u=u[r])if(Tt(e,u,{checkRootAsContent:!0})){(c=u.parentNode)==null||c.removeChild(u);return}},Mg=(e,t,o)=>{const r=document.createRange(),c=t.parentNode;if(c){r.setStartBefore(t),r.setEndBefore(o);const u=r.extractContents();va(e,u,!0),r.setStartAfter(o),r.setEndAfter(t);const f=r.extractContents();va(e,f,!1),Tt(e,u,{checkRootAsContent:!0})||c.insertBefore(u,t),Tt(e,o,{checkRootAsContent:!0})||c.insertBefore(o,t),Tt(e,f,{checkRootAsContent:!0})||c.insertBefore(f,t),c.removeChild(t)}},ya=(e,t,o)=>{const r=e.getBlockElements(),c=q.fromDom(t),u=b=>mn(b)in r,f=b=>xn(b,c);le(df(o),b=>{gu(b,u,f).each(v=>{const w=g3(b,k=>u(k)&&!e.isValidChild(mn(v),mn(k)));if(w.length>0){const k=Ri(v);le(w,O=>{gu(O,u,f).each(R=>{Mg(e,R.dom,O.dom)})}),k.each(O=>pi(e,O.dom))}})})},pf=(e,t,o)=>{le([...o,...as(e,t)?[t]:[]],r=>le(_r(q.fromDom(r),r.nodeName.toLowerCase()),c=>{Fi(e,c.dom)&&ui(c)}))},sr=(e,t)=>{const o=pi(e,t);ya(e,t,o),pf(e,t,o)},Ca=(e,t)=>{if(rp(e,t)){const o=y2(e.getBlockElements());qo(o,t)}},m0=(e,t,o)=>{const r=u=>xn(u,q.fromDom(t)),c=ci(q.fromDom(o),r);Ir(c,c.length-2).filter(ds).fold(()=>sr(e,t),u=>sr(e,u.dom))},Be=e=>e.hasAttribute(pu),Va=(e,t)=>Kt(e.getTransparentElements(),t),rp=(e,t)=>Ye(t)&&Va(e,t.nodeName),as=(e,t)=>rp(e,t)&&Be(t),Fi=(e,t)=>rp(e,t)&&!Be(t),pc=(e,t)=>t.type===1&&Va(e,t.name)&&Y(t.attr(pu)),N3=au().browser,bu=e=>Qn(e,ds),lw=e=>N3.isFirefox()&&mn(e)==="table"?bu(ms(e)).filter(t=>mn(t)==="caption").bind(t=>bu(ur(t)).map(o=>{const r=o.dom.offsetTop,c=t.dom.offsetTop,u=t.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,Ua=(e,t)=>e.children&&vt(e.children,t),Yn=(e,t,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,t){if(o===e&&t.getBoundingClientRect&&vs(q.fromDom(e),"position")==="static"){const b=t.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=t;for(;f&&f!==o&&f.nodeType&&!Ua(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=t.parentNode;f&&f!==o&&f.nodeType&&!Ua(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=lw(q.fromDom(t))}return{x:r,y:c}},kl=(e,t)=>{const o=t.crossOrigin;return t.contentCssCors?"anonymous":ne(o)?o(e):void 0},Bg=(e,t={})=>{let o=0;const r={},c=q.fromDom(e),u=Cl(c),f=se=>{t.referrerPolicy=se},b=se=>{t.contentCssCors=se},v=se=>{t.crossOrigin=se},w=se=>{Pn(Xv(c),se)},k=se=>{const ae=Xv(c);hu(ae,"#"+se).each(xo)},O=se=>vo(r,se).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),R=se=>new Promise((ae,Se)=>{let Oe;const Je=He._addCacheSuffix(se),St=O(Je);r[Je]=St,St.count++;const xe=(It,_n)=>{le(It,ls),St.status=_n,St.passed=[],St.failed=[],Oe&&(Oe.onload=null,Oe.onerror=null,Oe=null)},me=()=>xe(St.passed,2),Ee=()=>xe(St.failed,3);if(ae&&St.passed.push(ae),Se&&St.failed.push(Se),St.status===1)return;if(St.status===2){me();return}if(St.status===3){Ee();return}St.status=1;const Qe=q.fromTag("link",u.dom);Tr(Qe,{rel:"stylesheet",type:"text/css",id:St.id});const $t=kl(se,t);$t!==void 0&&rs(Qe,"crossOrigin",$t),t.referrerPolicy&&rs(Qe,"referrerpolicy",t.referrerPolicy),Oe=Qe.dom,Oe.onload=me,Oe.onerror=Ee,w(Qe),rs(Qe,"href",Je)}),I=(se,ae)=>{const Se=O(se);r[se]=Se,Se.count++;const Oe=q.fromTag("style",u.dom);Tr(Oe,{rel:"stylesheet",type:"text/css",id:Se.id,"data-mce-key":se}),Oe.dom.innerHTML=ae,w(Oe)},U=se=>Promise.allSettled(Rt(se,Se=>R(Se).then(Xe(Se)))).then(Se=>{const Oe=_e(Se,Je=>Je.status==="fulfilled");return Oe.fail.length>0?Promise.reject(Rt(Oe.fail,Je=>Je.reason)):Rt(Oe.pass,Je=>Je.value)}),H=se=>{const ae=He._addCacheSuffix(se);vo(r,ae).each(Se=>{--Se.count===0&&(delete r[ae],k(Se.id))})};return{load:R,loadRawCss:I,loadAll:U,unload:H,unloadRawCss:se=>{vo(r,se).each(ae=>{--ae.count===0&&(delete r[se],k(ae.id))})},unloadAll:se=>{le(se,ae=>{H(ae)})},_setReferrerPolicy:f,_setContentCssCors:b,_setCrossOrigin:v}},C2=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=wr(o).dom;return N.from(e.get(u)).getOrThunk(()=>{const f=Bg(u,r);return e.set(u,f),f})}}})(),S2=e=>e.nodeName.toLowerCase()==="span",Hi=(e,t)=>ve(e)&&(Dg(t,e)||t.isInline(e.nodeName.toLowerCase())),f0=(e,t,o)=>{const r=new fs(e,t).prev(!1),c=new fs(e,t).next(!1),u=es(r)||Hi(r,o),f=es(c)||Hi(c,o);return u&&f},Za=e=>S2(e)&&e.getAttribute("data-mce-type")==="bookmark",P3=(e,t,o)=>ze(e)&&e.data.length>0&&f0(e,t,o),de=e=>Ye(e)?e.childNodes.length>0:!1,zc=e=>Ag(e)||ld(e),ap=(e,t,o,r)=>{var f;const c=r||t;if(Ye(t)&&Za(t))return t;const u=t.childNodes;for(let b=u.length-1;b>=0;b--)ap(e,u[b],o,c);if(Ye(t)){const b=t.childNodes;b.length===1&&Za(b[0])&&((f=t.parentNode)==null||f.insertBefore(b[0],t))}return!zc(t)&&!Dg(o,t)&&!de(t)&&!P3(t,c,o)&&e.remove(t),t},Jo=He.makeMap,Sa=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ys=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yo=/[<>&\"\']/g,uw=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,mm={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},fm={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ng={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},cp=e=>{const t=q.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},w2=(e,t)=>{const o={};if(e){const r=e.split(",");t=t||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],t));if(!fm[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},x2=w2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),gm=(e,t)=>e.replace(t?Sa:Ys,o=>fm[o]||o),Pg=e=>(""+e).replace(yo,t=>fm[t]||t),dw=(e,t)=>e.replace(t?Sa:Ys,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":fm[o]||"&#"+o.charCodeAt(0)+";"),E2=(e,t,o)=>{const r=o||x2;return e.replace(t?Sa:Ys,c=>fm[c]||r[c]||c)},bc={encodeRaw:gm,encodeAllRaw:Pg,encodeNumeric:dw,encodeNamed:E2,getEncodeFunc:(e,t)=>{const o=w2(t)||x2,r=(f,b)=>f.replace(b?Sa:Ys,v=>fm[v]!==void 0?fm[v]:o[v]!==void 0?o[v]:v.length>1?"&#"+((v.charCodeAt(0)-55296)*1024+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"),c=(f,b)=>E2(f,b,o),u=Jo(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?t?c:E2:u.numeric?dw:gm},decode:e=>e.replace(uw,(t,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):mm[o]||String.fromCharCode(o)):Ng[t]||x2[t]||cp(t))},ys=(e,t)=>(e=He.trim(e),e?e.split(t||" "):[]),hm=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),ip=e=>en(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Wa=e=>{const t=o=>dn(o)?Rt(o,t):ip(o)?new RegExp(o.source,o.flags):en(o)?cc(o,t):o;return t(e)},$g=e=>{const t=/^(~)?(.+)$/;return Vn(ys(e,","),o=>{const r=t.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},Zs=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),g0=e=>{let t,o;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const r=[t,o].join(" ");return{blockContent:t,phrasingContent:o,flowContent:r}},Vc=e=>{const{blockContent:t,phrasingContent:o,flowContent:r}=g0(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(t),phrasingContent:c(o),flowContent:c(r)})},zi={html4:ga(()=>Vc("html4")),html5:ga(()=>Vc("html5")),"html5-strict":ga(()=>Vc("html5-strict"))},T2=(e,t)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=zi[e]();return t==="blocks"?N.some(o):t==="phrasing"?N.some(r):t==="flow"?N.some(c):N.none()},rr=e=>{const t=Zs(e),{phrasingContent:o,flowContent:r}=g0(e),c={},u=(v,w,k)=>{c[v]={attributes:Ku(w,Xe({})),attributesOrder:w,children:Ku(k,Xe({}))}},f=(v,w="",k="")=>{const O=ys(k),R=ys(v);let I=R.length;const U=[...t,...ys(w)];for(;I--;)u(R[I],U.slice(),O)},b=(v,w)=>{const k=ys(v),O=ys(w);let R=k.length;for(;R--;){const I=c[k[R]];for(let U=0,H=O.length;U<H;U++)I.attributes[O[U]]={},I.attributesOrder.push(O[U])}};return e!=="html5-strict"&&(le(ys("acronym applet basefont big font strike tt"),k=>{f(k,"",o)}),le(ys("center dir isindex noframes"),k=>{f(k,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset property"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop controlslist disablepictureinpicture disableremoteplayback playsinline muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&le([c.video,c.audio],v=>{delete v.children.audio,delete v.children.video}),le(ys("a form meter progress dfn"),v=>{c[v]&&delete c[v].children[v]}),delete c.caption.children.table,delete c.script,c},Ig=e=>e==="-"?"remove":"add",_l=e=>{const t=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return N.from(t.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},bf=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Vn(ys(e,","),o=>{const r=t.exec(o);if(r){const c=r[1],u=c?Ig(c):"replace",f=r[2],b=Vn(ys(r[3],"|"),v=>_l(v).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},vf=(e,t)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=t;return le(ys(e,"|"),f=>{const b=o.exec(f);if(b){const v={},w=b[1],k=b[2].replace(/[\\:]:/g,":"),O=b[3],R=b[4];if(w==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(k),v.required=!0),w==="-"){delete c[k],u.splice(He.inArray(u,k),1);return}if(O&&(O==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:k,value:R}),v.defaultValue=R):O==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:k,value:R}),v.forcedValue=R):O==="<"&&(v.validValues=He.makeMap(R,"?"))),r.test(k)){const I=v;t.attributePatterns=t.attributePatterns||[],I.pattern=hm(k),t.attributePatterns.push(I)}else c[k]||u.push(k),c[k]=v}})},I3=(e,t)=>{hn(e.attributes,(o,r)=>{t.attributes[r]=o}),t.attributesOrder.push(...e.attributesOrder)},h0=(e,t)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Vn(ys(t,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],v=c[4],w=c[5],k={attributes:{},attributesOrder:[]};if(e.each(O=>I3(O,k)),u==="#"?k.paddEmpty=!0:u==="-"&&(k.removeEmpty=!0),v==="!"&&(k.removeEmptyAttrs=!0),w&&vf(w,k),b&&(k.outputName=f),f==="@")if(e.isNone())e=N.some(k);else return[];return[b?{name:f,element:k,aliasName:b}:{name:f,element:k}]}else return[]})},dd={},lp=He.makeMap,Co=He.each,mw=He.extend,md=He.explode,Lg=(e,t={})=>{const o=lp(e," ",lp(e.toUpperCase()," "));return mw(o,t)},p0=e=>Lg("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),fd=(e,t)=>{if(e){const o={};return Y(e)&&(e={"*":e}),Co(e,(r,c)=>{o[c]=o[c.toUpperCase()]=t==="map"?lp(r,/[, ]/):md(r,/[, ]/)}),o}else return},Ar=(e={})=>{const t={},o={};let r=[];const c={},u={},f={},b=(Lt,On,Ps)=>{const Lo=e[Lt];if(Lo)return lp(Lo,/[, ]/,lp(Lo.toUpperCase(),/[, ]/));{let ho=dd[Lt];return ho||(ho=Lg(On,Ps),dd[Lt]=ho),ho}},v=e.schema??"html5",w=rr(v);e.verify_html===!1&&(e.valid_elements="*[*]");const k=fd(e.valid_styles),O=fd(e.invalid_styles,"map"),R=fd(e.valid_classes,"map"),I=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),U=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),H=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),j=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),oe="td th iframe video audio object script code",se=b("non_empty_elements",oe+" pre svg textarea summary",H),ae=b("move_caret_before_on_enter_elements",oe+" table",H),Se="h1 h2 h3 h4 h5 h6",Oe=b("text_block_elements",Se+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Je=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",Oe),St=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),xe=b("transparent_elements","a ins del canvas map"),me=b("wrap_block_elements","pre "+Se);Co("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Lt=>{u[Lt]=new RegExp("</"+Lt+"[^>]*>","gi")});const Ee=Lt=>{const On=N.from(t["@"]),Ps=/[*?+]/;le(h0(On,Lt??""),({name:Lo,element:ho,aliasName:Ts})=>{if(Ts&&(t[Ts]=ho),Ps.test(Lo)){const Ti=ho;Ti.pattern=hm(Lo),r.push(Ti)}else t[Lo]=ho})},Qe=Lt=>{r=[],le(bt(t),On=>{delete t[On]}),Ee(Lt)},$t=(Lt,On)=>{delete dd.text_block_elements,delete dd.block_elements;const Ps=On.extends?!Qa(On.extends):!1,Lo=On.extends;if(o[Lt]=Lo?o[Lo]:{},c[Lt]=Lo??Lt,se[Lt.toUpperCase()]={},se[Lt]={},Ps||(Je[Lt.toUpperCase()]={},Je[Lt]={}),Lo&&!t[Lt]&&t[Lo]){const ho=Wa(t[Lo]);delete ho.removeEmptyAttrs,delete ho.removeEmpty,t[Lt]=ho}else t[Lt]={attributesOrder:[],attributes:{}};if(dn(On.attributes)){const ho=Ti=>{Ts.attributesOrder.push(Ti),Ts.attributes[Ti]={}},Ts=t[Lt]??{};delete Ts.attributesDefault,delete Ts.attributesForced,delete Ts.attributePatterns,delete Ts.attributesRequired,Ts.attributesOrder=[],Ts.attributes={},le(On.attributes,Ti=>{const _c=Zs(v);_l(Ti).each(({preset:eu,name:lg})=>{eu?lg==="global"&&le(_c,ho):ho(lg)})}),t[Lt]=Ts}if(an(On.padEmpty)){const ho=t[Lt]??{};ho.paddEmpty=On.padEmpty,t[Lt]=ho}if(dn(On.children)){const ho={},Ts=_c=>{ho[_c]={}},Ti=_c=>{T2(v,_c).each(eu=>{le(eu,Ts)})};le(On.children,_c=>{_l(_c).each(({preset:eu,name:lg})=>{eu?Ti(lg):Ts(lg)})}),o[Lt]=ho}Lo&&hn(o,(ho,Ts)=>{ho[Lo]&&(o[Ts]=ho=mw({},o[Ts]),ho[Lt]=ho[Lo])})},It=Lt=>{le($g(Lt??""),({name:On,cloneName:Ps})=>{$t(On,{extends:Ps})})},_n=(Lt,On)=>{f[Lt]=On},so=Lt=>{en(Lt)?hn(Lt,(On,Ps)=>{const Lo=On.componentUrl;Y(Lo)&&_n(Ps,Lo),$t(Ps,On)}):Y(Lt)&&It(Lt)},Ao=Lt=>{le(bf(Lt??""),({operation:On,name:Ps,validChildren:Lo})=>{const ho=On==="replace"?{"#comment":{}}:o[Ps],Ts=_c=>{On==="remove"?delete ho[_c]:ho[_c]={}},Ti=_c=>{T2(v,_c).each(eu=>{le(eu,Ts)})};le(Lo,({preset:_c,name:eu})=>{_c?Ti(eu):Ts(eu)}),o[Ps]=ho})},Vo=Lt=>{const On=t[Lt];if(On)return On;let Ps=r.length;for(;Ps--;){const Lo=r[Ps];if(Lo.pattern.test(Lt))return Lo}},Pr=()=>{e.valid_elements?(Qe(e.valid_elements),Co(w,(Lt,On)=>{o[On]=Lt.children})):(Co(w,(Lt,On)=>{t[On]={attributes:Lt.attributes,attributesOrder:Lt.attributesOrder},o[On]=Lt.children}),Co(ys("strong/b em/i"),Lt=>{const On=ys(Lt,"/");t[On[1]].outputName=On[0]}),Co(St,(Lt,On)=>{t[On]&&(e.padd_empty_block_inline_children&&(t[On].paddInEmptyBlock=!0),t[On].removeEmpty=!0)}),Co(ys("ol ul blockquote a table tbody"),Lt=>{t[Lt]&&(t[Lt].removeEmpty=!0)}),Co(ys("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Lt=>{t[Lt]&&(t[Lt].paddEmpty=!0)}),Co(ys("span"),Lt=>{t[Lt].removeEmptyAttrs=!0})),delete t.svg,so(e.custom_elements),Ao(e.valid_children),Ee(e.extended_valid_elements),Ao("+ol[ul|ol],+ul[ul|ol]"),Co({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Lt,On)=>{t[On]&&(t[On].parentsRequired=ys(Lt))}),e.invalid_elements&&Co(md(e.invalid_elements),Lt=>{t[Lt]&&delete t[Lt]}),Vo("span")||Ee("span[!data-mce-type|*]")},Ei=Xe(k),nt=Xe(O),_t=Xe(R),jn=Xe(j),Fn=Xe(Je),Jr=Xe(Oe),ke=Xe(St),Ge=Xe(Object.seal(H)),ut=Xe(U),wn=Xe(se),Qt=Xe(ae),uo=Xe(I),Jl=Xe(xe),kc=Xe(me),Ql=Xe(Object.seal(u)),sl=(Lt,On)=>{const Ps=o[Lt.toLowerCase()];return!!(Ps&&Ps[On.toLowerCase()])},Ih=(Lt,On)=>{const Ps=Vo(Lt);if(Ps)if(On){if(Ps.attributes[On])return!0;const Lo=Ps.attributePatterns;if(Lo){let ho=Lo.length;for(;ho--;)if(Lo[ho].pattern.test(On))return!0}}else return!0;return!1},Qa=Lt=>Kt(Fn(),Lt),Xc=Lt=>!Zt(Lt,"#")&&Ih(Lt)&&!Qa(Lt),ig=Lt=>Kt(kc(),Lt)||Xc(Lt),Nv=Xe(c),ZT=Xe(f);return Pr(),{type:v,children:o,elements:t,getValidStyles:Ei,getValidClasses:_t,getBlockElements:Fn,getInvalidStyles:nt,getVoidElements:Ge,getTextBlockElements:Jr,getTextInlineElements:ke,getBoolAttrs:jn,getElementRule:Vo,getSelfClosingElements:ut,getNonEmptyElements:wn,getMoveCaretBeforeOnEnterElements:Qt,getWhitespaceElements:uo,getTransparentElements:Jl,getSpecialElements:Ql,getComponentUrls:ZT,isValidChild:sl,isValid:Ih,isBlock:Qa,isInline:Xc,isWrapper:ig,getCustomElements:Nv,addValidElements:Ee,setValidElements:Qe,addCustomElements:so,addValidChildren:Ao}},yf=e=>({value:Fg(e)}),Fg=e=>fg(e,"#").toUpperCase(),b0=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},v0=e=>{const t=b0(e.red)+b0(e.green)+b0(e.blue);return yf(t)},y0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,up=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,fw=(e,t,o,r)=>({red:e,green:t,blue:o,alpha:r}),k2=(e,t,o,r)=>{const c=parseInt(e,10),u=parseInt(t,10),f=parseInt(o,10),b=parseFloat(r);return fw(c,u,f,b)},_2=e=>y0.test(e)?"rgb":up.test(e)?"rgba":"other",Hg=e=>{const t=y0.exec(e);if(t!==null)return N.some(k2(t[1],t[2],t[3],"1"));const o=up.exec(e);return o!==null?N.some(k2(o[1],o[2],o[3],o[4])):N.none()},Al=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,bi=e=>Hg(e).map(v0).map(t=>"#"+t.value).getOr(e),gd=(e={},t)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const v=Ju;t&&(f=t.getValidStyles(),b=t.getInvalidStyles());const w=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let O=0;O<w.length;O++)u[w[O]]=v+O,u[v+O]=w[O];const k={parse:O=>{const R={};let I=!1;const U=e.url_converter,H=e.url_converter_scope||k,j=(xe,me,Ee)=>{const Qe=R[xe+"-top"+me];if(!Qe)return;const $t=R[xe+"-right"+me];if(!$t)return;const It=R[xe+"-bottom"+me];if(!It)return;const _n=R[xe+"-left"+me];if(!_n)return;const so=[Qe,$t,It,_n];let Ao=so.length-1;for(;Ao--&&so[Ao]===so[Ao+1];);Ao>-1&&Ee||(R[xe+me]=Ao===-1?so[0]:so.join(" "),delete R[xe+"-top"+me],delete R[xe+"-right"+me],delete R[xe+"-bottom"+me],delete R[xe+"-left"+me])},oe=xe=>{const me=R[xe];if(!me)return;const Ee=me.indexOf(",")>-1?[me]:me.split(" ");let Qe=Ee.length;for(;Qe--;)if(Ee[Qe]!==Ee[0])return!1;return R[xe]=Ee[0],!0},se=(xe,me,Ee,Qe)=>{oe(me)&&oe(Ee)&&oe(Qe)&&(R[xe]=R[me]+" "+R[Ee]+" "+R[Qe],delete R[me],delete R[Ee],delete R[Qe])},ae=xe=>(I=!0,u[xe]),Se=(xe,me)=>(I&&(xe=xe.replace(/\uFEFF[0-9]/g,Ee=>u[Ee])),me||(xe=xe.replace(/\\([\'\";:])/g,"$1")),xe),Oe=xe=>String.fromCharCode(parseInt(xe.slice(1),16)),Je=xe=>xe.replace(/\\[0-9a-f]+/gi,Oe),St=(xe,me,Ee,Qe,$t,It)=>{if($t=$t||It,$t)return $t=Se($t),"'"+$t.replace(/\'/g,"\\'")+"'";if(me=Se(me||Ee||Qe||""),!e.allow_script_urls){const _n=me.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(_n)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(_n))return""}return U&&(me=U.call(H,me,"style")),"url('"+me.replace(/\'/g,"\\'")+"')"};if(O){O=O.replace(/[\u0000-\u001F]/g,""),O=O.replace(/\\[\"\';:\uFEFF]/g,ae).replace(/\"[^\"]+\"|\'[^\']+\'/g,me=>me.replace(/[;:]/g,ae));let xe;for(;xe=r.exec(O);){r.lastIndex=xe.index+xe[0].length;let me=xe[1].replace(c,"").toLowerCase(),Ee=xe[2].replace(c,"");if(me&&Ee){if(me=Je(me),Ee=Je(Ee),me.indexOf(v)!==-1||me.indexOf('"')!==-1||!e.allow_script_urls&&(me==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ee)))continue;me==="font-weight"&&Ee==="700"?Ee="bold":(me==="color"||me==="background-color")&&(Ee=Ee.toLowerCase()),_2(Ee)==="rgb"&&Hg(Ee).each(Qe=>{Ee=bi(Al(Qe)).toLowerCase()}),Ee=Ee.replace(o,St),R[me]=I?Se(Ee,!0):Ee}}j("border","",!0),j("border","-width"),j("border","-color"),j("border","-style"),j("padding",""),j("margin",""),se("border","border-width","border-style","border-color"),R.border==="medium none"&&delete R.border,R["border-image"]==="none"&&delete R["border-image"]}return R},serialize:(O,R)=>{let I="";const U=(j,oe)=>{const se=oe[j];if(se)for(let ae=0,Se=se.length;ae<Se;ae++){const Oe=se[ae],Je=O[Oe];Je&&(I+=(I.length>0?" ":"")+Oe+": "+Je+";")}},H=(j,oe)=>{if(!b||!oe)return!0;let se=b["*"];return se&&se[j]?!1:(se=b[oe],!(se&&se[j]))};return R&&f?(U("*",f),U(R,f)):hn(O,(j,oe)=>{j&&H(oe,R)&&(I+=(I.length>0?" ":"")+oe+": "+j+";")}),I}};return k},gw={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},C0=e=>e instanceof Event||ne(e.initEvent),A2=e=>e.isDefaultPrevented===et||e.isDefaultPrevented===De,hw=e=>gn(e.preventDefault)||C0(e),O2=(e,t)=>{const o=t??{};for(const r in e)Kt(gw,r)||(o[r]=e[r]);return ve(e.composedPath)&&(o.composedPath=()=>e.composedPath()),ve(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),ve(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},S0=(e,t,o,r)=>{const c=O2(t,r);return c.type=e,gn(c.target)&&(c.target=c.srcElement??o),hw(t)&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=et,ne(t.preventDefault)&&t.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=et,ne(t.stopPropagation)&&t.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=et,c.stopPropagation()},A2(c)||(c.isDefaultPrevented=c.defaultPrevented===!0?et:De,c.isPropagationStopped=c.cancelBubble===!0?et:De,c.isImmediatePropagationStopped=De)),c},w0="mce-data-",x0=/^(?:mouse|contextmenu)|click/,Ol=(e,t,o,r)=>{e.addEventListener(t,o,r||!1)},dp=(e,t,o,r)=>{e.removeEventListener(t,o,r||!1)},zg=e=>ve(e)&&x0.test(e.type),Cf=(e,t)=>{const o=S0(e.type,e,document,t);if(zg(e)&&es(e.pageX)&&!es(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},pw=(e,t,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){t(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{dp(e,"DOMContentLoaded",f),dp(e,"load",f),o.domLoaded||(o.domLoaded=!0,t(c)),e=null};u()?f():Ol(e,"DOMContentLoaded",f),o.domLoaded||Ol(e,"load",f)},UT=class UT{constructor(){Ie(this,"domLoaded",!1);Ie(this,"events",{});Ie(this,"expando");Ie(this,"hasFocusIn");Ie(this,"count",1);this.expando=w0+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,o,r,c){const u=this;let f;const b=window,v=R=>{u.executeHandlers(Cf(R||b.event),w)};if(!t||ze(t)||rn(t))return r;let w;t[u.expando]?w=t[u.expando]:(w=u.count++,t[u.expando]=w,u.events[w]={}),c=c||t;const k=o.split(" ");let O=k.length;for(;O--;){let R=k[O],I=v,U=!1,H=!1;if(R==="DOMContentLoaded"&&(R="ready"),u.domLoaded&&R==="ready"&&t.readyState==="complete"){r.call(c,Cf({type:R}));continue}!u.hasFocusIn&&(R==="focusin"||R==="focusout")&&(U=!0,H=R==="focusin"?"focus":"blur",I=j=>{const oe=Cf(j||b.event);oe.type=oe.type==="focus"?"focusin":"focusout",u.executeHandlers(oe,w)}),f=u.events[w][R],f?R==="ready"&&u.domLoaded?r(Cf({type:R})):f.push({func:r,scope:c}):(u.events[w][R]=f=[{func:r,scope:c}],f.fakeName=H,f.capture=U,f.nativeHandler=I,R==="ready"?pw(t,I,u):Ol(t,H||R,I,U))}return t=f=null,r}unbind(t,o,r){if(!t||ze(t)||rn(t))return this;const c=t[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const v=f[b],w=u[v];if(w){if(r){let k=w.length;for(;k--;)if(w[k].func===r){const O=w.nativeHandler,R=w.fakeName,I=w.capture,U=w.slice(0,k).concat(w.slice(k+1));U.nativeHandler=O,U.fakeName=R,U.capture=I,u[v]=U}}(!r||w.length===0)&&(delete u[v],dp(t,w.fakeName||v,w.nativeHandler,w.capture))}}}else hn(u,(f,b)=>{dp(t,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Kt(u,f))return this;delete this.events[c];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,o,r){return this.dispatch(t,o,r)}dispatch(t,o,r){if(!t||ze(t)||rn(t))return this;const c=Cf({type:o,target:t},r);do{const u=t[this.expando];u&&this.executeHandlers(c,u),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!c.isPropagationStopped());return this}clean(t){if(!t||ze(t)||rn(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const o=t.getElementsByTagName("*");let r=o.length;for(;r--;)t=o[r],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,o){const r=this.events[o],c=r&&r[t.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}};Ie(UT,"Event",new UT);let Vg=UT;const wa=He.each,L3=He.grep,D2="data-mce-style",R2=He.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),E0=(e,t,o)=>{gn(o)||o===""?Vs(e,t):rs(e,t,o)},bw=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),Sf=(e,t)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;t&&ze(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},vw=(e,t)=>{const o=Po(t,"style"),r=e.serialize(e.parse(o),mn(t));E0(t,D2,r)},mp=(e,t)=>lr(e)?Kt(R2,t)?e+"":e+"px":e,M2=(e,t,o)=>{const r=bw(t);gn(o)||o===""?J1(e,r):mc(e,r,mp(o,r))},yw=(e,t,o)=>{const r=t.keep_values,c={set:(f,b,v)=>{const w=q.fromDom(f);ne(t.url_converter)&&ve(b)&&(b=t.url_converter.call(t.url_converter_scope||o(),String(b),v,f));const k="data-mce-"+v;E0(w,k,b),E0(w,v,b)},get:(f,b)=>{const v=q.fromDom(f);return Po(v,"data-mce-"+b)||Po(v,b)}},u={style:{set:(f,b)=>{const v=q.fromDom(f);r&&E0(v,D2,b),Vs(v,"style"),Y(b)&&di(v,e.parse(b))},get:f=>{const b=q.fromDom(f),v=Po(b,D2)||Po(b,"style");return e.serialize(e.parse(v),mn(b))}}};return r&&(u.href=u.src=c),u},Tn=(e,t={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,v=C2.forElement(q.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy,crossOrigin:ue=>{const he=t.crossOrigin;if(ne(he))return he(ue,"stylesheet")}}),w=[],k=t.schema?t.schema:Ar({}),O=gd({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),R=t.ownEvents?new Vg:Vg.Event,I=k.getBlockElements(),U=ue=>Y(ue)?Kt(I,ue):Ye(ue)&&(Kt(I,ue.nodeName)||as(k,ue)),H=ue=>ue&&e&&Y(ue)?e.getElementById(ue):ue,j=ue=>{const he=H(ue);return ve(he)?q.fromDom(he):null},oe=(ue,he,rt="")=>{let qe;const Wt=j(ue);if(ve(Wt)&&ds(Wt)){const Hn=YL[he];Hn&&Hn.get?qe=Hn.get(Wt.dom,he):qe=Po(Wt,he)}return ve(qe)?qe:rt},se=ue=>{const he=H(ue);return gn(he)?[]:he.attributes},ae=(ue,he,rt)=>{_t(ue,qe=>{if(Ye(qe)){const Wt=q.fromDom(qe),Hn=rt===""?null:rt,$s=Po(Wt,he),ug=YL[he];ug&&ug.set?ug.set(Wt.dom,Hn,he):E0(Wt,he,Hn),$s!==Hn&&t.onSetAttrib&&t.onSetAttrib({attrElm:Wt.dom,attrName:he,attrValue:Hn})}})},Se=(ue,he)=>ue.cloneNode(he),Oe=()=>t.root_element||e.body,Je=ue=>{const he=fc(ue);return{x:he.x,y:he.y,w:he.width,h:he.height}},St=(ue,he)=>Yn(e.body,H(ue),he),xe=(ue,he,rt)=>{_t(ue,qe=>{const Wt=q.fromDom(qe);M2(Wt,he,rt),t.update_styles&&vw(O,Wt)})},me=(ue,he)=>{_t(ue,rt=>{const qe=q.fromDom(rt);hn(he,(Wt,Hn)=>{M2(qe,Hn,Wt)}),t.update_styles&&vw(O,qe)})},Ee=(ue,he,rt)=>{const qe=H(ue);if(!(gn(qe)||!Ha(qe)&&!_3(qe)))return rt?vs(q.fromDom(qe),bw(he)):(he=he.replace(/-(\D)/g,(Wt,Hn)=>Hn.toUpperCase()),he==="float"&&(he="cssFloat"),qe.style?qe.style[he]:void 0)},Qe=ue=>{const he=H(ue);if(!he)return{w:0,h:0};let rt=Ee(he,"width"),qe=Ee(he,"height");return(!rt||rt.indexOf("px")===-1)&&(rt="0"),(!qe||qe.indexOf("px")===-1)&&(qe="0"),{w:parseInt(rt,10)||he.offsetWidth||he.clientWidth,h:parseInt(qe,10)||he.offsetHeight||he.clientHeight}},$t=ue=>{const he=H(ue),rt=St(he),qe=Qe(he);return{x:rt.x,y:rt.y,w:qe.w,h:qe.h}},It=(ue,he)=>{if(!ue)return!1;const rt=dn(ue)?ue:[ue];return zn(rt,qe=>$c(q.fromDom(qe),he))},_n=(ue,he,rt,qe)=>{const Wt=[];let Hn=H(ue);qe=qe===void 0;const $s=rt||(Oe().nodeName!=="BODY"?Oe().parentNode:null);if(Y(he))if(he==="*")he=Ye;else{const ug=he;he=Jm=>It(Jm,ug)}for(;Hn&&!(Hn===$s||gn(Hn.nodeType)||ld(Hn)||Ag(Hn));){if(!he||he(Hn))if(qe)Wt.push(Hn);else return[Hn];Hn=Hn.parentNode}return qe?Wt:null},so=(ue,he,rt)=>{const qe=_n(ue,he,rt,!1);return qe&&qe.length>0?qe[0]:null},Ao=(ue,he,rt)=>{let qe=he;if(ue){Y(he)&&(qe=Wt=>It(Wt,he));for(let Wt=ue[rt];Wt;Wt=Wt[rt])if(ne(qe)&&qe(Wt))return Wt}return null},Vo=(ue,he)=>Ao(ue,he,"nextSibling"),Pr=(ue,he)=>Ao(ue,he,"previousSibling"),Ei=ue=>ne(ue.querySelectorAll),nt=(ue,he)=>{const rt=H(he)??t.root_element??e;return Ei(rt)?Bo(rt.querySelectorAll(ue)):[]},_t=function(ue,he,rt){const qe=rt??this;if(dn(ue)){const Wt=[];return wa(ue,(Hn,$s)=>{const ug=H(Hn);ug&&Wt.push(he.call(qe,ug,$s))}),Wt}else{const Wt=H(ue);return Wt?he.call(qe,Wt):!1}},jn=(ue,he)=>{_t(ue,rt=>{hn(he,(qe,Wt)=>{ae(rt,Wt,qe)})})},Fn=(ue,he)=>{_t(ue,rt=>{const qe=q.fromDom(rt);sd(qe,he)})},Jr=(ue,he,rt,qe,Wt)=>_t(ue,Hn=>{const $s=Y(he)?e.createElement(he):he;return ve(rt)&&jn($s,rt),qe&&(!Y(qe)&&qe.nodeType?$s.appendChild(qe):Y(qe)&&Fn($s,qe)),Wt?$s:Hn.appendChild($s)}),ke=(ue,he,rt)=>Jr(e.createElement(ue),ue,he,rt,!0),Ge=bc.decode,ut=bc.encodeAllRaw,wn=(ue,he,rt="")=>{let qe="<"+ue;for(const Wt in he)Wo(he,Wt)&&(qe+=" "+Wt+'="'+ut(he[Wt])+'"');return Xu(rt)&&Kt(k.getVoidElements(),ue)?qe+" />":qe+">"+rt+"</"+ue+">"},Qt=ue=>{const he=e.createElement("div"),rt=e.createDocumentFragment();rt.appendChild(he),ue&&(he.innerHTML=ue);let qe;for(;qe=he.firstChild;)rt.appendChild(qe);return rt.removeChild(he),rt},uo=(ue,he)=>_t(ue,rt=>{const qe=q.fromDom(rt);return he&&le(ms(qe),Wt=>{qn(Wt)&&Wt.dom.length===0?xo(Wt):zr(qe,Wt)}),xo(qe),qe.dom}),Jl=ue=>_t(ue,he=>{const rt=he.attributes;for(let qe=rt.length-1;qe>=0;qe--)he.removeAttributeNode(rt.item(qe))}),kc=ue=>O.parse(ue),Ql=(ue,he)=>O.serialize(ue,he),sl=ue=>{if($v!==Tn.DOM&&e===document){if(o[ue])return;o[ue]=!0}let he=e.getElementById("mceDefaultStyles");if(!he){he=e.createElement("style"),he.id="mceDefaultStyles",he.type="text/css";const rt=e.head;rt.firstChild?rt.insertBefore(he,rt.firstChild):rt.appendChild(he)}he.styleSheet?he.styleSheet.cssText+=ue:he.appendChild(e.createTextNode(ue))},Ih=ue=>{ue||(ue=""),le(ue.split(","),he=>{c[he]=!0,v.load(he).catch(Ot)})},Qa=(ue,he,rt)=>{_t(ue,qe=>{if(Ye(qe)){const Wt=q.fromDom(qe),Hn=he.split(" ");le(Hn,$s=>{ve(rt)?(rt?Fc:or)(Wt,$s):kr(Wt,$s)})}})},Xc=(ue,he)=>{Qa(ue,he,!0)},ig=(ue,he)=>{Qa(ue,he,!1)},Nv=(ue,he)=>{const rt=j(ue),qe=he.split(" ");return ve(rt)&&$a(qe,Wt=>e0(rt,Wt))},ZT=ue=>{_t(ue,he=>J1(q.fromDom(he),"display"))},Lt=ue=>{_t(ue,he=>mc(q.fromDom(he),"display","none"))},On=ue=>{const he=j(ue);return ve(he)&&ro(qs(he,"display"),"none")},Ps=ue=>(ue||"mce_")+u++,Lo=ue=>{const he=j(ue);return ve(he)?Ye(he.dom)?he.dom.outerHTML:u3(he):""},ho=(ue,he)=>{_t(ue,rt=>{Ye(rt)&&(rt.outerHTML=he)})},Ts=(ue,he)=>{const rt=H(he);return _t(ue,qe=>{const Wt=rt==null?void 0:rt.parentNode,Hn=rt==null?void 0:rt.nextSibling;return Wt&&(Hn?Wt.insertBefore(qe,Hn):Wt.appendChild(qe)),qe})},Ti=(ue,he,rt)=>_t(he,qe=>{var Hn;const Wt=dn(he)?ue.cloneNode(!0):ue;return rt&&wa(L3(qe.childNodes),$s=>{Wt.appendChild($s)}),(Hn=qe.parentNode)==null||Hn.replaceChild(Wt,qe),qe}),_c=(ue,he)=>{if(ue.nodeName!==he.toUpperCase()){const rt=ke(he);return wa(se(ue),qe=>{ae(rt,qe.nodeName,oe(ue,qe.nodeName))}),Ti(rt,ue,!0),rt}else return ue},eu=(ue,he)=>{let rt=ue;for(;rt;){let qe=he;for(;qe&&rt!==qe;)qe=qe.parentNode;if(rt===qe)break;rt=rt.parentNode}return!rt&&ue.ownerDocument?ue.ownerDocument.documentElement:rt},lg=(ue,he,rt)=>Qc(he)?Tt(k,ue,{...rt,isContent:Wt=>{const Hn=Wt.nodeName.toLowerCase();return!!he[Hn]}}):Tt(k,ue,rt),WT=()=>e.createRange(),jT=(ue,he,rt)=>{let qe=WT(),Wt,Hn;if(ue&&he&&ue.parentNode&&he.parentNode){const $s=ue.parentNode;return qe.setStart($s,Sf(ue)),qe.setEnd(he.parentNode,Sf(he)),Wt=qe.extractContents(),qe=WT(),qe.setStart(he.parentNode,Sf(he)+1),qe.setEnd($s,Sf(ue)+1),Hn=qe.extractContents(),$s.insertBefore(ap($v,Wt,k),ue),rt?$s.insertBefore(rt,ue):$s.insertBefore(he,ue),$s.insertBefore(ap($v,Hn,k),ue),uo(ue),rt||he}else return},PS=(ue,he,rt,qe)=>{if(dn(ue)){let Wt=ue.length;const Hn=[];for(;Wt--;)Hn[Wt]=PS(ue[Wt],he,rt,qe);return Hn}else return t.collect&&(ue===e||ue===r)&&w.push([ue,he,rt,qe]),R.bind(ue,he,rt,qe||$v)},Xm=(ue,he,rt)=>{if(dn(ue)){let qe=ue.length;const Wt=[];for(;qe--;)Wt[qe]=Xm(ue[qe],he,rt);return Wt}else{if(w.length>0&&(ue===e||ue===r)){let qe=w.length;for(;qe--;){const[Wt,Hn,$s]=w[qe];ue===Wt&&(!he||he===Hn)&&(!rt||rt===$s)&&R.unbind(Wt,Hn,$s)}}return R.unbind(ue,he,rt)}},Pv=(ue,he,rt)=>R.dispatch(ue,he,rt),B5=(ue,he,rt)=>R.dispatch(ue,he,rt),GT=ue=>{if(ue&&Ha(ue)){const he=ue.getAttribute("data-mce-contenteditable");return he&&he!=="inherit"?he:ue.contentEditable!=="inherit"?ue.contentEditable:null}else return null},$v={doc:e,settings:t,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:v,boundEvents:w,styles:O,schema:k,events:R,isBlock:U,root:null,clone:Se,getRoot:Oe,getViewPort:Je,getRect:$t,getSize:Qe,getParent:so,getParents:_n,get:H,getNext:Vo,getPrev:Pr,select:nt,is:It,add:Jr,create:ke,createHTML:wn,createFragment:Qt,remove:uo,setStyle:xe,getStyle:Ee,setStyles:me,removeAllAttribs:Jl,setAttrib:ae,setAttribs:jn,getAttrib:oe,getPos:St,parseStyle:kc,serializeStyle:Ql,addStyle:sl,loadCSS:Ih,addClass:Xc,removeClass:ig,hasClass:Nv,toggleClass:Qa,show:ZT,hide:Lt,isHidden:On,uniqueId:Ps,setHTML:Fn,getOuterHTML:Lo,setOuterHTML:ho,decode:Ge,encode:ut,insertAfter:Ts,replace:Ti,rename:_c,findCommonAncestor:eu,run:_t,getAttribs:se,isEmpty:lg,createRng:WT,nodeIndex:Sf,split:jT,bind:PS,unbind:Xm,fire:B5,dispatch:Pv,getContentEditable:GT,getContentEditableParent:ue=>{const he=Oe();let rt=null;for(let qe=ue;qe&&qe!==he&&(rt=GT(qe),rt===null);qe=qe.parentNode);return rt},isEditable:ue=>{if(ve(ue)){const he=Ye(ue)?ue:ue.parentElement;return ve(he)&&Ha(he)&&Ii(q.fromDom(he))}else return!1},destroy:()=>{if(w.length>0){let ue=w.length;for(;ue--;){const[he,rt,qe]=w[ue];R.unbind(he,rt,qe)}}hn(c,(ue,he)=>{v.unload(he),delete c[he]})},isChildOf:(ue,he)=>ue===he||he.contains(ue),dumpRng:ue=>"startContainer: "+ue.startContainer.nodeName+", startOffset: "+ue.startOffset+", endContainer: "+ue.endContainer.nodeName+", endOffset: "+ue.endOffset},YL=yw(O,t,Xe($v));return $v};Tn.DOM=Tn(document),Tn.nodeIndex=Sf;const T0=Tn.DOM,Dn=0,vc=1,pm=2,fp=3,bn=class bn{constructor(t={}){Ie(this,"settings");Ie(this,"states",{});Ie(this,"queue",[]);Ie(this,"scriptLoadedCallbacks",{});Ie(this,"queueLoadedCallbacks",[]);Ie(this,"loading",!1);this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}_setCrossOrigin(t){this.settings.crossOrigin=t}loadScript(t){return new Promise((o,r)=>{const c=T0,u=document;let f;const b=()=>{c.remove(k),f&&(f.onerror=f.onload=f=null)},v=()=>{b(),o()},w=()=>{b(),r("Failed to load script: "+t)},k=c.uniqueId();f=u.createElement("script"),f.id=k,f.type="text/javascript",f.src=He._addCacheSuffix(t),this.settings.referrerPolicy&&c.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy);const O=this.settings.crossOrigin;if(ne(O)){const R=O(t);R!==void 0&&c.setAttrib(f,"crossorigin",R)}f.onload=v,f.onerror=w,(u.head||u.body).appendChild(f)})}isDone(t){return this.states[t]===pm}markDone(t){this.states[t]=pm}add(t){const o=this;return o.queue.push(t),o.states[t]===void 0&&(o.states[t]=Dn),new Promise((c,u)=>{o.scriptLoadedCallbacks[t]||(o.scriptLoadedCallbacks[t]=[]),o.scriptLoadedCallbacks[t].push({resolve:c,reject:u})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const o=this,r=(v,w)=>{vo(o.scriptLoadedCallbacks,w).each(k=>{le(k,O=>O[v](w))}),delete o.scriptLoadedCallbacks[w]},c=v=>{const w=ge(v,k=>k.status==="rejected");return w.length>0?Promise.reject(Vn(w,({reason:k})=>dn(k)?k:[k])):Promise.resolve()},u=v=>Promise.allSettled(Rt(v,w=>o.states[w]===pm?(r("resolve",w),Promise.resolve()):o.states[w]===fp?(r("reject",w),Promise.reject(w)):(o.states[w]=vc,o.loadScript(w).then(()=>{o.states[w]=pm,r("resolve",w);const k=o.queue;return k.length>0?(o.queue=[],u(k).then(c)):Promise.resolve()},()=>(o.states[w]=fp,r("reject",w),Promise.reject(w)))))),f=v=>(o.loading=!0,u(v).then(w=>{o.loading=!1;const k=o.queueLoadedCallbacks.shift();return N.from(k).each(ls),c(w)})),b=gg(t);return o.loading?new Promise((v,w)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(v,w)})}):f(b)}getScriptAttributes(t){const o={};this.settings.referrerPolicy&&(o.referrerpolicy=this.settings.referrerPolicy);const r=this.settings.crossOrigin;if(ne(r)){const c=r(t);Y(c)&&(o.crossorigin=c)}return o}};Ie(bn,"ScriptLoader",new bn);let Zn=bn;const Cw=(e,t)=>{const o=e.indexOf(t);return o!==-1&&e.indexOf(t,o+1)>o},Sw=e=>en(e)&&Kt(e,"raw"),F3=e=>dn(e)&&e.length>1,wf={},gp=Bt("en"),ww=()=>vo(wf,gp.get()),yc={getData:()=>cc(wf,e=>({...e})),setCode:e=>{e&&gp.set(e)},getCode:()=>gp.get(),add:(e,t)=>{let o=wf[e];o||(wf[e]=o={});const r=Rt(bt(t),c=>c.toLowerCase());hn(t,(c,u)=>{const f=u.toLowerCase();f!==u&&Cw(r,f)?(Kt(t,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const t=ww().getOr({}),o=b=>ne(b)?Object.prototype.toString.call(b):r(b)?"":""+b,r=b=>b===""||b===null||b===void 0,c=b=>{const v=o(b);return Kt(t,v)?o(t[v]):vo(t,v.toLowerCase()).map(o).getOr(v)},u=b=>b.replace(/{context:\w+}$/,""),f=b=>b.replaceAll("...",zh);if(r(e))return"";if(Sw(e))return f(o(e.raw));if(F3(e)){const b=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(w,k)=>Kt(b,k)?o(b[k]):w);return f(u(v))}return f(u(c(e)))},isRtl:()=>ww().bind(e=>vo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Kt(wf,e)},Xs=()=>{const e=[],t={},o={},r=[],c=(H,j)=>{const oe=ge(r,se=>se.name===H&&se.state===j);le(oe,se=>se.resolve())},u=H=>Kt(t,H),f=H=>Kt(o,H),b=H=>{if(o[H])return o[H].instance},v=(H,j)=>{const oe=yc.getCode(),se=","+(j||"")+",";!oe||j&&se.indexOf(","+oe+",")===-1||Zn.ScriptLoader.add(t[H]+"/langs/"+oe+".js")},w=(H,j)=>{Xs.languageLoad!==!1&&(u(H)?v(H,j):U(H,"loaded").then(()=>v(H,j)))},k=(H,j)=>(e.push(j),o[H]={instance:j},c(H,"added"),j),O=H=>{delete t[H],delete o[H]},R=(H,j)=>Y(j)?Y(H)?{prefix:"",resource:j,suffix:""}:{prefix:H.prefix,resource:j,suffix:H.suffix}:j,I=(H,j)=>{if(t[H])return Promise.resolve();let oe=Y(j)?j:j.prefix+j.resource+j.suffix;oe.indexOf("/")!==0&&oe.indexOf("://")===-1&&(oe=Xs.baseURL+"/"+oe),t[H]=oe.substring(0,oe.lastIndexOf("/"));const se=()=>(c(H,"loaded"),Promise.resolve());return o[H]?se():Zn.ScriptLoader.add(oe).then(se)},U=(H,j="added")=>j==="added"&&f(H)||j==="loaded"&&u(H)?Promise.resolve():new Promise(oe=>{r.push({name:H,state:j,resolve:oe})});return{items:e,urls:t,lookup:o,get:b,requireLangPack:w,add:k,remove:O,createUrl:R,load:I,waitFor:U}};Xs.languageLoad=!0,Xs.baseURL="",Xs.PluginManager=Xs(),Xs.ThemeManager=Xs(),Xs.ModelManager=Xs();const bm=Xe("mce-annotation"),Vi=Xe("data-mce-annotation"),vu=Xe("data-mce-annotation-uid"),Ug=Xe("data-mce-annotation-active"),Zg=Xe("data-mce-annotation-classes"),k0=Xe("data-mce-annotation-attrs"),Z3=e=>t=>xn(t,e),_0=(e,t)=>{const o=e.selection.getRng(),r=q.fromDom(o.startContainer),c=q.fromDom(e.getBody()),u=t.fold(()=>"."+bm(),v=>`[${Vi()}="${v}"]`),f=Mi(r,o.startOffset).getOr(r);return Vr(f,u,Z3(c)).bind(v=>Ni(v,`${vu()}`).bind(w=>Ni(v,`${Vi()}`).map(k=>{const O=hp(e,w);return{uid:w,name:k,elements:O}})))},B2=e=>ds(e)&&e0(e,bm()),N2=(e,t)=>Go(e,"data-mce-bogus")||YS(e,'[data-mce-bogus="all"]',Z3(t)),hp=(e,t)=>{const o=q.fromDom(e.getBody()),r=_r(o,`[${vu()}="${t}"]`);return ge(r,c=>!N2(c,o))},hd=(e,t)=>{const o=q.fromDom(e.getBody()),r=_r(o,`[${Vi()}="${t}"]`),c={};return le(r,u=>{if(!N2(u,o)){const f=Po(u,vu()),b=vo(c,f).getOr([]);c[f]=b.concat([u])}}),c},A0=(e,t)=>{const o=Bt({}),r=()=>({listeners:[],previous:Mc()}),c=(O,R)=>{u(O,I=>(R(I),I))},u=(O,R)=>{const I=o.get(),U=vo(I,O).getOrThunk(r),H=R(U);I[O]=H,o.set(I)},f=(O,R,I)=>{c(O,U=>{le(U.listeners,H=>H(!0,O,{uid:R,nodes:Rt(I,j=>j.dom)}))})},b=O=>{c(O,R=>{le(R.listeners,I=>I(!1,O))})},v=(O,R)=>{le(hp(e,O),I=>{R?rs(I,Ug(),"true"):Vs(I,Ug())})},w=ou(()=>{const O=ki(t.getNames());le(O,R=>{u(R,I=>{const U=I.previous.get();return _0(e,N.some(R)).fold(()=>{U.each(H=>{b(R),I.previous.clear(),v(H,!1)})},({uid:H,name:j,elements:oe})=>{ro(U,H)||(U.each(se=>v(se,!1)),f(j,H,oe),I.previous.set(H),v(H,!0))}),{previous:I.previous,listeners:I.listeners}})})},30);return e.on("remove",()=>{w.cancel()}),e.on("NodeChange",()=>{w.throttle()}),{addListener:(O,R)=>{u(O,I=>({previous:I.previous,listeners:I.listeners.concat([R])}))}}},pp=(e,t)=>{const o=Vi(),r=u=>N.from(u.attr(o)).bind(t.lookup),c=u=>{var k;u.attr(vu(),null),u.attr(Vi(),null),u.attr(Ug(),null);const f=N.from(u.attr(k0())).map(O=>O.split(",")).getOr([]),b=N.from(u.attr(Zg())).map(O=>O.split(",")).getOr([]);le(f,O=>u.attr(O,null));const v=((k=u.attr("class"))==null?void 0:k.split(" "))??[],w=ns(v,[bm()].concat(b));u.attr("class",w.length>0?w.join(" "):null),u.attr(Zg(),null),u.attr(k0(),null)};e.serializer.addTempAttr(Ug()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},O0=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>vo(e,c).map(u=>u.settings),getNames:()=>bt(e)}},Tw=(e,t,o=De)=>{const r=new fs(e,t),c=u=>{let f;do f=r[u]();while(f&&!ze(f)&&!o(f));return N.from(f).filter(ze)};return{current:()=>N.from(r.current()).filter(ze),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},yu=(e,t)=>{const o=t||(f=>e.isBlock(f)||Xo(f)||$o(f)),r=(f,b,v,w)=>{if(ze(f)){const k=w(f,b,f.data);if(k!==-1)return N.some({container:f,offset:k})}return v().bind(k=>r(k.container,k.offset,v,w))};return{backwards:(f,b,v,w)=>{const k=Tw(f,w??e.getRoot(),o);return r(f,b,()=>k.prev().map(O=>({container:O,offset:O.length})),v).getOrNull()},forwards:(f,b,v,w)=>{const k=Tw(f,w??e.getRoot(),o);return r(f,b,()=>k.next().map(O=>({container:O,offset:0})),v).getOrNull()}}},D0=["td","th"],kw=["thead","tbody","tfoot"],W3=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],j3=["li","dd","dt"],_w=["ul","ol","dl"],P2=["pre","script","textarea","style"],Cu=e=>{let t;return o=>(t=t||Ku(e,et),Kt(t,mn(o)))},Aw=e=>mn(e)==="table",Ui=e=>ds(e)&&mn(e)==="br",ca=Cu(W3),vi=Cu(_w),xa=Cu(j3),R0=Cu(kw),Ef=Cu(D0),M0=Cu(P2),$2=e=>{const t=[];let o=e.dom;for(;o;)t.push(q.fromDom(o)),o=o.lastChild;return t},G3=e=>{const t=_r(e,"br"),o=ge($2(e).slice(-1),Ui);t.length===o.length&&le(o,xo)},vm=()=>{const e=q.fromTag("br");return rs(e,"data-mce-bogus","1"),e},ym=e=>{Pi(e),Pn(e,vm())},I2=(e,t)=>{zs(e).each(o=>{ii(o).each(r=>{t.isBlock(mn(e))&&Ui(o)&&t.isBlock(mn(r))&&xo(o)})})},Js=Ju,bp=oi,ja=Bc,B0=e=>e.insertContent(Js,{preserve_zwsp:!0}),fo=Ye,Dl=ze,pd=e=>(Dl(e)&&(e=e.parentNode),fo(e)&&e.hasAttribute("data-mce-caret")),Rl=e=>Dl(e)&&bp(e.data),Uc=e=>pd(e)||Rl(e),N0=e=>e.firstChild!==e.lastChild||!Xo(e.firstChild),Ow=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(Js),c=e.parentNode;if(t){const u=e.previousSibling;if(Dl(u)){if(Uc(u))return u;if(Cm(u))return u.splitText(u.data.length-1)}c==null||c.insertBefore(r,e)}else{const u=e.nextSibling;if(Dl(u)){if(Uc(u))return u;if(Cc(u))return u.splitText(1),u}e.nextSibling?c==null||c.insertBefore(r,e.nextSibling):c==null||c.appendChild(r)}return r},bd=e=>{const t=e.container();return ze(t)?t.data.charAt(e.offset())===Js||e.isAtStart()&&Rl(t.previousSibling):!1},Tf=e=>{const t=e.container();return ze(t)?t.data.charAt(e.offset()-1)===Js||e.isAtEnd()&&Rl(t.nextSibling):!1},L2=(e,t,o)=>{const c=(t.ownerDocument??document).createElement(e);c.setAttribute("data-mce-caret",o?"before":"after"),c.setAttribute("data-mce-bogus","all"),c.appendChild(vm().dom);const u=t.parentNode;return o?u==null||u.insertBefore(c,t):t.nextSibling?u==null||u.insertBefore(c,t.nextSibling):u==null||u.appendChild(c),c},Cc=e=>Dl(e)&&e.data[0]===Js,Cm=e=>Dl(e)&&e.data[e.data.length-1]===Js,Or=e=>{var r;const t=e.getElementsByTagName("br"),o=t[t.length-1];dm(o)&&((r=o.parentNode)==null||r.removeChild(o))},Zi=e=>e&&e.hasAttribute("data-mce-caret")?(Or(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,P0=e=>pd(e.startContainer),kf=Math.round,Sm=e=>e?{left:kf(e.left),top:kf(e.top),bottom:kf(e.bottom),right:kf(e.right),width:kf(e.width),height:kf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},vp=(e,t)=>(e=Sm(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),F2=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,$0=(e,t,o)=>e>=0&&e<=Math.min(t.height,o.height)/2,_f=(e,t)=>{const o=Math.min(t.height/2,e.height/2);return e.bottom-o<t.top?!0:e.top>t.bottom?!1:$0(t.top-e.bottom,e,t)},wm=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:$0(t.bottom-e.top,e,t),H2=(e,t,o)=>t>=e.left&&t<=e.right&&o>=e.top&&o<=e.bottom,yp=e=>cn(e,(t,o)=>t.fold(()=>N.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return N.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),N.none()),z2=(e,t,o)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(o-c)*(o-c))},Dw=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),Qs=e=>{const t=e.startContainer,o=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===o+1?t.childNodes[o]:null},xm=(e,t)=>{if(Ye(e)&&e.hasChildNodes()){const o=e.childNodes,r=jd(t,0,o.length-1);return o[r]}else return e},Em=(e,t)=>{if(!(t<0&&Ye(e)&&e.hasChildNodes()))return xm(e,t)},Rw=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),I0=e=>Y(e)&&e.charCodeAt(0)>=768&&Rw.test(e),V2=(...e)=>t=>{for(let o=0;o<e.length;o++)if(e[o](t))return!0;return!1},Cp=(...e)=>t=>{for(let o=0;o<e.length;o++)if(!e[o](t))return!1;return!0},L0=gc,Mw=$o,q3=Xo,Sp=ze,Ws=mi(["script","style","textarea"]),Rs=mi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Dr=mi(["table"]),dr=Uc,Fo=e=>dr(e)?!1:Sp(e)?!Ws(e.parentNode):Rs(e)||q3(e)||Dr(e)||Wg(e),Ms=e=>Ye(e)&&e.getAttribute("unselectable")==="true",Wg=e=>!Ms(e)&&Mw(e),U2=(e,t)=>{for(let o=e.parentNode;o&&o!==t;o=o.parentNode){if(Wg(o))return!1;if(L0(o))return!0}return!0},Z2=e=>Wg(e)?!cn(Bo(e.getElementsByTagName("*")),(t,o)=>t||L0(o),!1):!1,Bw=e=>Rs(e)||Z2(e),F0=(e,t)=>Fo(e)&&U2(e,t),W2=Ye,j2=Fo,H0=u0("display","block table"),G2=u0("float","left right"),jg=Cp(W2,j2,to(G2)),Nw=to(u0("white-space","pre pre-line pre-wrap")),wp=ze,Ml=Xo,z0=Tn.nodeIndex,xp=Em,Gg=e=>e?e.createRange():Tn.DOM.createRng(),Af=e=>Y(e)&&/[\r\n\t ]/.test(e),Ep=e=>!!e.setStart&&!!e.setEnd,V0=e=>{const t=e.startContainer,o=e.startOffset;if(Af(e.toString())&&Nw(t.parentNode)&&ze(t)){const r=t.data;if(Af(r[o-1])||Af(r[o+1]))return!0}return!1},Tp=e=>{const t=e.ownerDocument,o=Gg(t),r=t.createTextNode(ss),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Sm(o.getBoundingClientRect());return c.removeChild(r),u},U0=e=>{const t=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(t===o&&ze(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Ea(u)}else return null},Of=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ea=e=>{let t;const o=e.getClientRects();return o.length>0?t=Sm(o[0]):t=Sm(e.getBoundingClientRect()),!Ep(e)&&Ml(e)&&Of(t)?Tp(e):Of(t)&&Ep(e)?U0(e)??t:t},Wr=(e,t)=>{const o=vp(e,t);return o.width=1,o.right=o.left+1,o},qg=e=>{const t=[],o=f=>{f.height!==0&&(t.length>0&&F2(f,t[t.length-1])||t.push(f))},r=(f,b)=>{const v=Gg(f.ownerDocument);if(b<f.data.length){if(I0(f.data[b]))return;if(I0(f.data[b-1])&&(v.setStart(f,b),v.setEnd(f,b+1),!V0(v))){o(Wr(Ea(v),!1));return}}b>0&&(v.setStart(f,b-1),v.setEnd(f,b),V0(v)||o(Wr(Ea(v),!1))),b<f.data.length&&(v.setStart(f,b),v.setEnd(f,b+1),V0(v)||o(Wr(Ea(v),!0)))},c=e.container(),u=e.offset();if(wp(c))return r(c,u),t;if(W2(c))if(e.isAtEnd()){const f=xp(c,u);wp(f)&&r(f,f.data.length),jg(f)&&!Ml(f)&&o(Wr(Ea(f),!1))}else{const f=xp(c,u);if(wp(f)&&r(f,0),jg(f)&&e.isAtEnd())return o(Wr(Ea(f),!1)),t;const b=xp(e.container(),e.offset()-1);jg(b)&&!Ml(b)&&(H0(b)||H0(f)||!jg(f))&&o(Wr(Ea(b),!1)),jg(f)&&o(Wr(Ea(f),!0))}return t},Ce=(e,t,o)=>{const r=()=>(wp(e),t===0),c=()=>wp(e)?t>=e.data.length:t>=e.childNodes.length,u=()=>{const k=Gg(e.ownerDocument);return k.setStart(e,t),k.setEnd(e,t),k},f=()=>(o||(o=qg(Ce(e,t))),o),b=()=>f().length>0,v=k=>k&&e===k.container()&&t===k.offset(),w=k=>xp(e,k?t-1:t);return{container:Xe(e),offset:Xe(t),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:v,getNode:w}};Ce.fromRangeStart=e=>Ce(e.startContainer,e.startOffset),Ce.fromRangeEnd=e=>Ce(e.endContainer,e.endOffset),Ce.after=e=>Ce(e.parentNode,z0(e)+1),Ce.before=e=>Ce(e.parentNode,z0(e)),Ce.isAbove=(e,t)=>Cs(us(t.getClientRects()),Fs(e.getClientRects()),_f).getOr(!1),Ce.isBelow=(e,t)=>Cs(Fs(t.getClientRects()),us(e.getClientRects()),wm).getOr(!1),Ce.isAtStart=e=>e?e.isAtStart():!1,Ce.isAtEnd=e=>e?e.isAtEnd():!1,Ce.isTextPosition=e=>e?ze(e.container()):!1,Ce.isElementPosition=e=>!Ce.isTextPosition(e);const kp=(e,t)=>{ze(t)&&t.data.length===0&&e.remove(t)},K3=(e,t,o)=>{t.insertNode(o),kp(e,o.previousSibling),kp(e,o.nextSibling)},Ta=(e,t,o)=>{const r=N.from(o.firstChild),c=N.from(o.lastChild);t.insertNode(o),r.each(u=>kp(e,u.previousSibling)),c.each(u=>kp(e,u.nextSibling))},Kg=(e,t,o)=>{Ag(o)?Ta(e,t,o):K3(e,t,o)},Bl=ze,q2=dm,K2=Tn.nodeIndex,Df=e=>{const t=e.parentNode;return q2(t)?Df(t):t},_p=e=>e?Qd(e.childNodes,(t,o)=>(q2(o)&&o.nodeName!=="BR"?t=t.concat(_p(o)):t.push(o),t),[]):[],vd=(e,t)=>{let o=e;for(;(o=o.previousSibling)&&Bl(o);)t+=o.data.length;return t},Z0=e=>t=>e===t,Y3=e=>{let t,o;t=_p(Df(e)),o=of(t,Z0(e),e),t=t.slice(0,o+1);const r=Qd(t,(c,u,f)=>(Bl(u)&&Bl(t[f-1])&&c++,c),0);return t=Qu(t,mi([e.nodeName])),o=of(t,Z0(e),e),o-r},jr=e=>(Bl(e)?"text()":e.nodeName.toLowerCase())+"["+Y3(e)+"]",Nl=(e,t,o)=>{const r=[];for(let c=t.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},Sc=(e,t)=>{let o=[],r=t.container(),c=t.offset(),u;if(Bl(r))u=vd(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(jr(r));let f=Nl(e,r);return f=Qu(f,to(dm)),o=o.concat(gl(f,b=>jr(b))),o.reverse().join("/")+","+u},X3=(e,t,o)=>{let r=_p(e);return r=Qu(r,(c,u)=>!Bl(c)||!Bl(r[u-1])),r=Qu(r,mi([t])),r[o]},Yg=(e,t)=>{let o=e,r=0;for(;Bl(o);){const c=o.data.length;if(t>=r&&t<=r+c){e=o,t=t-r;break}if(!Bl(o.nextSibling)){e=o,t=c;break}r+=c,o=o.nextSibling}return Bl(e)&&t>e.data.length&&(t=e.data.length),Ce(e,t)},Pw=(e,t)=>{if(!t)return null;const o=t.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Qd(r,(f,b)=>{const v=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return v?(v[1]==="text()"&&(v[1]="#text"),X3(f,v[1],parseInt(v[2],10))):null},e);if(!u)return null;if(!Bl(u)&&u.parentNode){let f;return c==="after"?f=K2(u)+1:f=K2(u),Ce(u.parentNode,f)}return Yg(u,parseInt(c,10))},W0=$o,J3=(e,t,o)=>{let r=e(t.data.slice(0,o)).length;for(let c=t.previousSibling;c&&ze(c);c=c.previousSibling)r+=e(c.data).length;return r},$w=(e,t,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],v=e.getRoot();if(ze(u))b.push(o?J3(t,u,f):f);else{let w=0;const k=u.childNodes;f>=k.length&&k.length&&(w=1,f=Math.max(0,k.length-1)),b.push(e.nodeIndex(k[f],o)+w)}for(let w=u;w&&w!==v;w=w.parentNode)b.push(e.nodeIndex(w,o));return b},fn=(e,t,o,r)=>{const c=t.dom,u=$w(c,e,o,r,!0),f=t.isForward(),b=P0(r)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:u,forward:f,...b};{const v=$w(c,e,o,r,!1);return{start:u,end:v,forward:f,...b}}},xt=(e,t,o)=>{let r=0;return He.each(e.select(t),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},Xg=(e,t)=>{let o=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(Ye(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(t?r:r-1,c.length-1)],o&&(r=t?0:o.childNodes.length,t?e.setStart(o,r):e.setEnd(o,r))}},j0=e=>(Xg(e,!0),Xg(e,!1),e),G0=(e,t)=>{if(Ye(e)&&(e=xm(e,t),W0(e)))return e;if(Uc(e)){ze(e)&&pd(e)&&(e=e.parentNode);let o=e.previousSibling;if(W0(o)||(o=e.nextSibling,W0(o)))return o}},Q3=e=>G0(e.startContainer,e.startOffset)||G0(e.endContainer,e.endOffset),Y2=(e,t,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||W0(r)){const f=r.nodeName;return{name:f,index:xt(o.dom,f,r)}}const u=Q3(c);if(u){const f=u.tagName;return{name:f,index:xt(o.dom,f,u)}}return fn(e,o,t,c)},Io=e=>{const t=e.getRng();return{start:Sc(e.dom.getRoot(),Ce.fromRangeStart(t)),end:Sc(e.dom.getRoot(),Ce.fromRangeEnd(t)),forward:e.isForward()}},q0=e=>({rng:e.getRng(),forward:e.isForward()}),K0=(e,t,o)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},X2=(e,t)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,v=e.isForward();if(b==="IMG")return{name:b,index:xt(o,b,f)};const w=j0(r.cloneRange());if(!u){w.collapse(!1);const O=K0(o,c+"_end",t);Kg(o,w,O)}r=j0(r),r.collapse(!0);const k=K0(o,c+"_start",t);return Kg(o,r,k),e.moveToBookmark({id:c,keep:!0,forward:v}),{id:c,forward:v}},Te=(e,t,o=!1)=>t===2?Y2(ja,o,e):t===3?Io(e):t?q0(e):X2(e,!1),Jg=Me(Y2,Zo,!0),Rf=e=>e===1,Su=e=>e===-1;var Wi;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Wi||(Wi={}));const wu=(e,t,o)=>e.stype===Wi.Error?t(e.serror):o(e.svalue),Qg=e=>{const t=[],o=[];return le(e,r=>{wu(r,c=>o.push(c),c=>t.push(c))}),{values:t,errors:o}},Mf=(e,t)=>e.stype===Wi.Error?{stype:Wi.Error,serror:t(e.serror)}:e,ek=(e,t)=>e.stype===Wi.Value?{stype:Wi.Value,svalue:t(e.svalue)}:e,eh=(e,t)=>e.stype===Wi.Value?t(e.svalue):e,Eo=(e,t)=>e.stype===Wi.Error?t(e.serror):e,ji=e=>({stype:Wi.Value,svalue:e}),J2=e=>({stype:Wi.Error,serror:e}),Gr={fromResult:e=>e.fold(J2,ji),toResult:e=>wu(e,vr.error,vr.value),svalue:ji,partition:Qg,serror:J2,bind:eh,bindError:Eo,map:ek,mapError:Mf,fold:wu},Iw=e=>en(e)&&bt(e).length>100?" removed due to size":JSON.stringify(e,null,2),Q2=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Xe("... (only showing first ten failures)")}]):e;return Rt(t,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Lw=(e,t)=>Gr.serror([{path:e,getErrorInfo:t}]),tk=(e,t,o)=>Lw(e,()=>'Could not find valid *required* value for "'+t+'" in '+Iw(o)),nk=(e,t)=>Lw(e,Xe(t)),ey=e=>{const t=(r,c)=>Gr.bindError(e(c),u=>nk(r,u)),o=Xe("val");return{extract:t,toString:o}},Fw=ey(Gr.svalue),Ve=Xe(Fw),ty=(e,t)=>ey(o=>{const r=typeof o;return e(o)?Gr.svalue(o):Gr.serror(`Expected type: ${t} but got: ${r}`)}),mr=ty(lr,"number"),ny=ty(Y,"string"),oy=ty(ne,"function"),sy=()=>({tag:"required",process:{}}),ok=e=>({tag:"defaultedThunk",process:e}),Vt=e=>ok(Xe(e)),Hw=()=>({tag:"option",process:{}}),zw=(e,t,o,r)=>({tag:"field",key:e,newKey:t,presence:o,prop:r}),sk=(e,t,o)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},rk=(e,t)=>Gr.svalue(Gd(t,qd.apply(void 0,e))),Vw=e=>T(Gr.serror,ta)(e),Uw={consolidateObj:(e,t)=>{const o=Gr.partition(e);return o.errors.length>0?Vw(o.errors):rk(o.values,t)},consolidateArr:e=>{const t=Gr.partition(e);return t.errors.length>0?Vw(t.errors):Gr.svalue(t.values)}},ak=(e,t,o,r)=>vo(t,o).fold(()=>tk(e,o,t),r),Ut=(e,t,o,r)=>{const c=vo(e,t).getOrThunk(()=>o(e));return r(c)},ry=(e,t,o)=>o(vo(e,t)),yd=(e,t,o,r)=>{const c=vo(e,t).map(u=>u===!0?o(e):u);return r(c)},yi=(e,t,o,r,c)=>{const u=b=>c.extract(t.concat([r]),b),f=b=>b.fold(()=>Gr.svalue(N.none()),v=>{const w=c.extract(t.concat([r]),v);return Gr.map(w,N.some)});switch(e.tag){case"required":return ak(t,o,r,u);case"defaultedThunk":return Ut(o,r,e.process,u);case"option":return ry(o,r,f);case"defaultedOptionThunk":return yd(o,r,e.process,f);case"mergeWithThunk":return Ut(o,r,Xe({}),b=>{const v=Gd(e.process(o),b);return u(v)})}},Y0=(e,t,o)=>{const r={},c=[];for(const u of o)sk(u,(f,b,v,w)=>{const k=yi(v,e,t,f,w);Gr.fold(k,O=>{c.push(...O)},O=>{r[b]=O})},(f,b)=>{r[f]=b(t)});return c.length>0?Gr.serror(c):Gr.svalue(r)},ka=e=>({extract:(r,c)=>Y0(r,c,e),toString:()=>`obj{
`+Rt(e,c=>sk(c,(u,f,b,v)=>u+" -> "+v.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),th=e=>({extract:(r,c)=>{const u=Rt(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return Uw.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),Ap=T(th,ka),X0=e=>ey(t=>e(t).fold(Gr.serror,Gr.svalue)),nh=(e,t,o)=>{const r=t.extract([e],o);return Gr.mapError(r,c=>({input:o,errors:c}))},oh=(e,t,o)=>Gr.toResult(nh(e,t,o)),xu=e=>`Errors: 
`+Q2(e.errors).join(`
`)+`

Input object: `+Iw(e.input),Bs=zw,Cd=e=>Bs(e,e,sy(),Ve()),Zw=(e,t)=>Bs(e,e,sy(),t),ay=e=>Zw(e,ny),Ww=e=>Zw(e,oy),ck=(e,t)=>Bs(e,e,sy(),th(t)),kn=e=>Bs(e,e,Hw(),Ve()),Gi=(e,t)=>Bs(e,e,Hw(),t),km=e=>Gi(e,ny),U5=e=>Gi(e,oy),sh=(e,t)=>Bs(e,e,Vt(t),Ve()),An=(e,t,o)=>Bs(e,e,Vt(t),o),ik=(e,t)=>An(e,t,mr),lk=(e,t,o)=>An(e,t,th(o)),Z5=e=>e.type==="inline-command"||e.type==="inline-format",W5=e=>e.type==="block-command"||e.type==="block-format",Op=(e,t)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===t,uk=e=>{const t=r=>vr.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(dn(e.format)){if(!$a(e.format,Y))return t(r+" pattern has non-string items in the `format` array");f=e.format}else if(Y(e.format))f=[e.format];else return t(r+" pattern has non-string `format` parameter");return vr.value(c(f))}else return e.cmd!==void 0?Y(e.cmd)?vr.value(u(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!en(e))return t("Raw pattern is not an object");if(!Y(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Y(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else{if(e.replacement!==void 0)return Y(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):vr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter");{const r=e.trigger??"space";return e.start.length===0?t("Block pattern has empty `start` parameter"):o("Block",c=>({type:"block-format",start:e.start,format:c[0],trigger:r}),(c,u)=>({type:"block-command",start:e.start,cmd:c,value:u,trigger:r}))}}},dk=e=>ge(e,W5),Dp=e=>ge(e,Z5),mk=(e,t)=>({inlinePatterns:Dp(e),blockPatterns:dk(e),dynamicPatternsLookup:t}),Rp=(e,t)=>({...e,blockPatterns:ge(e.blockPatterns,o=>Op(o,t))}),jw=e=>{const t=fa(Rt(e,uk));return le(t.errors,o=>console.error(o.message,o.pattern)),t.values},fk=e=>t=>{const o=e(t);return jw(o)},J0=(e,t)=>e.dispatch("PreProcess",t),cy=(e,t)=>e.dispatch("PostProcess",t),iy=e=>{e.dispatch("remove")},Gw=e=>{e.dispatch("detach")},gk=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},qw=(e,t,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:t,width:o,height:r,origin:c})},ly=(e,t,o,r,c)=>{e.dispatch("ObjectResized",{target:t,width:o,height:r,origin:c})},Kw=e=>{e.dispatch("PreInit")},$n=e=>{e.dispatch("PostRender")},Yw=e=>{e.dispatch("Init")},uy=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},Q0=(e,t,o)=>{e.dispatch(t,o)},Sd=(e,t,o,r)=>{e.dispatch("FormatApply",{format:t,node:o,vars:r})},dy=(e,t,o,r)=>{e.dispatch("FormatRemove",{format:t,node:o,vars:r})},hk=(e,t)=>e.dispatch("BeforeSetContent",t),Xw=(e,t)=>e.dispatch("SetContent",t),rh=(e,t)=>e.dispatch("BeforeGetContent",t),Jw=(e,t)=>e.dispatch("GetContent",t),Mp=(e,t)=>{e.dispatch("AutocompleterStart",t)},Bp=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},my=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},_m=e=>{e.dispatch("AutocompleterEnd")},Qw=(e,t,o)=>e.dispatch("PastePreProcess",{content:t,internal:o}),ex=(e,t,o)=>e.dispatch("PastePostProcess",{node:t,internal:o}),tx=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),nx=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),j5=(e,t)=>e.dispatch("DisabledStateChange",{state:t}),ox=e=>e.dispatch("CloseActiveTooltips"),eb=au().deviceType,tb=eb.isTouch(),Np=Tn.DOM,nb=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return cn(t,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[os(u)]=os(f),o},{})},ob=e=>sc(e,RegExp),lt=e=>t=>t.options.get(e),Am=e=>Y(e)||en(e),Eu=(e,t="")=>o=>{const r=Y(o);if(r)if(o.indexOf("=")!==-1){const c=nb(o);return{value:vo(c,e.id).getOr(t),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Pp=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("crossorigin",{processor:"function",default:Xe(void 0)}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.editorManager.documentBaseURL}),t("body_id",{processor:Eu(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Eu(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:r=>{const c=Y(r)&&jo(r);return c?{value:r,valid:c}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:r=>{const c=vt(["block","linebreak","invert","default"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:r=>an(r)?{valid:!0,value:r}:Y(r)?{valid:!0,value:r}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:r=>{const c=r===!1||Y(r)||In(r,Y);return c?Y(r)?{value:Rt(r.split(","),os),valid:c}:dn(r)?{value:r,valid:c}:r===!1?{value:[],valid:c}:{value:r,valid:c}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Ip(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:r=>{const c=Y(r)||In(r,Y);return c?{value:dn(r)?r:Rt(r.split(","),os),valid:c}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("extended_mathml_attributes",{processor:"string[]"}),t("extended_mathml_elements",{processor:"string[]"}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:r=>{const c=an(r)||Y(r);return c?r===!1||eb.isiPhone()||eb.isiPad()?{value:"",valid:c}:{value:r===!0?"table,img,figure.image,div,video,iframe":r,valid:c}:{valid:!1,message:"Must be boolean or a string"}},default:!tb}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("onboarding",{processor:"boolean",default:!0}),t("tiny_cloud_entry_url",{processor:"string"}),t("theme",{processor:r=>r===!1||Y(r)||ne(r),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:r=>{const c=r===!1||Y(r);return c?{value:r===!1?"":r,valid:c}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("disabled",{processor:r=>an(r)?(e.initialized&&Ki(e)!==r&&Promise.resolve().then(()=>{j5(e,r)}),{valid:!0,value:r}):{valid:!1,message:"The value must be a boolean."},default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_html_in_comments",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("allow_mathml_annotation_encodings",{processor:r=>{const c=In(r,Y);return c?{value:r,valid:c}:{valid:!1,message:"Must be an array of strings."}},default:[]}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:Am}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Am}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Am}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Am}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:r=>Y(r)||r===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:r=>In(r,en)||r===!1?{value:jw(r===!1?[]:r),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:r=>ne(r)?{value:fk(r),valid:!0}:{valid:!1,message:"Must be a single function"},default:r=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:r=>In(r,ob)?{value:r,valid:!0}:ob(r)?{value:[r],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:r=>{const c=vt(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:r=>{const c=vt(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),t("user_id",{processor:"string",default:"Anonymous"}),t("fetch_users",{processor:r=>r===void 0?{valid:!0,value:void 0}:ne(r)?{valid:!0,value:r}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}});const o=Ap([ay("mimeType"),ck("extensions",X0(r=>Y(r)?vr.value(r):vr.error("Extensions must be an array of strings")))]);t("documents_file_types",{processor:r=>oh("documents_file_types",o,r).fold(c=>({valid:!1,message:"Must be a non-empty array of objects matching the configuration schema: https://www.tiny.cloud/docs/tinymce/latest/uploadcare-documents/#documents-file-types"}),c=>({valid:!0,value:c}))}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:yc.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:Np.getAttrib(e.getElement(),"placeholder")})}),t("lists_indent_on_tab",{processor:"boolean",default:!0}),t("list_max_depth",{processor:r=>{const c=lr(r);if(c){if(r<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:r,valid:c}}else return{valid:!1,message:"Must be a number"}}})},sx=lt("iframe_attrs"),fy=lt("doctype"),gy=lt("document_base_url"),rx=lt("body_id"),ax=lt("body_class"),cx=lt("content_security_policy"),sb=lt("br_in_pre"),Ns=lt("forced_root_block"),qi=lt("forced_root_block_attrs"),rb=lt("newline_behavior"),ix=lt("br_newline_selector"),lx=lt("no_newline_selector"),ux=lt("keep_styles"),ab=lt("end_container_on_empty_block"),hy=lt("automatic_uploads"),dx=lt("images_reuse_filename"),mx=lt("images_replace_blob_uris"),$p=lt("icons"),py=lt("icons_url"),cb=lt("images_upload_url"),by=lt("images_upload_base_path"),pk=lt("images_upload_credentials"),fx=lt("images_upload_handler"),gx=lt("content_css_cors"),ib=lt("referrer_policy"),Bf=lt("crossorigin"),hx=lt("language"),px=lt("language_url"),lb=lt("indent_use_margin"),bk=lt("indentation"),vk=lt("content_css"),Nf=lt("content_style"),vy=lt("font_css"),yk=lt("directionality"),Ck=lt("inline_boundaries_selector"),bx=lt("object_resizing"),Sk=lt("resize_img_proportional"),yy=lt("placeholder"),ub=lt("event_root"),Cy=lt("service_message"),Tu=lt("theme"),vx=lt("theme_url"),db=lt("model"),wk=lt("model_url"),Om=lt("inline_boundaries"),xk=lt("formats"),Ek=lt("preview_styles"),G5=lt("format_empty_lines"),q5=lt("format_noneditable_selector"),ah=lt("custom_ui_selector"),Ip=lt("inline"),Sy=lt("hidden_input"),Tk=lt("submit_patch"),kk=lt("add_form_submit_trigger"),mb=lt("add_unload_trigger"),yx=lt("custom_undo_redo_levels"),Cx=lt("disable_nodechange"),Lp=lt("readonly"),fb=lt("editable_root"),wy=lt("content_css_cors"),Fp=lt("plugins"),xy=lt("external_plugins"),_k=lt("block_unsupported_drop"),Hp=lt("visual"),Sx=lt("visual_table_class"),gb=lt("visual_anchor_class"),hb=lt("iframe_aria_text"),Pf=lt("setup"),Ak=lt("init_instance_callback"),ku=lt("urlconverter_callback"),Ok=lt("auto_focus"),wx=lt("browser_spellcheck"),Dk=lt("protect"),K5=lt("paste_block_drop"),pb=lt("paste_data_images"),Rk=lt("paste_preprocess"),Mk=lt("paste_postprocess"),Bk=lt("newdocument_content"),Ey=lt("paste_webkit_styles"),Nk=lt("paste_remove_styles_if_webkit"),xx=lt("paste_merge_formats"),Ty=lt("smart_paste"),Pk=lt("paste_as_text"),$k=lt("paste_tab_spaces"),ky=lt("allow_html_data_urls"),Ex=lt("text_patterns"),wt=lt("text_patterns_lookup"),zp=lt("noneditable_class"),Tx=lt("editable_class"),Ik=lt("noneditable_regexp"),_y=lt("preserve_cdata"),Vp=lt("highlight_on_focus"),bb=lt("xss_sanitization"),Up=lt("init_content_sync"),ch=e=>e.options.isSet("text_patterns_lookup"),Ay=e=>He.explode(e.options.get("font_size_style_values")),Oy=e=>He.explode(e.options.get("font_size_classes")),kx=e=>e.options.get("encoding")==="xml",Dy=e=>He.explode(e.options.get("images_file_types")),_x=lt("table_tab_navigation"),ih=lt("details_initial_state"),wd=lt("details_serialized_state"),lh=lt("sandbox_iframes"),xd=e=>e.options.get("sandbox_iframes_exclusions"),Ed=lt("convert_unsafe_embeds"),Ax=lt("license_key"),Zp=lt("api_key"),Ki=lt("disabled"),Ox=lt("user_id"),Dx=lt("fetch_users"),Ry=lt("lists_indent_on_tab"),My=e=>N.from(e.options.get("list_max_depth")),Rx=Ye,Mx=ze,Lk=e=>{const t=e.parentNode;t&&t.removeChild(e)},Bx=e=>{const t=ja(e);return{count:e.length-t.length,text:t}},$f=e=>{let t;for(;(t=e.data.lastIndexOf(Js))!==-1;)e.deleteData(t,1)},By=(e,t)=>(If(e),t),Nx=(e,t)=>{const o=Bx(e.data.substr(0,t.offset())),r=Bx(e.data.substr(t.offset()));return(o.text+r.text).length>0?($f(e),Ce(e,t.offset()-o.count)):t},Ny=(e,t)=>{const o=t.container(),r=ea(Bo(o.childNodes),e).map(c=>c<t.offset()?Ce(o,t.offset()-1):t).getOr(t);return If(e),r},Py=(e,t)=>Mx(e)&&t.container()===e?Nx(e,t):By(e,t),$y=(e,t)=>t.container()===e.parentNode?Ny(e,t):By(e,t),Fk=(e,t)=>Ce.isTextPosition(t)?Py(e,t):$y(e,t),If=e=>{Rx(e)&&Uc(e)&&(N0(e)?e.removeAttribute("data-mce-caret"):Lk(e)),Mx(e)&&($f(e),e.data.length===0&&Lk(e))},Lf=$o,vb=hi,yb=Og,Px="*[contentEditable=false],video,audio,embed,object",Hk=(e,t,o)=>{const r=vp(t.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=t.offsetWidth-t.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},$x=e=>{var o,r;const t=_r(q.fromDom(e),Px);for(let c=0;c<t.length;c++){const u=t[c].dom;let f=u.previousSibling;if(Cm(f)){const b=f.data;b.length===1?(o=f.parentNode)==null||o.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Cc(f)&&(f.data.length===1?(r=f.parentNode)==null||r.removeChild(f):f.deleteData(0,1))}},jt=(e,t,o,r)=>{const c=Mc();let u,f;const b=Ns(e),v=e.dom,w=(H,j)=>{let oe;if(k(),yb(j))return null;if(o(j)){const se=L2(b,j,H),ae=Hk(t,j,H);v.setStyle(se,"top",ae.top),v.setStyle(se,"caret-color","transparent"),f=se;const Se=v.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});v.setStyles(Se,{...ae}),v.add(t,Se),c.set({caret:Se,element:j,before:H}),H&&v.addClass(Se,"mce-visual-caret-before"),O(),oe=j.ownerDocument.createRange(),oe.setStart(se,0),oe.setEnd(se,0)}else return f=Ow(j,H),oe=j.ownerDocument.createRange(),Zc(f.nextSibling)?(oe.setStart(f,0),oe.setEnd(f,0)):(oe.setStart(f,1),oe.setEnd(f,1)),oe;return oe},k=()=>{$x(t),f&&(If(f),f=null),c.on(H=>{v.remove(H.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},O=()=>{u=window.setInterval(()=>{c.on(H=>{r()?v.toggleClass(H.caret,"mce-visual-caret-hidden"):v.addClass(H.caret,"mce-visual-caret-hidden")})},500)},R=()=>{c.on(H=>{const j=Hk(t,H.element,H.before);v.setStyles(H.caret,{...j})})},I=()=>clearInterval(u),U=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:c.isSet,show:w,hide:k,getCss:U,reposition:R,destroy:I}},Cb=()=>Nn.browser.isFirefox(),Zc=e=>Lf(e)||vb(e),Wp=e=>(Zc(e)||za(e)&&Cb())&&Ri(q.fromDom(e)).exists(Ii),zk=gc,Sb=$o,Vk=hi,Iy=u0("display","block table table-cell table-row table-caption list-item"),Ly=Uc,jp=pd,$l=Ye,uh=ze,Uk=Fo,Ff=(e,t)=>{let o;for(;o=e(t);)if(!jp(o))return o;return null},Gp=(e,t,o,r,c)=>{const u=new fs(e,r),f=Sb(e)||jp(e);let b;if(Su(t)){if(f&&(b=Ff(u.prev.bind(u),!0),o(b)))return b;for(;b=Ff(u.prev.bind(u),c);)if(o(b))return b}if(Rf(t)){if(f&&(b=Ff(u.next.bind(u),!0),o(b)))return b;for(;b=Ff(u.next.bind(u),c);)if(o(b))return b}return null},wb=(e,t)=>{const o=c=>zk(c.dom),r=c=>c.dom===t;return gu(q.fromDom(e),o,r).map(c=>c.dom).getOr(t)},er=e=>Ye(e)&&vs(q.fromDom(e),"position")==="absolute",Zk=(e,t)=>e.parentNode!==t,Fy=(e,t)=>Sb(e)&&er(e)&&Zk(e,t),Dm=(e,t)=>{for(;e&&e!==t;){if(Iy(e)&&!Fy(e,t))return e;e=e.parentNode}return null},_u=(e,t,o)=>Dm(e.container(),o)===Dm(t.container(),o),Hy=(e,t)=>{if(!t)return N.none();const o=t.container(),r=t.offset();return $l(o)?N.from(o.childNodes[r+e]):N.none()},Ix=(e,t)=>{const r=(t.ownerDocument??document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},Wk=(e,t,o)=>Dm(t,e)===Dm(o,e),xb=(e,t,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==t;){let u=c[r];if(u&&Ly(u)&&(u=u[r]),Sb(u)||Vk(u)){if(Wk(t,u,c))return u;break}if(Uk(u))break;c=c.parentNode}return null},qp=Me(Ix,!0),Rm=Me(Ix,!1),Eb=(e,t,o)=>{let r;const c=Me(xb,!0,t),u=Me(xb,!1,t),f=o.startContainer,b=o.startOffset;if(pd(f)){const v=uh(f)?f.parentNode:f,w=v.getAttribute("data-mce-caret");if(w==="before"&&(r=v.nextSibling,Wp(r)))return qp(r);if(w==="after"&&(r=v.previousSibling,Wp(r)))return Rm(r)}if(!o.collapsed)return o;if(ze(f)){if(Ly(f)){if(e===1){if(r=u(f),r)return qp(r);if(r=c(f),r)return Rm(r)}if(e===-1){if(r=c(f),r)return Rm(r);if(r=u(f),r)return qp(r)}return o}if(Cm(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?qp(r):o;if(Cc(f)&&b<=1)return e===-1&&(r=c(f),r)?Rm(r):o;if(b===f.data.length)return r=u(f),r?qp(r):o;if(b===0)return r=c(f),r?Rm(r):o}return o},Tb=(e,t)=>Hy(e?0:-1,t).filter(Sb),Mm=(e,t,o)=>{const r=Eb(e,t,o);return e===-1?Ce.fromRangeStart(r):Ce.fromRangeEnd(r)},Kp=e=>N.from(e.getNode()).map(q.fromDom),zy=e=>N.from(e.getNode(!0)).map(q.fromDom),kb=(e,t)=>{let o=t;for(;o=e(o);)if(o.isVisible())return o;return o},Il=(e,t)=>{const o=_u(e,t);return!o&&Xo(e.getNode())?!0:o},Lx=$o,Au=ze,Vy=Ye,_b=Xo,dh=Fo,Yp=Bw,Ab=F0,jk=(e,t)=>{const o=[];let r=e;for(;r&&r!==t;)o.push(r),r=r.parentNode;return o},Fx=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Ob=(e,t)=>{if(Rf(e)){if(dh(t.previousSibling)&&!Au(t.previousSibling))return Ce.before(t);if(Au(t))return Ce(t,0)}if(Su(e)){if(dh(t.nextSibling)&&!Au(t.nextSibling))return Ce.after(t);if(Au(t))return Ce(t,t.data.length)}return Su(e)?_b(t)?Ce.before(t):Ce.after(t):Ce.before(t)},Gk=(e,t)=>{const o=t.nextSibling;return o&&dh(o)?Au(o)?Ce(o,0):Ce.before(o):Uy(1,Ce.after(t),e)},Uy=(e,t,o)=>{let r,c,u,f;if(!Vy(o)||!t)return null;if(t.isEqual(Ce.after(o))&&o.lastChild){if(f=Ce.after(o.lastChild),Su(e)&&dh(o.lastChild)&&Vy(o.lastChild))return _b(o.lastChild)?Ce.before(o.lastChild):f}else f=t;const b=f.container();let v=f.offset();if(Au(b)){if(Su(e)&&v>0)return Ce(b,--v);if(Rf(e)&&v<b.length)return Ce(b,++v);r=b}else{if(Su(e)&&v>0&&(c=Fx(b,v-1),dh(c)))return!Yp(c)&&(u=Gp(c,e,Ab,c),u)?Au(u)?Ce(u,u.data.length):Ce.after(u):Au(c)?Ce(c,c.data.length):Ce.before(c);if(Rf(e)&&v<b.childNodes.length&&(c=Fx(b,v),dh(c)))return _b(c)?Gk(o,c):!Yp(c)&&(u=Gp(c,e,Ab,c),u)?Au(u)?Ce(u,0):Ce.before(u):Au(c)?Ce(c,0):Ce.after(c);r=c||f.getNode()}if(r&&(Rf(e)&&f.isAtEnd()||Su(e)&&f.isAtStart())&&(r=Gp(r,e,et,o,!0),Ab(r,o)))return Ob(e,r);c=r&&Gp(r,e,Ab,o);const w=si(ge(jk(b,o),Lx));return w&&(!c||!w.contains(c))?(Rf(e)?f=Ce.after(w):f=Ce.before(w),f):c?Ob(e,c):null},Ll=e=>({next:t=>Uy(1,t,e),prev:t=>Uy(-1,t,e)}),Zy=(e,t,o)=>{const r=e?Ce.before(o):Ce.after(o);return Wc(e,t,r)},qk=e=>Xo(e)?Ce.before(e):Ce.after(e),Hx=e=>Ce.isTextPosition(e)?e.offset()===0:Fo(e.getNode()),zx=e=>{if(Ce.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return Fo(e.getNode(!0))},Vx=(e,t)=>!Ce.isTextPosition(e)&&!Ce.isTextPosition(t)&&e.getNode()===t.getNode(!0),Kk=e=>!Ce.isTextPosition(e)&&Xo(e.getNode()),Do=(e,t,o)=>e?!Vx(t,o)&&!Kk(t)&&zx(t)&&Hx(o):!Vx(o,t)&&Hx(t)&&zx(o),Wc=(e,t,o)=>{const r=Ll(t);return N.from(e?r.next(o):r.prev(o))},mh=(e,t,o)=>Wc(e,t,o).bind(r=>_u(o,r,t)&&Do(e,o,r)?Wc(e,t,r):N.some(r)),Ci=(e,t,o,r)=>mh(e,t,o).bind(c=>r(c)?Ci(e,t,c,r):N.some(c)),l=(e,t)=>{const o=e?t.firstChild:t.lastChild;return ze(o)?N.some(Ce(o,e?0:o.data.length)):o?Fo(o)?N.some(e?Ce.before(o):qk(o)):Zy(e,t,o):N.none()},m=Me(Wc,!0),p=Me(Wc,!1),y=Me(l,!0),E=Me(l,!1),A="_mce_caret",M=e=>Ye(e)&&e.id===A,L=(e,t)=>{let o=t;for(;o&&o!==e;){if(M(o))return o;o=o.parentNode}return null},Z=e=>Y(e.start),Q=e=>Kt(e,"rng"),ce=e=>Kt(e,"id"),Fe=e=>Kt(e,"name"),at=e=>He.isArray(e.start),tt=e=>!Fe(e)&&an(e.forward)?e.forward:!0,Le=(e,t)=>(Ye(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),je=(e,t)=>{const o=N.from(Pw(e.getRoot(),t.start)),r=N.from(Pw(e.getRoot(),t.end));return Cs(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:tt(t)}})},Pe=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(Js);e.appendChild(r),t.setStart(r,0),t.setEnd(r,0)},Mt=e=>!e.hasChildNodes(),Jt=(e,t)=>E(e).fold(De,o=>(t.setStart(o.container(),o.offset()),t.setEnd(o.container(),o.offset()),!0)),mt=(e,t,o)=>Mt(t)&&L(e,t)?(Pe(t,o),!0):!1,Wn=(e,t,o,r)=>{const c=o[t?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let v=c.length-1;f&&v>=1;v--){const w=f.childNodes;if(mt(u,f,r))return!0;if(c[v]>w.length-1)return mt(u,f,r)?!0:Jt(f,r);f=w[c[v]]}ze(f)&&(b=Math.min(c[0],f.data.length)),Ye(f)&&(b=Math.min(c[0],f.childNodes.length)),t?r.setStart(f,b):r.setEnd(f,b)}return!0},Gt=e=>ze(e)&&e.data.length>0,Xn=(e,t,o)=>{const r=e.get(o.id+"_"+t),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(t==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Gt(r.nextSibling)?(f=r.nextSibling,b=0):Gt(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Gt(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const v=r.previousSibling,w=r.nextSibling;He.each(He.grep(r.childNodes),O=>{ze(O)&&(O.data=O.data.replace(/\uFEFF/g,""))});let k;for(;k=e.get(o.id+"_"+t);)e.remove(k,!0);if(ze(w)&&ze(v)&&!Nn.browser.isOpera()){const O=v.data.length;v.appendData(w.data),e.remove(w),f=v,b=O}}return N.some(Ce(f,b))}else return N.none()},ws=(e,t)=>{const o=e.createRng();return Wn(e,!0,t,o)&&Wn(e,!1,t,o)?N.some({range:o,forward:tt(t)}):N.none()},jc=(e,t)=>{const o=Xn(e,"start",t),r=Xn(e,"end",t);return Cs(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(Le(e,c.container()),c.offset()),f.setEnd(Le(e,u.container()),u.offset()),{range:f,forward:tt(t)}})},Hf=(e,t)=>N.from(e.select(t.name)[t.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Bm=(e,t)=>{const o=e.dom;if(t){if(at(t))return ws(o,t);if(Z(t))return je(o,t);if(ce(t))return jc(o,t);if(Fe(t))return Hf(o,t);if(Q(t))return N.some({range:t.rng,forward:tt(t)})}return N.none()},zf=(e,t,o)=>Te(e,t,o),io=(e,t)=>{Bm(e,t).each(({range:o,forward:r})=>{e.setRng(o,r)})},is=e=>Ye(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",_a=(e=>t=>e===t)(ss),fr=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Td=e=>!fr(e)&&!_a(e)&&!oi(e),ia=e=>{const t=[];if(e)for(let o=0;o<e.rangeCount;o++)t.push(e.getRangeAt(o));return t},Wy=e=>Vn(e,t=>{const o=Qs(t);return o?[q.fromDom(o)]:[]}),Db=e=>ia(e).length>1,kd=e=>ge(Wy(e),Ef),qr=e=>_r(e,"td[data-mce-selected],th[data-mce-selected]"),Ux=(e,t)=>{const o=qr(t);return o.length>0?o:kd(e)},ft=e=>Ux(ia(e.selection.getSel()),q.fromDom(e.getBody())),qa=(e,t)=>Os(e,"table",t),Yk=e=>{const t=e.startContainer,o=e.startOffset;return ze(t)?o===0?N.some(q.fromDom(t)):N.none():N.from(t.childNodes[o]).map(q.fromDom)},Zx=e=>{const t=e.endContainer,o=e.endOffset;return ze(t)?o===t.data.length?N.some(q.fromDom(t)):N.none():N.from(t.childNodes[o-1]).map(q.fromDom)},Rb=e=>Sr(e).fold(Xe([e]),t=>[e].concat(Rb(t))),jy=e=>zs(e).fold(Xe([e]),t=>mn(t)==="br"?ii(t).map(o=>[e].concat(jy(o))).getOr([]):[e].concat(jy(t))),Vf=(e,t)=>Cs(Yk(t),Zx(t),(o,r)=>{const c=Qn(Rb(e),Me(xn,o)),u=Qn(jy(e),Me(xn,r));return c.isSome()&&u.isSome()}).getOr(!1),Wx=(e,t,o,r)=>{const c=o,u=new fs(o,c),f=tu(e.schema.getMoveCaretBeforeOnEnterElements(),(v,w)=>!vt(["td","th","table"],w.toLowerCase()));let b=o;do{if(ze(b)&&He.trim(b.data).length!==0){r?t.setStart(b,0):t.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?t.setStartBefore(b):b.nodeName==="BR"?t.setEndBefore(b):t.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?t.setStart(c,0):t.setEnd(c,c.childNodes.length))},Gy=e=>{const t=e.selection.getSel();return ve(t)&&t.rangeCount>0},qy=(e,t)=>{const o=ft(e);o.length>0?le(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),t(u,!0)}):t(e.selection.getRng(),!1)},jx=(e,t,o)=>{const r=X2(e,t);o(r),e.moveToBookmark(r)},Ky=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&t(e.startContainer.childNodes[e.startOffset]),JL=e=>Ky(e,Ha),QL=e=>Ky(e,ze),eF=e=>Ky(e,ep),Yy=e=>lr(e==null?void 0:e.nodeType),Xy=e=>Ye(e)&&!is(e)&&!M(e)&&!dm(e),Y5=(e,t)=>{if(Xy(t)&&!/^(TD|TH)$/.test(t.nodeName)){const o=e.getAttrib(t,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},X5=(e,t,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=$o(u);jx(r,!0,()=>{t()}),f&&$o(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&J5(c,r)},J5=(e,t)=>{const o=t.getRng(),{startContainer:r,startOffset:c}=o,u=t.getNode();if(!Y5(e,u)&&Ye(r)){const f=r.childNodes,b=e.getRoot();let v;if(c<f.length){const w=f[c];v=new fs(w,e.getParent(w,e.isBlock)??b)}else{const w=f[f.length-1];v=new fs(w,e.getParent(w,e.isBlock)??b),v.next(!0)}for(let w=v.current();w;w=v.next()){if(e.getContentEditable(w)==="false")return;if(ze(w)&&!Xk(w)){o.setStart(w,0),t.setRng(o);return}}}},Q5=(e,t,o)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Ye(e)||!Xk(e))return e}},Jy=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||as(e,t),Mb=(e,t,o)=>e.schema.isValidChild(t,o),Xk=(e,t=!1)=>{if(ve(e)&&ze(e)){const o=t?e.data.replace(/ /g," "):e.data;return kg(o)}else return!1},tF=e=>ve(e)&&ze(e)&&e.length===0,nF=(e,t)=>{const o="[data-mce-cef-wrappable]",r=q5(e),c=Xu(r)?o:`${o},${r}`;return $c(q.fromDom(t),c)},eM=(e,t)=>{const o=e.dom;return Xy(t)&&o.getContentEditable(t)==="false"&&nF(e,t)&&o.select('[contenteditable="true"]',t).length===0},Uf=(e,t)=>ne(e)?e(t):(ve(t)&&(e=e.replace(/%(\w+)/g,(o,r)=>t[r]||o)),e),Qy=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Gx=(e,t)=>{if(gn(e))return null;{let o=String(e);return(t==="color"||t==="backgroundColor")&&(o=bi(o)),t==="fontWeight"&&e===700&&(o="bold"),t==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},eC=(e,t,o)=>{const r=e.getStyle(t,o);return Gx(r,o)},tM=(e,t)=>{let o;return e.getParent(t,r=>Ye(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},qx=(e,t,o)=>e.getParents(t,o,e.getRoot()),Jk=(e,t,o)=>{const r=e.formatter.get(t);return ve(r)&&zn(r,o)},Kx=(e,t)=>Jk(e,t,r=>{const c=u=>ne(u)||u.length>1&&u.charAt(0)==="%";return zn(["styles","attributes"],u=>vo(r,u).exists(f=>{const b=dn(f)?f:Ia(f);return zn(b,c)}))}),nM=(e,t,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>tu(u,(f,b)=>zn(r,v=>v===b));return Jk(e,t,u=>{const f=c(u);return Jk(e,o,b=>{const v=c(b);return ef(f,v)})})},_d=e=>Wo(e,"block"),oF=e=>_d(e)&&e.wrapper===!0,sF=e=>_d(e)&&e.wrapper!==!0,Ou=e=>Wo(e,"selector"),Kr=e=>Wo(e,"inline"),fY=e=>Ou(e)&&Kr(e)&&ro(vo(e,"mixed"),!0),Qk=e=>Ou(e)&&e.expand!==!1&&!Kr(e),gY=e=>{const t=[];let o=e;for(;o;){if(ze(o)&&o.data!==Js||o.childNodes.length>1)return[];Ye(o)&&t.push(o),o=o.firstChild}return t},oM=e=>gY(e).length>0,e_=e=>M(e.dom)&&oM(e.dom),tC=is,sM=qx,Ho=Xk,t_=Jy,Yx=e=>Xo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,nC=(e,t)=>{let o=t;for(;o;){if(Ye(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:t;o=o.parentNode}return t},Nm=(e,t,o,r)=>{const c=t.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},Xx=(e,t,o)=>Nm(e,t,o,r=>_a(r)||fr(r)),Bb=(e,t,o)=>Nm(e,t,o,Td),n_=(e,t,o,r,c,u)=>{let f;const b=e.getParent(o,O=>ud(O)||e.isBlock(O)),v=ve(b)?b:t,w=(O,R,I)=>{const U=yu(e),H=c?U.backwards:U.forwards;return N.from(H(O,R,(j,oe)=>tC(j.parentNode)?-1:(f=j,I(c,j,oe)),v))};return w(o,r,Xx).bind(O=>u?w(O.container,O.offset+(c?-1:0),Bb):N.some(O)).orThunk(()=>f?N.some({container:f,offset:c?0:f.length}):N.none())},rM=(e,t,o,r,c)=>{const u=r[c];ze(r)&&Xu(r.data)&&u&&(r=u);const f=sM(e,r);for(let b=0;b<f.length;b++)for(let v=0;v<t.length;v++){const w=t[v];if(!(ve(w.collapsed)&&w.collapsed!==o.collapsed)&&Ou(w)&&e.is(f[b],w.selector))return f[b]}return r},aM=(e,t,o,r)=>{let c=o;const u=e.getRoot(),f=t[0];if(_d(f)&&(c=f.wrapper?null:e.getParent(o,f.block,u)),!c){const b=e.getParent(o,"LI,TD,TH,SUMMARY")??u;c=e.getParent(ze(o)?o.parentNode:o,v=>v!==u&&t_(e.schema,v),b)}if(c&&_d(f)&&f.wrapper&&(c=sM(e,c,"ul,ol").reverse()[0]||c),!c)for(c=o;c&&c[r]&&!e.isBlock(c[r])&&(c=c[r],!Qy(c,"br")););return c||o},o_=(e,t,o,r)=>{const c=o.parentNode;return ve(o[r])?!1:c===t||gn(c)||e.isBlock(c)?!0:o_(e,t,c,r)},Jx=(e,t,o,r,c,u)=>{let f=o;const b=c?"previousSibling":"nextSibling",v=e.getRoot();if(ze(o)&&!Ho(o)&&(c?r>0:r<o.data.length))return o;for(;f;){if(ud(f))return o;if(!t[0].block_expand&&e.isBlock(f))return u?f:o;for(let w=f[b];w;w=w[b]){const k=ze(w)&&!o_(e,v,w,b);if(!tC(w)&&!Yx(w)&&!Ho(w,k))return f}if(f===v||f.parentNode===v){o=f;break}f=f.parentNode}return o},Qx=e=>tC(e.parentNode)||tC(e),Pm=(e,t,o,r={})=>{const{includeTrailingSpace:c=!1,expandToBlock:u=!0}=r,f=e.getParent(t.commonAncestorContainer,I=>ud(I)),b=ve(f)?f:e.getRoot();let{startContainer:v,startOffset:w,endContainer:k,endOffset:O}=t;const R=o[0];return Ye(v)&&v.hasChildNodes()&&(v=xm(v,w),ze(v)&&(w=0)),Ye(k)&&k.hasChildNodes()&&(k=xm(k,t.collapsed?O:O-1),ze(k)&&(O=k.data.length)),v=nC(e,v),k=nC(e,k),Qx(v)&&(v=tC(v)?v:v.parentNode,t.collapsed?v=v.previousSibling||v:v=v.nextSibling||v,ze(v)&&(w=t.collapsed?v.length:0)),Qx(k)&&(k=tC(k)?k:k.parentNode,t.collapsed?k=k.nextSibling||k:k=k.previousSibling||k,ze(k)&&(O=t.collapsed?0:k.length)),t.collapsed&&(n_(e,b,v,w,!0,c).each(({container:H,offset:j})=>{v=H,w=j}),n_(e,b,k,O,!1,c).each(({container:H,offset:j})=>{k=H,O=j})),(Kr(R)||R.block_expand)&&((!Kr(R)||!ze(v)||w===0)&&(v=Jx(e,o,v,w,!0,u)),(!Kr(R)||!ze(k)||O===k.data.length)&&(k=Jx(e,o,k,O,!1,u))),Qk(R)&&(v=rM(e,o,t,v,"previousSibling"),k=rM(e,o,t,k,"nextSibling")),(_d(R)||Ou(R))&&(v=aM(e,o,v,"previousSibling"),k=aM(e,o,k,"nextSibling"),_d(R)&&(e.isBlock(v)||(v=Jx(e,o,v,w,!0,u),ze(v)&&(w=0)),e.isBlock(k)||(k=Jx(e,o,k,O,!1,u),ze(k)&&(O=k.data.length)))),Ye(v)&&v.parentNode&&(w=e.nodeIndex(v),v=v.parentNode),Ye(k)&&k.parentNode&&(O=e.nodeIndex(k)+1,k=k.parentNode),{startContainer:v,startOffset:w,endContainer:k,endOffset:O}},Du=(e,t,o)=>{const r=t.startOffset,c=xm(t.startContainer,r),u=t.endOffset,f=xm(t.endContainer,u-1),b=H=>{const j=H[0];ze(j)&&j===c&&r>=j.data.length&&H.splice(0,1);const oe=H[H.length-1];return u===0&&H.length>0&&oe===f&&ze(oe)&&H.splice(H.length-1,1),H},v=(H,j,oe)=>{const se=[];for(;H&&H!==oe;H=H[j])se.push(H);return se},w=(H,j)=>e.getParent(H,oe=>oe.parentNode===j,j),k=(H,j,oe)=>{const se=oe?"nextSibling":"previousSibling";for(let ae=H,Se=ae.parentNode;ae&&ae!==j;ae=Se){Se=ae.parentNode;const Oe=v(ae===H?ae:ae[se],se);Oe.length&&(oe||Oe.reverse(),o(b(Oe)))}};if(c===f)return o(b([c]));const O=e.findCommonAncestor(c,f)??e.getRoot();if(e.isChildOf(c,f))return k(c,O,!0);if(e.isChildOf(f,c))return k(f,O);const R=w(c,O)||c,I=w(f,O)||f;k(c,R,!0);const U=v(R===c?R:R.nextSibling,"nextSibling",I===f?I.nextSibling:I);U.length&&o(b(U)),k(f,I)},Xp=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],cM=e=>qn(e)&&aa(e)===Js,rF=(e,t,o,r)=>Ri(t).fold(()=>"skipping",c=>r==="br"||cM(t)?"valid":B2(t)?"existing":M(t.dom)?"caret":zn(Xp,u=>$c(t,u))?"valid-block":!Mb(e,o,r)||!Mb(e,mn(c),o)?"invalid-child":"valid"),aF=(e,t)=>{const o=Pm(e.dom,t,[{inline:"span"}]);t.setStart(o.startContainer,o.startOffset),t.setEnd(o.endContainer,o.endOffset),e.selection.setRng(t)},iM=(e,t,o,r,c,u)=>{const{uid:f=t,...b}=o;Fc(e,bm()),rs(e,`${vu()}`,f),rs(e,`${Vi()}`,r);const{attributes:v={},classes:w=[]}=c(f,b);if(Tr(e,v),Xh(e,w),u){w.length>0&&rs(e,`${Zg()}`,w.join(","));const k=bt(v);k.length>0&&rs(e,`${k0()}`,k.join(","))}},cF=e=>{or(e,bm()),Vs(e,`${vu()}`),Vs(e,`${Vi()}`),Vs(e,`${Ug()}`);const t=Ni(e,`${k0()}`).map(r=>r.split(",")).getOr([]),o=Ni(e,`${Zg()}`).map(r=>r.split(",")).getOr([]);le(t,r=>Vs(e,r)),qS(e,o),Vs(e,`${Zg()}`),Vs(e,`${k0()}`)},lM=(e,t,o,r,c)=>{const u=q.fromTag("span",e);return iM(u,t,o,r,c,!1),u},iF=(e,t,o,r,c,u)=>{const f=[],b=lM(e.getDoc(),o,u,r,c),v=Mc(),w=()=>{v.clear()},k=()=>v.get().getOrThunk(()=>{const U=sa(b);return f.push(U),v.set(U),U}),O=U=>{le(U,R)},R=U=>{switch(rF(e,U,"span",mn(U))){case"invalid-child":{w();const j=ms(U);O(j),w();break}case"valid-block":{w(),iM(U,o,u,r,c,!0);break}case"valid":{const j=k();Lc(U,j);break}}},I=U=>{const H=Rt(U,q.fromDom);O(H)};return Du(e.dom,t,U=>{w(),I(U)}),f},uM=(e,t,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=ft(e).length>0,b=_s("mce-annotation");if(u.collapsed&&!f&&aF(e,u),c.getRng().collapsed&&!f){const v=lM(e.getDoc(),b,r,t,o.decorate);sd(v,ss),c.getRng().insertNode(v.dom),c.select(v.dom)}else jx(c,!1,()=>{qy(e,v=>{iF(e,v,b,t,o.decorate,r)})})})},dM=e=>{const t=O0();pp(e,t);const o=A0(e,t),r=lu("span"),c=u=>{le(u,f=>{r(f)?ui(f):cF(f)})};return{register:(u,f)=>{t.register(u,f)},annotate:(u,f)=>{t.lookup(u).each(b=>{uM(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{_0(e,N.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();hn(hd(e,u),(b,v)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=hd(e,u);return cc(f,b=>Rt(b,v=>v.dom))}}},Nb=e=>({getBookmark:Me(zf,e),moveToBookmark:Me(io,e)});Nb.isBookmarkNode=is;const mM=(e,t,o)=>o.collapsed?!1:zn(o.getClientRects(),r=>H2(r,e,t)),lF=(e,t)=>{const o=qn(t)?aa(t).length:ms(t).length+1;return e>o?o:e<0?0:e},uF=e=>im.range(e.start,lF(e.soffset,e.start),e.finish,lF(e.foffset,e.finish)),Rr=(e,t)=>!l0(t.dom)&&(ai(e,t)||xn(e,t)),oC=e=>t=>Rr(e,t.start)&&Rr(e,t.finish),la=e=>e.inline||Nn.browser.isFirefox(),Ru=e=>im.range(q.fromDom(e.startContainer),e.startOffset,q.fromDom(e.endContainer),e.endOffset),dF=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?N.none():N.from(t.getRangeAt(0))).map(Ru)},fM=e=>{const t=nd(e);return dF(t.dom).filter(oC(e))},mF=(e,t)=>N.from(t).filter(oC(e)).map(uF),s_=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),N.some(t)}catch{return N.none()}},eE=e=>{const t=la(e)?fM(q.fromDom(e.getBody())):N.none();e.bookmark=t.isSome()?t:e.bookmark},tE=e=>(e.bookmark?e.bookmark:N.none()).bind(o=>mF(q.fromDom(e.getBody()),o)).bind(s_),fF=e=>{tE(e).each(t=>e.selection.setRng(t))},gM={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},Yi=(e,t)=>(lr(t)||(t=0),window.setTimeout(e,t)),wc=(e,t)=>(lr(t)||(t=0),window.setInterval(e,t)),Mu={setEditorTimeout:(e,t,o)=>Yi(()=>{e.removed||t()},o),setEditorInterval:(e,t,o)=>{const r=wc(()=>{e.removed?window.clearInterval(r):t()},o);return r}},Ad=e=>e.type==="nodechange"&&e.selectionChange,r_=(e,t)=>{const o=()=>{t.throttle()};Tn.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Tn.DOM.unbind(document,"mouseup",o)})},gF=(e,t)=>{e.on("mouseup touchend",o=>{t.throttle()})},hF=(e,t)=>{gF(e,t),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Ad(o)||eE(e)})},hM=e=>{const t=ot(()=>{eE(e)},0);e.on("init",()=>{e.inline&&r_(e,t),hF(e,t)}),e.on("remove",()=>{t.cancel()})};let Pb;const nE=Tn.DOM,pF=e=>Ye(e)&&gM.isEditorUIElement(e),sC=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},oE=(e,t)=>{const o=ah(e);return nE.getParent(t,c=>pF(c)||(o?e.dom.is(c,o):!1))!==null},a_=e=>{try{const t=wr(q.fromDom(e.getElement()));return wl(t).fold(()=>document.body,o=>o.dom)}catch{return document.body}},bF=(e,t)=>{const o=t.editor;hM(o);const r=(c,u)=>{if(Vp(c)&&c.inline!==!0){const f=q.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;sC(a_(o))&&r(o,Fc),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Mu.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!sC(a_(o))||c!==o)&&r(o,or),!oE(o,a_(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Pb||(Pb=c=>{const u=e.activeEditor;u&&Jv(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!oE(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},nE.bind(document,"focusin",Pb))},vF=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Pb&&(nE.unbind(document,"focusin",Pb),Pb=null)},pM=e=>{e.on("AddEditor",Me(bF,e)),e.on("RemoveEditor",Me(vF,e))},c_=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="true"),bM=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="false")!==null,i_=e=>e.collapsed?N.from(xm(e.startContainer,e.startOffset)).map(q.fromDom):N.none(),yF=(e,t)=>i_(t).bind(o=>R0(o)?N.some(o):ai(e,o)?N.none():N.some(e)),CF=(e,t)=>{yF(q.fromDom(e.getBody()),t).bind(o=>y(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},l_=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},SF=e=>od(e)||l3(e).isSome(),vM=e=>ve(e.iframeElement)&&od(q.fromDom(e.iframeElement)),wF=e=>{const t=e.getBody();return t&&SF(q.fromDom(t))},xF=e=>{const t=wr(q.fromDom(e.getElement()));return wl(t).filter(o=>!sC(o.dom)&&oE(e,o.dom)).isSome()},$b=e=>e.inline?wF(e):vM(e),yM=e=>$b(e)||xF(e),pY=e=>{const t=e.selection,o=e.getBody();let r=t.getRng();e.quirks.refreshContentEditable();const c=f=>{tE(f).each(b=>{f.selection.setRng(b),r=b})};!$b(e)&&e.hasEditableRoot()&&c(e);const u=c_(e,t.getNode());if(u&&e.dom.isChildOf(u,o)){bM(e,u)||l_(o),l_(u),e.hasEditableRoot()||c(e),CF(e,r),sE(e);return}e.inline||(Nn.browser.isOpera()||l_(o),e.getWin().focus()),(Nn.browser.isFirefox()||e.inline)&&(l_(o),CF(e,r)),sE(e)},sE=e=>e.editorManager.setActive(e),CM=(e,t)=>{e.removed||(t?sE(e):pY(e))},ct={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ct.metaKeyPressed(e),metaKeyPressed:e=>Nn.os.isMacOS()||Nn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Jp="data-mce-selected",EF=`table,img,figure.image,hr,video,span.mce-preview-object,details,${rw}`,TF=Math.abs,u_=Math.round,SM={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},kF=e=>e.type==="longpress"||e.type.indexOf("touch")===0,_F=(e,t)=>{const o=t.dom,r=t.getDoc(),c=document,u=t.getBody();let f,b,v,w,k,O,R,I,U,H,j,oe,se,ae,Se;const Oe=ke=>ve(ke)&&(gi(ke)||o.is(ke,"figure.image")),Je=ke=>hi(ke)||o.hasClass(ke,"mce-preview-object"),St=(ke,Ge)=>{if(kF(ke)){const ut=ke.touches[0];return Oe(ke.target)&&!mM(ut.clientX,ut.clientY,Ge)}else return Oe(ke.target)&&!mM(ke.clientX,ke.clientY,Ge)},xe=ke=>{const Ge=ke.target;St(ke,t.selection.getRng())&&!ke.isDefaultPrevented()&&t.selection.select(Ge)},me=ke=>o.hasClass(ke,"mce-preview-object")&&ve(ke.firstElementChild)?[ke,ke.firstElementChild]:o.is(ke,"figure.image")?[ke.querySelector("img")]:[ke],Ee=ke=>{const Ge=bx(t);return!Ge||t.mode.isReadOnly()||ke.getAttribute("data-mce-resize")==="false"||ke===t.getBody()?!1:o.hasClass(ke,"mce-preview-object")&&ve(ke.firstElementChild)?$c(q.fromDom(ke.firstElementChild),Ge):$c(q.fromDom(ke),Ge)},Qe=(ke,Ge)=>{if(Je(Ge))return ke.create("img",{src:Nn.transparentSrc});if(za(Ge)){const wn=Zt(w.name,"n")?us:Fs,Qt=Ge.cloneNode(!0);return wn(ke.select("tr",Qt)).each(uo=>{const Jl=ke.select("td,th",uo);ke.setStyle(uo,"height",null),le(Jl,kc=>ke.setStyle(kc,"height",null))}),Qt}else return Ge.cloneNode(!0)},$t=(ke,Ge,ut)=>{ke[Ge]=ut;const wn=400;if(ke.width>wn&&!(Ge==="width"&&ut<wn))ke[Ge]=ut,o.setStyle(ke,Ge,ut);else{const Qt=Ge==="height"?wn*(H??1):wn;ke[Ge]=Qt,o.setStyle(ke,Ge,Qt)}},It=(ke,Ge,ut)=>{if(ve(ut)){const wn=me(ke);le(wn,Qt=>{op(Qt)?$t(Qt,Ge,ut):Qt.style[Ge]||!t.schema.isValid(Qt.nodeName.toLowerCase(),Ge)?o.setStyle(Qt,Ge,ut):o.setAttrib(Qt,Ge,""+ut)})}},_n=(ke,Ge,ut)=>{It(ke,"width",Ge),It(ke,"height",ut)},so=ke=>{let Ge,ut,wn,Qt,uo;Ge=ke.screenX-O,ut=ke.screenY-R,oe=Ge*w[2]+I,se=ut*w[3]+U,oe=oe<5?5:oe,se=se<5?5:se,(Oe(f)||Je(f)||op(f))&&Sk(t)!==!1?wn=!ct.modifierPressed(ke):wn=ct.modifierPressed(ke),wn&&(TF(Ge)>TF(ut)?(se=u_(oe*H),oe=u_(se/H)):(oe=u_(se/H),se=u_(oe*H))),_n(b,oe,se),Qt=w.startPos.x+Ge,uo=w.startPos.y+ut,Qt=Qt>0?Qt:0,uo=uo>0?uo:0,o.setStyles(v,{left:Qt,top:uo,display:"block"}),v.innerHTML=oe+" &times; "+se,Ge=u.scrollWidth-ae,ut=u.scrollHeight-Se,Ge+ut!==0&&o.setStyles(v,{left:Qt-Ge,top:uo-ut}),j||(qw(t,f,I,U,"corner-"+w.name),j=!0)},Ao=()=>{const ke=j;j=!1,ke&&(It(f,"width",oe),It(f,"height",se)),o.unbind(r,"mousemove",so),o.unbind(r,"mouseup",Ao),c!==r&&(o.unbind(c,"mousemove",so),o.unbind(c,"mouseup",Ao)),o.remove(b),o.remove(v),o.remove(k),Vo(f),ke&&(ly(t,f,oe,se,"corner-"+w.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),t.nodeChanged()},Vo=ke=>{jn();const Ge=o.getPos(ke,u),ut=Ge.x,wn=Ge.y,Qt=ke.getBoundingClientRect(),uo=Qt.width||Qt.right-Qt.left,Jl=Qt.height||Qt.bottom-Qt.top;f!==ke&&(Ei(),f=ke,oe=se=0);const kc=t.dispatch("ObjectSelected",{target:ke});Ee(ke)&&!kc.isDefaultPrevented()?hn(SM,(Ql,sl)=>{const Ih=Xc=>{const ig=me(f)[0];O=Xc.screenX,R=Xc.screenY,I=ig.clientWidth,U=ig.clientHeight,H=U/I,w=Ql,w.name=sl,w.startPos={x:uo*Ql[0]+ut,y:Jl*Ql[1]+wn},ae=u.scrollWidth,Se=u.scrollHeight,k=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(k,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Qe(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:ut,top:wn,margin:0}),_n(b,uo,Jl),b.removeAttribute(Jp),u.appendChild(b),o.bind(r,"mousemove",so),o.bind(r,"mouseup",Ao),c!==r&&(o.bind(c,"mousemove",so),o.bind(c,"mouseup",Ao)),v=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},I+" &times; "+U)};let Qa=o.get("mceResizeHandle"+sl);Qa&&o.remove(Qa),Qa=o.add(u,"div",{id:"mceResizeHandle"+sl,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+sl+"-resize; margin:0; padding:0"}),o.bind(Qa,"mousedown",Xc=>{Xc.stopImmediatePropagation(),Xc.preventDefault(),Ih(Xc)}),Ql.elm=Qa,o.setStyles(Qa,{left:uo*Ql[0]+ut-Qa.offsetWidth/2,top:Jl*Ql[1]+wn-Qa.offsetHeight/2})}):Ei(!1)},Pr=ot(Vo,0),Ei=(ke=!0)=>{Pr.cancel(),jn(),f&&ke&&f.removeAttribute(Jp),hn(SM,(Ge,ut)=>{const wn=o.get("mceResizeHandle"+ut);wn&&(o.unbind(wn),o.remove(wn))})},nt=(ke,Ge)=>o.isChildOf(ke,Ge),_t=ke=>{if(j||t.removed||t.composing)return;const Ge=ke.type==="mousedown"?ke.target:e.getNode(),ut=Vr(q.fromDom(Ge),EF).map(Qt=>Qt.dom).filter(Qt=>o.isEditable(Qt.parentElement)||Qt.nodeName==="IMG"&&o.isEditable(Qt)).getOrUndefined(),wn=ve(ut)?o.getAttrib(ut,Jp,"1"):"1";if(le(o.select(`img[${Jp}],hr[${Jp}]`),Qt=>{Qt.removeAttribute(Jp)}),ve(ut)&&nt(ut,u)&&yM(t)){Fn();const Qt=e.getStart(!0);if(nt(Qt,ut)&&nt(e.getEnd(!0),ut)){o.setAttrib(ut,Jp,wn),Pr.throttle(ut);return}}Ei()},jn=()=>{hn(SM,ke=>{ke.elm&&(o.unbind(ke.elm),delete ke.elm)})},Fn=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Fn(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",_t),t.on("keyup compositionend",ke=>{f&&f.nodeName==="TABLE"&&_t(ke)}),t.on("hide blur",Ei),t.on("contextmenu longpress",xe,!0)}),t.on("remove",jn),{isResizable:Ee,showResizeRect:Vo,hideResizeRect:Ei,updateResizeRect:_t,destroy:()=>{Pr.cancel(),f=b=k=null}}},wM=(e,t,o)=>{const r=nd(q.fromDom(o));return a0(r.dom,e,t).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Zf=(e,t)=>ve(e)&&ve(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,AF=(e,t,o)=>{let r=e;for(;r&&r!==t;){if(o(r))return r;r=r.parentNode}return null},d_=(e,t,o)=>AF(e,t,o)!==null,xM=(e,t,o)=>d_(e,t,r=>r.nodeName===o),EM=(e,t)=>Uc(e)&&!d_(e,t,M),m_=(e,t,o)=>{const r=t.parentNode;if(r){const c=new fs(t,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(Xo(u))return!0}return!1},f_=(e,t)=>{var o;return((o=e.previousSibling)==null?void 0:o.nodeName)===t},bY=(e,t)=>{let o=t;for(;o&&o!==e;){if($o(o))return!0;o=o.parentNode}return!1},g_=(e,t,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let v,w;if(!b)return N.none();const k=e.getParent(b,e.isBlock)||u;if(r&&Xo(c)&&t&&e.isEmpty(k))return N.some(Ce(b,e.nodeIndex(c)));const O=new fs(c,k);for(;w=O[r?"prev":"next"]();){if(e.getContentEditableParent(w)==="false"||EM(w,u))return N.none();if(ze(w)&&w.data.length>0)return xM(w,u,"A")?N.none():N.some(Ce(w,r?w.data.length:0));if(e.isBlock(w)||f[w.nodeName.toLowerCase()])return N.none();v=w}return rn(v)?N.none():o&&v?N.some(Ce(v,0)):N.none()},OF=(e,t,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,v=o?r.startOffset:r.endOffset;const w=Ye(b)&&v===b.childNodes.length,k=e.schema.getNonEmptyElements();let O=o;if(Uc(b))return N.none();if(Ye(b)&&v>b.childNodes.length-1&&(O=!1),ld(b)&&(b=c,v=0),b===c){if(O&&(u=b.childNodes[v>0?v-1:0],u&&(Uc(u)||k[u.nodeName]||za(u))))return N.none();if(b.hasChildNodes()){if(v=Math.min(!O&&v>0?v-1:v,b.childNodes.length-1),b=b.childNodes[v],v=ze(b)&&w?b.data.length:0,!t&&b===c.lastChild&&za(b)||bY(c,b)||Uc(b)||np(b))return N.none();if(b.hasChildNodes()&&!za(b)){u=b;const R=new fs(b,c);do{if($o(u)||Uc(u)){f=!1;break}if(ze(u)&&u.data.length>0){v=O?0:u.data.length,b=u,f=!0;break}if(k[u.nodeName.toLowerCase()]&&!g2(u)){v=e.nodeIndex(u),b=u.parentNode,O||v++,f=!0;break}}while(u=O?R.next():R.prev())}}}return t&&(ze(b)&&v===0&&g_(e,w,t,!0,b).each(R=>{b=R.container(),v=R.offset(),f=!0}),Ye(b)&&(u=b.childNodes[v],u||(u=b.childNodes[v-1]),u&&Xo(u)&&!f_(u,"A")&&!m_(e,u,!1)&&!m_(e,u,!0)&&g_(e,w,t,!0,u).each(R=>{b=R.container(),v=R.offset(),f=!0}))),O&&!t&&ze(b)&&v===b.data.length&&g_(e,w,t,!1,b).each(R=>{b=R.container(),v=R.offset(),f=!0}),f&&b?N.some(Ce(b,v)):N.none()},rE=(e,t)=>{const o=t.collapsed,r=t.cloneRange(),c=Ce.fromRangeStart(t);return OF(e,o,!0,r).each(u=>{(!o||!Ce.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||OF(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Zf(t,r)?N.none():N.some(r)},aE=(e,t)=>e.splitText(t),Ib=e=>{let t=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(t===r&&ze(t)){if(o>0&&o<t.data.length)if(r=aE(t,o),t=r.previousSibling,c>o){c=c-o;const u=aE(r,c).previousSibling;t=r=u,c=u.data.length,o=0}else c=0}else if(ze(t)&&o>0&&o<t.data.length&&(t=aE(t,o),o=0),ze(r)&&c>0&&c<r.data.length){const u=aE(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:t,startOffset:o,endContainer:r,endOffset:c}},Od=e=>({walk:(u,f)=>Du(e,u,f),split:Ib,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=Pm(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),v=e.createRng();return v.setStart(b.startContainer,b.startOffset),v.setEnd(b.endContainer,b.endOffset),v}return u},normalize:u=>rE(e,u).fold(De,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Od.compareRanges=Zf,Od.getCaretRangeFromPoint=wM,Od.getSelectedNode=Qs,Od.getNode=xm;const DF=(e,t)=>e.view(t).fold(Xe([]),r=>{const c=e.owner(r),u=DF(e,c);return[r].concat(u)}),vY=(e,t)=>{const o=t.owner(e);return DF(t,o)};var CY=Object.freeze({__proto__:null,view:e=>{var o;return(e.dom===document?N.none():N.from((o=e.dom.defaultView)==null?void 0:o.frameElement)).map(q.fromDom)},owner:e=>Cl(e)});const RF=e=>{const t=G1(),o=t2(t),r=vY(e,CY),c=Kh(e),u=yn(r,(f,b)=>{const v=Kh(b);return{left:f.left+v.left,top:f.top+v.top}},{left:0,top:0});return Tl(u.left+c.left+o.left,u.top+c.top+o.top)},cE=e=>mn(e)==="textarea",MF=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),TM=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},SY=(e,t)=>{const o=ms(e);if(o.length===0||cE(e))return{element:e,offset:t};if(t<o.length&&!cE(o[t]))return{element:o[t],offset:0};{const r=o[o.length-1];return cE(r)?{element:e,offset:t}:mn(r)==="img"?{element:r,offset:1}:qn(r)?{element:r,offset:aa(r).length}:{element:r,offset:ms(r).length}}},kM=(e,t)=>{const o=qh(e),r=d3(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:t}},_M=(e,t)=>{const o=SY(e,t),r=q.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Js+"</span>");return zr(o.element,r),kM(r,()=>xo(r))},BF=e=>kM(q.fromDom(e),Ot),AM=(e,t,o,r)=>{PF(e,(c,u)=>NF(e,t,o,r),o)},OM=(e,t,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(MF(e,u))return;const f=t2(t).top;o(e,t,f,r,c),TM(e,u)},NF=(e,t,o,r)=>{const c=q.fromDom(e.getBody()),u=q.fromDom(e.getDoc());e2(c);const f=_M(q.fromDom(o.startContainer),o.startOffset);OM(e,u,t,f,r),f.cleanup()},DM=(e,t,o,r)=>{const c=q.fromDom(e.getDoc());OM(e,c,o,BF(t),r)},PF=(e,t,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;t(q.fromDom(r),q.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},h_=(e,t,o,r,c)=>{const u=t.pos,f=30;if(r)ZS(u.left,Math.max(0,u.top-f),c);else{const b=u.top-o+t.height+f;ZS(-e.getBody().getBoundingClientRect().left,b,c)}},RM=(e,t,o,r,c,u)=>{const f=r+o,b=c.pos.top,v=c.bottom,w=v-b>=r;b<o?h_(e,c,r,u!==!1,t):b>f?h_(e,c,r,w?u!==!1:u===!0,t):v>f&&!w&&h_(e,c,r,u===!0,t)},MM=(e,t,o,r,c)=>{const u=nd(t).dom.innerHeight;RM(e,t,o,u,r,c)},BM=(e,t,o,r,c)=>{const u=nd(t).dom.innerHeight;RM(e,t,o,u,r,c);const f=RF(r.element),b=fc(window);f.top<b.y?$i(r.element,c!==!1):f.top>b.bottom&&$i(r.element,c===!0)},$F=(e,t,o)=>AM(e,MM,t,o),IF=(e,t,o)=>DM(e,t,MM,o),LF=(e,t,o)=>AM(e,BM,t,o),FF=(e,t,o)=>DM(e,t,BM,o),it=(e,t,o)=>{(e.inline?IF:FF)(e,t,o)},Xi=(e,t,o)=>{(e.inline?$F:LF)(e,t,o)},HF=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),NM=(e,t,o,r,c)=>{const u=o?t.startContainer:t.endContainer,f=o?t.startOffset:t.endOffset;return N.from(u).map(q.fromDom).map(b=>!r||!t.collapsed?Mi(b,c(b,f)).getOr(b):b).bind(b=>ds(b)?N.some(b):Ic(b).filter(ds)).map(b=>b.dom).getOr(e)},iE=(e,t,o=!1)=>NM(e,t,!0,o,(r,c)=>Math.min(cf(r),c)),p_=(e,t,o=!1)=>NM(e,t,!1,o,(r,c)=>c>0?c-1:c),b_=(e,t)=>{const o=e;for(;e&&ze(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||o},v_=(e,t)=>{if(!t)return e;let o=t.startContainer,r=t.endContainer;const c=t.startOffset,u=t.endOffset;let f=t.commonAncestorContainer;t.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),ze(o)&&ze(r)&&(o.length===c?o=b_(o.nextSibling,!0):o=o.parentNode,u===0?r=b_(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=ze(f)?f.parentNode:f;return Ha(b)?b:e},zF=(e,t,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||iE(u,t,t.collapsed),e.isBlock),b=e.getParent(r||p_(u,t,t.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let v;const w=new fs(f,u);for(;(v=w.next())&&v!==b;)e.isBlock(v)&&c.push(v)}return b&&f!==b&&b!==u&&c.push(b),c},PM=(e,t,o)=>N.from(t).bind(r=>N.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(Wx(e,f,r,!0),Wx(e,f,r,!1)),f})),y_=(e,t)=>Rt(t,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),VF={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},lE=(e,t,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==t){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==t;f=f.parent)if(u=f[c],u)return u}},UF=e=>{const t=e.value??"";if(!kg(t))return!1;const o=e.parent;return!(o&&(o.name!=="span"||o.attr("style"))&&/^[ ]+$/.test(t))},$M=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Mr{constructor(t,o){Ie(this,"name");Ie(this,"type");Ie(this,"attributes");Ie(this,"value");Ie(this,"parent");Ie(this,"firstChild");Ie(this,"lastChild");Ie(this,"next");Ie(this,"prev");Ie(this,"raw");this.name=t,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(t,o){const r=new Mr(t,VF[t]||1);return o&&hn(o,(c,u)=>{r.attr(u,c)}),r}replace(t){const o=this;return t.parent&&t.remove(),o.insert(t,o),o.remove(),o}attr(t,o){const r=this;if(!Y(t))return ve(t)&&hn(t,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(t in c.map){delete c.map[t];let u=c.length;for(;u--;)if(c[u].name===t)return c.splice(u,1),r}return r}if(t in c.map){let u=c.length;for(;u--;)if(c[u].name===t){c[u].value=o;break}}else c.push({name:t,value:o});return c.map[t]=o,r}return c.map[t]}}clone(){const t=this,o=new Mr(t.name,t.type),r=t.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=t.value,o}wrap(t){const o=this;return o.parent&&(o.parent.insert(t,o),t.append(o)),o}unwrap(){const t=this;for(let o=t.firstChild;o;){const r=o.next;t.insert(o,t,!0),o=r}t.remove()}remove(){const t=this,o=t.parent,r=t.next,c=t.prev;return o&&(o.firstChild===t?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===t?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),t.parent=t.next=t.prev=null),t}append(t){const o=this;t.parent&&t.remove();const r=o.lastChild;return r?(r.next=t,t.prev=r,o.lastChild=t):o.lastChild=o.firstChild=t,t.parent=o,t}insert(t,o,r){t.parent&&t.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=t:o.prev&&(o.prev.next=t),t.prev=o.prev,t.next=o,o.prev=t):(o===c.lastChild?c.lastChild=t:o.next&&(o.next.prev=t),t.next=o.next,t.prev=o,o.next=t),t.parent=c,t}getAll(t){const o=this,r=[];for(let c=o.firstChild;c;c=lE(c,o))c.name===t&&r.push(c);return r}children(){const t=this,o=[];for(let r=t.firstChild;r;r=r.next)o.push(r);return o}empty(){const t=this;if(t.firstChild){const o=[];for(let c=t.firstChild;c;c=lE(c,t))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,o={},r){const c=this;let u=c.firstChild;if($M(c))return!1;if(u)do{if(u.type===1){if(u.attr("data-mce-bogus"))continue;if(t[u.name]||$M(u))return!1}if(u.type===8||u.type===3&&!UF(u)||u.type===3&&u.parent&&o[u.parent.name]&&kg(u.value??"")||r&&r(u))return!1}while(u=lE(u,c));return!0}walk(t){return lE(this,null,t)}}const ZF=He.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),IM=e=>Y(e.nodeValue)&&e.nodeValue.includes(Js),LM=e=>`${e.length===0?"":`${Rt(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,WF=(e,t)=>t.querySelectorAll(LM(e)),FM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>IM(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),C_=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(IM(t)){const o=t.parentNode;return o&&Kt(ZF,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),uE=e=>FM(e).nextNode()!==null,jF=e=>C_(e).nextNode()!==null,GF=(e,t)=>t.querySelector(LM(e))!==null,qF=(e,t)=>{le(WF(e,t),o=>{const r=q.fromDom(o);Po(r,"data-mce-bogus")==="all"?xo(r):le(e,c=>{Go(r,c)&&Vs(r,c)})})},HM=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},KF=T(HM,FM),YF=T(HM,C_),zM=(e,t)=>{const o=[{condition:Me(GF,t),action:Me(qF,t)},{condition:uE,action:KF},{condition:jF,action:YF}];let r=e,c=!1;return le(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},VM=e=>{const t=_r(e,"[data-mce-bogus]");le(t,o=>{Po(o,"data-mce-bogus")==="all"?xo(o):Ui(o)?(zr(o,q.fromText(Ju)),xo(o)):ui(o)})},UM=e=>{const t=_r(e,"input");le(t,o=>{Vs(o,"name")})},XF=(e,t)=>{const o=Ns(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(r,"")},JF=(e,t)=>{const o=e.getDoc(),r=wr(q.fromDom(e.getBody())),c=q.fromTag("div",o);rs(c,"data-mce-bogus","all"),di(c,{position:"fixed",left:"-9999999px",top:"0"}),sd(c,t.innerHTML),VM(c),UM(c);const u=FS(r);Pn(u,c);const f=ja(c.dom.innerText);return xo(c),f},QF=(e,t,o)=>{let r;return t.format==="raw"?r=He.trim(ja(zM(o,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?r=JF(e,o):t.format==="tree"?r=e.serializer.serialize(o,t):r=XF(e,e.serializer.serialize(o,t)),t.format!=="text"&&!M0(q.fromDom(o))&&Y(r)?He.trim(r):r},eH=(e,t)=>N.from(e.getBody()).fold(Xe(t.format==="tree"?new Mr("body",11):""),o=>QF(e,t,o)),ZM=He.makeMap,S_=e=>{const t=[];e=e||{};const o=e.indent,r=ZM(e.indent_before||""),c=ZM(e.indent_after||""),u=bc.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,v,w)=>{if(o&&r[b]&&t.length>0){const k=t[t.length-1];k.length>0&&k!==`
`&&t.push(`
`)}if(t.push("<",b),v)for(let k=0,O=v.length;k<O;k++){const R=v[k];t.push(" ",R.name,'="',u(R.value,!0),'"')}if(!w||f?t[t.length]=">":t[t.length]=" />",w&&o&&c[b]&&t.length>0){const k=t[t.length-1];k.length>0&&k!==`
`&&t.push(`
`)}},end:b=>{let v;t.push("</",b,">"),o&&c[b]&&t.length>0&&(v=t[t.length-1],v.length>0&&v!==`
`&&t.push(`
`))},text:(b,v)=>{b.length>0&&(t[t.length]=v?b:u(b))},cdata:b=>{t.push("<![CDATA[",b,"]]>")},comment:b=>{t.push("<!--",b,"-->")},pi:(b,v)=>{v?t.push("<?",b," ",u(v),"?>"):t.push("<?",b,"?>"),o&&t.push(`
`)},doctype:b=>{t.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},fh=(e={},t=Ar())=>{const o=S_(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:v=>{o.text(v.value??"",v.raw)},8:v=>{o.comment(v.value??"")},7:v=>{o.pi(v.name,v.value)},10:v=>{o.doctype(v.value??"")},4:v=>{o.cdata(v.value??"")},11:v=>{let w=v;if(w=w.firstChild)do b(w);while(w=w.next)}};o.reset();const b=v=>{var k;const w=f[v.type];if(w)w(v);else{const O=v.name,R=O in t.getVoidElements();let I=v.attributes;if(u&&I&&I.length>1){const U=[];U.map={};const H=t.getElementRule(v.name);if(H){for(let j=0,oe=H.attributesOrder.length;j<oe;j++){const se=H.attributesOrder[j];if(se in I.map){const ae=I.map[se];U.map[se]=ae,U.push({name:se,value:ae})}}for(let j=0,oe=I.length;j<oe;j++){const se=I[j].name;if(!(se in U.map)){const ae=I.map[se];U.map[se]=ae,U.push({name:se,value:ae})}}I=U}}if(o.start(O,I,R),gf(O))Y(v.value)&&o.text(v.value,!0),o.end(O);else if(!R){let U=v.firstChild;if(U){(O==="pre"||O==="textarea")&&U.type===3&&((k=U.value)==null?void 0:k[0])===`
`&&o.text(`
`,!0);do b(U);while(U=U.next)}o.end(O)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},WM=new Set;le(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{WM.add(t)});const rC=new Set;le(["background-color"],t=>{rC.add(t)});const gh=["font","text-decoration","text-emphasis"],dE=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),Lb=(e,t)=>bt(dE(e,t)),tH=e=>WM.has(e),nH=e=>rC.has(e),jM=(e,t)=>zn(Lb(e,t),o=>tH(o)),GM=(e,t)=>jM(e,t)&&zn(Lb(e,t),o=>nH(o)),oH=e=>ge(e,t=>zn(gh,o=>Zt(t,o))),sH=(e,t,o)=>{const r=Lb(e,t),c=Lb(e,o),u=f=>{const b=e.getStyle(t,f)??"",v=e.getStyle(o,f)??"";return jo(b)&&jo(v)&&b!==v};return zn(r,f=>{const b=v=>zn(v,w=>w===f);if(!b(c)&&b(gh)){const v=oH(c);return zn(v,u)}else return u(f)})},w_=(e,t,o)=>N.from(o.container()).filter(ze).exists(r=>{const c=e?0:-1;return t(r.data.charAt(o.offset()+c))}),x_=Me(w_,!0,fr),mE=Me(w_,!1,fr),rH=e=>{const t=e.container();return ze(t)&&(t.data.length===0||bp(t.data)&&Nb.isBookmarkNode(t.parentNode))},hh=(e,t)=>o=>Hy(e?0:-1,o).filter(t).isSome(),qM=e=>gi(e)&&vs(q.fromDom(e),"display")==="block",E_=e=>$o(e)&&!O3(e),T_=hh(!0,qM),KM=hh(!1,qM),aC=hh(!0,hi),cC=hh(!1,hi),iC=hh(!0,za),k_=hh(!1,za),Wf=hh(!0,E_),$m=hh(!1,E_),YM=e=>e.slice(0,-1),aH=(e,t,o)=>ai(t,e)?YM(ci(e,r=>o(r)||xn(r,t))):[],XM=(e,t)=>aH(e,t,De),Bu=(e,t)=>[e].concat(XM(e,t)),fE=(e,t,o)=>Ci(e,t,o,rH),JM=e=>t=>e.isBlock(mn(t)),__=(e,t,o)=>Qn(Bu(q.fromDom(t.container()),e),JM(o)),A_=(e,t,o,r)=>fE(e,t.dom,o).forall(c=>__(t,o,r).fold(()=>!_u(c,o,t.dom),u=>!_u(c,o,t.dom)&&ai(u,q.fromDom(c.container())))),O_=(e,t,o,r)=>__(t,o,r).fold(()=>fE(e,t.dom,o).forall(c=>!_u(c,o,t.dom)),c=>fE(e,c.dom,o).isNone()),gE=Me(O_,!1),D_=Me(O_,!0),QM=Me(A_,!1),e6=Me(A_,!0),t6=e=>Kp(e).exists(Ui),hE=(e,t,o,r)=>{const c=ge(Bu(q.fromDom(o.container()),t),f=>r.isBlock(mn(f))),u=us(c).getOr(t);return Wc(e,u.dom,o).filter(t6)},R_=(e,t,o)=>Kp(t).exists(Ui)||hE(!0,e,t,o).isSome(),pE=(e,t,o)=>zy(t).exists(Ui)||hE(!1,e,t,o).isSome(),n6=Me(hE,!1),cH=Me(hE,!0),o6=e=>Ce.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),s6=(e,t,o)=>{const r=ge(Bu(q.fromDom(t.container()),e),c=>o.isBlock(mn(c)));return us(r).getOr(e)},r6=(e,t,o)=>o6(t)?mE(t):mE(t)||p(s6(e,t,o).dom,t).exists(mE),a6=(e,t,o)=>o6(t)?x_(t):x_(t)||m(s6(e,t,o).dom,t).exists(x_),iH=e=>vt(["pre","pre-wrap"],e),bE=e=>Kp(e).bind(t=>mo(t,ds)).exists(t=>iH(vs(t,"white-space"))),wY=(e,t)=>p(e.dom,t).isNone(),xY=(e,t)=>m(e.dom,t).isNone(),lH=(e,t,o)=>wY(e,t)||xY(e,t)||gE(e,t,o)||D_(e,t,o)||pE(e,t,o)||R_(e,t,o),EY=e=>ve(e)&&$o(e)&&Iy(e),c6=(e,t)=>o=>EY(new fs(o,e)[t]()),Aa=(e,t)=>{const o=m(e.dom,t).getOr(t),r=c6(e.dom,"next");return t.isAtEnd()&&(r(t.container())||r(o.container()))},uH=(e,t)=>{const o=p(e.dom,t).getOr(t),r=c6(e.dom,"prev");return t.isAtStart()&&(r(t.container())||r(o.container()))},dH=(e,t,o)=>bE(t)?!1:lH(e,t,o)||r6(e,t,o)||a6(e,t,o),lC=(e,t,o)=>bE(t)?!1:gE(e,t,o)||QM(e,t,o)||pE(e,t,o)||r6(e,t,o)||uH(e,t),mH=e=>{const t=e.container(),o=e.offset();return ze(t)&&o<t.data.length?Ce(t,o+1):e},Oa=(e,t,o)=>bE(t)?!1:D_(e,t,o)||e6(e,t,o)||R_(e,t,o)||a6(e,t,o)||Aa(e,t),i6=(e,t,o)=>lC(e,t,o)||Oa(e,mH(t),o),l6=(e,t)=>_a(e.charAt(t)),fH=(e,t)=>fr(e.charAt(t)),gH=e=>{const t=e.container();return ze(t)&&ps(t.data,ss)},hH=e=>{const t=e.split("");return Rt(t,(o,r)=>_a(o)&&r>0&&r<t.length-1&&Td(t[r-1])&&Td(t[r+1])?" ":o).join("")},pH=(e,t,o,r)=>{const c=t.data,u=Ce(t,0);return!o&&l6(c,0)&&!i6(e,u,r)?(t.data=" "+c.slice(1),!0):o&&fH(c,0)&&lC(e,u,r)?(t.data=ss+c.slice(1),!0):!1},bH=e=>{const t=e.data,o=hH(t);return o!==t?(e.data=o,!0):!1},Gc=(e,t,o,r)=>{const c=t.data,u=Ce(t,c.length-1);return!o&&l6(c,c.length-1)&&!i6(e,u,r)?(t.data=c.slice(0,-1)+" ",!0):o&&fH(c,c.length-1)&&Oa(e,u,r)?(t.data=c.slice(0,-1)+ss,!0):!1},u6=(e,t,o)=>{const r=t.container();if(!ze(r))return N.none();if(gH(t)){const c=pH(e,r,!1,o)||bH(r)||Gc(e,r,!1,o);return lc(c,t)}else if(i6(e,t,o)){const c=pH(e,r,!0,o)||Gc(e,r,!0,o);return lc(c,t)}else return N.none()},d6=e=>{const t=q.fromDom(e.getBody());e.selection.isCollapsed()&&u6(t,Ce.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},m6=(e,t,o,r)=>{if(o===0)return;const c=q.fromDom(e),u=gu(c,w=>r.isBlock(mn(w))).getOr(c),f=e.data.slice(t,t+o),b=t+o>=e.data.length&&Oa(u,Ce(e,e.data.length),r),v=t===0&&lC(u,Ce(e,0),r);e.replaceData(t,o,i0(f,4,v,b))},vE=(e,t,o)=>{const r=e.data.slice(t),c=r.length-nf(r).length;m6(e,t,c,o)},yE=(e,t,o)=>{const r=e.data.slice(0,t),c=r.length-Xd(r).length;m6(e,t-c,c,o)},CE=(e,t,o,r,c=!0)=>{const u=Xd(e.data).length,f=c?e:t,b=c?t:e;return c?f.appendData(b.data):f.insertData(0,b.data),xo(q.fromDom(b)),r&&vE(f,u,o),f},vH=(e,t)=>{const o=e.container(),r=e.offset();return!Ce.isTextPosition(e)&&o===t.parentNode&&r>Ce.before(t).offset()},yH=(e,t)=>vH(t,e)?Ce(t.container(),t.offset()-1):t,CH=e=>ze(e)?Ce(e,0):Ce.before(e),SH=e=>ze(e)?Ce(e,e.data.length):Ce.after(e),M_=e=>Fo(e.previousSibling)?N.some(SH(e.previousSibling)):e.previousSibling?E(e.previousSibling):N.none(),f6=e=>Fo(e.nextSibling)?N.some(CH(e.nextSibling)):e.nextSibling?y(e.nextSibling):N.none(),g6=(e,t)=>N.from(t.previousSibling?t.previousSibling:t.parentNode).bind(o=>p(e,Ce.before(o))).orThunk(()=>m(e,Ce.after(t))),wH=(e,t)=>m(e,Ce.after(t)).orThunk(()=>p(e,Ce.before(t))),TY=(e,t)=>M_(t).orThunk(()=>f6(t)).orThunk(()=>g6(e,t)),xH=(e,t)=>f6(t).orThunk(()=>M_(t)).orThunk(()=>wH(e,t)),EH=(e,t,o)=>e?xH(t,o):TY(t,o),kY=(e,t,o)=>EH(e,t,o).map(Me(yH,o)),h6=(e,t,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},Bn=e=>t=>t.dom===e,uC=(e,t)=>t&&Kt(e.schema.getBlockElements(),mn(t)),jf=(e,t,o)=>{if(gs(e,t)){const r=q.fromHtml('<br data-mce-bogus="1">');return o?le(ms(t),c=>{e_(c)||xo(c)}):Pi(t),Pn(t,r),N.some(Ce.before(r.dom))}else return N.none()},Qp=(e,t,o,r)=>{const c=ii(e).filter(qn),u=uu(e).filter(qn);return xo(e),Ai(c,u,t,(f,b,v)=>{const w=f.dom,k=b.dom,O=w.data.length;return CE(w,k,o,r),v.container()===k?Ce(w,O):v}).orThunk(()=>(r&&(c.each(f=>yE(f.dom,f.dom.length,o)),u.each(f=>vE(f.dom,0,o))),t))},SE=(e,t)=>Kt(e.schema.getTextInlineElements(),mn(t)),Im=(e,t,o,r=!0,c=!1)=>{const u=kY(t,e.getBody(),o.dom),f=gu(o,Me(uC,e),Bn(e.getBody())),b=Qp(o,u,e.schema,SE(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(v=>jf(e.schema,v,c)).fold(()=>{r&&h6(e,t,b)},v=>{r&&h6(e,t,N.some(v))})},B_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,p6=e=>B_.test(e),e1=(e,t)=>$c(q.fromDom(t),Ck(e))&&!as(e.schema,t)&&e.dom.isEditable(t),N_=e=>Tn.DOM.getStyle(e,"direction",!0)==="rtl"||p6(e.textContent??""),b6=(e,t,o)=>ge(Tn.DOM.getParents(o.container(),"*",t),e),ph=(e,t,o)=>{const r=b6(e,t,o);return N.from(r[r.length-1])},TH=(e,t,o)=>{const r=Dm(t,e),c=Dm(o,e);return ve(r)&&r===c},kH=e=>bd(e)||Tf(e),Fl=(e,t)=>{const o=t.container(),r=t.offset();return e?Rl(o)?ze(o.nextSibling)?Ce(o.nextSibling,0):Ce.after(o):bd(t)?Ce(o,r+1):t:Rl(o)?ze(o.previousSibling)?Ce(o.previousSibling,o.previousSibling.data.length):Ce.before(o):Tf(t)?Ce(o,r-1):t},v6=Me(Fl,!0),y6=Me(Fl,!1),P_=(e,t)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(t),e.off("beforeinput input",o)},C6=e=>{e.execCommand("delete")},$_=e=>P_(e,"Delete"),_H=e=>P_(e,"ForwardDelete"),_Y=e=>t=>ro(Ic(t),e,xn),AH=e=>ca(e)||xa(e),I_=(e,t)=>ai(e,t)?mo(t,AH,_Y(e)):N.none(),S6=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},w6=(e,t,o)=>Cs(y(o),E(o),(r,c)=>{const u=Fl(!0,r),f=Fl(!1,c),b=Fl(!1,t);return e?m(o,b).exists(v=>v.isEqual(f)&&t.isEqual(u)):p(o,b).exists(v=>v.isEqual(u)&&t.isEqual(f))}).getOr(!0),x6=e=>(vl(e)?ii(e):zs(e)).bind(x6).orThunk(()=>N.some(e)),OH=(e,t,o,r=!0)=>{t.deleteContents();const c=x6(o).getOr(o),u=q.fromDom(e.dom.getParent(c.dom,e.dom.isBlock)??o.dom);if(u.dom===e.getBody()?S6(e,r):gs(e.schema,u,{checkRootAsContent:!1})&&(ym(u),r&&e.selection.setCursorLocation(u.dom,0)),!xn(o,u)){const f=ro(Ic(u),o)?[]:Kn(u);le(f.concat(ms(o)),b=>{!xn(b,u)&&!ai(b,u)&&gs(e.schema,b)&&xo(b)})}},DH=e=>t=>xn(e,t),Ka=e=>_r(e,"td,th"),RH=(e,t)=>qa(q.fromDom(e),t),MH=e=>Cs(e.startTable,e.endTable,(t,o)=>{const r=xg(t,u=>xn(u,o)),c=xg(o,u=>xn(u,t));return!r&&!c?e:{...e,startTable:r?N.none():e.startTable,endTable:c?N.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),E6=e=>MH(e),AY=(e,t)=>{const o=RH(e.startContainer,t),r=RH(e.endContainer,t),c=o.isSome(),u=r.isSome(),f=Cs(o,r,xn).getOr(!1);return E6({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},L_=(e,t)=>({start:e,end:t}),BH=(e,t,o)=>({rng:e,table:t,cells:o}),dC=ei.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Fb=(e,t)=>Vr(q.fromDom(e),"td,th",t),NH=e=>!xn(e.start,e.end),T6=(e,t)=>qa(e.start,t).bind(o=>qa(e.end,t).bind(r=>lc(xn(o,r),o))),PH=(e,t)=>!NH(e)&&T6(e,t).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),So=(e,t)=>{const o=Fb(e.startContainer,t),r=Fb(e.endContainer,t);return Cs(o,r,L_)},$H=e=>t=>qa(t,e).bind(o=>Fs(Ka(o)).map(r=>L_(t,r))),IH=e=>t=>qa(t,e).bind(o=>us(Ka(o)).map(r=>L_(r,t))),t1=e=>t=>T6(t,e).map(o=>BH(t,o,Ka(o))),F_=(e,t,o,r)=>{if(o.collapsed||!e.forall(NH))return N.none();if(t.isSameTable){const c=e.bind(t1(r));return N.some({start:c,end:c})}else{const c=Fb(o.startContainer,r),u=Fb(o.endContainer,r),f=c.bind($H(r)).bind(t1(r)),b=u.bind(IH(r)).bind(t1(r));return N.some({start:f,end:b})}},k6=(e,t)=>cl(e,o=>xn(o,t)),H_=e=>Cs(k6(e.cells,e.rng.start),k6(e.cells,e.rng.end),(t,o)=>e.cells.slice(t,o+1)),LH=(e,t,o)=>e.exists(r=>PH(r,o)&&Vf(r.start,t)),z_=(e,t)=>{const{startTable:o,endTable:r}=t,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},FH=(e,t,o,r)=>F_(e,t,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=t,f=H_(c).getOr([]);if(u&&c.cells.length===f.length)return N.some(dC.fullTable(c.table));if(f.length>0){if(u)return N.some(dC.partialTable(f,N.none()));{const b=z_(o,t);return N.some(dC.partialTable(f,N.some({...t,rng:b})))}}else return N.none()}),OY=(e,t,o,r)=>F_(e,t,o,r).bind(({start:c,end:u})=>{const f=c.bind(H_).getOr([]),b=u.bind(H_).getOr([]);if(f.length>0&&b.length>0){const v=z_(o,t);return N.some(dC.multiTable(f,b,v))}else return N.none()}),DY=(e,t)=>{const o=DH(e),r=So(t,o),c=AY(t,o);return LH(r,t,o)?r.map(u=>dC.singleCellTable(t,u.start)):c.isMultiTable?OY(r,c,t,o):FH(r,c,t,o)},_6=e=>le(e,t=>{Vs(t,"contenteditable"),ym(t)}),HH=(e,t)=>N.from(e.dom.getParent(t,e.dom.isBlock)).map(q.fromDom),zH=(e,t,o)=>{o.each(r=>{t?xo(r):(ym(r),e.selection.setCursorLocation(r.dom,0))})},V_=(e,t,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(t.dom.lastChild)):(c.setStartBefore(t.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),wE(e,c,t,!1).each(u=>u())},U_=e=>{const t=ft(e),o=q.fromDom(e.selection.getNode());Og(o.dom)&&gs(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),t.length>1&&zn(t,r=>xn(r,o))&&rs(o,"data-mce-selected","1")},A6=(e,t,o)=>N.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=HH(e,f?u.endContainer:u.startContainer);u.deleteContents(),zH(e,f,b.filter(Me(gs,e.schema)));const v=f?t[0]:t[t.length-1];return V_(e,v,r,f),gs(e.schema,v)?N.none():N.some(f?t.slice(1):t.slice(0,-1))}).getOr(t);_6(c),U_(e)}),Sn=(e,t,o,r)=>N.some(()=>{const c=e.selection.getRng(),u=t[0],f=o[o.length-1];V_(e,u,c,!0),V_(e,f,c,!1);const b=gs(e.schema,u)?t:t.slice(1),v=gs(e.schema,f)?o:o.slice(0,-1);_6(b.concat(v)),r.deleteContents(),U_(e)}),wE=(e,t,o,r=!0)=>N.some(()=>{OH(e,t,o,r)}),mC=(e,t)=>N.some(()=>Im(e,!1,t)),fC=(e,t,o)=>DY(t,o).bind(r=>r.fold(Me(wE,e),Me(mC,e),Me(A6,e),Me(Sn,e))),gC=(e,t)=>Z_(e,t),hC=(e,t,o,r)=>D6(t,r).fold(()=>fC(e,t,o),c=>gC(e,c)),O6=(e,t,o)=>{const r=q.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?A6(e,o,N.none()):hC(e,r,c,t)},VH=(e,t)=>Qn(Bu(t,e),Ef),D6=(e,t)=>Qn(Bu(t,e),lu("caption")),RY=(e,t,o,r,c)=>mh(o,e.getBody(),c).bind(u=>VH(t,q.fromDom(u.getNode())).bind(f=>xn(f,r)?N.none():N.some(Ot))),Z_=(e,t)=>N.some(()=>{ym(t),e.selection.setCursorLocation(t.dom,0)}),UH=(e,t,o,r)=>y(e.dom).bind(c=>E(e.dom).map(u=>t?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),MY=(e,t)=>Z_(e,t),ZH=(e,t,o)=>D6(e,q.fromDom(o.getNode())).fold(()=>N.some(Ot),r=>lc(!xn(r,t),Ot)),WH=(e,t,o,r,c)=>mh(o,e.getBody(),c).fold(()=>N.some(Ot),u=>UH(r,o,c,u)?MY(e,r):ZH(t,r,u)),BY=(e,t,o,r)=>{const c=Ce.fromRangeStart(e.selection.getRng());return VH(o,r).bind(u=>gs(e.schema,u,{checkRootAsContent:!1})?Z_(e,u):RY(e,o,t,u,c))},jH=(e,t,o,r)=>{const c=Ce.fromRangeStart(e.selection.getRng());return gs(e.schema,r)?Z_(e,r):WH(e,o,t,r,c)},To=(e,t)=>e?iC(t):k_(t),NY=(e,t)=>{const o=Ce.fromRangeStart(e.selection.getRng());return To(t,o)||Wc(t,e.getBody(),o).exists(r=>To(t,r))},PY=(e,t,o)=>{const r=q.fromDom(e.getBody());return D6(r,o).fold(()=>BY(e,t,r,o).orThunk(()=>lc(NY(e,t),Ot)),c=>jH(e,t,r,c))},W_=(e,t)=>{const o=q.fromDom(e.selection.getStart(!0)),r=ft(e);return e.selection.isCollapsed()&&r.length===0?PY(e,t,o):O6(e,o,r)},Dd=(e,t)=>{let o=t;for(;o&&o!==e;){if(gc(o)||$o(o))return o;o=o.parentNode}return null},GH=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],qH=He.each,Rd=e=>{const t=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=w=>{const k={};return qH(t.getAttribs(w),O=>{const R=O.nodeName.toLowerCase();R!=="style"&&!c(R)&&(k[R]=t.getAttrib(w,R))}),k},v=(w,k)=>{for(const O in w)if(Kt(w,O)){const R=k[O];if(es(R)||w[O]!==R)return!1;delete k[O]}for(const O in k)if(Kt(k,O))return!1;return!0};return Ye(u)&&Ye(f)&&(!v(b(u),b(f))||!v(t.parseStyle(t.getAttrib(u,"style")),t.parseStyle(t.getAttrib(f,"style"))))?!1:!is(u)&&!is(f)},c=u=>zn(GH,f=>Zt(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},Ln=(e,t)=>{if(ze(e))return{container:e,offset:t};const o=Od.getNode(e,t);return ze(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&ze(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&ze(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},gr=e=>{const t=e.cloneRange(),o=Ln(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=Ln(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},Ji=Tn.DOM,KH=()=>Ji.create("span",{"data-mce-type":"bookmark"}),R6=(e,t,o)=>{if(Ye(e)){const r=o();return e.hasChildNodes()?t===e.childNodes.length?e.appendChild(r):e.insertBefore(r,e.childNodes[t]):e.appendChild(r),{container:r,offset:0}}else return{container:e,offset:t}},M6=(e,t)=>{const o=r=>{var f;let c=(f=r.parentNode)==null?void 0:f.firstChild,u=0;for(;c;){if(c===r)return u;(!Ye(c)||c.getAttribute("data-mce-type")!=="bookmark")&&u++,c=c.nextSibling}return-1};if(Ye(e)&&ve(e.parentNode)){const r=e;t=o(e),e=e.parentNode,Ji.remove(r),!e.hasChildNodes()&&Ji.isBlock(e)&&e.appendChild(Ji.create("br"))}return{container:e,offset:t}},B6=(e,t,o,r)=>{const c=Ji.createRng();return c.setStart(e,t),c.setEnd(o,r),gr(c)},Lm=(e,t=KH)=>{const{container:o,offset:r}=R6(e.startContainer,e.startOffset,t);if(e.collapsed)return{startContainer:o,startOffset:r};{const{container:c,offset:u}=R6(e.endContainer,e.endOffset,t);return{startContainer:o,startOffset:r,endContainer:c,endOffset:u}}},Hl=e=>{const{container:t,offset:o}=M6(e.startContainer,e.startOffset);if(!es(e.endContainer)&&!es(e.endOffset)){const{container:r,offset:c}=M6(e.endContainer,e.endOffset);return B6(t,o,r,c)}else return B6(t,o,t,o)},j_=(e,t,o,r)=>{if(He.each(o.styles,(c,u)=>{e.setStyle(t,u,Uf(c,r))}),o.styles){const c=e.getAttrib(t,"style");c&&e.setAttrib(t,"data-mce-style",c)}},n1=(e,t,o,r,c)=>{const u=e.dom;ne(o.onformat)&&o.onformat(t,o,r,c),j_(u,t,o,r),He.each(o.attributes,(f,b)=>{u.setAttrib(t,b,Uf(f,r))}),He.each(o.classes,f=>{const b=Uf(f,r);u.hasClass(t,b)||u.addClass(t,b)})},YH=e=>!dn(e.attributes)&&!dn(e.styles),G_=Qy,N6=(e,t,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Ou(u)&&u.inherit===!1&&e.dom.is(t,u.selector))return!0}return!1},xE=(e,t,o,r,c)=>{const u=e.dom.getRoot();if(t===u)return!1;const f=e.dom.getParent(t,b=>N6(e,b,o)?!0:b.parentNode===u||!!zl(e,b,o,r,!0));return!!zl(e,f,o,r,c)},EE=(e,t,o)=>Kr(o)&&G_(t,o.inline)||_d(o)&&G_(t,o.block)?!0:Ou(o)?Ye(t)&&e.is(t,o.selector):!1,P6=(e,t,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(ne(o.onmatch))return o.onmatch(t,o,r);if(f){if(hg(f)){for(let v=0;v<f.length;v++)if(b?e.getAttrib(t,f[v]):eC(e,t,f[v]))return!0}else for(const v in f)if(Kt(f,v)){const w=b?e.getAttrib(t,v):eC(e,t,v),k=Uf(f[v],u),O=gn(w)||Xu(w);if(O&&gn(k))continue;if(c&&O&&!o.exact||(!c||o.exact)&&!G_(w,Gx(k,v)))return!1}}return!0},zl=(e,t,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Ye(t))for(let b=0;b<u.length;b++){const v=u[b];if(EE(e.dom,t,v)&&P6(f,t,v,"attributes",c,r)&&P6(f,t,v,"styles",c,r)){const w=v.classes;if(w){for(let k=0;k<w.length;k++)if(!e.dom.hasClass(t,Uf(w[k],r)))return}return v}}},q_=(e,t,o,r,c)=>{if(r)return xE(e,r,t,o,c);if(r=e.selection.getNode(),xE(e,r,t,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&xE(e,u,t,o,c))},K_=(e,t,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<t.length;b++){const v=t[b];!c[v]&&zl(e,f,v,o)&&(c[v]=!0,r.push(v))}},e.dom.getRoot()),r},$6=(e,t)=>{const o=c=>xn(c,q.fromDom(e.getBody())),r=(c,u)=>zl(e,c.dom,u)?N.some(u):N.none();return N.from(e.selection.getStart(!0)).bind(c=>o0(q.fromDom(c),u=>rc(t,f=>r(u,f)),o)).getOrNull()},Y_=(e,t)=>{const o=e.formatter.get(t),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=qx(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Ou(b))return!0;for(let v=u.length-1;v>=0;v--)if(r.is(u[v],b.selector))return!0}}return!1},$Y=(e,t,o)=>cn(o,(r,c)=>{const u=Kx(e,c);return e.formatter.matchNode(t,c,{},u)?r.concat([c]):r},[]),ar=Js,XH=(e,t)=>e.importNode(t,!0),JH=e=>{if(e){const t=new fs(e,e);for(let o=t.current();o;o=t.next())if(ze(o))return o}return null},X_=e=>{const t=q.fromTag("span");return Tr(t,{id:A,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Pn(t,q.fromText(ar)),t},QH=e=>{const t=JH(e);return t&&t.data.charAt(0)===ar&&t.deleteData(0,1),t},J_=(e,t,o)=>{const r=e.dom,c=e.selection;if(oM(t))Im(e,!1,q.fromDom(t),o,!0);else{const u=c.getRng(),f=r.getParent(t,r.isBlock),b=u.startContainer,v=u.startOffset,w=u.endContainer,k=u.endOffset,O=QH(t);r.remove(t,!0),b===O&&v>0&&u.setStart(O,v-1),w===O&&k>0&&u.setEnd(O,k-1),f&&r.isEmpty(f)&&ym(q.fromDom(f)),c.setRng(u)}},Q_=(e,t,o)=>{const r=e.dom,c=e.selection;if(t)J_(e,t,o);else if(t=L(e.getBody(),c.getStart()),!t)for(;t=r.get(A);)J_(e,t,o)},I6=(e,t,o)=>{var u,f;const r=e.dom,c=r.getParent(o,Me(Jy,e.schema));c&&r.isEmpty(c)?(u=o.parentNode)==null||u.replaceChild(t,o):(G3(q.fromDom(o)),r.isEmpty(o)?(f=o.parentNode)==null||f.replaceChild(t,o):r.insertAfter(t,o))},Hb=(e,t)=>(e.appendChild(t),t),L6=(e,t)=>{const o=yn(e,(c,u)=>Hb(c,u.cloneNode(!1)),t),r=o.ownerDocument??document;return Hb(o,r.createTextNode(ar))},F6=(e,t,o,r,c,u)=>{const f=e.formatter,b=e.dom,v=ge(bt(f.get()),O=>O!==r&&!ps(O,"removeformat")),w=$Y(e,o,v);if(ge(w,O=>!nM(e,O,r)).length>0){const O=o.cloneNode(!1);return b.add(t,O),f.remove(r,c,O,u),b.remove(O),N.some(O)}else return N.none()},H6=e=>n2(e,aa(e).replace(new RegExp(`${ss}$`)," ")),bh=(e,t)=>{const o=()=>{t!==null&&!e.dom.isEmpty(t)&&ii(q.fromDom(t)).each(r=>{qn(r)?H6(r):Yh(r,c=>qn(c)).each(c=>{qn(c)&&H6(c)})})};e.once("input",r=>{r.data&&!fr(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},z6=(e,t,o)=>{let r;const c=e.selection,u=e.formatter.get(t);if(!u)return;const f=c.getRng();let b=f.startOffset;const w=f.startContainer.nodeValue;r=L(e.getBody(),c.getStart());const k=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(w&&b>0&&b<w.length&&k.test(w.charAt(b))&&k.test(w.charAt(b-1))){const O=c.getBookmark();f.collapse(!0);let R=Pm(e.dom,f,u);R=Ib(R),e.formatter.apply(t,o,R),c.moveToBookmark(O)}else{let O=r?JH(r):null;(!r||(O==null?void 0:O.data)!==ar)&&(r=XH(e.getDoc(),X_(!0).dom),O=r.firstChild,f.insertNode(r),b=1,bh(e,r)),e.formatter.apply(t,o,r),c.setCursorLocation(O,b)}},V6=(e,t,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(t);if(!b)return;const v=u.getRng(),w=v.startContainer,k=v.startOffset;let O=w;ze(w)&&(k!==w.data.length&&(f=!0),O=O.parentNode);const R=[];let I;for(;O;){if(zl(e,O,t,o,r)){I=O;break}O.nextSibling&&(f=!0),R.push(O),O=O.parentNode}if(I)if(f){const U=u.getBookmark();v.collapse(!0);let H=Pm(c,v,b,{includeTrailingSpace:!0});H=Ib(H),e.formatter.remove(t,o,H,r),u.moveToBookmark(U)}else{const U=L(e.getBody(),I),H=ve(U)?c.getParents(I.parentNode,et,U):[],j=X_(!1).dom;I6(e,j,U??I);const oe=F6(e,j,I,t,o,r),se=L6([...R,...oe.toArray(),...H],j);U&&J_(e,U,ve(U)),u.setCursorLocation(se,1),bh(e,j),c.isEmpty(I)&&c.remove(I)}},U6=(e,t,o)=>{const r=e.selection,c=e.getBody();Q_(e,null,o),(t===8||t===46)&&r.isCollapsed()&&r.getStart().innerHTML===ar&&Q_(e,L(c,r.getStart()),!0),(t===37||t===39)&&Q_(e,L(c,r.getStart()),!0)},Z6=e=>ze(e)&&Lr(e.data,ss),W6=e=>{e.on("mouseup keydown",t=>{U6(e,t.keyCode,Z6(e.selection.getRng().endContainer))})},j6=e=>{const t=X_(!1),o=L6(e,t.dom);return{caretContainer:t,caretPosition:Ce(o,0)}},eA=(e,t)=>{const{caretContainer:o,caretPosition:r}=j6(t);return zr(q.fromDom(e),o),xo(q.fromDom(e)),r},e9=(e,t)=>{const{caretContainer:o,caretPosition:r}=j6(t);return e.insertNode(o.dom),r},G6=(e,t)=>{if(M(t.dom))return!1;const o=e.schema.getTextInlineElements();return Kt(o,mn(t))&&!M(t.dom)&&!dm(t.dom)},q6=["fontWeight","fontStyle","color","fontSize","fontFamily"],t9=e=>en(e.styles)&&zn(bt(e.styles),t=>vt(q6,t)),n9=e=>Qn(e,t=>Kr(t)&&t.inline==="span"&&t9(t)),o9=(e,t)=>{const o=e.get(t);return dn(o)?n9(o):N.none()},tA=(e,t)=>p(t,Ce.fromRangeStart(e)).isNone(),K6=(e,t)=>m(t,Ce.fromRangeEnd(e)).exists(o=>!Xo(o.getNode())||m(t,o).isSome())===!1,s9=e=>t=>tp(t)&&e.isEditable(t),Y6=(e,t)=>Rt(e.getSelectedBlocks(),(o,r)=>r===0&&t(o)?e.dom.getParent(o,tp)??o:o),nA=e=>{if(e.isCollapsed())return[];const t=e.getRng(),o=Y6(e,r=>tA(t,r)&&!tp(r));if(o.length===1)return tA(t,o[0])&&K6(t,o[0])?o:[];{const r=us(o).filter(f=>tA(t,f)).toArray(),c=Fs(o).filter(f=>K6(t,f)).toArray(),u=o.slice(1,-1);return r.concat(u).concat(c)}},oA=e=>ge(nA(e),s9(e.dom)),X6=e=>ge(Y6(e,t=>!tp(t)),s9(e.dom)),J6=He.each,sA=e=>Ye(e)&&!is(e)&&!M(e)&&!dm(e),Q6=(e,t)=>{for(let o=e;o;o=o[t]){if(ze(o)&&jo(o.data))return e;if(Ye(o)&&!is(o))return o}return e},eB=(e,t,o)=>{const r=Rd(e),c=Ha(t)&&e.dom.isEditable(t),u=Ha(o)&&e.dom.isEditable(o);if(c&&u){const f=Q6(t,"previousSibling"),b=Q6(o,"nextSibling");if(r.compare(f,b)){for(let v=f.nextSibling;v&&v!==b;){const w=v;v=v.nextSibling,f.appendChild(w)}return e.dom.remove(b),He.each(He.grep(b.childNodes),v=>{f.appendChild(v)}),f}}return o},tB=(e,t,o,r)=>{if(r&&t.merge_siblings!==!1){const c=eB(e,Q5(r),r)??r;eB(e,c,Q5(c,!0))}},r9=(e,t,o)=>{if(t.clear_child_styles){const r=t.links?"*:not(a)":"*";J6(e.select(r,o),c=>{sA(c)&&e.isEditable(c)&&J6(t.styles,(u,f)=>{e.setStyle(c,f,"")})})}},rA=(e,t,o)=>{J6(e.childNodes,r=>{sA(r)&&(t(r)&&o(r),r.hasChildNodes()&&rA(r,t,o))})},a9=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},aA=(e,t)=>o=>!!(o&&eC(e,o,t)),nB=(e,t,o)=>r=>{e.setStyle(r,t,o),r.getAttribute("style")===""&&r.removeAttribute("style"),a9(e,r)},o1=ei.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Gf=/^(src|href|style)$/,cA=He.each,pC=Qy,c9=e=>/^(TR|TH|TD)$/.test(e.nodeName),oB=(e,t,o)=>e.isChildOf(t,o)&&t!==o&&!e.isBlock(o),iA=(e,t,o)=>{let r=t[o?"startContainer":"endContainer"],c=t[o?"startOffset":"endOffset"];if(Ye(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return ze(r)&&o&&c>=r.data.length&&(r=new fs(r,e.getBody()).next()||r),ze(r)&&!o&&c===0&&(r=new fs(r,e.getBody()).prev()||r),r},lA=(e,t)=>{const o=t?"firstChild":"lastChild",r=e[o];return c9(e)&&r?e.nodeName==="TR"&&r[o]||r:e},TE=(e,t,o,r)=>{var u;const c=e.create(o,r);return(u=t.parentNode)==null||u.insertBefore(c,t),c.appendChild(t),c},uA=(e,t,o,r,c)=>{const u=q.fromDom(t),f=q.fromDom(e.create(r,c)),b=o?ur(u):oa(u);return li(f,b),o?(zr(u,f),du(f,u)):(xl(u,f),Pn(f,u)),f.dom},i9=(e,t)=>t.links&&e.nodeName==="A",sB=(e,t,o)=>{const r=t.parentNode;let c;const u=e.dom,f=Ns(e);_d(o)&&r===u.getRoot()&&(!o.list_block||!pC(t,o.list_block))&&le(Bo(t.childNodes),b=>{Mb(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=TE(u,b,f),u.setAttribs(c,qi(e))):c=null}),!(fY(o)&&!pC(o.inline,t))&&u.remove(t,!0)},rB=(e,t,o)=>lr(e)?{name:t,value:null}:{name:e,value:Uf(t,o)},aB=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},cB=(e,t,o,r,c)=>{let u=!1;cA(o.styles,(f,b)=>{const{name:v,value:w}=rB(b,f,r),k=Gx(w,v);(o.remove_similar||ie(w)||!Ye(c)||pC(eC(e,c,v),k))&&e.setStyle(t,v,""),u=!0}),u&&aB(e,t)},s1=(e,t,o)=>{t==="removeformat"?le(X6(e.selection),r=>{le(q6,c=>e.dom.setStyle(r,c,"")),aB(e.dom,r)}):o9(e.formatter,t).each(r=>{le(X6(e.selection),c=>cB(e.dom,c,r,o,null))})},kE=(e,t,o,r,c)=>{const u=e.dom,f=Rd(e),b=e.schema;if(Kr(t)&&Va(b,t.inline)&&as(b,r)&&r.parentElement===e.getBody())return sB(e,r,t),o1.removed();if(!t.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!EE(u,r,t)&&!i9(r,t))return o1.keep();const v=r,w=t.preserve_attributes;if(Kr(t)&&t.remove==="all"&&dn(w)){const k=ge(u.getAttribs(v),O=>vt(w,O.name.toLowerCase()));if(u.removeAllAttribs(v),le(k,O=>u.setAttrib(v,O.name,O.value)),k.length>0)return o1.rename("span")}if(t.remove!=="all"){cB(u,v,t,o,c),cA(t.attributes,(O,R)=>{const{name:I,value:U}=rB(R,O,o);if(t.remove_similar||ie(U)||!Ye(c)||pC(u.getAttrib(c,I),U)){if(I==="class"){const H=u.getAttrib(v,I);if(H){let j="";if(le(H.split(/\s+/),oe=>{/mce\-\w+/.test(oe)&&(j+=(j?" ":"")+oe)}),j){u.setAttrib(v,I,j);return}}}if(Gf.test(I)&&v.removeAttribute("data-mce-"+I),I==="style"&&mi(["li"])(v)&&u.getStyle(v,"list-style-type")==="none"){v.removeAttribute(I),u.setStyle(v,"list-style-type","none");return}I==="class"&&v.removeAttribute("className"),v.removeAttribute(I)}}),cA(t.classes,O=>{O=Uf(O,o),(!Ye(c)||u.hasClass(c,O))&&u.removeClass(v,O)});const k=u.getAttribs(v);for(let O=0;O<k.length;O++){const R=k[O].nodeName;if(!f.isAttributeInternal(R))return o1.keep()}}return t.remove!=="none"?(sB(e,v,t),o1.removed()):o1.keep()},l9=(e,t,o,r,c)=>{let u;return t.parentNode&&le(qx(e.dom,t.parentNode).reverse(),f=>{if(!u&&Ye(f)&&f.id!=="_start"&&f.id!=="_end"){const b=zl(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},u9=(e,t,o,r)=>kE(e,t,o,r,r).fold(Xe(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),Xe(null)),dA=(e,t,o,r,c,u,f,b)=>{var O;let v,w;const k=e.dom;if(o){const R=o.parentNode;for(let I=r.parentNode;I&&I!==R;I=I.parentNode){let U=k.clone(I,!1);for(let H=0;H<t.length&&(U=u9(e,t[H],b,U),U!==null);H++);U&&(v&&U.appendChild(v),w||(w=U),v=U)}(!f.mixed||!k.isBlock(o))&&(r=k.split(o,r)??r),v&&w&&((O=c.parentNode)==null||O.insertBefore(v,c),w.appendChild(c),Kr(f)&&tB(e,f,b,v))}return r},d9=(e,t,o,r,c)=>{const u=e.formatter.get(t),f=u[0],b=e.dom,v=e.selection,w=H=>{const j=l9(e,H,t,o,c);return dA(e,u,j,H,H,!0,f,o)},k=H=>is(H)&&Ye(H)&&(H.id==="_start"||H.id==="_end"),O=H=>zn(u,j=>bC(e,j,o,H,H)),R=H=>{const j=Bo(H.childNodes),se=O(H)||zn(u,Oe=>EE(b,H,Oe)),ae=H.parentNode;if(!se&&ve(ae)&&Qk(f)&&O(ae),f.deep&&j.length)for(let Oe=0;Oe<j.length;Oe++)R(j[Oe]);le(["underline","line-through","overline"],Oe=>{Ye(H)&&e.dom.getStyle(H,"text-decoration")===Oe&&H.parentNode&&tM(b,H.parentNode)===Oe&&bC(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Oe}},void 0,H)})},I=H=>{const j=b.get(H?"_start":"_end");if(j){let oe=j[H?"firstChild":"lastChild"];return k(oe)&&(oe=oe[H?"firstChild":"lastChild"]),ze(oe)&&oe.data.length===0&&(oe=H?j.previousSibling||j.nextSibling:j.nextSibling||j.previousSibling),b.remove(j,!0),oe}else return null},U=H=>{let j,oe,se=Pm(b,H,u,{includeTrailingSpace:H.collapsed});if(f.split){if(se=Ib(se),j=iA(e,se,!0),oe=iA(e,se),j!==oe){if(j=lA(j,!0),oe=lA(oe,!1),oB(b,j,oe)){const Se=N.from(j.firstChild).getOr(j);w(uA(b,Se,!0,"span",{id:"_start","data-mce-type":"bookmark"})),I(!0);return}if(oB(b,oe,j)){const Se=N.from(oe.lastChild).getOr(oe);w(uA(b,Se,!1,"span",{id:"_end","data-mce-type":"bookmark"})),I(!1);return}j=TE(b,j,"span",{id:"_start","data-mce-type":"bookmark"}),oe=TE(b,oe,"span",{id:"_end","data-mce-type":"bookmark"});const ae=b.createRng();ae.setStartAfter(j),ae.setEndBefore(oe),Du(b,ae,Se=>{le(Se,Oe=>{!is(Oe)&&!is(Oe.parentNode)&&w(Oe)})}),w(j),w(oe),j=I(!0),oe=I()}else j=oe=w(j);se.startContainer=j.parentNode?j.parentNode:j,se.startOffset=b.nodeIndex(j),se.endContainer=oe.parentNode?oe.parentNode:oe,se.endOffset=b.nodeIndex(oe)+1}Du(b,se,ae=>{le(ae,R)})};if(r){if(Yy(r)){const H=b.createRng();H.setStartBefore(r),H.setEndAfter(r),U(H)}else U(r);dy(e,t,r,o);return}!v.isCollapsed()||!Kr(f)||ft(e).length?(X5(e,()=>qy(e,U),H=>Kr(f)&&q_(e,t,o,H)),e.nodeChanged()):V6(e,t,o,c),s1(e,t,o),dy(e,t,r,o)},_E=(e,t,o,r,c)=>{(r||e.selection.isEditable())&&d9(e,t,o,r,c)},iB=(e,t,o,r)=>kE(e,t,o,r).fold(()=>N.some(r),c=>N.some(e.dom.rename(r,c)),N.none),bC=(e,t,o,r,c)=>kE(e,t,o,r,c).fold(De,u=>(e.dom.rename(r,u),!0),et),lB=["fontsize","subscript","superscript"],AE=["strikethrough",...lB],m9=(e,t,o)=>ve(e.matchNode(t.dom,o,{},o==="fontsize")),OE=(e,t)=>zn(lB,o=>m9(e,t,o)),f9=e=>vt(AE,e),uB=(e,t,o,r,c)=>{const u=ci(t,e).filter(ds);return Lh(u,o).map(f=>{const b=u[f],v=r(b),w=[...c(sa(b)).toArray(),...Vn(u.slice(0,f),k=>o(k)?c(k).toArray():[sa(k)])];return{container:b,innerWrapper:v,outerWrappers:w}})},dB=(e,t,o,r)=>{le(ms(e),c=>{ds(c)&&o(c)&&r(c).isNone()&&ui(c)}),le(ms(e),c=>Pn(t,c)),du(e,t)},mB=(e,t)=>{if(t.length>0){const o=t[t.length-1];zr(e,o);const r=cn(t.slice(0,t.length-1),(c,u)=>(Pn(c,u),u),o);Pn(r,e)}},g9=(e,t,o,r,c)=>{const u=f=>xn(q.fromDom(e.getRoot()),f)||e.isBlock(f.dom);le(t,f=>{uB(u,f,o,r,c).each(({container:b,innerWrapper:v,outerWrappers:w})=>{e.split(b.dom,f.dom),dB(f,v,o,c),mB(f,w)})})},mA=(e,t,o)=>{const r=b=>ve(zl(e,b.dom,t)),c=b=>{const v=q.fromTag(mn(b)),w=zl(e,b.dom,t,{});return ve(w)&&YH(w)&&n1(e,v.dom,w),v},u=b=>{const v=zl(e,b.dom,t,{});return ve(v)?iB(e,v,{},b.dom).map(q.fromDom):N.some(b)},f=Lm(e.selection.getRng());g9(e.dom,o,r,c,u),e.selection.setRng(Hl(f))},h9=(e,t)=>Vn(t,o=>{const r=t0(o,c=>OE(e,c));return OE(e,o)?[o,...r]:r}),p9=(e,t,o)=>{if(f9(t)){const r=h9(e.formatter,o);mA(e,"strikethrough",r)}},b9=(e,t)=>{const o=ge(t,r=>OE(e.formatter,r));mA(e,"strikethrough",o)},qc=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),fB=e=>e.name==="summary",v9=(e,t)=>{let o=e;for(;o=o.walk();)t(o)},fA=(e,t,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const v=r.nodes[c];v?v.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=t.length;u<f;u++){const b=t[u],v=b.name;if(v in o.attributes.map){const w=r.attributes[v];w?w.nodes.push(o):r.attributes[v]={filter:b,nodes:[o]}}}},y9=(e,t,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&v9(o,c=>{fA(e,t,c,r)}),r},gB=(e,t)=>{const o=(r,c)=>{hn(r,u=>{const f=Bo(u.nodes);le(u.filter.callbacks,b=>{for(let v=f.length-1;v>=0;v--){const w=f[v];(!(c?w.attr(u.filter.name)!==void 0:w.name===u.filter.name)||gn(w.parent))&&f.splice(v,1)}f.length>0&&b(f,u.filter.name,t)})})};o(e.nodes,!1),o(e.attributes,!0)},hB=(e,t,o,r={})=>{const c=y9(e,t,o);gB(c,r)},vh=(e,t,o,r)=>{if((e.pad_empty_with_br||t.insert)&&o(r)){const u=new Mr("br",1);t.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Mr("#text",3)).value=ss},zb=e=>{var t;return C9(e,"#text")&&((t=e==null?void 0:e.firstChild)==null?void 0:t.value)===ss},C9=(e,t)=>{const o=e==null?void 0:e.firstChild;return ve(o)&&o===e.lastChild&&o.name===t},S9=(e,t)=>{const o=e.getElementRule(t.name);return(o==null?void 0:o.paddEmpty)===!0},vC=(e,t,o,r)=>r.isEmpty(t,o,c=>S9(e,c)),Md=(e,t)=>ve(e)&&(t(e)||e.name==="br"),w9=e=>{let t;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(t=o)}return N.from(t)},x9=e=>{const t=[];for(let o=e.firstChild;ve(o);o=o.walk())t.push(o);return t},Vb=(e,t,o=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!t.isValidChild(o.name,c.name)&&Vb(c,t,o);e.unwrap()}},pB=(e,t,o,r=Ot)=>{const c=t.getTextBlockElements(),u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=He.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),v=new Set,w=k=>k!==o&&!b[k.name];for(let k=0;k<e.length;k++){const O=e[k];let R,I,U;if(!O.parent||v.has(O))continue;if(c[O.name]&&O.parent.name==="li"){let j=O.next;for(;j&&c[j.name];){j.name="li",v.add(j),O.parent.insert(j,O.parent);j=j.next}O.unwrap();continue}const H=[O];for(R=O.parent;R&&!t.isValidChild(R.name,O.name)&&w(R);R=R.parent)H.push(R);if(R&&H.length>1)if(yC(t,O,R))Vb(O,t);else{H.reverse(),I=H[0].clone(),r(I);let j=I;for(let oe=0;oe<H.length-1;oe++){t.isValidChild(j.name,H[oe].name)&&oe>0?(U=H[oe].clone(),r(U),j.append(U)):U=j;for(let se=H[oe].firstChild;se&&se!==H[oe+1];){const ae=se.next;U.append(se),se=ae}j=U}vC(t,u,f,I)?R.insert(O,H[0],!0):(R.insert(I,H[0],!0),R.insert(O,I)),R=H[0],(vC(t,u,f,R)||C9(R,"br"))&&R.empty().remove()}else if(O.parent){if(O.name==="li"){let j=O.prev;if(j&&(j.name==="ul"||j.name==="ol")){j.append(O);continue}if(j=O.next,j&&(j.name==="ul"||j.name==="ol")&&j.firstChild){j.insert(O,j.firstChild,!0);continue}const oe=new Mr("ul",1);r(oe),O.wrap(oe);continue}if(t.isValidChild(O.parent.name,"div")&&t.isValidChild("div",O.name)){const j=new Mr("div",1);r(j),O.wrap(j)}else Vb(O,t)}}},gA=(e,t)=>{let o=e;for(;o;){if(o.name===t)return!0;o=o.parent}return!1},yC=(e,t,o=t.parent)=>o?e.children[t.name]&&!e.isValidChild(o.name,t.name)||t.name==="a"&&gA(o,"a")?!0:fB(o)&&qc(t)?!((o==null?void 0:o.firstChild)===t&&(o==null?void 0:o.lastChild)===t):!1:!1,bB=(e,t,o,r)=>{const c=document.createRange();return c.setStart(e,t),c.setEnd(o,r),c},E9=e=>{const t=Ce.fromRangeStart(e),o=Ce.fromRangeEnd(e),r=e.commonAncestorContainer;return Wc(!1,r,o).map(c=>!_u(t,o,r)&&_u(t,c,r)?bB(t.container(),t.offset(),c.container(),c.offset()):e).getOr(e)},hA=e=>e.collapsed?e:E9(e),qf=He.explode,vB=()=>{const e={};return{addFilter:(c,u)=>{le(qf(c),f=>{Kt(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Ia(e),removeFilter:(c,u)=>{le(qf(c),f=>{if(Kt(e,f))if(ve(u)){const b=e[f],v=ge(b.callbacks,w=>w!==u);v.length>0?b.callbacks=v:delete e[f]}else delete e[f]})}}},T9=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),k9=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),pn=(e,t)=>{le(t,o=>{e.attr(o,null)})},_9=(e,t,o)=>{e.addNodeFilter("font",r=>{le(r,c=>{const u=t.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),v=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),v&&Hh(v).each(w=>{u["font-size"]=o[w-1]}),c.name="span",c.attr("style",t.serialize(u)),pn(c,["color","face","size"])})})},A9=(e,t,o)=>{e.addNodeFilter("strike",r=>{const c=t.type!=="html4";le(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},yB=(e,t,o)=>{const r=gd();t.convert_fonts_to_spans&&_9(e,r,He.explode(t.font_size_legacy_values??"")),A9(e,o,r)},O9=(e,t,o)=>{t.inline_styles&&yB(e,t,o)},D9=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),xs=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},R9=e=>{try{return decodeURIComponent(e)}catch{return e}},pA=e=>{const[t,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(c){const u=c[2]===";base64",f=R9(r),b=u?xs(f):f;return N.some({type:c[1],data:b,base64Encoded:u})}else return N.none()},CB=(e,t,o=!0)=>{let r=t;if(o)try{r=atob(t)}catch{return N.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return N.some(new Blob([c],{type:e}))},M9=e=>new Promise((t,o)=>{pA(e).bind(({type:r,data:c,base64Encoded:u})=>CB(r,c,u)).fold(()=>o("Invalid data URI"),t)}),Qo=e=>Zt(e,"blob:")?D9(e):Zt(e,"data:")?M9(e):Promise.reject("Unknown URI format"),bA=e=>new Promise((t,o)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{var c;o((c=r.error)==null?void 0:c.message)},r.readAsDataURL(e)});let SB=0;const B9=e=>"blobid"+SB++,vA=(e,t,o)=>pA(e).bind(({data:r,type:c,base64Encoded:u})=>{if(t&&!u)return N.none();{const f=u?r:btoa(r);return o(f,c)}}),wB=(e,t,o)=>{const r=e.create(B9(),t,o);return e.add(r),r},Fm=(e,t,o=!1)=>vA(t,o,(r,c)=>N.from(e.getByData(r,c)).orThunk(()=>CB(c,r).map(u=>wB(e,u,r)))),yA=(e,t)=>{const o=()=>Promise.reject("Invalid data URI");if(Zt(t,"blob:")){const r=e.getByUri(t);return ve(r)?Promise.resolve(r):Qo(t).then(c=>bA(c).then(u=>vA(u,!1,f=>N.some(wB(e,c,f))).getOrThunk(o)))}else return Zt(t,"data:")?Fm(e,t).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},N9=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,P9=e=>N.from(e.match(N9)).bind(t=>Ir(t,1)).map(t=>Zt(t,"www.")?t.substring(4):t),DE=(e,t)=>{N.from(e.attr("src")).bind(P9).forall(o=>!vt(t,o))&&e.attr("sandbox","")},CA=(e,t)=>Zt(e,`${t}/`),$9=e=>es(e)?"iframe":CA(e,"image")?"img":CA(e,"video")?"video":CA(e,"audio")?"audio":"iframe",cr=({type:e,src:t,width:o,height:r}={},c,u)=>{const f=$9(e),b=new Mr(f,1);return b.attr(f==="audio"?{src:t}:{src:t,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&DE(b,u),b},I9=e=>ve(e.attr("data-mce-bogus")),yh=e=>e.attr("src")===Nn.transparentSrc||ve(e.attr("data-mce-placeholder")),L9=(e,t)=>{const{blob_cache:o}=t;if(o){const r=c=>{const u=c.attr("src");yh(c)||I9(c)||gn(u)||Fm(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>le(c,r))}},F9=(e,t)=>{const o=e.schema;e.addAttributeFilter("href",f=>{let b=f.length;const v=k=>k.split(" ").filter(R=>R.length>0).concat(["noopener"]).sort().join(" "),w=k=>{const O=k?He.trim(k):"";return/\b(noopener)\b/g.test(O)?O:v(O)};if(!t.allow_unsafe_link_target)for(;b--;){const k=f[b];k.name==="a"&&k.attr("target")==="_blank"&&k.attr("rel",w(k.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",f=>{let b=f.length,v,w,k,O;for(;b--;)if(O=f[b],O.name==="a"&&O.firstChild&&!O.attr("href"))for(k=O.parent,v=O.lastChild;v&&k;)w=v.prev,k.insert(v,O),v=w}),t.fix_list_elements&&e.addNodeFilter("ul,ol",f=>{let b=f.length,v,w;for(;b--;)if(v=f[b],w=v.parent,w&&(w.name==="ul"||w.name==="ol"))if(v.prev&&v.prev.name==="li")v.prev.append(v);else{const k=new Mr("li",1);k.attr("style","list-style-type: none"),v.wrap(k)}});const r=o.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",f=>{let b=f.length;for(;b--;){const v=f[b],w=v.attr("class")??"",k=He.explode(w," ");let O="";for(let R=0;R<k.length;R++){const I=k[R];let U=!1,H=r["*"];H&&H[I]&&(U=!0),H=r[v.name],!U&&H&&H[I]&&(U=!0),U&&(O&&(O+=" "),O+=I)}O.length||(O=null),v.attr("class",O)}}),L9(e,t);const c=t.sandbox_iframes??!1,u=ac(t.sandbox_iframes_exclusions??[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",f=>le(f,b=>{b.replace(cr({type:b.attr("type"),src:b.name==="object"?b.attr("data"):b.attr("src"),width:b.attr("width"),height:b.attr("height")},c,u))})),c&&e.addNodeFilter("iframe",f=>le(f,b=>DE(b,u)))};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:xB,setPrototypeOf:EB,isFrozen:H9,getPrototypeOf:z9,getOwnPropertyDescriptor:V9}=Object;let{freeze:Si,seal:Nu,create:CC}=Object,{apply:SA,construct:wA}=typeof Reflect<"u"&&Reflect;Si||(Si=function(t){return t}),Nu||(Nu=function(t){return t}),SA||(SA=function(t,o,r){return t.apply(o,r)}),wA||(wA=function(t,o){return new t(...o)});const xA=Ya(Array.prototype.forEach),SC=Ya(Array.prototype.lastIndexOf),TB=Ya(Array.prototype.pop),r1=Ya(Array.prototype.push),U9=Ya(Array.prototype.splice),RE=Ya(String.prototype.toLowerCase),EA=Ya(String.prototype.toString),kB=Ya(String.prototype.match),Bd=Ya(String.prototype.replace),a1=Ya(String.prototype.indexOf),ME=Ya(String.prototype.trim),Qi=Ya(Object.prototype.hasOwnProperty),Yr=Ya(RegExp.prototype.test),Nd=BE(TypeError);function Ya(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return SA(e,t,r)}}function BE(e){return function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return wA(e,o)}}function wo(e,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:RE;EB&&EB(e,null);let r=t.length;for(;r--;){let c=t[r];if(typeof c=="string"){const u=o(c);u!==c&&(H9(t)||(t[r]=u),c=u)}e[c]=!0}return e}function TA(e){for(let t=0;t<e.length;t++)Qi(e,t)||(e[t]=null);return e}function Pd(e){const t=CC(null);for(const[o,r]of xB(e))Qi(e,o)&&(Array.isArray(r)?t[o]=TA(r):r&&typeof r=="object"&&r.constructor===Object?t[o]=Pd(r):t[o]=r);return t}function Ub(e,t){for(;e!==null;){const r=V9(e,t);if(r){if(r.get)return Ya(r.get);if(typeof r.value=="function")return Ya(r.value)}e=z9(e)}function o(){return null}return o}const kA=Si(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ch=Si(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),NE=Si(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_B=Si(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),PE=Si(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$E=Si(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_A=Si(["#text"]),AA=Si(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),IE=Si(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),OA=Si(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pu=Si(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Sh=Nu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$u=Nu(/<%[\w\W]*|[\w\W]*%>/gm),Z9=Nu(/\$\{[\w\W]*/gm),W9=Nu(/^data-[\-\w.\u00B7-\uFFFF]+$/),j9=Nu(/^aria-[\-\w]+$/),AB=Nu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G9=Nu(/^(?:\w+script|data):/i),q9=Nu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),OB=Nu(/^html$/i),K9=Nu(/^[a-z][.\w]*(-[.\w]+)+$/i);var DB=Object.freeze({__proto__:null,ARIA_ATTR:j9,ATTR_WHITESPACE:q9,CUSTOM_ELEMENT:K9,DATA_ATTR:W9,DOCTYPE_NAME:OB,ERB_EXPR:$u,IS_ALLOWED_URI:AB,IS_SCRIPT_OR_DATA:G9,MUSTACHE_EXPR:Sh,TMPLIT_EXPR:Z9});const wC={element:1,text:3,progressingInstruction:7,comment:8,document:9},Y9=function(){return typeof window>"u"?null:window},X9=function(t,o){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},LE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function FE(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y9();const t=En=>FE(En);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==wC.document||!e.Element)return t.isSupported=!1,t;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:v,NodeFilter:w,NamedNodeMap:k=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:O,DOMParser:R,trustedTypes:I}=e,U=v.prototype,H=Ub(U,"cloneNode"),j=Ub(U,"remove"),oe=Ub(U,"nextSibling"),se=Ub(U,"childNodes"),ae=Ub(U,"parentNode");if(typeof f=="function"){const En=o.createElement("template");En.content&&En.content.ownerDocument&&(o=En.content.ownerDocument)}let Se,Oe="";const{implementation:Je,createNodeIterator:St,createDocumentFragment:xe,getElementsByTagName:me}=o,{importNode:Ee}=r;let Qe=LE();t.isSupported=typeof xB=="function"&&typeof ae=="function"&&Je&&Je.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:$t,ERB_EXPR:It,TMPLIT_EXPR:_n,DATA_ATTR:so,ARIA_ATTR:Ao,IS_SCRIPT_OR_DATA:Vo,ATTR_WHITESPACE:Pr,CUSTOM_ELEMENT:Ei}=DB;let{IS_ALLOWED_URI:nt}=DB,_t=null;const jn=wo({},[...kA,...Ch,...NE,...PE,..._A]);let Fn=null;const Jr=wo({},[...AA,...IE,...OA,...Pu]);let ke=Object.seal(CC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ge=null,ut=null,wn=!0,Qt=!0,uo=!1,Jl=!0,kc=!1,Ql=!0,sl=!1,Ih=!1,Qa=!1,Xc=!1,ig=!1,Nv=!1,ZT=!0,Lt=!1;const On="user-content-";let Ps=!0,Lo=!1,ho={},Ts=null;const Ti=wo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _c=null;const eu=wo({},["audio","video","img","source","image","track"]);let lg=null;const WT=wo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),jT="http://www.w3.org/1998/Math/MathML",PS="http://www.w3.org/2000/svg",Xm="http://www.w3.org/1999/xhtml";let Pv=Xm,B5=!1,GT=null;const aX=wo({},[jT,PS,Xm],EA);let N5=wo({},["mi","mo","mn","ms","mtext"]),P5=wo({},["annotation-xml"]);const cX=wo({},["title","style","font","a","script"]);let qT=null;const $v=["application/xhtml+xml","text/html"],YL="text/html";let ue=null,he=null;const rt=o.createElement("form"),qe=function(pe){return pe instanceof RegExp||pe instanceof Function},Wt=function(){let pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(he&&he===pe)){if((!pe||typeof pe!="object")&&(pe={}),pe=Pd(pe),qT=$v.indexOf(pe.PARSER_MEDIA_TYPE)===-1?YL:pe.PARSER_MEDIA_TYPE,ue=qT==="application/xhtml+xml"?EA:RE,_t=Qi(pe,"ALLOWED_TAGS")?wo({},pe.ALLOWED_TAGS,ue):jn,Fn=Qi(pe,"ALLOWED_ATTR")?wo({},pe.ALLOWED_ATTR,ue):Jr,GT=Qi(pe,"ALLOWED_NAMESPACES")?wo({},pe.ALLOWED_NAMESPACES,EA):aX,lg=Qi(pe,"ADD_URI_SAFE_ATTR")?wo(Pd(WT),pe.ADD_URI_SAFE_ATTR,ue):WT,_c=Qi(pe,"ADD_DATA_URI_TAGS")?wo(Pd(eu),pe.ADD_DATA_URI_TAGS,ue):eu,Ts=Qi(pe,"FORBID_CONTENTS")?wo({},pe.FORBID_CONTENTS,ue):Ti,Ge=Qi(pe,"FORBID_TAGS")?wo({},pe.FORBID_TAGS,ue):Pd({}),ut=Qi(pe,"FORBID_ATTR")?wo({},pe.FORBID_ATTR,ue):Pd({}),ho=Qi(pe,"USE_PROFILES")?pe.USE_PROFILES:!1,wn=pe.ALLOW_ARIA_ATTR!==!1,Qt=pe.ALLOW_DATA_ATTR!==!1,uo=pe.ALLOW_UNKNOWN_PROTOCOLS||!1,Jl=pe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,kc=pe.SAFE_FOR_TEMPLATES||!1,Ql=pe.SAFE_FOR_XML!==!1,sl=pe.WHOLE_DOCUMENT||!1,Xc=pe.RETURN_DOM||!1,ig=pe.RETURN_DOM_FRAGMENT||!1,Nv=pe.RETURN_TRUSTED_TYPE||!1,Qa=pe.FORCE_BODY||!1,ZT=pe.SANITIZE_DOM!==!1,Lt=pe.SANITIZE_NAMED_PROPS||!1,Ps=pe.KEEP_CONTENT!==!1,Lo=pe.IN_PLACE||!1,nt=pe.ALLOWED_URI_REGEXP||AB,Pv=pe.NAMESPACE||Xm,N5=pe.MATHML_TEXT_INTEGRATION_POINTS||N5,P5=pe.HTML_INTEGRATION_POINTS||P5,ke=pe.CUSTOM_ELEMENT_HANDLING||{},pe.CUSTOM_ELEMENT_HANDLING&&qe(pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&qe(pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),pe.CUSTOM_ELEMENT_HANDLING&&typeof pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ke.allowCustomizedBuiltInElements=pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),kc&&(Qt=!1),ig&&(Xc=!0),ho&&(_t=wo({},_A),Fn=[],ho.html===!0&&(wo(_t,kA),wo(Fn,AA)),ho.svg===!0&&(wo(_t,Ch),wo(Fn,IE),wo(Fn,Pu)),ho.svgFilters===!0&&(wo(_t,NE),wo(Fn,IE),wo(Fn,Pu)),ho.mathMl===!0&&(wo(_t,PE),wo(Fn,OA),wo(Fn,Pu))),pe.ADD_TAGS&&(_t===jn&&(_t=Pd(_t)),wo(_t,pe.ADD_TAGS,ue)),pe.ADD_ATTR&&(Fn===Jr&&(Fn=Pd(Fn)),wo(Fn,pe.ADD_ATTR,ue)),pe.ADD_URI_SAFE_ATTR&&wo(lg,pe.ADD_URI_SAFE_ATTR,ue),pe.FORBID_CONTENTS&&(Ts===Ti&&(Ts=Pd(Ts)),wo(Ts,pe.FORBID_CONTENTS,ue)),Ps&&(_t["#text"]=!0),sl&&wo(_t,["html","head","body"]),_t.table&&(wo(_t,["tbody"]),delete Ge.tbody),pe.TRUSTED_TYPES_POLICY){if(typeof pe.TRUSTED_TYPES_POLICY.createHTML!="function")throw Nd('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof pe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Nd('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Se=pe.TRUSTED_TYPES_POLICY,Oe=Se.createHTML("")}else Se===void 0&&(Se=X9(I,c)),Se!==null&&typeof Oe=="string"&&(Oe=Se.createHTML(""));Si&&Si(pe),he=pe}},Hn=wo({},[...Ch,...NE,..._B]),$s=wo({},[...PE,...$E]),ug=function(pe){let At=ae(pe);(!At||!At.tagName)&&(At={namespaceURI:Pv,tagName:"template"});const vn=RE(pe.tagName),$r=RE(At.tagName);return GT[pe.namespaceURI]?pe.namespaceURI===PS?At.namespaceURI===Xm?vn==="svg":At.namespaceURI===jT?vn==="svg"&&($r==="annotation-xml"||N5[$r]):!!Hn[vn]:pe.namespaceURI===jT?At.namespaceURI===Xm?vn==="math":At.namespaceURI===PS?vn==="math"&&P5[$r]:!!$s[vn]:pe.namespaceURI===Xm?At.namespaceURI===PS&&!P5[$r]||At.namespaceURI===jT&&!N5[$r]?!1:!$s[vn]&&(cX[vn]||!Hn[vn]):!!(qT==="application/xhtml+xml"&&GT[pe.namespaceURI]):!1},Jm=function(pe){r1(t.removed,{element:pe});try{ae(pe).removeChild(pe)}catch{j(pe)}},KT=function(pe,At){try{r1(t.removed,{attribute:At.getAttributeNode(pe),from:At})}catch{r1(t.removed,{attribute:null,from:At})}if(At.removeAttribute(pe),pe==="is")if(Xc||ig)try{Jm(At)}catch{}else try{At.setAttribute(pe,"")}catch{}},iX=function(pe){let At=null,vn=null;if(Qa)pe="<remove></remove>"+pe;else{const Ac=kB(pe,/^[\r\n\t ]+/);vn=Ac&&Ac[0]}qT==="application/xhtml+xml"&&Pv===Xm&&(pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+pe+"</body></html>");const $r=Se?Se.createHTML(pe):pe;if(Pv===Xm)try{At=new R().parseFromString($r,qT)}catch{}if(!At||!At.documentElement){At=Je.createDocument(Pv,"template",null);try{At.documentElement.innerHTML=B5?Oe:$r}catch{}}const rl=At.body||At.documentElement;return pe&&vn&&rl.insertBefore(o.createTextNode(vn),rl.childNodes[0]||null),Pv===Xm?me.call(At,sl?"html":"body")[0]:sl?At.documentElement:rl},lX=function(pe){return St.call(pe.ownerDocument||pe,pe,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT|w.SHOW_PROCESSING_INSTRUCTION|w.SHOW_CDATA_SECTION,null)},dY=function(pe){return pe instanceof O&&(typeof pe.nodeName!="string"||typeof pe.textContent!="string"||typeof pe.removeChild!="function"||!(pe.attributes instanceof k)||typeof pe.removeAttribute!="function"||typeof pe.setAttribute!="function"||typeof pe.namespaceURI!="string"||typeof pe.insertBefore!="function"||typeof pe.hasChildNodes!="function")},uX=function(pe){return typeof b=="function"&&pe instanceof b};function F1(En,pe,At){xA(En,vn=>{vn.call(t,pe,At,he)})}const dX=function(pe){let At=null;if(F1(Qe.beforeSanitizeElements,pe,null),dY(pe))return Jm(pe),!0;const vn=ue(pe.nodeName);if(F1(Qe.uponSanitizeElement,pe,{tagName:vn,allowedTags:_t}),Ql&&pe.hasChildNodes()&&!uX(pe.firstElementChild)&&Yr(/<[/\w!]/g,pe.innerHTML)&&Yr(/<[/\w!]/g,pe.textContent)||pe.nodeType===wC.progressingInstruction||Ql&&pe.nodeType===wC.comment&&Yr(/<[/\w]/g,pe.data))return Jm(pe),!0;if(!_t[vn]||Ge[vn]){if(!Ge[vn]&&fX(vn)&&(ke.tagNameCheck instanceof RegExp&&Yr(ke.tagNameCheck,vn)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(vn)))return!1;if(Ps&&!Ts[vn]){const $r=ae(pe)||pe.parentNode,rl=se(pe)||pe.childNodes;if(rl&&$r){const Ac=rl.length;for(let Gu=Ac-1;Gu>=0;--Gu){const H1=H(rl[Gu],!0);H1.__removalCount=(pe.__removalCount||0)+1,$r.insertBefore(H1,oe(pe))}}}return Jm(pe),!0}return pe instanceof v&&!ug(pe)||(vn==="noscript"||vn==="noembed"||vn==="noframes")&&Yr(/<\/no(script|embed|frames)/i,pe.innerHTML)?(Jm(pe),!0):(kc&&pe.nodeType===wC.text&&(At=pe.textContent,xA([$t,It,_n],$r=>{At=Bd(At,$r," ")}),pe.textContent!==At&&(r1(t.removed,{element:pe.cloneNode()}),pe.textContent=At)),F1(Qe.afterSanitizeElements,pe,null),!1)},mX=function(pe,At,vn){if(ZT&&(At==="id"||At==="name")&&(vn in o||vn in rt))return!1;if(!(Qt&&!ut[At]&&Yr(so,At))){if(!(wn&&Yr(Ao,At))){if(!Fn[At]||ut[At]){if(!(fX(pe)&&(ke.tagNameCheck instanceof RegExp&&Yr(ke.tagNameCheck,pe)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(pe))&&(ke.attributeNameCheck instanceof RegExp&&Yr(ke.attributeNameCheck,At)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(At))||At==="is"&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&Yr(ke.tagNameCheck,vn)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(vn))))return!1}else if(!lg[At]){if(!Yr(nt,Bd(vn,Pr,""))){if(!((At==="src"||At==="xlink:href"||At==="href")&&pe!=="script"&&a1(vn,"data:")===0&&_c[pe])){if(!(uo&&!Yr(Vo,Bd(vn,Pr,"")))){if(vn)return!1}}}}}}return!0},fX=function(pe){return pe!=="annotation-xml"&&kB(pe,Ei)},gX=function(pe){F1(Qe.beforeSanitizeAttributes,pe,null);const{attributes:At}=pe;if(!At||dY(pe))return;const vn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Fn,forceKeepAttr:void 0};let $r=At.length;for(;$r--;){const rl=At[$r],{name:Ac,namespaceURI:Gu,value:H1}=rl,$5=ue(Ac),mY=H1;let al=Ac==="value"?mY:ME(mY);if(vn.attrName=$5,vn.attrValue=al,vn.keepAttr=!0,vn.forceKeepAttr=void 0,F1(Qe.uponSanitizeAttribute,pe,vn),al=vn.attrValue,Lt&&($5==="id"||$5==="name")&&(KT(Ac,pe),al=On+al),Ql&&Yr(/((--!?|])>)|<\/(style|title)/i,al)){KT(Ac,pe);continue}if(vn.forceKeepAttr)continue;if(!vn.keepAttr){KT(Ac,pe);continue}if(!Jl&&Yr(/\/>/i,al)){KT(Ac,pe);continue}kc&&xA([$t,It,_n],pX=>{al=Bd(al,pX," ")});const hX=ue(pe.nodeName);if(!mX(hX,$5,al)){KT(Ac,pe);continue}if(Se&&typeof I=="object"&&typeof I.getAttributeType=="function"&&!Gu)switch(I.getAttributeType(hX,$5)){case"TrustedHTML":{al=Se.createHTML(al);break}case"TrustedScriptURL":{al=Se.createScriptURL(al);break}}if(al!==mY)try{Gu?pe.setAttributeNS(Gu,Ac,al):pe.setAttribute(Ac,al),dY(pe)?Jm(pe):TB(t.removed)}catch{KT(Ac,pe)}}F1(Qe.afterSanitizeAttributes,pe,null)},CX=function En(pe){let At=null;const vn=lX(pe);for(F1(Qe.beforeSanitizeShadowDOM,pe,null);At=vn.nextNode();)F1(Qe.uponSanitizeShadowNode,At,null),dX(At),gX(At),At.content instanceof u&&En(At.content);F1(Qe.afterSanitizeShadowDOM,pe,null)};return t.sanitize=function(En){let pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},At=null,vn=null,$r=null,rl=null;if(B5=!En,B5&&(En="<!-->"),typeof En!="string"&&!uX(En))if(typeof En.toString=="function"){if(En=En.toString(),typeof En!="string")throw Nd("dirty is not a string, aborting")}else throw Nd("toString is not a function");if(!t.isSupported)return En;if(Ih||Wt(pe),t.removed=[],typeof En=="string"&&(Lo=!1),Lo){if(En.nodeName){const H1=ue(En.nodeName);if(!_t[H1]||Ge[H1])throw Nd("root node is forbidden and cannot be sanitized in-place")}}else if(En instanceof b)At=iX("<!---->"),vn=At.ownerDocument.importNode(En,!0),vn.nodeType===wC.element&&vn.nodeName==="BODY"||vn.nodeName==="HTML"?At=vn:At.appendChild(vn);else{if(!Xc&&!kc&&!sl&&En.indexOf("<")===-1)return Se&&Nv?Se.createHTML(En):En;if(At=iX(En),!At)return Xc?null:Nv?Oe:""}At&&Qa&&Jm(At.firstChild);const Ac=lX(Lo?En:At);for(;$r=Ac.nextNode();)dX($r),gX($r),$r.content instanceof u&&CX($r.content);if(Lo)return En;if(Xc){if(ig)for(rl=xe.call(At.ownerDocument);At.firstChild;)rl.appendChild(At.firstChild);else rl=At;return(Fn.shadowroot||Fn.shadowrootmode)&&(rl=Ee.call(r,rl,!0)),rl}let Gu=sl?At.outerHTML:At.innerHTML;return sl&&_t["!doctype"]&&At.ownerDocument&&At.ownerDocument.doctype&&At.ownerDocument.doctype.name&&Yr(OB,At.ownerDocument.doctype.name)&&(Gu="<!DOCTYPE "+At.ownerDocument.doctype.name+`>
`+Gu),kc&&xA([$t,It,_n],H1=>{Gu=Bd(Gu,H1," ")}),Se&&Nv?Se.createHTML(Gu):Gu},t.setConfig=function(){let En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wt(En),Ih=!0},t.clearConfig=function(){he=null,Ih=!1},t.isValidAttribute=function(En,pe,At){he||Wt({});const vn=ue(En),$r=ue(pe);return mX(vn,$r,At)},t.addHook=function(En,pe){typeof pe=="function"&&r1(Qe[En],pe)},t.removeHook=function(En,pe){if(pe!==void 0){const At=SC(Qe[En],pe);return At===-1?void 0:U9(Qe[En],At,1)[0]}return TB(Qe[En])},t.removeHooks=function(En){Qe[En]=[]},t.removeAllHooks=function(){Qe=LE()},t}var HE=FE();const RB=He.each,J9=He.trim,MB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],BB={ftp:21,http:80,https:443,mailto:25},DA=["img","video"],NB=(e,t)=>ve(e)?!e:ve(t)?!vt(DA,t):!0,PB=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},zE=(e,t,o)=>{const r=PB(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?NB(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Iu{constructor(t,o={}){Ie(this,"source");Ie(this,"protocol");Ie(this,"authority");Ie(this,"userInfo");Ie(this,"user");Ie(this,"password");Ie(this,"host");Ie(this,"port");Ie(this,"relative");Ie(this,"path","");Ie(this,"directory","");Ie(this,"file");Ie(this,"query");Ie(this,"anchor");Ie(this,"settings");t=J9(t),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){c.source=t;return}const u=t.indexOf("//")===0;if(t.indexOf("/")===0&&!u&&(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const b=r?r.path:new Iu(document.location.href).directory;if((r==null?void 0:r.protocol)==="")t="//mce_host"+c.toAbsPath(b,t);else{const v=/([^#?]*)([#?]?.*)/.exec(t);v&&(t=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,v[1])+v[2])}}t=t.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);f&&RB(MB,(b,v)=>{let w=f[v];w&&(w=w.replace(/\(mce_at\)/g,"@@")),c[b]=w}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(t){let o;const r=decodeURIComponent(t).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(t,o,r={}){if(r.allow_script_urls)return!0;{const c=bc.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!zE(r,c,o)}}static getDocumentBaseUrl(t){let o;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?o=t.href??"":o=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}setPath(t){const o=/^(.*?)\/?(\w+)?$/.exec(t);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const o=new Iu(t,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(t,o){const r=new Iu(t,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const o=this.protocol?BB[this.protocol]:null;if(o&&(this.port||o)==(t.port||o))return!0}return!1}toRelPath(t,o){let r=0,c="",u,f;const b=t.substring(0,t.lastIndexOf("/")).split("/"),v=o.split("/");if(b.length>=v.length){for(u=0,f=b.length;u<f;u++)if(u>=v.length||b[u]!==v[u]){r=u+1;break}}if(b.length<v.length){for(u=0,f=v.length;u<f;u++)if(u>=b.length||b[u]!==v[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=v.length;u<f;u++)u!==r-1?c+="/"+v[u]:c+=v[u];return c}toAbsPath(t,o){let r=0;const c=/\/$/.test(o)?"/":"",u=t.split("/"),f=o.split("/"),b=[];RB(u,O=>{O&&b.push(O)});const v=[];for(let O=f.length-1;O>=0;O--)if(!(f[O].length===0||f[O]===".")){if(f[O]===".."){r++;continue}if(r>0){r--;continue}v.push(f[O])}const w=b.length-r;let k;return w<=0?k=Mo(v).join("/"):k=b.slice(0,w).join("/")+"/"+Mo(v).join("/"),k.indexOf("/")!==0&&(k="/"+k),c&&k.lastIndexOf("/")!==k.length-1&&(k+=c),k}getURI(t=!1){let o;return(!this.source||t)&&(o="",t||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const Q9=He.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Lu="data-mce-type";let Vl=0;const xC=(e,t,o,r,c)=>{const u=t.validate,f=o.getSpecialElements();e.nodeType===Fa&&(!t.allow_conditional_comments&&/^\[if/i.test(e.nodeValue??"")&&(e.nodeValue=" "+e.nodeValue),t.sanitize&&t.allow_html_in_comments&&Y(e.nodeValue)&&(e.nodeValue=T9(e.nodeValue)));const b=(c==null?void 0:c.tagName)??e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){ve(c)&&(c.allowedTags[b]=!0);return}if(e.nodeType!==Zh||b==="body")return;const v=q.fromDom(e),w=Go(v,Lu),k=Po(v,"data-mce-bogus");if(!w&&Y(k)){k==="all"?xo(v):ui(v);return}const O=o.getElementRule(b);if(u&&!O){Kt(f,b)?xo(v):ui(v);return}else ve(c)&&(c.allowedTags[b]=!0);if(u&&O&&!w){if(le(O.attributesForced??[],R=>{rs(v,R.name,R.value==="{$uid}"?`mce_${Vl++}`:R.value)}),le(O.attributesDefault??[],R=>{Go(v,R.name)||rs(v,R.name,R.value==="{$uid}"?`mce_${Vl++}`:R.value)}),O.attributesRequired&&!zn(O.attributesRequired,R=>Go(v,R))){ui(v);return}if(O.removeEmptyAttrs&&yg(v)){ui(v);return}O.outputName&&O.outputName!==b&&jh(v,O.outputName)}},$B=(e,t,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=EC(t,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,MA(f,o,e.nodeName)&&(c.attrValue=f),t.allow_svg_data_urls&&Zt(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):RA(e,f)&&(c.forceKeepAttr=!0)},EC=(e,t,o,r,c,u)=>o!=="html"&&!gf(r)?!0:!(c in Q9&&zE(e,u,r))&&(!e.validate||t.isValid(r,c)||Zt(c,"data-")||Zt(c,"aria-")),RA=(e,t)=>e.hasAttribute(Lu)&&(t==="id"||t==="class"||t==="style"),MA=(e,t,o)=>e in t.getBoolAttrs()&&!Kt(t.getCustomElements(),o.toLowerCase()),IB=(e,t,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,v=f.value;!EC(t,o,r,e.tagName.toLowerCase(),b,v)&&!RA(e,b)?e.removeAttribute(b):MA(b,o,e.nodeName)&&e.setAttribute(b,b)}},LB=(e,t,o)=>{const r=HE();return r.addHook("uponSanitizeElement",(c,u)=>{xC(c,e,t,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{$B(c,e,t,o.current(),u)}),r},FB=(e,t)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},HB=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};HE().sanitize(e,o)},VE=(e,t)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=HE(),c=t.allow_mathml_annotation_encodings,u=dn(c)&&c.length>0,f=v=>{const w=v.getAttribute("encoding");return u&&Y(w)&&vt(c,w)},b=(v,w)=>u&&w==="semantics"?N.some(!0):w==="annotation"?N.some(Ye(v)&&f(v)):dn(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(w)?N.from(!0):N.none();r.addHook("uponSanitizeElement",(v,w)=>{const k=w.tagName??v.nodeName.toLowerCase();b(v,k).each(R=>{w.allowedTags[k]=R,!R&&t.sanitize&&Ye(v)&&v.remove()})}),r.addHook("uponSanitizeAttribute",(v,w)=>{dn(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(w.attrName)&&(w.forceKeepAttr=!0)}),r.sanitize(e,o)},BA=e=>t=>{const o=v2(t);if(o==="svg")HB(t);else if(o==="math")VE(t,e);else throw new Error("Not a namespace element")},ez=(e,t)=>{const o=cw();if(e.sanitize){const r=LB(e,t,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,FB(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:BA(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let v;for(;v=b.nextNode();){const w=o.track(v);xC(v,e,t,w),Ye(v)&&IB(v,e,t,w)}o.reset()},sanitizeNamespaceElement:Ot}},zB=["script","style","template","param","meta","title","link"],VB=He.makeMap,UB=He.extend,NA=(e,t,o,r,c)=>{const u=e.name,f=u in o&&u!=="title"&&u!=="textarea"&&u!=="noscript",b=t.childNodes;for(let v=0,w=b.length;v<w;v++){const k=b[v],O=new Mr(k.nodeName.toLowerCase(),k.nodeType);if(Ye(k)){const R=k.attributes;for(let I=0,U=R.length;I<U;I++){const H=R[I];O.attr(H.name,H.value)}gf(O.name)&&(r(k),O.value=k.innerHTML)}else ze(k)?(O.value=k.data,f&&(O.raw=!0)):rn(k)?O.value=c?k9(k.data):k.data:(f2(k)||Ks(k))&&(O.value=k.data);if(h2(k)){const R=Mr.create("#text");R.value=k.innerHTML,R.raw=!0,O.append(R)}else gf(O.name)||NA(O,k,o,r,c);e.append(O)}},tz=(e,t,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;le(t,b=>b(f)),gn(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];le(o,f=>f(u))}},nz=(e,t,o,r)=>{const c=o.validate,u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=UB(VB(zB),t.getBlockElements()),v=p0(t),w=/[ \t\r\n]+/g,k=/^[ \t\r\n]+/,O=/[ \t\r\n]+$/,R=se=>{let ae=se.parent;for(;ve(ae);){if(ae.name in f)return!0;ae=ae.parent}return!1},I=se=>{let ae=se;for(;ve(ae);){if(ae.name in v)return vC(t,u,f,ae);ae=ae.parent}return!1},U=se=>se.name in b||pc(t,se)||gf(se.name)&&se.parent===e,H=(se,ae)=>{const Se=ae?se.prev:se.next;return ve(Se)||gn(se.parent)?!1:U(se.parent)&&(se.parent!==e||r.isRootContent===!0)};return[se=>{if(se.type===3&&!R(se)){let ae=se.value??"";ae=ae.replace(w," "),(Md(se.prev,U)||H(se,!0))&&(ae=ae.replace(k,"")),ae.length===0||ae===" "&&se.prev&&se.prev.type===Fa&&se.next&&se.next.type===Fa?se.remove():se.value=ae}},se=>{if(se.type===1){const ae=t.getElementRule(se.name);if(c&&ae){const Se=vC(t,u,f,se);ae.paddInEmptyBlock&&Se&&I(se)?vh(o,r,U,se):ae.removeEmpty&&Se?U(se)?se.remove():se.unwrap():ae.paddEmpty&&(Se||zb(se))&&vh(o,r,U,se)}}else if(se.type===3&&!R(se)){let ae=se.value??"";(se.next&&U(se.next)||H(se,!1))&&(ae=ae.replace(O,"")),ae.length===0?se.remove():se.value=ae}}]},PA=(e,t)=>{const o=t.forced_root_block??e.forced_root_block;return o===!1?"":o===!0?"p":o},ZB=' xmlns="http://www.w3.org/1999/xhtml"',Zb=(e={},t=Ar())=>{const o=vB(),r=vB(),c={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},u=new DOMParser,f=ez(c,t),b=(ae,Se,Oe="html",Je=!1)=>{const St=Oe==="xhtml",xe=St?"application/xhtml+xml":"text/html",me=Kt(t.getSpecialElements(),Se.toLowerCase()),Ee=me?`<${Se}>${ae}</${Se}>`:ae,Qe=()=>/^[\s]*<head/i.test(ae)||/^[\s]*<html/i.test(ae)||/^[\s]*<!DOCTYPE/i.test(ae)?`<html${St?ZB:""}>${Ee}</html>`:St?`<html${ZB}><head></head><body>${Ee}</body></html>`:`<body>${Ee}</body>`,$t=u.parseFromString(Qe(),xe),It=Je?$t.documentElement:$t.body;return f.sanitizeHtmlElement(It,xe),me?It.firstChild:It},v=o.addFilter,w=o.getFilters,k=o.removeFilter,O=r.addFilter,R=r.getFilters,I=r.removeFilter,U=(ae,Se)=>{yC(t,ae)&&Se.push(ae)},H=(ae,Se)=>{const Oe=Y(Se.attr(Lu)),Je=Se.type===1&&!Kt(ae,Se.name)&&!pc(t,Se)&&!gf(Se.name);return Se.type===3||Je&&!Oe},j=(ae,Se)=>{const Oe=UB(VB(zB),t.getBlockElements()),Je=/^[ \t\r\n]+/,St=/[ \t\r\n]+$/;let xe=ae.firstChild,me=null;const Ee=Qe=>{var $t,It;Qe&&(xe=Qe.firstChild,xe&&xe.type===3&&(xe.value=($t=xe.value)==null?void 0:$t.replace(Je,"")),xe=Qe.lastChild,xe&&xe.type===3&&(xe.value=(It=xe.value)==null?void 0:It.replace(St,"")))};if(t.isValidChild(ae.name,Se.toLowerCase())){for(;xe;){const Qe=xe.next;H(Oe,xe)?(me||(me=new Mr(Se,1),me.attr(c.forced_root_block_attrs),ae.insert(me,xe)),me.append(xe)):(Ee(me),me=null),xe=Qe}Ee(me)}},se={schema:t,addAttributeFilter:O,getAttributeFilters:R,removeAttributeFilter:I,addNodeFilter:v,getNodeFilters:w,removeNodeFilter:k,parse:(ae,Se={})=>{const Oe=c.validate,Je=(Se.context??c.root_name)==="#document",St=Se.context??(Je?"html":c.root_name),xe=b(ae,St,Se.format,Je);sr(t,xe);const me=new Mr(St,11);NA(me,xe,t.getSpecialElements(),f.sanitizeNamespaceElement,c.sanitize&&c.allow_html_in_comments),xe.innerHTML="";const[Ee,Qe]=nz(me,t,c,Se),$t=[],It=Oe?Vo=>U(Vo,$t):Ot,_n={nodes:{},attributes:{}},so=Vo=>fA(w(),R(),Vo,_n);tz(me,[Ee,so],[Qe,It]),$t.reverse(),Oe&&$t.length>0&&(Se.context?Se.invalid=!0:pB($t,t,me,so));const Ao=PA(c,Se);return Ao&&(me.name==="body"||Se.isRootContent)&&j(me,Ao),Se.invalid||gB(_n,Se),me}};return F9(se,c),O9(se,c,t),se},UE=e=>e instanceof Mr,oz=e=>UE(e)?fh({validate:!1}).serialize(e):e,WB=(e,t,o)=>{const r=oz(e),c=t(r);if(c.isDefaultPrevented())return c;if(UE(e))if(c.content!==r){const u=Zb({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},jB=e=>({sanitize:bb(e),sandbox_iframes:lh(e),sandbox_iframes_exclusions:xd(e)}),GB=(e,t)=>{if(t.no_events)return vr.value(t);{const o=rh(e,t);return o.isDefaultPrevented()?vr.error(Jw(e,{content:"",...o}).content):vr.value(o)}},TC=(e,t,o)=>o.no_events?t:WB(t,c=>Jw(e,{...o,content:c}),jB(e)).content,kC=(e,t)=>{if(t.no_events)return vr.value(t);{const o=WB(t.content,r=>hk(e,{...t,content:r}),jB(e));return o.isDefaultPrevented()?(Xw(e,o),vr.error(void 0)):vr.value(o)}},$A=(e,t,o)=>{o.no_events||Xw(e,{...o,content:t})},sz="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),rz=["content_css_cors"],az="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),IA=[{name:"export",replacedWith:"Export to PDF"}],qB=(e,t)=>{const o=ge(t,r=>Kt(e,r));return ki(o)},cz=e=>{const t=qB(e,sz),o=e.forced_root_block;return(o===!1||o==="")&&t.push("forced_root_block (false only)"),ki(t)},LA=e=>qB(e,rz),KB=(e,t)=>{const o=He.makeMap(e.plugins," "),c=ge(t,u=>Kt(o,u));return ki(c)},iz=e=>KB(e,az),lz=e=>KB(e,IA.map(t=>t.name)),uz=(e,t)=>{const o=cz(e),r=iz(t),c=r.length>0,u=o.length>0,f=t.theme==="mobile";if(c||u||f){const b=`
- `,v=f?`

Themes:${b}mobile`:"",w=c?`

Plugins:${b}${r.join(b)}`:"",k=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+v+w+k)}},dz=e=>Qn(IA,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),mz=(e,t)=>{const o=LA(e),r=lz(t),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(dz).join(f)}`:"",v=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+v)}},fz=(e,t)=>{uz(e,t),mz(e,t)},ZE={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},_C=e=>{console.warn(ZE[e],new Error().stack)},YB=e=>e.dom.length===0?(xo(e),N.none()):N.some(e),gz=(e,t)=>e.filter(o=>Nb.isBookmarkNode(o.dom)).bind(t?uu:ii),WE=(e,t,o,r,c)=>{const u=e.dom,f=t.dom,b=r?u.length:f.length;r?(CE(u,f,c,!1,!r),o.setStart(f,b)):(CE(f,u,c,!1,!r),o.setEnd(f,b))},hz=(e,t,o)=>{Ic(e).each(r=>{const c=e.dom;t&&lC(r,Ce(c,0),o)?vE(c,0,o):!t&&Oa(r,Ce(c,c.length),o)&&yE(c,c.length,o)})},XB=(e,t,o,r,c)=>{e.bind(u=>((r?yE:vE)(u.dom,r?u.dom.length:0,c),t.filter(qn).map(b=>WE(u,b,o,r,c)))).orThunk(()=>gz(t,r).or(t).filter(qn).map(f=>hz(f,r,c)))},pz=(e,t,o)=>{const r=N.from(t.firstChild).map(q.fromDom),c=N.from(t.lastChild).map(q.fromDom);e.deleteContents(),e.insertNode(t);const u=r.bind(ii).filter(qn).bind(YB),f=c.bind(uu).filter(qn).bind(YB);XB(u,r,e,!0,o),XB(f,c,e,!1,o),e.collapse(!1)},bz=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),vz=(e,t)=>{if(t.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(t.content,{forced_root_block:!1,...c,...t});return fh({validate:!1},e.schema).serialize(u)}else return t.content},jE=(e,t,o={})=>{const r=bz(o,t);kC(e,r).each(c=>{const u=vz(e,c),f=e.selection.getRng();pz(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),Xi(e,f),$A(e,u,c)})},yz=(e,t,o={})=>{_C("selectionSetContent"),jE(e,t,o)},Cz=e=>ve(e.firstChild)&&e.firstChild===e.lastChild,Sz=e=>e.name==="br"||e.value===ss,wz=(e,t)=>e.getBlockElements()[t.name]&&Cz(t)&&Sz(t.firstChild),xz=(e,t)=>{const o=e.getNonEmptyElements();return ve(t)&&(t.isEmpty(o)||wz(e,t))},IY=(e,t)=>{let o=t.firstChild,r=t.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),xz(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},Fu=e=>{var r,c;const t=e.firstChild,o=e.lastChild;return t&&t.nodeName==="META"&&((r=t.parentNode)==null||r.removeChild(t)),o&&o.id==="mce_marker"&&((c=o.parentNode)==null||c.removeChild(o)),e},JB=(e,t,o)=>{const r=t.serialize(o),c=e.createFragment(r);return Fu(c)},Ez=e=>ge((e==null?void 0:e.childNodes)??[],t=>t.nodeName==="LI"),QB=e=>e.data===ss||Xo(e),Tz=e=>ve(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&QB(e.firstChild),kz=e=>!e.firstChild||Tz(e),LY=e=>e.length>0&&kz(e[e.length-1])?e.slice(0,-1):e,Xr=(e,t)=>{const o=e.getParent(t,e.isBlock);return o&&o.nodeName==="LI"?o:null},_z=(e,t)=>!!Xr(e,t),FA=(e,t)=>{const o=t.cloneRange(),r=t.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},eN=(e,t)=>{const o=Ce.before(e),c=Ll(t).next(o);return c?c.toRange():null},AC=(e,t)=>{const o=Ce.after(e),c=Ll(t).prev(o);return c?c.toRange():null},Az=(e,t,o,r)=>{const c=FA(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),He.each(t,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),AC(t[t.length-1],o)},Oz=(e,t,o)=>{const r=e.parentNode;return r&&He.each(t,c=>{r.insertBefore(c,e)}),eN(e,o)},Dz=(e,t,o,r)=>(r.insertAfter(t.reverse(),e),AC(t[0],o)),Rz=(e,t,o,r)=>{const c=JB(t,e,r),u=Xr(t,o.startContainer),f=LY(Ez(c.firstChild)),b=1,v=2,w=t.getRoot(),k=O=>{const R=Ce.fromRangeStart(o),I=Ll(t.getRoot()),U=O===b?I.prev(R):I.next(R),H=U==null?void 0:U.getNode();return H?Xr(t,H)!==u:!0};return u?k(b)?Oz(u,f,w):k(v)?Dz(u,f,w,t):Az(u,f,w,o):null},Mz=["pre"],tN=(e,t,o,r)=>{var w;const c=t.firstChild,u=t.lastChild,f=u.attr("data-mce-type")==="bookmark"?u.prev:u,b=c===f,v=vt(Mz,c.name);if(b&&v){const k=c.attr("contenteditable")!=="false",O=((w=e.getParent(o,e.isBlock))==null?void 0:w.nodeName.toLowerCase())===c.name,R=N.from(Dd(r,o)).forall(gc);return k&&O&&R}else return!1},HA=Og,nN=(e,t,o)=>{if(ve(o)){const r=e.getParent(t.endContainer,HA);return o===r&&Vf(q.fromDom(o),t)}else return!1},oN=(e,t)=>{if(e.isBlock(t)&&e.isEditable(t)){const o=t.childNodes;return o.length===1&&Xo(o[0])||o.length===0}else return!1},Bz=(e,t,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)==null||r.insertBefore(e.dom.createFragment(t),o):oN(e.dom,o)?e.dom.setHTML(o,t):jE(e,t,{no_events:!0})},Nz=(e,t,o)=>{N.from(e.getParent(t,"td,th")).map(q.fromDom).each(r=>I2(r,o))},Pz=(e,t)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(t){const c=e.getBody(),u=Rd(e),f="*[data-mce-fragment]",b=r.select(f);He.each(b,v=>{const w=R=>ve(o[R.nodeName.toLowerCase()]),k=R=>R.childNodes.length===1;if((R=>!(jM(r,R)||GM(r,R)))(v)&&w(v)&&k(v)){const R=Lb(r,v),I=(oe,se)=>$a(oe,ae=>vt(se,ae)),U=oe=>k(v)&&r.is(oe,f)&&w(oe)&&(oe.nodeName===v.nodeName&&I(R,Lb(r,oe))||U(oe.children[0])),H=oe=>ve(oe)&&oe!==c&&(u.compare(v,oe)||H(oe.parentElement)),j=oe=>ve(oe)&&oe!==c&&r.is(oe,f)&&(sH(r,v,oe)||j(oe.parentElement));(U(v.children[0])||H(v.parentElement)&&!j(v.parentElement))&&r.remove(v,!0)}}),b9(e,df(b))}},$z=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},Iz=e=>{He.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},GE=e=>!!e.getAttribute("data-mce-fragment"),sN=(e,t)=>ve(t)&&!e.schema.getVoidElements()[t.nodeName],rN=(e,t)=>{var k,O;let o;const r=e.dom,c=e.selection;if(!t)return;c.scrollIntoView(t);const u=Dd(e.getBody(),t);if(u&&r.getContentEditable(u)==="false"){r.remove(t),c.select(u);return}let f=r.createRng();const b=t.previousSibling;if(ze(b)){f.setStart(b,((k=b.nodeValue)==null?void 0:k.length)??0);const R=t.nextSibling;ze(R)&&(b.appendData(R.data),(O=R.parentNode)==null||O.removeChild(R))}else f.setStartBefore(t),f.setEndBefore(t);const v=R=>{let I=Ce.fromRangeStart(R);return I=Ll(e.getBody()).next(I),I==null?void 0:I.toRange()},w=r.getParent(t,r.isBlock);if(r.remove(t),w&&r.isEmpty(w)){const R=HA(w);Pi(q.fromDom(w)),f.setStart(w,0),f.setEnd(w,0),!R&&!GE(w)&&(o=v(f))?(f=o,r.remove(w)):r.add(w,r.create("br",R?{}:{"data-mce-bogus":"1"}))}c.setRng(f)},Lz=e=>{const t=e.dom,o=hA(e.selection.getRng());e.selection.setRng(o);const r=t.getParent(o.startContainer,HA);nN(t,o,r)?wE(e,o,q.fromDom(r)):eF(o)||QL(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},aN=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return N.some(t);return N.none()},Fz=(e,t,o)=>{var r;return zn(o.children(),qc)&&((r=e.getParent(t,e.isBlock))==null?void 0:r.nodeName)==="SUMMARY"},Hz=(e,t,o)=>{var j;const r=e.selection,c=e.dom,u=e.parser,f=o.merge,b=fh({validate:!0},e.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(t=ja(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,v);let w=r.getRng();const k=w.startContainer,O=e.getBody();k===O&&r.isCollapsed()&&c.isBlock(O.firstChild)&&sN(e,O.firstChild)&&c.isEmpty(O.firstChild)&&(w=c.createRng(),w.setStart(O.firstChild,0),w.setEnd(O.firstChild,0),r.setRng(w)),r.isCollapsed()||Lz(e);const R=r.getNode(),I={context:R.nodeName.toLowerCase(),data:o.data,insert:!0},U=u.parse(t,I);if(o.paste===!0&&IY(e.schema,U)&&_z(c,R))return w=Rz(b,c,r.getRng(),U),w&&r.setRng(w),t;o.paste===!0&&tN(c,U,R,e.getBody())&&((j=U.firstChild)==null||j.unwrap()),$z(U);let H=U.lastChild;if(H&&H.attr("id")==="mce_marker"){const oe=H;for(H=H.prev;H&&H.name!=="table";H=H.walk(!0))if(H.type===3||!c.isBlock(H.name)){H.parent&&e.schema.isValidChild(H.parent.name,"span")&&H.parent.insert(oe,H,H.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(R),!I.invalid&&!Fz(c,R,U))t=b.serialize(U),Bz(e,t,R);else{jE(e,v);let oe=r.getNode(),se;const ae=e.getBody();for(ld(oe)?oe=se=ae:se=oe;se&&se!==ae;)oe=se,se=se.parentNode;t=oe===ae?ae.innerHTML:c.getOuterHTML(oe);const Se=u.parse(t),Oe=aN(Se),Je=Oe.bind(w9).getOr(Se);Oe.each(me=>me.replace(U));const St=x9(U);U.unwrap();const xe=ge(St,me=>yC(e.schema,me));pB(xe,e.schema,Je),hB(u.getNodeFilters(),u.getAttributeFilters(),Se),t=b.serialize(Se),oe===ae?c.setHTML(ae,t):c.setOuterHTML(oe,t)}return Pz(e,f),rN(e,c.get("mce_marker")),Iz(e.getBody()),Nz(c,r.getStart(),e.schema),m0(e.schema,e.getBody(),r.getStart()),t},zz=e=>{$b(e)&&y(e.getBody()).each(t=>{const o=t.getNode(),r=za(o)?y(o).getOr(t):t;e.selection.setRng(r.toRange())})},OC=(e,t,o)=>{e.dom.setHTML(e.getBody(),t),o!==!0&&zz(e)},zA=(e,t,o,r)=>{if(o=ja(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';t.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(o="<li>"+c+"</li>");const u=Ns(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,qi(e),o)):o||(o=c),OC(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=fh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=M0(q.fromDom(t))?o:He.trim(o);return OC(e,c,r.no_selection),{content:c,html:c}}},Vz=(e,t,o,r)=>{hB(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=fh({validate:!1},e.schema).serialize(o),u=ja(M0(q.fromDom(t))?c:He.trim(c));return OC(e,u,r.no_selection),{content:o,html:u}},VA=(e,t,o)=>N.from(e.getBody()).map(r=>UE(t)?Vz(e,r,t,o):zA(e,r,t,o)).getOr({content:t,html:UE(o.content)?"":o.content}),DC={},cN=mi(["pre"]),Uz=(e,t)=>{DC[e]||(DC[e]=[]),DC[e].push(t)},Zz=(e,t)=>{Kt(DC,e)&&le(DC[e],o=>{o(t)})};Uz("pre",e=>{const t=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return cN(f)&&vt(c,f)},r=(c,u)=>{const f=q.fromDom(u),b=Cl(f).dom;xo(f),li(q.fromDom(c),[q.fromTag("br",b),q.fromTag("br",b),...ms(f)])};if(!t.collapsed){const c=e.selection.getSelectedBlocks(),u=ge(ge(c,cN),o(c));le(u,f=>{r(f.previousSibling,f)})}});const iN=He.each,Wz=(e,t,o,r)=>{const c=u=>{if(Ha(u)&&Ye(u.parentNode)&&e.isEditable(u)){const f=tM(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(He.walk(r,c,"childNodes"),c(r))},lN=(e,t,o,r)=>{if(t.styles&&t.styles.backgroundColor){const c=aA(e,"fontSize");rA(r,u=>c(u)&&e.isEditable(u),nB(e,"backgroundColor",Uf(t.styles.backgroundColor,o)))}},jz=(e,t,o,r)=>{if(Kr(t)&&(t.inline==="sub"||t.inline==="sup")){const c=aA(e,"fontSize");rA(r,f=>c(f)&&e.isEditable(f),nB(e,"fontSize",""));const u=ge(e.select(t.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},Gz=(e,t,o,r)=>{iN(t,c=>{Kr(c)&&iN(e.dom.select(c.inline,r),u=>{sA(u)&&bC(e,c,o,u,c.exact?u:null)}),r9(e.dom,c,r)})},qz=(e,t,o,r,c)=>{const u=c.parentNode;zl(e,u,o,r)&&bC(e,t,r,c)||t.merge_with_parents&&u&&e.dom.getParent(u,f=>zl(e,f,o,r)?(bC(e,t,r,c),!0):!1)},Kz=He.each,Yz=(e,t,o,r)=>{if(G5(e)&&Kr(t)&&o.parentNode){const c=p0(e.schema),u=p3(q.fromDom(o),f=>M(f.dom));return Wo(c,r)&&Tt(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},Xz=(e,t,o,r)=>{const c=e.formatter.get(t),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,v=e.selection,w=(I,U)=>{let H=!1;return Kz(I,j=>Ou(j)?b.getContentEditable(U)==="false"&&!j.ceFalseOverride||ve(j.collapsed)&&j.collapsed!==f?!0:b.is(U,j.selector)&&!M(U)?(n1(e,U,j,o,U),H=!0,!1):!0:!1),H},k=I=>{if(Y(I)){const U=b.create(I);return n1(e,U,u,o,r),U}else return null},O=(I,U,H)=>{const j=[];let oe=!0;const se=u.inline||u.block,ae=k(se),Se=St=>oF(u)&&zl(e,St,t,o),Oe=(St,xe,me)=>{const Ee=sF(u)&&Jy(e.schema,St)&&Mb(e,xe,se);return me&&Ee},Je=(St,xe,me,Ee)=>{const Qe=St.nodeName.toLowerCase(),$t=Mb(e,se,Qe)&&Mb(e,xe,se),It=!H&&ze(St)&&bp(St.data),_n=M(St),so=!Kr(u)||!I.isBlock(St);return(me||Ee)&&$t&&!It&&!_n&&so};Du(I,U,St=>{let xe;const me=Ee=>{let Qe=!1,$t=oe,It=!1;const _n=Ee.parentNode,so=_n.nodeName.toLowerCase(),Ao=I.getContentEditable(Ee);ve(Ao)&&($t=oe,oe=Ao==="true",Qe=!0,It=eM(e,Ee));const Vo=oe&&!Qe;if(Xo(Ee)&&!Yz(e,u,Ee,so)){xe=null,_d(u)&&I.remove(Ee);return}if(Se(Ee)){xe=null;return}if(Oe(Ee,so,Vo)){const Pr=I.rename(Ee,se);n1(e,Pr,u,o,Ee),j.push(Pr),xe=null;return}if(Ou(u)){let Pr=w(c,Ee);if(!Pr&&ve(_n)&&Qk(u)&&(Pr=w(c,_n)),!Kr(u)||Pr){xe=null;return}}ve(ae)&&Je(Ee,so,Vo,It)?(xe||(xe=I.clone(ae,!1),_n.insertBefore(xe,Ee),j.push(xe)),It&&Qe&&(oe=$t),xe.appendChild(Ee)):(xe=null,le(Bo(Ee.childNodes),me),Qe&&(oe=$t),xe=null)};le(St,me)}),u.links===!0&&le(j,St=>{const xe=me=>{me.nodeName==="A"&&n1(e,me,u,o,r),le(Bo(me.childNodes),xe)};xe(St)}),p9(e,t,df(j)),le(j,St=>{const xe=Qe=>{let $t=0;return le(Qe.childNodes,It=>{!tF(It)&&!is(It)&&$t++}),$t},me=Qe=>Qn(Qe.childNodes,Xy).filter(It=>I.getContentEditable(It)!=="false"&&EE(I,It,u)).map(It=>{const _n=I.clone(It,!1);return n1(e,_n,u,o,Qe),I.replace(_n,Qe,!0),I.remove(It,!0),_n}).getOr(Qe),Ee=xe(St);if((j.length>1||!I.isBlock(St))&&Ee===0){I.remove(St,!0);return}(Kr(u)||_d(u)&&u.wrapper)&&(!u.exact&&Ee===1&&(St=me(St)),Gz(e,c,o,St),qz(e,u,t,o,St),lN(I,u,o,St),Wz(I,u,o,St),jz(I,u,o,St),tB(e,u,o,St))})},R=Yy(r)?r:v.getNode();if(b.getContentEditable(R)==="false"&&!eM(e,R)){r=R,w(c,r),Sd(e,t,r,o);return}if(u){if(r)if(Yy(r)){if(!w(c,r)){const I=b.createRng();I.setStartBefore(r),I.setEndAfter(r),O(b,Pm(b,I,c),!0)}}else O(b,r,!0);else!f||!Kr(u)||ft(e).length?(v.setRng(hA(v.getRng())),X5(e,()=>{qy(e,(I,U)=>{const H=U?I:Pm(b,I,c);O(b,H,!1)})},et),e.nodeChanged()):z6(e,t,o),o9(e.formatter,t).each(I=>{const U=oA(e.selection);le(U,H=>j_(b,H,I,o))});Zz(t,e)}Sd(e,t,r,o)},uN=(e,t,o,r)=>{(r||e.selection.isEditable())&&Xz(e,t,o,r)},c1=e=>Kt(e,"vars"),qE=(e,t)=>{e.set({}),t.on("NodeChange",o=>{mN(t,o.element,e.get())}),t.on("FormatApply FormatRemove",o=>{const r=N.from(o.node).map(c=>Yy(c)?c:c.startContainer).bind(c=>Ye(c)?N.some(c):N.from(c.parentElement)).getOrThunk(()=>UA(t));mN(t,r,e.get())})},UA=e=>e.selection.getStart(),ZA=(e,t,o,r,c)=>Ls(t,b=>{const v=e.formatter.matchNode(b,o,c??{},r);return!es(v)},b=>N6(e,b,o)?!0:r?!1:ve(e.formatter.matchNode(b,o,c,!0))),dN=(e,t)=>{const o=t??UA(e);return ge(qx(e.dom,o),r=>Ye(r)&&!dm(r))},mN=(e,t,o)=>{const r=dN(e,t);hn(o,(c,u)=>{const f=b=>{const v=ZA(e,r,u,b.similar,c1(b)?b.vars:void 0),w=v.isSome();if(b.state.get()!==w){b.state.set(w);const k=v.getOr(t);c1(b)?b.callback(w,{node:k,format:u,parents:r}):le(b.callbacks,O=>O(w,{node:k,format:u,parents:r}))}};le([c.withSimilar,c.withoutSimilar],f),le(c.withVars,f)})},WA=(e,t,o,r,c,u)=>{const f=t.get();le(o.split(","),b=>{const v=vo(f,b).getOrThunk(()=>{const k={withSimilar:{state:Bt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Bt(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=k,k}),w=()=>{const k=dN(e);return ZA(e,k,b,c,u).isSome()};if(es(u)){const k=c?v.withSimilar:v.withoutSimilar;k.callbacks.push(r),k.callbacks.length===1&&k.state.set(w())}else v.withVars.push({state:Bt(w()),similar:c,vars:u,callback:r})}),t.set(f)},Jz=(e,t,o)=>{const r=e.get();le(t.split(","),c=>vo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:ge(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:ge(u.withoutSimilar.callbacks,f=>f!==o)},withVars:ge(u.withVars,f=>f.callback!==o)}})),e.set(r)},Qz=(e,t,o,r,c,u)=>(WA(e,t,o,r,c,u),{unbind:()=>Jz(t,o,r)}),eV=(e,t,o,r)=>{const c=e.formatter.get(t);c&&(q_(e,t,o,r)&&(!("toggle"in c[0])||c[0].toggle)?_E(e,t,o,r):uN(e,t,o,r))},jA=(e,t,o)=>({element:e,width:t,rows:o}),fN=(e,t)=>({element:e,cells:t}),KE=(e,t)=>({x:e,y:t}),Wb=(e,t)=>Ni(e,t).bind(Hh).getOr(1),tV=(e,t,o,r,c)=>{const u=Wb(c,"rowspan"),f=Wb(c,"colspan"),b=e.rows;for(let v=o;v<o+u;v++){b[v]||(b[v]=fN(Wh(r),[]));for(let w=t;w<t+f;w++){const k=b[v].cells;k[w]=v===o&&w===t?c:sa(c)}}},jb=(e,t,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[t]},el=(e,t,o)=>{for(;jb(e,t,o);)t++;return t},Gb=e=>cn(e,(t,o)=>o.cells.length>t?o.cells.length:t,0),lo=(e,t)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(xn(c[u],t))return N.some(KE(u,r))}return N.none()},qb=(e,t,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const v=f[b].cells,w=t<r?v.slice(t,r+1):v.slice(r,t+1);u.push(fN(f[b].element,w))}return u},gN=(e,t,o)=>{const r=t.x,c=t.y,u=o.x,f=o.y,b=c<f?qb(e,r,c,u,f):qb(e,r,f,u,c);return jA(e.element,Gb(b),b)},hN=(e,t)=>{const o=sa(e.element),r=q.fromTag("tbody");return li(r,t),Pn(o,r),o},YE=e=>Rt(e.rows,t=>{const o=Rt(t.cells,c=>{const u=Wh(c);return Vs(u,"colspan"),Vs(u,"rowspan"),u}),r=sa(t.element);return li(r,o),r}),GA=e=>{const t=jA(sa(e),0,[]);return le(_r(e,"tr"),(o,r)=>{le(_r(o,"td,th"),(c,u)=>{tV(t,el(t,u,r),r,o,c)})}),jA(t.element,Gb(t.rows),t.rows)},qA=e=>hN(e,YE(e)),KA=(e,t,o)=>lo(e,t).bind(r=>lo(e,o).map(c=>gN(e,r,c))),YA=e=>Qn(e,t=>mn(t)==="ul"||mn(t)==="ol"),XE=(e,t)=>Qn(e,o=>mn(o)==="li"&&Vf(o,t)).fold(Xe([]),o=>YA(e).map(r=>{const c=q.fromTag(mn(r)),u=tu(Cg(r),(f,b)=>Zt(b,"list-style"));return di(c,u),[q.fromTag("li"),c]}).getOr([])),XA=(e,t)=>{const o=cn(t,(r,c)=>(Pn(c,r),c),e);return t.length>0?rm([o]):o},pN=e=>xa(e)?Ic(e).filter(vi).fold(Xe([]),t=>[e,t]):vi(e)?[e]:[],bN=(e,t,o)=>{const r=q.fromDom(t.commonAncestorContainer),c=Bu(r,e),u=ge(c,v=>o.isWrapper(mn(v))),f=XE(c,t),b=u.concat(f.length?f:pN(r));return Rt(b,sa)},JA=()=>rm([]),vN=(e,t,o)=>XA(q.fromDom(t.cloneContents()),bN(e,t,o)),yN=(e,t)=>Os(t,"table",Me(xn,e)),i1=(e,t)=>yN(e,t[0]).bind(o=>{const r=t[0],c=t[t.length-1],u=GA(o);return KA(u,r,c).map(f=>rm([qA(f)]))}).getOrThunk(JA),CN=(e,t,o)=>t.length>0&&t[0].collapsed?JA():vN(e,t[0],o),QA=(e,t,o)=>{const r=Ux(t,e);return r.length>0?i1(e,r):CN(e,t,o)},JE=(e,t)=>t>=0&&t<e.length&&fr(e.charAt(t)),SN=e=>ja(e.innerText),wN=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),xN=e=>N.from(e.selection.getRng()).map(t=>{const o=N.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),c=wN(o),u=q.fromDom(t.cloneContents());VM(u),UM(u);const f=e.dom.add(r,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},u.dom),b=SN(f),v=ja(f.textContent??"");if(e.dom.remove(f),JE(v,0)||JE(v,v.length-1)){const w=o.getOr(r),k=SN(w),O=k.indexOf(b);if(O===-1)return b;{const R=JE(k,O-1),I=JE(k,O+b.length);return(R?" ":"")+b+(I?" ":"")}}else return b}).getOr(""),EN=(e,t)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=y_(e,ia(c)),f=t.contextual?QA(q.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,t)},QE=(e,t)=>{if(t.format==="text")return xN(e);{const o=EN(e,t);return t.format==="tree"?o:e.selection.isCollapsed()?"":o}},TN=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),kN=(e,t,o={})=>{const r=TN(o,t);return GB(e,r).fold(Zo,c=>{const u=QE(e,c);return TC(e,u,c)})},e4=0,eO=1,tO=2,_N=(e,t)=>{const o=e.length+t.length+2,r=new Array(o),c=new Array(o),u=(k,O,R)=>({start:k,end:O,diag:R}),f=(k,O,R,I,U)=>{const H=v(k,O,R,I);if(H===null||H.start===O&&H.diag===O-I||H.end===k&&H.diag===k-R){let j=k,oe=R;for(;j<O||oe<I;)j<O&&oe<I&&e[j]===t[oe]?(U.push([e4,e[j]]),++j,++oe):O-k>I-R?(U.push([tO,e[j]]),++j):(U.push([eO,t[oe]]),++oe)}else{f(k,H.start,R,H.start-H.diag,U);for(let j=H.start;j<H.end;++j)U.push([e4,e[j]]);f(H.end,O,H.end-H.diag,I,U)}},b=(k,O,R,I)=>{let U=k;for(;U-O<I&&U<R&&e[U]===t[U-O];)++U;return u(k,U,O)},v=(k,O,R,I)=>{const U=O-k,H=I-R;if(U===0||H===0)return null;const j=U-H,oe=H+U,se=(oe%2===0?oe:oe+1)/2;r[1+se]=k,c[1+se]=O+1;let ae,Se,Oe,Je,St;for(ae=0;ae<=se;++ae){for(Se=-ae;Se<=ae;Se+=2){for(Oe=Se+se,Se===-ae||Se!==ae&&r[Oe-1]<r[Oe+1]?r[Oe]=r[Oe+1]:r[Oe]=r[Oe-1]+1,Je=r[Oe],St=Je-k+R-Se;Je<O&&St<I&&e[Je]===t[St];)r[Oe]=++Je,++St;if(j%2!==0&&j-ae<=Se&&Se<=j+ae&&c[Oe-j]<=r[Oe])return b(c[Oe-j],Se+k-R,O,I)}for(Se=j-ae;Se<=j+ae;Se+=2){for(Oe=Se+se-j,Se===j-ae||Se!==j+ae&&c[Oe+1]<=c[Oe-1]?c[Oe]=c[Oe+1]-1:c[Oe]=c[Oe-1],Je=c[Oe]-1,St=Je-k+R-Se;Je>=k&&St>=R&&e[Je]===t[St];)c[Oe]=Je--,St--;if(j%2===0&&-ae<=Se&&Se<=ae&&c[Oe]<=r[Oe+j])return b(c[Oe],Se+k-R,O,I)}}return null},w=[];return f(0,e.length,0,t.length,w),w},nO=e=>Ye(e)?e.outerHTML:ze(e)?bc.encodeRaw(e.data,!1):rn(e)?"<!--"+e.data+"-->":"",AN=e=>{let t;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);t=o.firstChild;)r.appendChild(t);return r},ON=(e,t,o)=>{const r=AN(t);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},DN=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const o=e.childNodes[t];e.removeChild(o)}},oO=(e,t)=>{let o=0;le(e,r=>{r[0]===e4?o++:r[0]===eO?(ON(t,r[1],o),o++):r[0]===tO&&DN(t,o)})},RN=(e,t)=>ge(Rt(Bo(e.childNodes),T(ja,nO)),o=>o.length>0),MN=(e,t)=>{const o=Rt(Bo(t.childNodes),nO);return oO(_N(o,e),t),t},BN=ga(()=>document.implementation.createHTMLDocument("undo")),NN=e=>e.querySelector("iframe")!==null,PN=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),$N=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),RC=e=>{const t=e.serializer.getTempAttrs(),o=zM(e.getBody(),t);return NN(o)?PN(RN(o)):$N(ja(o.innerHTML))},MC=(e,t,o)=>{const r=o?t.beforeBookmark:t.bookmark;t.type==="fragmented"?MN(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:ve(r)&&at(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},Kb=e=>e.type==="fragmented"?e.fragments.join(""):e.content,sO=(e,t)=>{const o=q.fromTag("body",BN());return sd(o,Kb(t)),le(_r(o,"*[data-mce-bogus]"),ui),e&&le(_r(o,"details[open]"),r=>Vs(r,"open")),ra(o)},nV=(e,t)=>Kb(e)===Kb(t),IN=(e,t,o)=>sO(e,t)===sO(e,o),Yb=(e,t,o)=>!t||!o?!1:nV(t,o)?!0:IN(e,t,o),BC=e=>e.get()===0,wh=(e,t,o)=>{BC(o)&&(e.typing=t)},t4=(e,t)=>{e.typing&&(wh(e,!1,t),e.add())},LN=e=>{e.typing&&(e.typing=!1,e.add())},Xb=(e,t,o)=>{BC(t)&&o.set(Jg(e.selection))},rO=(e,t,o,r,c,u,f)=>{const b=RC(e),v=He.extend(u||{},b);if(!BC(r)||e.removed)return null;const w=t.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:v,lastLevel:w,originalEvent:f}).isDefaultPrevented()||w&&Yb(e.readonly,w,v))return null;t.data[o.get()]&&c.get().each(R=>{t.data[o.get()].beforeBookmark=R});const k=yx(e);if(k&&t.data.length>k){for(let R=0;R<t.data.length-1;R++)t.data[R]=t.data[R+1];t.data.length--,o.set(t.data.length)}v.bookmark=Jg(e.selection),o.get()<t.data.length-1&&(t.data.length=o.get()+1),t.data.push(v),o.set(t.data.length-1);const O={level:v,lastLevel:w,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",O),e.dispatch("change",O)):e.dispatch("AddUndo",O),v},aO=(e,t,o)=>{t.data=[],o.set(0),t.typing=!1,e.dispatch("ClearUndos")},Jb=(e,t,o,r,c)=>{if(t.transact(r)){const u=t.data[o.get()].bookmark,f=t.data[o.get()-1];MC(e,f,!0),t.transact(c)&&(t.data[o.get()-1].beforeBookmark=u)}},xh=(e,t,o)=>{let r;return t.get()<o.length-1&&(t.set(t.get()+1),r=o[t.get()],MC(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},FN=(e,t,o,r)=>{let c;return t.typing&&(t.add(),t.typing=!1,wh(t,!1,o)),r.get()>0&&(r.set(r.get()-1),c=t.data[r.get()],MC(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},oV=e=>{e.clear(),e.add()},sV=(e,t,o)=>o.get()>0||t.typing&&t.data[0]&&!Yb(e.readonly,RC(e),t.data[0]),HN=(e,t)=>t.get()<e.data.length-1&&!e.typing,zN=(e,t,o)=>(t4(e,t),e.beforeChange(),e.ignore(o),e.add()),VN=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},rV=(e,t)=>{const o=e.dom,r=ve(t)?t:e.getBody();le(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=Sx(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,v=gb(e);b&&e.hasVisual?o.addClass(c,v):o.removeClass(c,v)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},Kf=e=>({init:{bindEvents:Ot},undoManager:{beforeChange:(t,o)=>Xb(e,t,o),add:(t,o,r,c,u,f)=>rO(e,t,o,r,c,u,f),undo:(t,o,r)=>FN(e,t,o,r),redo:(t,o)=>xh(e,t,o),clear:(t,o)=>aO(e,t,o),reset:t=>oV(t),hasUndo:(t,o)=>sV(e,t,o),hasRedo:(t,o)=>HN(t,o),transact:(t,o,r)=>zN(t,o,r),ignore:(t,o)=>VN(t,o),extra:(t,o,r,c)=>Jb(e,t,o,r,c)},formatter:{match:(t,o,r,c)=>q_(e,t,o,r,c),matchAll:(t,o)=>K_(e,t,o),matchNode:(t,o,r,c)=>zl(e,t,o,r,c),canApply:t=>Y_(e,t),closest:t=>$6(e,t),apply:(t,o,r)=>uN(e,t,o,r),remove:(t,o,r,c)=>_E(e,t,o,r,c),toggle:(t,o,r)=>eV(e,t,o,r),formatChanged:(t,o,r,c,u)=>Qz(e,t,o,r,c,u)},editor:{getContent:t=>eH(e,t),setContent:(t,o)=>VA(e,t,o),insertContent:(t,o)=>Hz(e,t,o),addVisual:t=>rV(e,t)},selection:{getContent:(t,o)=>kN(e,t,o)},autocompleter:{addDecoration:Ot,removeDecoration:Ot},raw:{getModel:()=>N.none()}}),l1=e=>{const t=w=>en(w)?w:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:v}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(w,k,O)=>r.transact(O),ignore:(w,k)=>r.ignore(k),extra:(w,k,O,R)=>r.extra(O,R)},formatter:{match:(w,k,O,R)=>c.match(w,t(k),R),matchAll:c.matchAll,matchNode:c.matchNode,canApply:w=>c.canApply(w),closest:w=>c.closest(w),apply:(w,k,O)=>c.apply(w,t(k)),remove:(w,k,O,R)=>c.remove(w,t(k)),toggle:(w,k,O)=>c.toggle(w,t(k)),formatChanged:(w,k,O,R,I)=>c.formatChanged(k,O,R,I)},editor:{getContent:w=>u.getContent(w),setContent:(w,k)=>({content:u.setContent(w,k),html:""}),insertContent:(w,k)=>(u.insertContent(w),""),addVisual:u.addVisual},selection:{getContent:(w,k)=>f.getContent(k)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>N.some(v.getRawModel())}}},UN=()=>{const e=Xe(null),t=Xe("");return{init:{bindEvents:Ot},undoManager:{beforeChange:Ot,add:e,undo:e,redo:e,clear:Ot,reset:Ot,hasUndo:De,hasRedo:De,transact:e,ignore:Ot,extra:Ot},formatter:{match:De,matchAll:Xe([]),matchNode:Xe(void 0),canApply:De,closest:t,apply:Ot,remove:Ot,toggle:Ot,formatChanged:Xe({unbind:Ot})},editor:{getContent:t,setContent:Xe({content:"",html:""}),insertContent:Xe(""),addVisual:Ot},selection:{getContent:t},autocompleter:{addDecoration:Ot,removeDecoration:Ot},raw:{getModel:Xe(N.none())}}},$d=e=>Kt(e.plugins,"rtc"),aV=e=>vo(e.plugins,"rtc").bind(t=>N.from(t.setup)),cV=e=>{const t=e;return aV(e).fold(()=>(t.rtcInstance=Kf(e),N.none()),o=>(t.rtcInstance=UN(),N.some(()=>o().then(r=>(t.rtcInstance=l1(r),r.rtc.isRemote)))))},cO=e=>e.rtcInstance?e.rtcInstance:Kf(e),ko=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Hu=(e,t,o)=>{ko(e).undoManager.beforeChange(t,o)},ZN=(e,t,o,r,c,u,f)=>ko(e).undoManager.add(t,o,r,c,u,f),iO=(e,t,o,r)=>ko(e).undoManager.undo(t,o,r),lO=(e,t,o)=>ko(e).undoManager.redo(t,o),n4=(e,t,o)=>{ko(e).undoManager.clear(t,o)},iV=(e,t)=>{ko(e).undoManager.reset(t)},WN=(e,t,o)=>ko(e).undoManager.hasUndo(t,o),NC=(e,t,o)=>ko(e).undoManager.hasRedo(t,o),lV=(e,t,o,r)=>ko(e).undoManager.transact(t,o,r),o4=(e,t,o)=>{ko(e).undoManager.ignore(t,o)},uO=(e,t,o,r,c)=>{ko(e).undoManager.extra(t,o,r,c)},jN=(e,t,o,r,c)=>ko(e).formatter.match(t,o,r,c),PC=(e,t,o)=>ko(e).formatter.matchAll(t,o),uV=(e,t,o,r,c)=>ko(e).formatter.matchNode(t,o,r,c),dV=(e,t)=>ko(e).formatter.canApply(t),Id=(e,t)=>ko(e).formatter.closest(t),wi=(e,t,o,r)=>{ko(e).formatter.apply(t,o,r)},$C=(e,t,o,r,c)=>{ko(e).formatter.remove(t,o,r,c)},xi=(e,t,o,r)=>{ko(e).formatter.toggle(t,o,r)},mV=(e,t,o,r,c,u)=>ko(e).formatter.formatChanged(t,o,r,c,u),_o=(e,t)=>cO(e).editor.getContent(t),fV=(e,t,o)=>cO(e).editor.setContent(t,o),Yf=(e,t,o)=>cO(e).editor.insertContent(t,o),IC=(e,t,o)=>ko(e).selection.getContent(t,o),GN=(e,t)=>ko(e).editor.addVisual(t),s4=e=>ko(e).init.bindEvents(),dO=(e,t={})=>{const o=t.format?t.format:"html";return IC(e,o,t)},qN=(e,t,o)=>{if(Kt(e,t)){const r=ge(e[t],c=>c!==o);r.length===0?delete e[t]:e[t]=r}};var mO=(e,t)=>{let o,r;const c=(b,v)=>Qn(v,w=>e.is(w,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},t.on("NodeChange",b=>{const v=b.element,w=u(v),k={};hn(o,(O,R)=>{c(R,w).each(I=>{r[R]||(le(O,U=>{U(!0,{node:I,selector:R,parents:w})}),r[R]=O),k[R]=O})}),hn(r,(O,R)=>{k[R]||(delete r[R],le(O,I=>{I(!1,{node:v,selector:R,parents:w})}))})})};return{selectorChangedWithUnbind:(b,v)=>(o||f(),o[b]||(o[b]=[]),o[b].push(v),c(b,u(t.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{qN(o,b,v),qN(r,b,v)}})}};const KN=e=>!!(e&&e.ownerDocument)&&ai(q.fromDom(e.ownerDocument),q.fromDom(e)),YN=e=>e?KN(e.startContainer)&&KN(e.endContainer):!1,fO=(e,t,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=mO(e,r),b=(nt,_t)=>{const jn=e.createRng();ve(nt)&&ve(_t)?(jn.setStart(nt,_t),jn.setEnd(nt,_t),Se(jn),oe(!1)):(Wx(e,jn,r.getBody(),!0),Se(jn))},v=nt=>dO(r,nt),w=(nt,_t)=>yz(r,nt,_t),k=nt=>iE(r.getBody(),ae(),nt),O=nt=>p_(r.getBody(),ae(),nt),R=(nt,_t)=>Pr.getBookmark(nt,_t),I=nt=>Pr.moveToBookmark(nt),U=(nt,_t)=>(PM(e,nt,_t).each(Se),nt),H=()=>{const nt=ae(),_t=se();return!nt||nt.item?!1:nt.compareEndPoints?nt.compareEndPoints("StartToEnd",nt)===0:!_t||nt.collapsed},j=()=>{if(r.mode.isReadOnly())return!1;const nt=ae(),_t=r.getBody().querySelectorAll('[data-mce-selected="1"]');return _t.length>0?$a(_t,jn=>e.isEditable(jn.parentElement)):HF(e,nt)},oe=nt=>{const _t=ae();_t.collapse(!!nt),Se(_t)},se=()=>t.getSelection?t.getSelection():t.document.selection,ae=()=>{let nt;const _t=(Fn,Jr,ke)=>{try{return Jr.compareBoundaryPoints(Fn,ke)}catch{return-1}},jn=t.document;if(ve(r.bookmark)&&!$b(r)){const Fn=tE(r);if(Fn.isSome())return Fn.map(Jr=>y_(r,[Jr])[0]).getOr(jn.createRange())}try{const Fn=se();Fn&&!l0(Fn.anchorNode)&&(Fn.rangeCount>0?nt=Fn.getRangeAt(0):nt=jn.createRange(),nt=y_(r,[nt])[0])}catch{}if(nt||(nt=jn.createRange()),ld(nt.startContainer)&&nt.collapsed){const Fn=e.getRoot();nt.setStart(Fn,0),nt.setEnd(Fn,0)}return c&&u&&(_t(nt.START_TO_START,nt,c)===0&&_t(nt.END_TO_END,nt,c)===0?nt=u:(c=null,u=null)),nt},Se=(nt,_t)=>{if(!YN(nt))return;const jn=se();if(nt=r.dispatch("SetSelectionRange",{range:nt,forward:_t}).range,jn){u=nt;try{jn.removeAllRanges(),jn.addRange(nt)}catch{}_t===!1&&jn.extend&&(jn.collapse(nt.endContainer,nt.endOffset),jn.extend(nt.startContainer,nt.startOffset)),c=jn.rangeCount>0?jn.getRangeAt(0):null}if(!nt.collapsed&&nt.startContainer===nt.endContainer&&(jn!=null&&jn.setBaseAndExtent)&&nt.endOffset-nt.startOffset<2&&nt.startContainer.hasChildNodes()){const Jr=nt.startContainer.childNodes[nt.startOffset];Jr&&Jr.nodeName==="IMG"&&(jn.setBaseAndExtent(nt.startContainer,nt.startOffset,nt.endContainer,nt.endOffset),(jn.anchorNode!==nt.startContainer||jn.focusNode!==nt.endContainer)&&jn.setBaseAndExtent(Jr,0,Jr,1))}r.dispatch("AfterSetSelectionRange",{range:nt,forward:_t})},Oe=nt=>(jE(r,e.getOuterHTML(nt)),nt),Je=()=>v_(r.getBody(),ae()),St=(nt,_t)=>zF(e,ae(),nt,_t),xe=()=>{const nt=se(),_t=nt==null?void 0:nt.anchorNode,jn=nt==null?void 0:nt.focusNode;if(!nt||!_t||!jn||l0(_t)||l0(jn))return!0;const Fn=e.createRng(),Jr=e.createRng();try{Fn.setStart(_t,nt.anchorOffset),Fn.collapse(!0),Jr.setStart(jn,nt.focusOffset),Jr.collapse(!0)}catch{return!0}return Fn.compareBoundaryPoints(Fn.START_TO_START,Jr)<=0},Vo={dom:e,win:t,serializer:o,editor:r,expand:(nt={type:"word"})=>Se(Od(e).expand(ae(),nt)),collapse:oe,setCursorLocation:b,getContent:v,setContent:w,getBookmark:R,moveToBookmark:I,select:U,isCollapsed:H,isEditable:j,isForward:xe,setNode:Oe,getNode:Je,getSel:se,setRng:Se,getRng:ae,getStart:k,getEnd:O,getSelectedBlocks:St,normalize:()=>{const nt=ae(),_t=se();if(!Db(_t)&&Gy(r)){const jn=rE(e,nt);return jn.each(Fn=>{Se(Fn,xe())}),jn.getOr(nt)}return nt},selectorChanged:(nt,_t)=>(f(nt,_t),Vo),selectorChangedWithUnbind:f,getScrollContainer:()=>{let nt,_t=e.getRoot();for(;_t&&_t.nodeName!=="BODY";){if(_t.scrollHeight>_t.clientHeight){nt=_t;break}_t=_t.parentNode}return nt},scrollIntoView:(nt,_t)=>{ve(nt)?it(r,nt,_t):Xi(r,ae(),_t)},placeCaretAt:(nt,_t)=>Se(wM(nt,_t,r.getDoc())),getBoundingClientRect:()=>{const nt=ae();return nt.collapsed?Ce.fromRangeStart(nt).getClientRects()[0]:nt.getBoundingClientRect()},destroy:()=>{t=c=u=null,Ei.destroy()}},Pr=Nb(Vo),Ei=_F(Vo,r);return Vo.bookmarkManager=Pr,Vo.controlSelection=Ei,Vo},gO=(e,t,o)=>{t.addNodeFilter("br",(r,c,u)=>{const f=He.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),v=o.getWhitespaceElements();f.body=1;const w=k=>k.name in f||pc(o,k);for(let k=0,O=r.length;k<O;k++){let R=r[k],I=R.parent;if(I&&w(I)&&R===I.lastChild){let U=R.prev;for(;U;){const H=U.name;if(H!=="span"||U.attr("data-mce-type")!=="bookmark"){H==="br"&&(R=null);break}U=U.prev}if(R&&(R.remove(),vC(o,b,v,I))){const H=o.getElementRule(I.name);H&&(H.removeEmpty?I.remove():H.paddEmpty&&vh(e,u,w,I))}}else{let U=R;for(;I&&I.firstChild===U&&I.lastChild===U&&(U=I,!f[I.name]);)I=I.parent;if(U===I){const H=new Mr("#text",3);H.value=ss,R.replace(H)}}}})},XN=(e,t,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=t.url_converter,b=t.url_converter_scope;let v=r.length;for(;v--;){const w=r[v];let k=w.attr(u);k!==void 0?(w.attr(c,k.length>0?k:null),w.attr(u,null)):(k=w.attr(c),c==="style"?k=o.serializeStyle(o.parseStyle(k),w.name):f&&(k=f.call(b,k,c,w.name)),w.attr(c,k.length>0?k:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(N.from(b.firstChild).exists(w=>!bp(w.value??""))?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,c)=>{const u=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=r.length;for(;f--;){const b=r[f],v=b.firstChild,w=(v==null?void 0:v.value)??"";if(c==="script"){const k=b.attr("type");k&&b.attr("type",k==="mce-no/type"?null:k.replace(/^mce\-/,"")),t.element_format==="xhtml"&&v&&w.length>0&&(v.value=`// <![CDATA[
`+u(w)+`
// ]]>`)}else t.element_format==="xhtml"&&v&&w.length>0&&(v.value=`<!--
`+u(w)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;t.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{le(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.remove_trailing_brs&&gO(t,e,e.schema)},r4=e=>{const t=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(t(o)){const r=o.prev;t(r)&&(o.remove(),r.remove())}},gV=(e,t,o)=>{let r;const c=e.dom;let u=t.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");He.each(u.nodeName==="BODY"?u.childNodes:[u],v=>{b.body.appendChild(b.importNode(v,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return J0(e,{...o,node:u}),r&&(c.doc=r),u},hV=(e,t)=>ve(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,pV=(e,t,o)=>hV(e,o)?gV(e,t,o):t,bV=(e,t,o)=>{He.inArray(t,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.push(o))},vV=(e,t,o)=>!t.no_events&&e?cy(e,{...t,content:o}).content:o,JN=(e,t,o)=>{const r=ja(o.getInner?t.innerHTML:e.getOuterHTML(t));return o.selection||M0(q.fromDom(t))?r:He.trim(r)},yV=(e,t,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(t,r);return r4(c),c},CV=(e,t,o)=>fh(e,t).serialize(o),QN=(e,t,o,r,c)=>{const u=CV(t,o,r);return vV(e,c,u)},SV=(e,t)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=t&&t.dom?t.dom:Tn.DOM,u=t&&t.schema?t.schema:Ar(r),f=Zb(r,u);XN(f,r,c);const b=(v,w={})=>{const{indent:k,entity_encoding:O,...R}=w,I={format:"html",...R},U=pV(t,v,I),H=JN(c,U,I),j=yV(f,H,I);if(I.format==="tree")return j;const oe={...r,...ve(k)?{indent:k}:{},...ve(O)?{entity_encoding:O}:{}};return QN(t,oe,u,j,I)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Me(bV,f,o),getTempAttrs:Xe(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},hO=(e,t)=>{const o=SV(e,t);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},LC="html",wV=(e,t)=>({...e,format:t,get:!0,getInner:!0}),xV=(e,t={})=>{const o=t.format?t.format:LC,r=wV(t,o);return GB(e,r).fold(Zo,c=>{const u=_o(e,c);return TC(e,u,c)})},eP="html",tP=(e,t)=>({format:eP,...e,set:!0,content:t}),pO=(e,t,o={})=>{const r=tP(o,t);kC(e,r).each(c=>{const u=fV(e,c.content,c);$A(e,u.html,c)})},FC=Tn.DOM,Da=e=>{FC.setStyle(e.id,"display",e.orgDisplay)},a4=e=>N.from(e).each(t=>t.destroy()),nP=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const o=e.selection;if(o){const r=o.dom;t.selection=o.win=o.dom=r.doc=null}},bO=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),FC.unbind(t,"submit reset",e.formEventDelegate))},vO=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ve(c==null?void 0:c.nextSibling)&&FC.remove(c.nextSibling),iy(e),e.editorManager.remove(e),!e.inline&&r&&Da(e),Gw(e),FC.remove(e.getContainer()),a4(t),a4(o),e.destroy()}},oP=(e,t)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),a4(o),a4(r)),bO(e),nP(e),e.destroyed=!0}},c4=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>Kt(e,c)}})(),Qb=Xs.ModelManager,yO=(e,t)=>t.dom[e],CO=(e,t)=>parseInt(vs(t,e),10),tl=Me(yO,"clientWidth"),TV=Me(yO,"clientHeight"),kV=Me(CO,"margin-top"),FY=Me(CO,"margin-left"),SO=e=>e.dom.getBoundingClientRect(),_V=(e,t,o)=>{const r=tl(e),c=TV(e);return t>=0&&o>=0&&t<=r&&o<=c},HY=(e,t,o,r)=>{const c=SO(t),u=e?c.left+t.dom.clientLeft+FY(t):0,f=e?c.top+t.dom.clientTop+kV(t):0,b=o-u,v=r-f;return{x:b,y:v}},AV=(e,t,o)=>{const r=q.fromDom(e.getBody()),c=e.inline?r:Gs(r),u=HY(e.inline,c,t,o);return _V(c,u.x,u.y)},wO=e=>N.from(e).map(q.fromDom),zu=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return wO(t).map(co).getOr(!1)};var xO=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const HC=e=>{const t=[],o=()=>{const R=e.theme;return R&&R.getNotificationManagerImpl?R.getNotificationManagerImpl():xO()},r=()=>N.from(t[0]),c=(R,I)=>R.type===I.type&&R.text===I.text&&!R.progressBar&&!R.timeout&&!I.progressBar&&!I.timeout,u=()=>{r().each(R=>{R.reposition()})},f=R=>{t.push(R)},b=R=>{cl(t,I=>I===R).each(I=>{t.splice(I,1)})},v=(R,I=!0)=>e.removed||!zu(e)?{}:(I&&e.dispatch("BeforeOpenNotification",{notification:R}),Qn(t,U=>c(o().getArgs(U),R)).getOrThunk(()=>{e.editorManager.setActive(e);const U=o().open(R,()=>{b(U)},()=>yM(e));return f(U),u(),e.dispatch("OpenNotification",{notification:{...U}}),U})),w=()=>{r().each(R=>{o().close(R),b(R),u()})},k=Xe(t);return(R=>{R.on("SkinLoaded",()=>{const I=Cy(R);I&&v({text:I,type:"warning",timeout:0},!1),u()}),R.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),R.on("remove",()=>{le(t.slice(),I=>{o().close(I)})}),R.on("keydown",I=>{var H;const U=((H=I.key)==null?void 0:H.toLowerCase())==="f12"||I.keyCode===123;I.altKey&&U&&(I.preventDefault(),r().map(j=>q.fromDom(j.getEl())).each(j=>q1(j)))})})(e),{open:v,close:w,getNotifications:k}},Eh=Xs.PluginManager,u1=Xs.ThemeManager;var EO=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const sP=e=>{let t=[];const o=()=>{const j=e.theme;return j&&j.getWindowManagerImpl?j.getWindowManagerImpl():EO()},r=(j,oe)=>(...se)=>oe?oe.apply(j,se):void 0,c=j=>{e.dispatch("OpenWindow",{dialog:j})},u=j=>{e.dispatch("CloseWindow",{dialog:j})},f=(j,oe)=>{t.push({instanceApi:j,triggerElement:oe}),c(j)},b=j=>{u(j);const oe=rc(t,({instanceApi:se,triggerElement:ae})=>se===j?ae:N.none());t=ge(t,({instanceApi:se})=>se!==j),t.length===0?e.focus():oe.filter(co).each(q1)},v=()=>N.from(t[t.length-1]),w=j=>{e.editorManager.setActive(e),eE(e);const oe=wl();e.ui.show();const se=j();return f(se,oe),se},k=(j,oe)=>w(()=>o().open(j,oe,b)),O=j=>w(()=>o().openUrl(j,b)),R=j=>{t.length!==0&&j.each(oe=>q1(oe))},I=(j,oe,se)=>{const ae=wl(),Se=o();Se.alert(j,r(se||Se,()=>{R(ae),oe==null||oe()}))},U=(j,oe,se)=>{const ae=wl(),Se=o();Se.confirm(j,r(se||Se,Oe=>{R(ae),oe==null||oe(Oe)}))},H=()=>{v().each(({instanceApi:j})=>{o().close(j),b(j)})};return e.on("remove",()=>{le(t,({instanceApi:j})=>{o().close(j)})}),{open:k,openUrl:O,alert:I,confirm:U,close:H}},TO=(e,t)=>{e.notificationManager.open({type:"error",text:t})},i4=(e,t)=>{e._skinLoaded?TO(e,t):e.on("SkinLoaded",()=>{TO(e,t)})},OV=(e,t)=>{i4(e,yc.translate(["Failed to upload image: {0}",t]))},Xf=(e,t,o)=>{Q0(e,t,{message:o}),console.error(o)},d1=(e,t,o)=>o?`Failed to load ${e}: ${o} from url ${t}`:`Failed to load ${e} url: ${t}`,rP=(e,t,o)=>{Xf(e,"PluginLoadError",d1("plugin",t,o))},DV=(e,t,o)=>{Xf(e,"IconsLoadError",d1("icons",t,o))},m1=(e,t,o)=>{Xf(e,"LanguageLoadError",d1("language",t,o))},aP=(e,t,o)=>{Xf(e,"ThemeLoadError",d1("theme",t,o))},RV=(e,t,o)=>{Xf(e,"ModelLoadError",d1("model",t,o))},cP=(e,t)=>{Xf(e,"LicenseKeyManagerLoadError",d1("license key manager",t))},MV=(e,t)=>{Xf(e,"ComponentLoadError",d1("component",t))},BV=(e,t,o)=>{const r=yc.translate(["Failed to initialize plugin: {0}",t]);Q0(e,"PluginLoadError",{message:r}),l4(r,o),i4(e,r)},l4=(e,...t)=>{const o=window.console;o&&(o.error?o.error(e,...t):o.log(e,...t))},iP=new WeakMap,NV=e=>{if(iP.has(e))return;iP.set(e,!0);const t=()=>{e.on("SwitchMode",r=>{const{mode:c}=r;c!=="readonly"&&e.mode.set("readonly")})},o=()=>{e.on("DisabledStateChange",r=>{const{state:c}=r;c||r.preventDefault()},!0)};e.initialized?(e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)):e.on("init",()=>{e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)}),o(),t()},kO=(e,t)=>{const{type:o,message:r}=t;e.notificationManager.open({type:o,text:r})},PV=e=>{switch(e){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},_O=e=>{PV(e.type)(e.message)},Hm=(e,t)=>{const{console:o,editor:r}=t;ve(r)&&(e._skinLoaded?kO(e,r):e.on("SkinLoaded",()=>{kO(e,r)})),ve(o)&&_O(o)},AO="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",zC="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",lP=e=>{const t="The editor is disabled because a TinyMCE license key has not been provided.";Hm(e,{console:{type:"error",message:[`${t}`,zC,AO].join(" ")},editor:{type:"warning",message:`${t}`}})},uP=(e,t)=>{const o=`${t==="online"?"API":"license"} key`,r=`The editor is disabled because the TinyMCE ${o} could not be validated.`;Hm(e,{console:{type:"error",message:[`${r}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${o} to be validated but could not be loaded.`,AO].join(" ")},editor:{type:"warning",message:`${r}`}})},dP=(e,t,o)=>{const r=`The "${t}" plugin requires a valid TinyMCE license key.`;Hm(e,{console:{type:"error",message:[`${r}`,AO].join(" ")},...o?{}:{editor:{type:"warning",message:"One or more premium plugins are disabled due to license key restrictions."}}})},VC="licensekeymanager",mP=e=>Y(Zp(e))?"online":"offline",$V=e=>{var o;const t=(o=Ax(e))==null?void 0:o.toLowerCase();return t==="gpl"?"gpl":gn(t)?"no_key":"non_gpl"},OO=e=>{const t=mP(e),o=$V(e),r=new Set([...Fp(e),...bt(xy(e))]).has(VC);return o!=="gpl"||t==="online"||r?{type:"use_plugin",onlineStatus:t,licenseKeyType:o,forcePlugin:r}:{type:"use_gpl",onlineStatus:t,licenseKeyType:o,forcePlugin:r}},fP=e=>t=>{let o=!1;return{validate:r=>{const{plugin:c}=r,u=Y(c);return u&&(dP(t,c,o),o=!0),Promise.resolve(e&&!u)}}},IV=fP(!1),u4=fP(!0),UC="manager",DO=VC,MO=(()=>{const e=Xs();return{load:(c,u)=>{if(OO(c).type==="use_plugin"){const v=vo(xy(c),DO).map(os).filter(jo).getOr(`plugins/${DO}/plugin${u}.js`);e.load(UC,v).catch(()=>{cP(c,v)})}},add:c=>{e.add(UC,c)},init:c=>{const u=v=>{Object.defineProperty(c,"licenseKeyManager",{value:v,writable:!1,configurable:!1,enumerable:!0})},f=OO(c),b=e.get(UC);if(ve(b)){const v=b(c,e.urls[UC]);u(v)}else switch(f.type){case"use_gpl":{u(u4(c));break}case"use_plugin":{NV(c),u(IV(c)),f.onlineStatus==="offline"&&f.licenseKeyType==="no_key"?lP(c):uP(c,f.onlineStatus);break}}c.licenseKeyManager.validate({})}}})(),LV=e=>{N.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},BO=(e,t,o)=>{try{e.getDoc().execCommand(t,!1,String(o))}catch{}},gP=(e,t)=>{BO(e,"StyleWithCSS",t),BO(e,"enableInlineTableEditing",t),BO(e,"enableObjectResizing",t)},NO=e=>{e.selection.setRng(e.selection.getRng())},hP=(e,t,o)=>{e0(e,t)&&!o?or(e,t):o&&Fc(e,t)},PO=e=>{const t=q.fromDom(e.getBody());hP(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),LV(e)},pP=e=>{const t=q.fromDom(e.getBody());hP(t,"mce-content-readonly",!1),e.hasEditableRoot()&&ff(t,!0),gP(e,!1),yM(e)&&e.focus(),NO(e),e.nodeChanged()},Jf=e=>Ki(e),f1="data-mce-contenteditable",ZC=e=>{le(_r(e,'*[contenteditable="true"]'),t=>{rs(t,f1,"true"),ff(t,!1)})},Ld=e=>{le(_r(e,`*[${f1}="true"]`),t=>{Vs(t,f1),ff(t,!0)})},bP=(e,t)=>{const o=q.fromDom(e.getBody());t?(PO(e),ff(o,!1),ZC(o)):(Ld(o),pP(e))},$O=e=>{e.serializer?hs(e):e.on("PreInit",()=>{hs(e)})},hs=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Jf(e)&&le(t,o=>{o.attr(f1,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(f1,t=>{Jf(e)&&le(t,o=>{o.attr("contenteditable",o.attr(f1))})}),e.serializer.addTempAttr(f1)},IO=e=>e.type==="click",d4=["copy"],Qf=e=>vt(d4,e.type),vP=(e,t)=>Vr(t,"a",r=>xn(r,q.fromDom(e.getBody()))).bind(r=>Ni(r,"href")),LO=(e,t)=>r2(t,"details",r=>xn(r,q.fromDom(e.getBody()))),FV=(e,t)=>{if(IO(t)&&!ct.metaKeyPressed(t)){const o=q.fromDom(t.target);vP(e,o).fold(()=>{LO(e,o)&&t.preventDefault()},r=>{if(t.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${fg(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else Qf(t)&&e.dispatch(t.type,t)},ev=e=>{e.on("ShowCaret ObjectSelected",t=>{Jf(e)&&t.preventDefault()}),e.on("DisabledStateChange",t=>{t.isDefaultPrevented()||bP(e,t.state)})},HV=e=>{$O(e),ev(e)},zV=e=>/^[a-z0-9\-]+$/i.test(e),Th=e=>"content/"+e+"/content.css",VV=e=>tinymce.Resource.has(Th(e)),g1=e=>eg(e,vk(e)),UV=e=>eg(e,vy(e)),eg=(e,t)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return Rt(t,u=>VV(u)?u:zV(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},ZV=e=>{e.contentCSS=e.contentCSS.concat(g1(e),UV(e))},Ul=e=>e?Bo(e.getElementsByTagName("img")):[],h1=(e,t)=>{const o={};return{findAll:(c,u=et)=>{const f=ge(Ul(c),v=>{const w=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!w||w===Nn.transparentSrc?!1:Zt(w,"blob:")?!e.isUploaded(w)&&u(v):Zt(w,"data:")?u(v):!1}),b=Rt(f,v=>{const w=v.src;if(Kt(o,w))return o[w].then(k=>Y(k)?k:{image:v,blobInfo:k.blobInfo});{const k=yA(t,w).then(O=>(delete o[w],{image:v,blobInfo:O})).catch(O=>(delete o[w],O));return o[w]=k,k}});return Promise.all(b)}}},yP=()=>{let o={};const r=(R,I)=>({status:R,resultUri:I}),c=R=>R in o;return{hasBlobUri:c,getResultUri:R=>{const I=o[R];return I?I.resultUri:null},isPending:R=>c(R)?o[R].status===1:!1,isUploaded:R=>c(R)?o[R].status===2:!1,markPending:R=>{o[R]=r(1,null)},markUploaded:(R,I)=>{o[R]=r(2,I)},removeFailed:R=>{delete o[R]},destroy:()=>{o={}}}};let WC=0;const FO=()=>{const e=()=>Math.round(ul()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},WV=e=>e+WC+++FO(),tv=()=>{let e=[];const t=O=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[O.toLowerCase()]||"dat",o=(O,R,I,U,H)=>{if(Y(O))return r({id:O,name:U,filename:H,blob:R,base64:I});if(en(O))return r(O);throw new Error("Unknown input type")},r=O=>{if(!O.blob||!O.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const R=O.id||WV("blobid"),I=O.name||R,U=O.blob;return{id:Xe(R),name:Xe(I),filename:Xe(O.filename||I+"."+t(U.type)),blob:Xe(U),base64:Xe(O.base64),blobUri:Xe(O.blobUri||URL.createObjectURL(U)),uri:Xe(O.uri)}},c=O=>{f(O.id())||e.push(O)},u=O=>Qn(e,O).getOrUndefined(),f=O=>u(R=>R.id()===O);return{create:o,add:c,get:f,getByUri:O=>u(R=>R.blobUri()===O),getByData:(O,R)=>u(I=>I.base64()===O&&I.blob().type===R),findFirst:u,removeByUri:O=>{e=ge(e,R=>R.blobUri()===O?(URL.revokeObjectURL(R.blobUri()),!1):!0)},destroy:()=>{le(e,O=>{URL.revokeObjectURL(O.blobUri())}),e=[]}}},jV=(e,t)=>{const o={},r=(H,j)=>H?H.replace(/\/$/,"")+"/"+j.replace(/^\//,""):j,c=(H,j)=>new Promise((oe,se)=>{const ae=new XMLHttpRequest;ae.open("POST",t.url),ae.withCredentials=t.credentials,ae.upload.onprogress=Oe=>{j(Oe.loaded/Oe.total*100)},ae.onerror=()=>{se("Image upload failed due to a XHR Transport error. Code: "+ae.status)},ae.onload=()=>{if(ae.status<200||ae.status>=300){se("HTTP Error: "+ae.status);return}const Oe=JSON.parse(ae.responseText);if(!Oe||!Y(Oe.location)){se("Invalid JSON: "+ae.responseText);return}oe(r(t.basePath,Oe.location))};const Se=new FormData;Se.append("file",H.blob(),H.filename()),ae.send(Se)}),u=ne(t.handler)?t.handler:c,f=()=>new Promise(H=>{H([])}),b=(H,j)=>({url:j,blobInfo:H,status:!0}),v=(H,j)=>({url:"",blobInfo:H,status:!1,error:j}),w=(H,j)=>{He.each(o[H],oe=>{oe(j)}),delete o[H]},k=(H,j,oe)=>(e.markPending(H.blobUri()),new Promise(se=>{let ae,Se;try{const Oe=()=>{ae&&(ae.close(),Se=Ot)},Je=xe=>{Oe();const me=Y(xe)?xe:xe.url;e.markUploaded(H.blobUri(),me),w(H.blobUri(),b(H,me)),se(b(H,me))},St=xe=>{Oe(),e.removeFailed(H.blobUri()),w(H.blobUri(),v(H,xe)),se(v(H,xe))};Se=xe=>{xe<0||xe>100||N.from(ae).orThunk(()=>N.from(oe).map(Ro)).each(me=>{ae=me,me.progressBar.value(xe)})},j(H,Se).then(Je,xe=>{St(Y(xe)?{message:xe}:xe)})}catch(Oe){se(v(H,Oe))}})),O=H=>H===c,R=H=>{const j=H.blobUri();return new Promise(oe=>{o[j]=o[j]||[],o[j].push(oe)})},I=(H,j)=>(H=He.grep(H,oe=>!e.isUploaded(oe.blobUri())),Promise.all(He.map(H,oe=>e.isPending(oe.blobUri())?R(oe):k(oe,u,j))));return{upload:(H,j)=>!t.url&&O(u)?f():I(H,j)}},Zl=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),jC=(e,t)=>jV(t,{url:cb(e),basePath:by(e),credentials:pk(e),handler:fx(e)}),CP=e=>{const t=yP(),o=jC(e,t);return{upload:(r,c=!0)=>o.upload(r,c?Zl(e):void 0)}},HO=(e,t)=>e.dom.isEmpty(t.dom)&&ve(e.schema.getTextBlockElements()[mn(t)]),zO=e=>t=>{HO(e,t)&&Pn(t,q.fromHtml('<br data-mce-bogus="1" />'))},p1=e=>{const t=tv();let o,r;const c=yP(),u=[],f=ae=>Se=>e.selection?ae(Se):[],b=ae=>ae+(ae.indexOf("?")===-1?"?":"&")+new Date().getTime(),v=(ae,Se,Oe)=>{let Je=0;do Je=ae.indexOf(Se,Je),Je!==-1&&(ae=ae.substring(0,Je)+Oe+ae.substr(Je+Se.length),Je+=Oe.length-Se.length+1);while(Je!==-1);return ae},w=(ae,Se,Oe)=>{const Je=`src="${Oe}"${Oe===Nn.transparentSrc?' data-mce-placeholder="1"':""}`;return ae=v(ae,`src="${Se}"`,Je),ae=v(ae,'data-mce-src="'+Se+'"','data-mce-src="'+Oe+'"'),ae},k=(ae,Se)=>{le(e.undoManager.data,Oe=>{Oe.type==="fragmented"?Oe.fragments=Rt(Oe.fragments,Je=>w(Je,ae,Se)):Oe.content=w(Oe.content,ae,Se)})},O=(ae,Se)=>{const Oe=e.convertURL(Se,"src");k(ae.src,Se),Tr(q.fromDom(ae),{src:dx(e)?b(Se):Se,"data-mce-src":Oe})},R=()=>(o||(o=jC(e,c)),j().then(f(ae=>{const Se=Rt(ae,Oe=>Oe.blobInfo);return o.upload(Se,Zl(e)).then(f(Oe=>{const Je=[];let St=!1;const xe=Rt(Oe,(me,Ee)=>{const{blobInfo:Qe,image:$t}=ae[Ee];let It=!1;return me.status&&mx(e)?(me.url&&!ps($t.src,me.url)&&(St=!0),t.removeByUri($t.src),$d(e)||O($t,me.url)):me.error&&(me.error.remove&&(k($t.src,Nn.transparentSrc),Je.push($t),It=!0),OV(e,me.error.message)),{element:$t,status:me.status,uploadUri:me.url,blobInfo:Qe,removed:It}});return Je.length>0&&!$d(e)?e.undoManager.transact(()=>{le(df(Je),me=>{const Ee=Ic(me);xo(me),Ee.each(zO(e)),t.removeByUri(me.dom.src)})}):St&&e.undoManager.dispatchChange(),xe}))}))),I=()=>hy(e)?R():Promise.resolve([]),U=ae=>$a(u,Se=>Se(ae)),H=ae=>{u.push(ae)},j=()=>(r||(r=h1(c,t)),r.findAll(e.getBody(),U).then(f(ae=>{const Se=ge(ae,Oe=>Y(Oe)?(i4(e,Oe),!1):Oe.uriType!=="blob");return $d(e)||le(Se,Oe=>{k(Oe.image.src,Oe.blobInfo.blobUri()),Oe.image.src=Oe.blobInfo.blobUri(),Oe.image.removeAttribute("data-mce-src")}),Se}))),oe=()=>{t.destroy(),c.destroy(),r=o=null},se=ae=>ae.replace(/src="(blob:[^"]+)"/g,(Se,Oe)=>{const Je=c.getResultUri(Oe);if(Je)return'src="'+Je+'"';let St=t.getByUri(Oe);return St||(St=cn(e.editorManager.get(),(xe,me)=>xe||me.editorUpload&&me.editorUpload.blobCache.getByUri(Oe),void 0)),St?'src="data:'+St.blob().type+";base64,"+St.base64()+'"':Se});return e.on("SetContent",()=>{hy(e)?I():j()}),e.on("RawSaveContent",ae=>{ae.content=se(ae.content)}),e.on("GetContent",ae=>{ae.source_view||ae.format==="raw"||ae.format==="tree"||(ae.content=se(ae.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ae=>{le(ae,Se=>{const Oe=Se.attr("src");if(!Oe||t.getByUri(Oe))return;const Je=c.getResultUri(Oe);Je&&Se.attr("src",Je)})})}),{blobCache:t,addFilter:H,uploadImages:R,uploadImagesAuto:I,scanForImages:j,destroy:oe}},VO=e=>{const t=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"},remove_similar:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>Ye(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{He.each(f,(b,v)=>{t.setAttrib(c,v,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>(c==null?void 0:c.customValue)??null}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return He.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},SP={remove_similar:!0,inherit:!1},nv={selector:"td,th",...SP},GV={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...nv},tablecellverticalalign:{styles:{"vertical-align":"%value"},...nv},tablecellbordercolor:{styles:{borderColor:"%value"},...nv},tablecellclass:{classes:["%value"],...nv},tableclass:{selector:"table",classes:["%value"],...SP},tablecellborderstyle:{styles:{borderStyle:"%value"},...nv},tablecellborderwidth:{styles:{borderWidth:"%value"},...nv}},qV=Xe(GV),KV=e=>{const t={},o=f=>ve(f)?t[f]:t,r=f=>Kt(t,f),c=(f,b)=>{f&&(Y(f)?(dn(b)||(b=[b]),le(b,v=>{es(v.deep)&&(v.deep=!Ou(v)),es(v.split)&&(v.split=!Ou(v)||Kr(v)),es(v.remove)&&Ou(v)&&!Kr(v)&&(v.remove="none"),Ou(v)&&Kr(v)&&(v.mixed=!0,v.block_expand=!0),Y(v.classes)&&(v.classes=v.classes.split(/\s+/))}),t[f]=b):hn(f,(v,w)=>{c(w,v)}))},u=f=>(f&&t[f]&&delete t[f],t);return c(VO(e)),c(qV()),c(xk(e)),{get:o,has:r,register:c,unregister:u}},m4=He.each,Xa=Tn.DOM,Wl=e=>ve(e)&&en(e),wP=(e,t)=>{const o=t&&t.schema||Ar({}),r=(v,w)=>{w.classes.length>0&&Xa.addClass(v,w.classes.join(" ")),Xa.setAttribs(v,w.attrs)},c=v=>{const w=Y(v)?{name:v,classes:[],attrs:{}}:v,k=Xa.create(w.name);return r(k,w),k},u=(v,w)=>{const k=o.getElementRule(v.nodeName.toLowerCase()),O=k==null?void 0:k.parentsRequired;return O&&O.length?w&&vt(O,w)?w:O[0]:!1},f=(v,w,k)=>{let O;const R=w[0],I=Wl(R)?R.name:void 0,U=u(v,I);if(U)I===U?(O=R,w=w.slice(1)):O=U;else if(R)O=R,w=w.slice(1);else if(!k)return v;const H=O?c(O):Xa.create("div");H.appendChild(v),k&&He.each(k,oe=>{const se=c(oe);H.insertBefore(se,v)});const j=Wl(O)?O.siblings:void 0;return f(H,w,j)},b=Xa.create("div");if(e.length>0){const v=e[0],w=c(v),k=Wl(v)?v.siblings:void 0;b.appendChild(f(w,e.slice(1),k))}return b},YV=e=>{e=He.trim(e);let t="div";const o={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":He.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const v=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);v&&(o.attrs[v[1]]=v[2])}return""})),o.name=t||"div",o},XV=e=>Y(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),He.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const o=He.map(t.split(/(?:~\+|~|\+)/),YV),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],JV=(e,t)=>{let o="",r=Ek(e);if(r==="")return"";const c=R=>Y(R)?R.replace(/%(\w+)/g,""):"",u=(R,I)=>Xa.getStyle(I??e.getBody(),R,!0);if(Y(t)){const R=e.formatter.get(t);if(!R)return"";t=R[0]}if("preview"in t){const R=t.preview;if(R===!1)return"";r=R||r}let f=t.block||t.inline||"span",b;const v=XV(t.selector);v.length>0?(v[0].name||(v[0].name=f),f=t.selector,b=wP(v,e)):b=wP([f],e);const w=Xa.select(f,b)[0]||b.firstChild;m4(t.styles,(R,I)=>{const U=c(R);U&&Xa.setStyle(w,I,U)}),m4(t.attributes,(R,I)=>{const U=c(R);U&&Xa.setAttrib(w,I,U)}),m4(t.classes,R=>{const I=c(R);Xa.hasClass(w,I)||Xa.addClass(w,I)}),e.dispatch("PreviewFormats"),Xa.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const k=u("fontSize"),O=/px$/.test(k)?parseInt(k,10):0;return m4(r.split(" "),R=>{let I=u(R,w);if(!(R==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(I)&&(I=u(R),bi(I).toLowerCase()==="#ffffff"))&&!(R==="color"&&bi(I).toLowerCase()==="#000000")){if(R==="font-size"&&/em|%$/.test(I)){if(O===0)return;I=parseFloat(I)/(/%$/.test(I)?100:1)*O+"px"}R==="border"&&I&&(o+="padding:0 2px;"),o+=R+":"+I+";"}}),e.dispatch("AfterPreviewFormats"),Xa.remove(b),o},QV=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},xP=e=>{const t=KV(e),o=Bt({});return QV(e),W6(e),$d(e)||qE(o,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,c,u)=>{wi(e,r,c,u)},remove:(r,c,u,f)=>{$C(e,r,c,u,f)},toggle:(r,c,u)=>{xi(e,r,c,u)},match:(r,c,u,f)=>jN(e,r,c,u,f),closest:r=>Id(e,r),matchAll:(r,c)=>PC(e,r,c),matchNode:(r,c,u,f)=>uV(e,r,c,u,f),canApply:r=>dV(e,r),formatChanged:(r,c,u,f)=>mV(e,o,r,c,u,f),getCssText:Me(JV,e)}},EP=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},eU=(e,t,o)=>{const r=Bt(!1),c=v=>{wh(t,!1,o),t.add({},v)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",v=>{const w=v.command;EP(w)||(t4(t,o),t.beforeChange())}),e.on("ExecCommand",v=>{const w=v.command;EP(w)||c(v)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",v=>{const w=v.keyCode;if(v.isDefaultPrevented())return;const k=Nn.os.isMacOS()&&v.key==="Meta";(w>=33&&w<=36||w>=37&&w<=40||w===45||v.ctrlKey||k)&&(c(),e.nodeChanged()),(w===46||w===8)&&e.nodeChanged(),r.get()&&t.typing&&!Yb(e.readonly,RC(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",v=>{const w=v.keyCode;if(v.isDefaultPrevented())return;if(w>=33&&w<=36||w>=37&&w<=40||w===45){t.typing&&c(v);return}const k=v.ctrlKey&&!v.altKey||v.metaKey;if((w<16||w>20)&&w!==224&&w!==91&&!t.typing&&!k){t.beforeChange(),wh(t,!0,o),t.add({},v),r.set(!0);return}(Nn.os.isMacOS()?v.metaKey:v.ctrlKey&&!v.altKey)&&t.beforeChange()}),e.on("mousedown",v=>{t.typing&&c(v)});const u=v=>v.inputType==="insertReplacementText",f=v=>v.inputType==="insertText"&&v.data===null,b=v=>v.inputType==="insertFromPaste"||v.inputType==="insertFromDrop";e.on("input",v=>{v.inputType&&(u(v)||f(v)||b(v))&&c(v)}),e.on("AddUndo Undo Redo ClearUndos",v=>{v.isDefaultPrevented()||e.nodeChanged()})},tU=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},nU=e=>{const t=Mc(),o=Bt(0),r=Bt(0),c={data:[],typing:!1,beforeChange:()=>{Hu(e,o,t)},add:(u,f)=>ZN(e,c,r,o,t,u,f),dispatchChange:()=>{e.setDirty(!0);const u=RC(e);u.bookmark=Jg(e.selection),e.dispatch("change",{level:u,lastLevel:Ir(c.data,r.get()).getOrUndefined()})},undo:()=>iO(e,c,o,r),redo:()=>lO(e,r,c.data),clear:()=>{n4(e,c,r)},reset:()=>{iV(e,c)},hasUndo:()=>WN(e,c,r),hasRedo:()=>NC(e,c,r),transact:u=>lV(e,c,o,u),ignore:u=>{o4(e,o,u)},extra:(u,f)=>{uO(e,c,r,u,f)}};return $d(e)||eU(e,c,o),tU(e),c},oU=[9,27,ct.HOME,ct.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ct.DOWN,ct.UP,ct.LEFT,ct.RIGHT].concat(Nn.browser.isFirefox()?[224]:[]),TP="data-mce-placeholder",kP=e=>e.type==="keydown"||e.type==="keyup",_P=e=>{const t=e.keyCode;return t===ct.BACKSPACE||t===ct.DELETE},sU=e=>{if(kP(e)){const t=e.keyCode;return!_P(e)&&(ct.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||vt(oU,t))}else return!1},rU=e=>kP(e)&&!(_P(e)||e.type==="keyup"&&e.keyCode===229),kh=(e,t,o)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){const r=t.firstElementChild;return r?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},aU=e=>{const t=e.dom,o=Ns(e),r=yy(e)??"",c=(u,f)=>{if(sU(u))return;const b=e.getBody(),v=rU(u)?!1:kh(t,b,o);(t.getAttrib(b,TP)!==""!==v||f)&&(t.setAttrib(b,TP,v?r:null),uy(e,v),e.on(v?"keydown":"keyup",c),e.off(v?"keyup":"keydown",c))};jo(r)&&e.on("init",u=>{c(u,!0),e.on("change SetContent ExecCommand",c),e.on("paste",f=>Mu.setEditorTimeout(e,()=>c(f)))})},cU=e=>t=>ve(t)&&t.nodeName.toLowerCase()===e,ov=e=>t=>ve(t)&&e.test(t.nodeName),Fd=e=>ve(e)&&e.nodeType===3,f4=e=>ve(e)&&e.nodeType===1,jl=ov(/^(OL|UL|DL)$/),iU=ov(/^(OL|UL)$/),g4=ov(/^(LI|DT|DD)$/),lU=ov(/^(DT|DD)$/),b1=cU("br"),uU=e=>{var t;return((t=e.parentNode)==null?void 0:t.firstChild)===e},UO=(e,t)=>ve(t)&&t.nodeName in e.schema.getTextBlockElements(),ZO=(e,t)=>ve(e)&&e.nodeName in t,dU=(e,t)=>ve(t)&&t.nodeName in e.schema.getVoidElements(),mU=(e,t)=>b1(t)?e.isBlock(t.nextSibling)&&!b1(t.previousSibling):!1,v1=(e,t,o)=>{const r=e.isEmpty(t);return o&&e.select("span[data-mce-type=bookmark]",t).length>0?!1:r},AP=(e,t)=>e.isChildOf(t,e.getRoot()),OP=Tn.DOM,fU=(e,t)=>{const o=t.parentElement;if(o&&o.nodeName==="LI"&&o.firstChild===t){const r=o.previousSibling;r&&r.nodeName==="LI"?(r.appendChild(t),v1(e,o)&&OP.remove(o)):OP.setStyle(o,"listStyleType","none")}if(jl(o)){const r=o.previousSibling;r&&r.nodeName==="LI"&&r.appendChild(t)}},WO=(e,t)=>{const o=He.grep(e.select("ol,ul",t));He.each(o,r=>{fU(e,r)})},DP=(e,t)=>{if(Fd(e))return{container:e,offset:t};const o=Od.getNode(e,t);return Fd(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&Fd(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&Fd(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},jO=e=>{const t=e.cloneRange(),o=DP(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=DP(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},RP=["OL","UL","DL"],MP=RP.join(","),GC=(e,t)=>{const o=e.selection.getStart(!0);return e.dom.getParent(o,MP,qC(e,o))},BP=(e,t)=>ve(e)&&t.length===1&&t[0]===e,gU=e=>ge(e.querySelectorAll(MP),jl),hU=e=>{const t=GC(e),o=e.selection.getSelectedBlocks();return BP(t,o)?gU(t):ge(o,r=>jl(r)&&t!==r)},pU=(e,t)=>{const o=He.map(t,r=>{const c=e.dom.getParent(r,"li,dd,dt",qC(e,r));return c||r});return ac(o)},GO=e=>{const t=e.selection.getSelectedBlocks();return ge(pU(e,t),g4)},bU=e=>ge(GO(e),lU),qO=(e,t)=>{const o=e.dom.getParents(t,"TD,TH");return o.length>0?o[0]:e.getBody()},vU=(e,t)=>!jl(t)&&!g4(t)&&zn(RP,o=>e.isValidChild(t.nodeName,o)),qC=(e,t)=>{const o=e.dom.getParents(t,e.dom.isBlock),r=u=>u.nodeName.toLowerCase()!==Ns(e);return Qn(o,u=>r(u)&&vU(e.schema,u)).getOr(e.getBody())},NP=e=>Ic(e).exists(t=>g4(t.dom)&&Sr(t).exists(o=>!jl(o.dom))&&zs(t).exists(o=>!jl(o.dom))),PP=(e,t)=>{const o=e.dom.getParents(t,"ol,ul",qC(e,t));return Fs(o)},yU=e=>{const t=PP(e,e.selection.getStart()),o=ge(e.selection.getSelectedBlocks(),iU);return t.toArray().concat(o)},CU=e=>{const t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",qC(e,t))},SU=e=>{const t=yU(e),o=CU(e);return Qn(o,r=>NP(q.fromDom(r))).fold(()=>wU(e,t),r=>[r])},wU=(e,t)=>{const o=Rt(t,r=>PP(e,r).getOr(r));return ac(o)},h4=e=>/\btox\-/.test(e.className),$P=(e,t)=>t!==null&&!e.dom.isEditable(t),xU=e=>{const t=GC(e);return $P(e,t)||!e.selection.isEditable()},KO=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return $P(e,o)||!e.selection.isEditable()},_h=(e,t,o)=>e.dispatch("ListMutation",{action:t,element:o}),YO=(e,t,o={})=>{const r=e.dom,c=e.schema.getBlockElements(),u=r.createFragment(),f=Ns(e),b=qi(e);let v,w,k=!1;for(w=r.create(f,{...b,...o.style?{style:o.style}:{}}),ZO(t.firstChild,c)||u.appendChild(w);v=t.firstChild;){const O=v.nodeName;!k&&(O!=="SPAN"||v.getAttribute("data-mce-type")!=="bookmark")&&(k=!0),ZO(v,c)?(u.appendChild(v),w=null):(w||(w=r.create(f,b),u.appendChild(w)),w.appendChild(v))}return!k&&w&&w.appendChild(r.create("br",{"data-mce-bogus":"1"})),u},sv=e=>W1(e,"OL,UL"),VY=e=>W1(e,"LI"),XO=e=>Sr(e).exists(sv),EU=e=>zs(e).exists(sv),IP=(e,t)=>My(e).map(o=>o>=t).getOr(!0),y1=e=>"listAttributes"in e,LP=e=>"isComment"in e,TU=e=>"isFragment"in e,FP=e=>e.depth>0,kU=e=>e.isSelected,_U=e=>{const t=ms(e),o=EU(e)?t.slice(0,-1):t;return Rt(o,Wh)},JO=(e,t,o)=>Ic(e).filter(ds).map(r=>({depth:t,dirty:!1,isSelected:o,content:_U(e),itemAttributes:Cn(e),listAttributes:Cn(r),listType:mn(r),isInPreviousLi:!1})),p4=(e,t)=>{Pn(e.item,t.list)},AU=e=>{for(let t=1;t<e.length;t++)p4(e[t-1],e[t])},HP=(e,t)=>{Cs(Fs(e),us(t),p4)},OU=(e,t)=>{const o={list:q.fromTag(t,e),item:q.fromTag("li",e)};return Pn(o.list,o.item),o},DU=(e,t,o)=>{const r=[];for(let c=0;c<o;c++)r.push(OU(e,y1(t)?t.listType:t.parentListType));return r},RU=(e,t)=>{for(let o=0;o<e.length-1;o++)mc(e[o].item,"list-style-type","none");Fs(e).each(o=>{y1(t)&&(Tr(o.list,t.listAttributes),Tr(o.item,t.itemAttributes)),li(o.item,t.content)})},MU=(e,t)=>{mn(e.list)!==t.listType&&(e.list=jh(e.list,t.listType)),Tr(e.list,t.listAttributes)},BU=(e,t,o)=>{const r=q.fromTag("li",e);return Tr(r,t),li(r,o),r},NU=(e,t)=>{Pn(e.list,t),e.item=t},zP=(e,t,o)=>{const r=t.slice(0,o.depth);return Fs(r).each(c=>{if(y1(o)){const u=BU(e,o.itemAttributes,o.content);NU(c,u),MU(c,o)}else if(TU(o))li(c.item,o.content);else{const u=q.fromHtml(`<!--${o.content}-->`);Pn(c.list,u)}}),r},PU=(e,t,o)=>{const r=DU(e,o,o.depth-t.length);return AU(r),RU(r,o),HP(t,r),t.concat(r)},$U=(e,t)=>{let o=N.none();const r=cn(t,(c,u,f)=>LP(u)?f===0?(o=N.some(u),c):zP(e,c,u):u.depth>c.length?PU(e,c,u):zP(e,c,u),[]);return o.each(c=>{const u=q.fromHtml(`<!--${c.content}-->`);us(r).each(f=>{du(f.list,u)})}),us(r).map(c=>c.list)},IU=(e,t,o)=>{switch(t){case"Indent":if(IP(e,o.depth))o.depth++;else return;break;case"Outdent":o.depth--;break;case"Flatten":o.depth=0}o.dirty=!0},QO=(e,t)=>{y1(e)&&y1(t)&&(e.listType=t.listType,e.listAttributes={...t.listAttributes})},LU=e=>{e.listAttributes=tu(e.listAttributes,(t,o)=>o!=="start")},FU=(e,t)=>{const o=e[t].depth,r=u=>u.depth===o&&!u.dirty,c=u=>u.depth<o;return Ls(Mo(e.slice(0,t)),r,c).orThunk(()=>Ls(e.slice(t+1),r,c))},VP=e=>(le(e,(t,o)=>{FU(e,o).fold(()=>{t.dirty&&y1(t)&&LU(t)},r=>QO(t,r))}),e),UP=(e,t,o,r)=>{if(vl(r))return[{depth:e+1,content:r.dom.nodeValue??"",dirty:!1,isSelected:!1,isComment:!0}];t.each(f=>{xn(f.start,r)&&o.set(!0)});const c=JO(r,e,o.get());t.each(f=>{xn(f.end,r)&&o.set(!1)});const u=zs(r).filter(sv).map(f=>KC(e,t,o,f)).getOr([]);return c.toArray().concat(u)},HU=(e,t,o,r)=>Sr(r).filter(sv).fold(()=>UP(e,t,o,r),c=>{const u=cn(ms(r),(f,b,v)=>{if(v===0)return f;if(VY(b))return f.concat(UP(e,t,o,b));{const w={isFragment:!0,depth:e,content:[b],isSelected:!1,dirty:!1,parentListType:mn(c)};return f.concat(w)}},[]);return KC(e,t,o,c).concat(u)}),KC=(e,t,o,r)=>Vn(ms(r),c=>{const u=sv(c)?KC:HU,f=e+1;return u(f,t,o,c)}),C1=(e,t)=>{const o=Bt(!1),r=0;return Rt(e,c=>({sourceList:c,entries:KC(r,t,o,c)}))},ZP=(e,t)=>{const o=VP(t);return Rt(o,r=>{const c=LP(r)?rm([q.fromHtml(`<!--${r.content}-->`)]):rm(r.content),u=y1(r)?r.itemAttributes:{};return q.fromDom(YO(e,c.dom,u))})},zU=(e,t)=>{const o=VP(t);return $U(e.contentDocument,o).toArray()},VU=(e,t)=>Vn(tn(t,FP),o=>us(o).exists(FP)?zU(e,o):ZP(e,o)),UU=(e,t,o)=>{le(ge(t,kU),r=>IU(e,o,r))},ZU=e=>{const t=Rt(GO(e),q.fromDom);return Cs(Qn(t,to(XO)),Qn(Mo(t),to(XO)),(o,r)=>({start:o,end:r}))},rv=(e,t,o)=>{const r=C1(t,ZU(e));le(r,c=>{UU(e,c.entries,o);const u=VU(e,c.entries);le(u,f=>{_h(e,o==="Indent"?"IndentList":"OutdentList",f.dom)}),HS(c.sourceList,u),xo(c.sourceList)})},WU=e=>My(e).forall(t=>{const o=e.selection.getSelectedBlocks();return zn(o,r=>Vr(q.fromDom(r),"li").forall(c=>h3(c,"ol,ul").length<=t))}),zm=Tn.DOM,eD=(e,t,o)=>{const r=w=>{const k=w.parentNode;k&&He.each(c,O=>{k.insertBefore(O,o.parentNode)}),zm.remove(w)},c=zm.select('span[data-mce-type="bookmark"]',t),u=YO(e,o),f=zm.createRng();f.setStartAfter(o),f.setEndAfter(t);const b=f.extractContents();for(let w=b.firstChild;w;w=w.firstChild)if(w.nodeName==="LI"&&e.dom.isEmpty(w)){zm.remove(w);break}e.dom.isEmpty(b)||zm.insertAfter(b,t),zm.insertAfter(u,t);const v=o.parentElement;v&&v1(e.dom,v)&&r(v),zm.remove(o),v1(e.dom,t)&&zm.remove(t)},jU=lu("dd"),tD=lu("dt"),b4=(e,t)=>{jU(t)?jh(t,"dt"):tD(t)&&Ri(t).each(o=>eD(e,o.dom,t.dom))},GU=e=>{tD(e)&&jh(e,"dd")},qU=(e,t,o)=>{t==="Indent"?le(o,GU):le(o,r=>b4(e,r))},KU=(e,t)=>{const o=df(SU(e)),r=df(bU(e));let c=!1;if(o.length||r.length){const u=e.selection.getBookmark();rv(e,o,t),qU(e,t,r),e.selection.moveToBookmark(u),e.selection.setRng(jO(e.selection.getRng())),e.nodeChanged(),c=!0}return c},nD=(e,t)=>!xU(e)&&KU(e,t),WP=e=>nD(e,"Indent"),YC=e=>nD(e,"Outdent"),v4=e=>nD(e,"Flatten"),av=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},YU=(e,t,o)=>{const r=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},jP=(e,t)=>{He.each(t,(o,r)=>{e.setAttribute(r,o)})},XU=(e,t,o)=>{jP(t,o["list-attributes"]),He.each(e.select("li",t),r=>{jP(r,o["list-item-attributes"])})},cv=(e,t,o)=>{YU(e,t,o),XU(e,t,o)},JU=(e,t,o)=>{He.each(o,r=>e.setStyle(t,r,""))},y4=(e,t)=>ve(t)&&!ZO(t,e.schema.getBlockElements()),oD=(e,t,o,r)=>{let c=t[o?"startContainer":"endContainer"];const u=t[o?"startOffset":"endOffset"];f4(c)&&(c=c.childNodes[Math.min(u,c.childNodes.length-1)]||c),!o&&b1(c.nextSibling)&&(c=c.nextSibling);const f=v=>{for(;!e.dom.isBlock(v)&&v.parentNode&&r!==v;)v=v.parentNode;return v},b=(v,w)=>{var I;const k=new fs(v,f(v)),O=w?"next":"prev";let R;for(;R=k[O]();)if(!(dU(e,R)||oi(R.textContent)||((I=R.textContent)==null?void 0:I.length)===0))return N.some(R);return N.none()};if(o&&Fd(c))if(oi(c.textContent))c=b(c,!1).getOr(c);else for(c.parentNode!==null&&y4(e,c.parentNode)&&(c=c.parentNode);c.previousSibling!==null&&(y4(e,c.previousSibling)||Fd(c.previousSibling));)c=c.previousSibling;if(!o&&Fd(c))if(oi(c.textContent))c=b(c,!0).getOr(c);else for(c.parentNode!==null&&y4(e,c.parentNode)&&(c=c.parentNode);c.nextSibling!==null&&(y4(e,c.nextSibling)||Fd(c.nextSibling));)c=c.nextSibling;for(;c.parentNode!==r;){const v=c.parentNode;if(UO(e,c)||/^(TD|TH)$/.test(v.nodeName))return c;c=v}return c},QU=(e,t,o)=>{const r=[],c=e.dom,u=oD(e,t,!0,o),f=oD(e,t,!1,o);let b;const v=[];for(let w=u;w&&(v.push(w),w!==f);w=w.nextSibling);return He.each(v,w=>{var O;if(UO(e,w)){r.push(w),b=null;return}if(c.isBlock(w)||b1(w)){b1(w)&&c.remove(w),b=null;return}const k=w.nextSibling;if(Nb.isBookmarkNode(w)&&(jl(k)||UO(e,k)||!k&&w.parentNode===o)){b=null;return}b||(b=c.create("p"),(O=w.parentNode)==null||O.insertBefore(b,w),r.push(b)),b.appendChild(w)}),r},eZ=(e,t,o)=>{const r=e.getStyle(t,"list-style-type");let c=o?o["list-style-type"]:"";return c=c===null?"":c,r===c},tZ=(e,t)=>{const o=e.selection.getStart(!0),r=oD(e,t,!0,e.getBody());return n0(q.fromDom(r),q.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:o},sD=(e,t,o)=>{const r=e.selection.getRng();let c="LI";const u=qC(e,tZ(e,r)),f=e.dom;if(f.getContentEditable(e.selection.getNode())==="false")return;t=t.toUpperCase(),t==="DL"&&(c="DT");const b=Lm(r),v=ge(QU(e,r,u),e.dom.isEditable);He.each(v,w=>{let k;const O=w.previousSibling,R=w.parentNode;g4(R)||(O&&jl(O)&&O.nodeName===t&&eZ(f,O,o)?(k=O,w=f.rename(w,c),O.appendChild(w)):(k=f.create(t),R.insertBefore(k,w),k.appendChild(w),w=f.rename(w,c)),JU(f,w,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),cv(f,k,o),rD(e.dom,k))}),e.selection.setRng(Hl(b))},nZ=(e,t)=>jl(e)&&e.nodeName===(t==null?void 0:t.nodeName),GP=(e,t,o)=>{const r=e.getStyle(t,"list-style-type",!0),c=e.getStyle(o,"list-style-type",!0);return r===c},oZ=(e,t)=>e.className===t.className,qP=(e,t,o)=>nZ(t,o)&&GP(e,t,o)&&oZ(t,o),rD=(e,t)=>{let o,r=t.nextSibling;if(qP(e,t,r)){const c=r;for(;o=c.firstChild;)t.appendChild(o);e.remove(c)}if(r=t.previousSibling,qP(e,t,r)){const c=r;for(;o=c.lastChild;)t.insertBefore(o,t.firstChild);e.remove(c)}},sZ=(e,t,o,r)=>{if(t.nodeName!==o){const c=e.dom.rename(t,o);cv(e.dom,c,r),_h(e,av(o),c)}else cv(e.dom,t,r),_h(e,av(o),t)},rZ=(e,t,o,r)=>{if(t.classList.forEach((c,u,f)=>{c.startsWith("tox-")&&(f.remove(c),f.length===0&&t.removeAttribute("class"))}),t.nodeName!==o){const c=e.dom.rename(t,o);cv(e.dom,c,r),_h(e,av(o),c)}else cv(e.dom,t,r),_h(e,av(o),t)},aD=(e,t,o,r,c)=>{const u=jl(t);if(u&&t.nodeName===r&&!KP(c)&&!h4(t))v4(e);else{sD(e,r,c);const f=Lm(e.selection.getRng()),b=u?[t,...o]:o,v=u&&h4(t)?rZ:sZ;He.each(b,w=>{v(e,w,r,c)}),e.selection.setRng(Hl(f))}},KP=e=>"list-style-type"in e,aZ=(e,t,o,r)=>{if(t!==e.getBody())if(t)if(t.nodeName===o&&!KP(r)&&!h4(t))v4(e);else{const c=Lm(e.selection.getRng());h4(t)&&t.classList.forEach((f,b,v)=>{f.startsWith("tox-")&&(v.remove(f),v.length===0&&t.removeAttribute("class"))}),cv(e.dom,t,r);const u=e.dom.rename(t,o);rD(e.dom,u),e.selection.setRng(Hl(c)),sD(e,o,r),_h(e,av(o),u)}else sD(e,o,r),_h(e,av(o),t)},cD=(e,t,o)=>{const r=GC(e);if(KO(e,r))return;const c=hU(e),u=en(o)?o:{};c.length>0?aD(e,r,c,t,u):aZ(e,r,t,u)},YP=(e,t,o,r)=>{let c=t.startContainer;const u=t.startOffset;if(Fd(c)&&(o?u<c.data.length:u>0))return c;const f=e.schema.getNonEmptyElements();f4(c)&&(c=Od.getNode(c,u));const b=new fs(c,r);o&&mU(e.dom,c)&&b.next();const v=o?b.next.bind(b):b.prev2.bind(b);for(;c=v();)if(c.nodeName==="LI"&&!c.hasChildNodes()||f[c.nodeName]||Fd(c)&&c.data.length>0)return c;return null},XP=(e,t)=>{const o=t.childNodes;return o.length===1&&!jl(o[0])&&e.isBlock(o[0])},cZ=e=>N.from(e).map(q.fromDom).filter(yl).exists(t=>Ii(t)&&!vt(["details"],mn(t))),iZ=(e,t)=>{XP(e,t)&&cZ(t.firstChild)&&e.remove(t.firstChild,!0)},JP=(e,t,o)=>{let r;const c=XP(e,o)?o.firstChild:o;if(iZ(e,t),!v1(e,t,!0))for(;r=t.firstChild;)c.appendChild(r)},iD=(e,t,o)=>{let r;const c=t.parentNode;if(!AP(e,t)||!AP(e,o))return;jl(o.lastChild)&&(r=o.lastChild),c===o.lastChild&&b1(c.previousSibling)&&e.remove(c.previousSibling);const u=o.lastChild;u&&b1(u)&&t.hasChildNodes()&&e.remove(u),v1(e,o,!0)&&Pi(q.fromDom(o)),JP(e,t,o),r&&o.appendChild(r);const b=ai(q.fromDom(o),q.fromDom(t))?e.getParents(t,jl,o):[];e.remove(t),le(b,v=>{v1(e,v)&&v!==e.getRoot()&&e.remove(v)})},lZ=(e,t,o)=>{Pi(q.fromDom(o)),iD(e.dom,t,o),e.selection.setCursorLocation(o,0)},uZ=(e,t,o,r)=>{const c=e.dom;if(c.isEmpty(r))lZ(e,o,r);else{const u=Lm(t);iD(c,o,r),e.selection.setRng(Hl(u))}},dZ=(e,t,o,r)=>{const c=Lm(t);iD(e.dom,o,r);const u=Hl(c);e.selection.setRng(u)},mZ=(e,t)=>{const o=e.dom,r=e.selection,c=r.getStart(),u=qO(e,c),f=o.getParent(r.getStart(),"LI",u);if(f){const b=f.parentElement;if(b===e.getBody()&&v1(o,b))return!0;const v=jO(r.getRng()),w=o.getParent(YP(e,v,t,u),"LI",u),k=w&&(t?o.isChildOf(f,w):o.isChildOf(w,f));if(w&&w!==f&&!k)return e.undoManager.transact(()=>{t?uZ(e,v,w,f):uU(f)?YC(e):dZ(e,v,f,w)}),!0;if(k&&!t&&w!==f){const O=v.commonAncestorContainer.parentElement;return!O||o.isChildOf(w,O)?!1:(e.undoManager.transact(()=>{const R=Lm(v);JP(o,O,w),O.remove();const I=Hl(R);e.selection.setRng(I)}),!0)}else if(!w&&!t&&v.startOffset===0&&v.endOffset===0)return e.undoManager.transact(()=>{v4(e)}),!0}return!1},fZ=(e,t,o)=>{const r=e.getParent(t.parentNode,e.isBlock,o);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},gZ=(e,t)=>{const o=e.dom,r=e.selection.getStart(),c=qO(e,r),u=o.getParent(r,o.isBlock,c);if(u&&o.isEmpty(u,void 0,{checkRootAsContent:!0})){const f=jO(e.selection.getRng()),b=YP(e,f,t,c),v=o.getParent(b,"LI",c);if(b&&v){const w=I=>vt(["td","th","caption"],mn(I)),k=I=>I.dom===c,O=mo(q.fromDom(v),w,k),R=mo(q.fromDom(f.startContainer),w,k);return Kd(O,R,xn)?(e.undoManager.transact(()=>{const I=v.parentNode;fZ(o,u,c),rD(o,I),e.selection.select(b,!0),e.selection.collapse(t)}),!0):!1}}return!1},hZ=(e,t)=>mZ(e,t)||gZ(e,t),lD=e=>{const t=e.selection.getStart(),o=qO(e,t),r=e.dom.getParent(t,"LI,DT,DD",o);return ve(r)||GO(e).length>0},pZ=e=>lD(e)?(e.undoManager.transact(()=>{let t=!0;const o=()=>t=!1;e.on("input",o),e.execCommand("Delete"),e.off("input",o),t&&e.dispatch("input"),WO(e.dom,e.getBody())}),!0):!1,uD=(e,t)=>{const o=e.selection;return!KO(e,o.getNode())&&(o.isCollapsed()?hZ(e,t):pZ(e))},bZ=(e,t)=>({block:e,position:t}),vZ=(e,t)=>({from:e,to:t}),C4=(e,t)=>{const o=q.fromDom(e),r=q.fromDom(t.container());return I_(o,r).map(c=>bZ(c,t))},yZ=e=>!(ai(e.to.block,e.from.block)||ai(e.from.block,e.to.block)),CZ=e=>!xn(e.from.block,e.to.block),dD=(e,t)=>mo(t,c=>Ef(c)||gc(c.dom),c=>xn(c,e)).filter(ds).getOr(e),SZ=(e,t)=>{const o=q.fromDom(e);return xn(dD(o,t.from.block),dD(o,t.to.block))},wZ=e=>$o(e.from.block.dom)===!1&&$o(e.to.block.dom)===!1,xZ=e=>{const t=o=>ca(o)||Be(o.dom)||xa(o);return t(e.from.block)&&t(e.to.block)},EZ=(e,t,o,r)=>Xo(r.position.getNode())&&!gs(e,r.block)?l(!1,r.block.dom).bind(c=>c.isEqual(r.position)?Wc(o,t,c).bind(u=>C4(t,u)):N.some(r)).getOr(r):r,mD=(e,t,o,r)=>{const c=C4(t,Ce.fromRangeStart(r)),u=c.bind(f=>Wc(o,t,f.position).bind(b=>C4(t,b).map(v=>EZ(e,t,o,v))));return Cs(c,u,vZ).filter(f=>CZ(f)&&SZ(t,f)&&wZ(f)&&xZ(f)&&yZ(f))},QP=(e,t,o,r)=>r.collapsed?mD(e,t,o,r):N.none(),UY=(e,t)=>{const o=ms(e);return cl(o,r=>t.isBlock(mn(r))).fold(Xe(o),r=>o.slice(0,r))},iv=(e,t)=>{const o=UY(e,t);return le(o,xo),o},TZ=(e,t,o)=>{const r=Bu(o,t);return Qn(r.reverse(),c=>gs(e,c)).each(xo)},ZY=(e,t)=>ge(oa(t),o=>!gs(e,o)).length===0,WY=(e,t,o,r,c)=>{if(gs(r,o))return ym(o),y(o.dom);ZY(r,c)&&gs(r,t)&&zr(c,q.fromTag("br"));const u=p(o.dom,Ce.before(c.dom));return le(iv(t,r),f=>{zr(c,f)}),TZ(r,e,t),u},jY=(e,t)=>e.isInline(mn(t)),Hd=(e,t,o,r)=>{if(gs(r,o)){if(gs(r,t)){const f=yn((b=>{const v=(w,k)=>Sr(w).fold(()=>k,O=>jY(r,O)?v(O,k.concat(sa(O))):k);return v(b,[])})(o),(b,v)=>(Lc(b,v),v),vm());Pi(t),Pn(t,f)}return xo(o),y(t.dom)}const c=E(o.dom);return le(iv(t,r),u=>{Pn(o,u)}),TZ(r,e,t),c},XC=(e,t)=>{const o=Bu(t,e);return N.from(o[o.length-1])},zd=(e,t)=>ai(t,e)?XC(t,e):N.none(),Ah=(e,t)=>{l(e,t.dom).bind(o=>N.from(o.getNode())).map(q.fromDom).filter(Ui).each(xo)},S4=(e,t,o,r)=>(Ah(!0,t),Ah(!1,o),zd(t,o).fold(Me(Hd,e,t,o,r),Me(WY,e,t,o,r))),fD=(e,t,o,r,c)=>t?S4(e,r,o,c):S4(e,o,r,c),S1=(e,t)=>{const o=q.fromDom(e.getBody());return QP(e.schema,o.dom,t,e.selection.getRng()).map(c=>()=>{fD(o,t,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},kZ=(e,t,o)=>{const r=t.getRng();return Cs(I_(e,q.fromDom(r.startContainer)),I_(e,q.fromDom(r.endContainer)),(c,u)=>xn(c,u)?N.none():N.some(()=>{r.deleteContents(),fD(e,!0,c,u,o).each(f=>{t.setRng(f.toRange())})})).getOr(N.none())},gD=(e,t)=>{const o=q.fromDom(t),r=Me(xn,e);return gu(o,Ef,r).isSome()},GY=(e,t)=>gD(e,t.startContainer)||gD(e,t.endContainer),_Z=(e,t)=>{const o=p(e.dom,Ce.fromRangeStart(t)).isNone(),r=m(e.dom,Ce.fromRangeEnd(t)).isNone();return!GY(e,t)&&o&&r},JC=e=>N.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),e8=e=>{const t=q.fromDom(e.getBody()),o=e.selection.getRng();return _Z(t,o)?JC(e):kZ(t,e.selection,e.schema)},Es=(e,t)=>e.selection.isCollapsed()?N.none():e8(e),tg=(e,t,o,r,c)=>N.from(t._selectionOverrides.showCaret(e,o,r,c)),AZ=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},Vm=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?N.none():N.some(AZ(t)),w1=(e,t,o)=>{const r=Eb(1,e.getBody(),t),c=Ce.fromRangeStart(r),u=c.getNode();if(Zc(u))return tg(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Zc(f))return tg(1,e,f,!1,!1);const b=Dd(e.dom.getRoot(),c.getNode());return Zc(b)?tg(1,e,b,!1,o):N.none()},ng=(e,t,o)=>t.collapsed?w1(e,t,o).getOr(t):t,OZ=e=>Wf(e)||aC(e),DZ=e=>$m(e)||cC(e),hD=(e,t)=>{ze(t)&&t.data.length===0&&e.remove(t)},w4=(e,t,o,r,c,u)=>{tg(r,e,u.getNode(!c),c,!0).each(f=>{if(t.collapsed){const b=t.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else t.deleteContents();e.selection.setRng(f)}),hD(e.dom,o)},t8=(e,t)=>{const o=e.selection.getRng();if(!ze(o.commonAncestorContainer))return N.none();const r=t?1:-1,c=Ll(e.getBody()),u=Me(kb,t?c.next:c.prev),f=t?OZ:DZ,b=Mm(r,e.getBody(),o),v=u(b),w=v&&Fl(t,v);if(!w||!Il(b,w))return N.none();if(f(w))return N.some(()=>w4(e,o,b.getNode(),r,t,w));const k=u(w);return k&&f(k)&&Il(w,k)?N.some(()=>w4(e,o,b.getNode(),r,t,k)):N.none()},x4=(e,t)=>t8(e,t),pD=(e,t)=>{const o=e.getBody();return t?y(o).filter(Wf):E(o).filter($m)},bD=e=>{const t=e.selection.getRng();return!t.collapsed&&(pD(e,!0).exists(o=>o.isEqual(Ce.fromRangeStart(t)))||pD(e,!1).exists(o=>o.isEqual(Ce.fromRangeEnd(t))))},vD=e=>ve(e)&&(Ef(q.fromDom(e))||xa(q.fromDom(e))),nl=ei.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),RZ=(e,t)=>{const o=t.getNode(!e),r=e?"after":"before";return Ye(o)&&o.getAttribute("data-mce-caret")===r},MZ=(e,t,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!_u(o,r,e);return Tb(!t,o).fold(()=>Tb(t,r).fold(De,u),u)},n8=(e,t,o,r,c)=>{const u=c.getNode(!o);return I_(q.fromDom(t),q.fromDom(r.getNode())).map(f=>gs(e,f)?nl.remove(f.dom):nl.moveToElement(u)).orThunk(()=>N.some(nl.moveToElement(u)))},o8=(e,t,o,r)=>Wc(t,e,o).bind(c=>vD(c.getNode())||MZ(e,t,o,c,r)?N.none():t&&$o(c.getNode())||!t&&$o(c.getNode(!0))?n8(r,e,t,o,c):t&&$m(o)||!t&&Wf(o)?N.some(nl.moveToPosition(c)):N.none()),yD=(e,t)=>gn(t)?N.none():e&&$o(t.nextSibling)?N.some(nl.moveToElement(t.nextSibling)):!e&&$o(t.previousSibling)?N.some(nl.moveToElement(t.previousSibling)):N.none(),s8=(e,t,o)=>o.fold(r=>N.some(nl.remove(r)),r=>N.some(nl.moveToElement(r)),r=>_u(t,r,e)?N.none():N.some(nl.moveToPosition(r))),BZ=(e,t,o,r)=>RZ(t,o)?yD(t,o.getNode(!t)).orThunk(()=>o8(e,t,o,r)):o8(e,t,o,r).bind(c=>s8(e,o,c)),NZ=(e,t,o,r)=>{const c=Eb(t?1:-1,e,o),u=Ce.fromRangeStart(c),f=q.fromDom(e);return!t&&$m(u)?N.some(nl.remove(u.getNode(!0))):t&&Wf(u)?N.some(nl.remove(u.getNode())):!t&&Wf(u)&&pE(f,u,r)?n6(f,u,r).map(b=>nl.remove(b.getNode())):t&&$m(u)&&R_(f,u,r)?cH(f,u,r).map(b=>nl.remove(b.getNode())):BZ(e,t,u,r)},lv=(e,t)=>o=>(e._selectionOverrides.hideFakeCaret(),Im(e,t,q.fromDom(o)),!0),r8=(e,t)=>o=>{const r=t?Ce.before(o):Ce.after(o);return e.selection.setRng(r.toRange()),!0},PZ=e=>t=>(e.selection.setRng(t.toRange()),!0),CD=(e,t)=>N.from(Dd(e.getBody(),t)),$Z=(e,t)=>{const o=e.selection.getNode();return CD(e,o).filter($o).fold(()=>NZ(e.getBody(),t,e.selection.getRng(),e.schema).map(r=>()=>r.fold(lv(e,t),r8(e,t),PZ(e))),()=>N.some(Ot))},a8=e=>{le(_r(e,".mce-offscreen-selection"),xo)},IZ=(e,t)=>{const o=e.selection.getNode();return $o(o)&&!Og(o)?CD(e,o.parentNode).filter($o).fold(()=>N.some(()=>{a8(q.fromDom(e.getBody())),Im(e,t,q.fromDom(e.selection.getNode())),S6(e)}),()=>N.some(Ot)):bD(e)?N.some(()=>{OH(e,e.selection.getRng(),q.fromDom(e.getBody()))}):N.none()},SD=e=>{const t=e.dom,o=e.selection,r=Dd(e.getBody(),o.getNode());if(gc(r)&&t.isBlock(r)&&t.isEmpty(r)){const c=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(c),o.setRng(Ce.before(c).toRange())}return!0},E4=(e,t)=>e.selection.isCollapsed()?$Z(e,t):IZ(e,t),T4=(e,t)=>{var b;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),c=o.getParent(e.selection.getEnd(),o.isBlock),u=e.getBody();if(((b=r==null?void 0:r.nodeName)==null?void 0:b.toLowerCase())==="div"&&r&&c&&r===u.firstChild&&c===u.lastChild&&!o.isEmpty(u)){const v=r.cloneNode(!1),w=()=>{if(t?_H(e):$_(e),u.firstChild!==r){const k=Lm(e.selection.getRng(),()=>document.createElement("span"));Array.from(u.childNodes).forEach(O=>v.appendChild(O)),u.appendChild(v),e.selection.setRng(Hl(k))}};return N.some(w)}return N.none()},c8=(e,t)=>{const o=Ce.fromRangeStart(e.selection.getRng());return Wc(t,e.getBody(),o).filter(r=>t?T_(r):KM(r)).bind(r=>Hy(t?0:-1,r)).map(r=>()=>e.selection.select(r))},k4=(e,t)=>e.selection.isCollapsed()?c8(e,t):N.none(),x1=ze,i8=e=>x1(e)&&e.data[0]===Js,l8=e=>x1(e)&&e.data[e.data.length-1]===Js,u8=e=>(e.ownerDocument??document).createTextNode(Js),wD=e=>{var t;if(x1(e.previousSibling))return l8(e.previousSibling)||e.previousSibling.appendData(Js),e.previousSibling;if(x1(e))return i8(e)||e.insertData(0,Js),e;{const o=u8(e);return(t=e.parentNode)==null||t.insertBefore(o,e),o}},QC=e=>{var t,o;if(x1(e.nextSibling))return i8(e.nextSibling)||e.nextSibling.insertData(0,Js),e.nextSibling;if(x1(e))return l8(e)||e.appendData(Js),e;{const r=u8(e);return e.nextSibling?(t=e.parentNode)==null||t.insertBefore(r,e.nextSibling):(o=e.parentNode)==null||o.appendChild(r),r}},Oh=(e,t)=>e?wD(t):QC(t),xD=Me(Oh,!0),d8=Me(Oh,!1),ED=(e,t)=>ze(e.container())?Oh(t,e.container()):Oh(t,e.getNode()),eS=(e,t)=>{const o=t.get();return o&&e.container()===o&&Rl(o)},TD=(e,t)=>t.fold(o=>{If(e.get());const r=xD(o);return e.set(r),N.some(Ce(r,r.length-1))},o=>y(o).map(r=>{if(eS(r,e)){const c=e.get();return Ce(c,1)}else{If(e.get());const c=ED(r,!0);return e.set(c),Ce(c,1)}}),o=>E(o).map(r=>{if(eS(r,e)){const c=e.get();return Ce(c,c.length-1)}else{If(e.get());const c=ED(r,!1);return e.set(c),Ce(c,c.length-1)}}),o=>{If(e.get());const r=d8(o);return e.set(r),N.some(Ce(r,1))}),m8=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,t);if(r.isSome())return r}return N.none()},hr=ei.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),_4=(e,t)=>{const o=Dm(t,e);return o||e},f8=(e,t,o)=>{const r=v6(o),c=_4(t,r.container());return ph(e,c,r).fold(()=>m(c,r).bind(Me(ph,e,c)).map(u=>hr.before(u)),N.none)},tS=(e,t)=>L(e,t)===null,kD=(e,t,o)=>ph(e,t,o).filter(Me(tS,t)),_D=(e,t,o)=>{const r=y6(o);return kD(e,t,r).bind(c=>p(c,r).isNone()?N.some(hr.start(c)):N.none())},g8=(e,t,o)=>{const r=v6(o);return kD(e,t,r).bind(c=>m(c,r).isNone()?N.some(hr.end(c)):N.none())},h8=(e,t,o)=>{const r=y6(o),c=_4(t,r.container());return ph(e,c,r).fold(()=>p(c,r).bind(Me(ph,e,c)).map(u=>hr.after(u)),N.none)},p8=e=>!N_(AD(e)),Vd=(e,t,o)=>m8([f8,_D,g8,h8],[e,t,o]).filter(p8),AD=e=>e.fold(Zo,Zo,Zo,Zo),b8=e=>e.fold(Xe("before"),Xe("start"),Xe("end"),Xe("after")),A4=e=>e.fold(hr.before,hr.before,hr.after,hr.after),OD=e=>e.fold(hr.start,hr.start,hr.end,hr.end),DD=(e,t)=>b8(e)===b8(t)&&AD(e)===AD(t),LZ=(e,t,o,r,c,u)=>Cs(ph(t,o,r),ph(t,o,c),(f,b)=>f!==b&&TH(o,f,b)?hr.after(e?f:b):u).getOr(u),v8=(e,t)=>e.fold(et,o=>!DD(o,t)),FZ=(e,t,o,r,c)=>{const u=Fl(e,c);return Wc(e,o,u).map(Me(Fl,e)).fold(()=>r.map(A4),v=>Vd(t,o,v).map(Me(LZ,e,t,o,u,v)).filter(Me(v8,r))).filter(p8)},HZ=(e,t)=>e?t.fold(T(N.some,hr.start),N.none,T(N.some,hr.after),N.none):t.fold(N.none,T(N.some,hr.before),N.none,T(N.some,hr.end)),zZ=(e,t,o,r)=>{const c=Fl(e,r),u=Vd(t,o,c);return Vd(t,o,c).bind(Me(HZ,e)).orThunk(()=>FZ(e,t,o,u,r))},VZ=e=>ne(e.selection.getSel().modify),y8=(e,t,o)=>{const r=e?1:-1;return t.setRng(Ce(o.container(),o.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},UZ=(e,t)=>{const o=t.selection.getRng(),r=e?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return VZ(t)?e&&bd(r)?y8(!0,t.selection,r):!e&&Tf(r)?y8(!1,t.selection,r):!1:!1};var Um;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Um||(Um={}));const O4=(e,t)=>e===-1?Mo(t):t,ZZ=(e,t,o)=>e===1?t.next(o):t.prev(o),WZ=(e,t,o,r)=>Xo(r.getNode(t===1))?Um.Br:_u(o,r)===!1?Um.Block:Um.Wrap,C8=(e,t,o,r)=>{const c=Ll(o);let u=r;const f=[];for(;u;){const b=ZZ(t,c,u);if(!b)break;if(Xo(b.getNode(!1)))return t===1?{positions:O4(t,f).concat([b]),breakType:Um.Br,breakAt:N.some(b)}:{positions:O4(t,f),breakType:Um.Br,breakAt:N.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const v=WZ(o,t,u,b);return{positions:O4(t,f),breakType:v,breakAt:N.some(b)}}f.push(b),u=b}return{positions:O4(t,f),breakType:Um.Eol,breakAt:N.none()}},RD=(e,t,o,r)=>t(o,r).breakAt.map(c=>{const u=t(o,c).positions;return e===-1?u.concat(c):[c].concat(u)}).getOr([]),MD=(e,t)=>cn(e,(o,r)=>o.fold(()=>N.some(r),c=>Cs(us(c.getClientRects()),us(r.getClientRects()),(u,f)=>{const b=Math.abs(t-u.left);return Math.abs(t-f.left)<=b?r:c}).or(o)),N.none()),E1=(e,t)=>us(t.getClientRects()).bind(o=>MD(e,o.left)),Br=Me(C8,Ce.isAbove,-1),nS=Me(C8,Ce.isBelow,1),oS=Me(RD,-1,Br),Dh=Me(RD,1,nS),D4=(e,t)=>Br(e,t).breakAt.isNone(),xc=(e,t)=>nS(e,t).breakAt.isNone(),T1=e=>y(e).map(t=>[t].concat(nS(e,t).positions)).getOr([]),S8=e=>E(e).map(t=>Br(e,t).positions.concat(t)).getOr([]),w8=(e,t)=>E1(oS(e,t),t),BD=(e,t)=>E1(Dh(e,t),t),jZ=$o,ND=(e,t)=>Math.abs(e.left-t),R4=(e,t)=>Math.abs(e.right-t),PD=e=>Wo(e,"node"),x8=(e,t)=>Qd(e,(o,r)=>{const c=Math.min(ND(o,t),R4(o,t)),u=Math.min(ND(r,t),R4(r,t));return u===c&&PD(r)&&jZ(r.node)||u<c?r:o}),GZ=e=>{const t=o=>Rt(o,r=>{const c=Sm(r);return c.node=e,c});if(Ye(e))return t(e.getClientRects());if(ze(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),t(o.getClientRects())}else return[]},$D=e=>Vn(e,GZ);var Ec;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ec||(Ec={}));const ID=(e,t,o,r)=>{let c=r;for(;c=Gp(c,e,F0,t);)if(o(c))return},E8=(e,t,o,r,c,u)=>{let f=0;const b=[],v=O=>{let R=$D([O]);e===Ec.Up&&(R=R.reverse());for(let I=0;I<R.length;I++){const U=R[I];if(!o(U,w)){if(b.length>0&&t(U,si(b))&&f++,U.line=f,c(U))return!0;b.push(U)}}return!1},w=si(u.getClientRects());if(!w)return b;const k=u.getNode();return k&&(v(k),ID(e,r,v,k)),b},M4=(e,t)=>t.line>e,LD=(e,t)=>t.line===e,T8=Me(E8,Ec.Up,_f,wm),k8=Me(E8,Ec.Down,wm,_f),FD=e=>si(e.getClientRects()),qZ=(e,t,o,r)=>{const c=Ll(t);let u,f,b,v;const w=[];let k=0;e===Ec.Down?(u=c.next,f=wm,b=_f,v=Ce.after(r)):(u=c.prev,f=_f,b=wm,v=Ce.before(r));const O=FD(v);do{if(!v.isVisible())continue;const R=FD(v);if(b(R,O))continue;w.length>0&&f(R,si(w))&&k++;const I=Sm(R);if(I.position=v,I.line=k,o(I))return w;w.push(I)}while(v=u(v));return w},_8=e=>t=>M4(e,t),HD=e=>t=>LD(e,t),Zm=(e,t)=>{e.selection.setRng(t),Xi(e,e.selection.getRng())},zD=(e,t,o)=>N.some(ng(e,t,o)),VD=(e,t)=>{const o=e.getNode(t===-1);return ve(o)&&er(o)?N.some(o):N.none()},A8=(e,t)=>{const o=e.dom.createRng();return o.selectNode(t),o},O8=(e,t,o,r,c,u)=>{const f=t===1,b=Ll(e.getBody()),v=Me(kb,f?b.next:b.prev),w=f?r:c;if(!o.collapsed){const U=Qs(o);if(u(U))if(er(U)){const H=Mm(t,e.getBody(),o);return N.from(v(H)).map(j=>j.toRange())}else return tg(t,e,U,t===-1,!1);else if(bD(e)){const H=o.cloneRange();return H.collapse(t===-1),N.from(H)}}const k=Mm(t,e.getBody(),o);if(w(k))return Vm(e,k.getNode(!f));let O=v(k);const R=P0(o);if(O)O=Fl(f,O);else return R?N.some(o):N.none();if(w(O))return VD(O,t).fold(()=>tg(t,e,O==null?void 0:O.getNode(!f),f,!1),U=>N.some(A8(e,U)));const I=v(O);return I&&w(I)&&Il(O,I)?VD(O,t).fold(()=>tg(t,e,I.getNode(!f),f,!1),U=>N.some(A8(e,U))):R?zD(e,O.toRange(),!1):N.none()},D8=(e,t,o,r,c,u)=>{const f=Mm(t,e.getBody(),o),b=si(f.getClientRects()),v=t===Ec.Down,w=e.getBody();if(!b)return N.none();if(bD(e)){const j=v?Ce.fromRangeEnd(o):Ce.fromRangeStart(o);return(v?BD:w8)(w,j).orThunk(()=>N.from(j)).map(se=>se.toRange())}const O=(v?k8:T8)(w,_8(1),f),R=ge(O,HD(1)),I=b.left,U=x8(R,I);if(U&&u(U.node)){const j=Math.abs(I-U.left),oe=Math.abs(I-U.right);return tg(t,e,U.node,j<oe,!1)}let H;if(r(f)?H=f.getNode():c(f)?H=f.getNode(!0):H=Qs(o),H){const j=qZ(t,w,_8(1),H);let oe=x8(ge(j,HD(1)),I);if(oe||(oe=si(ge(j,HD(0))),oe))return zD(e,oe.position.toRange(),!1)}return R.length===0?B4(e,v).filter(v?c:r).map(j=>ng(e,j.toRange(),!1)):N.none()},B4=(e,t)=>{const o=e.selection.getRng(),r=t?Ce.fromRangeEnd(o):Ce.fromRangeStart(o),c=wb(r.container(),e.getBody());if(t){const u=nS(c,r);return Fs(u.positions)}else{const u=Br(c,r);return us(u.positions)}},N4=(e,t,o)=>B4(e,t).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),uv=(e,t)=>{const o=e.dom.createRng();o.setStart(t.container(),t.offset()),o.setEnd(t.container(),t.offset()),e.selection.setRng(o)},UD=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},P4=(e,t,o)=>TD(t,o).map(r=>(uv(e,r),o)),R8=(e,t,o)=>{const r=Ce.fromRangeStart(e);if(e.collapsed)return r;{const c=Ce.fromRangeEnd(e);return o?p(t,c).getOr(c):m(t,r).getOr(r)}},M8=(e,t,o)=>{const r=e.getBody(),c=R8(e.selection.getRng(),r,o),u=Me(e1,e);return zZ(o,u,r,c).bind(b=>P4(e,t,b))},ZD=(e,t,o)=>{const r=Rt(_r(q.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=ge(r,e),u=ge(o,e);le(ns(c,u),Me(UD,!1)),le(ns(u,c),Me(UD,!0))},B8=(e,t)=>{const o=t.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ce.fromRangeStart(e.selection.getRng());Ce.isTextPosition(r)&&!kH(r)&&(uv(e,Fk(o,r)),t.set(null))}},N8=(e,t,o,r)=>{if(t.selection.isCollapsed()){const c=ge(r,e);le(c,u=>{const f=Ce.fromRangeStart(t.selection.getRng());Vd(e,t.getBody(),f).bind(b=>P4(t,o,b))})}},WD=(e,t,o)=>Om(e)?M8(e,t,o).isSome():!1,P8=(e,t,o)=>Om(t)?UZ(e,t):!1,KZ=e=>{const t=Bt(null),o=Me(e1,e);return e.on("NodeChange",r=>{Om(e)&&(ZD(o,e.dom,r.parents),B8(e,t),N8(o,e,t,r.parents))}),t},$4=Me(P8,!0),YZ=Me(P8,!1),Rh=(e,t,o)=>{if(Om(e)){const r=B4(e,t).getOrThunk(()=>{const c=e.selection.getRng();return t?Ce.fromRangeEnd(c):Ce.fromRangeStart(c)});return Vd(Me(e1,e),e.getBody(),r).exists(c=>{const u=A4(c);return TD(o,u).exists(f=>(uv(e,f),!0))})}else return!1},XZ=(e,t)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(t.container(),t.offset()),o},JZ=e=>Cs(y(e),E(e),(t,o)=>{const r=Fl(!0,t),c=Fl(!1,o);return m(e,r).forall(u=>u.isEqual(c))}).getOr(!0),$8=(e,t)=>o=>TD(t,o).map(r=>()=>uv(e,r)),I8=(e,t,o,r)=>{const c=e.getBody(),u=Me(e1,e);e.undoManager.ignore(()=>{e.selection.setRng(XZ(o,r)),$_(e),Vd(u,c,Ce.fromRangeStart(e.selection.getRng())).map(OD).bind($8(e,t)).each(ls)}),e.nodeChanged()},L8=(e,t)=>{const o=Dm(t,e);return o||e},F8=(e,t,o,r)=>{const c=L8(e.getBody(),r.container()),u=Me(e1,e),f=Vd(u,c,r);return f.bind(v=>o?v.fold(Xe(N.some(OD(v))),N.none,Xe(N.some(A4(v))),N.none):v.fold(N.none,Xe(N.some(A4(v))),N.none,Xe(N.some(OD(v))))).map($8(e,t)).getOrThunk(()=>{const v=mh(o,c,r),w=v.bind(k=>Vd(u,c,k));return Cs(f,w,()=>ph(u,c,r).bind(k=>JZ(k)?N.some(()=>{Im(e,o,q.fromDom(k))}):N.none())).getOrThunk(()=>w.bind(()=>v.map(k=>()=>{o?I8(e,t,r,k):I8(e,t,k,r)})))})},jD=(e,t,o)=>{if(e.selection.isCollapsed()&&Om(e)){const r=Ce.fromRangeStart(e.selection.getRng());return F8(e,t,o,r)}return N.none()},QZ=e=>cf(e)>1,H8=(e,t)=>{const o=q.fromDom(e.getBody()),r=q.fromDom(e.selection.getStart()),c=Bu(r,o);return cl(c,t).fold(Xe(c),u=>c.slice(0,u))},eW=e=>cf(e)===1,tW=e=>H8(e,t=>e.schema.isBlock(mn(t))||QZ(t)),z8=e=>H8(e,t=>e.schema.isBlock(mn(t))),nW=(e,t)=>{const o=Me(G6,e);return Vn(t,r=>o(r)?[r.dom]:[])},GD=e=>{const t=z8(e);return nW(e,t)},oW=(e,t,o,r)=>{const c=nW(t,r);if(c.length===0)Im(t,e,o);else{const u=eA(o.dom,c);t.selection.setRng(u.toRange())}},sW=(e,t)=>{const o=ge(tW(e),eW);return Fs(o).bind(r=>{const c=Ce.fromRangeStart(e.selection.getRng());return w6(t,c,r.dom)&&!e_(r)?N.some(()=>oW(t,e,r,o)):N.none()})},rW=(e,t)=>{const o=t.parentElement;return Xo(t)&&!ie(o)&&e.dom.isEmpty(o)},aW=e=>e_(q.fromDom(e)),V8=(e,t)=>{const o=e.selection.getStart(),r=rW(e,o)||aW(o)?eA(o,t):e9(e.selection.getRng(),t);e.selection.setRng(r.toRange())},U8=(e,t)=>{const o=ns(t,GD(e));o.length>0&&V8(e,o)},qD=e=>ze(e.startContainer),cW=e=>e.startOffset===0&&qD(e),iW=(e,t)=>{const o=t.startContainer.parentElement;return!ie(o)&&G6(e,q.fromDom(o))},lW=e=>{const t=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ie(t)&&!ie(o)&&t.isEqualNode(o)},uW=e=>{const t=e.endContainer;return e.endOffset===(ze(t)?t.length:t.childNodes.length)},dW=e=>lW(e)&&uW(e),mW=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),fW=e=>dW(e)||mW(e),gW=e=>{const t=e.selection.getRng();return cW(t)&&iW(e,t)&&fW(t)},hW=e=>{if(gW(e)){const t=GD(e);return N.some(()=>{$_(e),U8(e,t)})}else return N.none()},KD=(e,t)=>e.selection.isCollapsed()?sW(e,t):hW(e),Z8=(e,t)=>wg(e,o=>M(o.dom),o=>t.isBlock(mn(o))),pW=e=>Z8(q.fromDom(e.selection.getStart()),e.schema),bW=e=>{const t=e.selection.getRng();return t.collapsed&&(qD(t)||e.dom.isEmpty(t.startContainer))&&!pW(e)},sS=e=>(bW(e)&&V8(e,[]),!0),dv=(e,t,o)=>ve(o)?N.some(()=>{e._selectionOverrides.hideFakeCaret(),Im(e,t,q.fromDom(o))}):N.none(),vW=(e,t)=>{const o=t?aC:cC,c=Mm(t?1:-1,e.getBody(),e.selection.getRng());return o(c)?dv(e,t,c.getNode(!t)):N.from(Fl(t,c)).filter(u=>o(u)&&Il(c,u)).bind(u=>dv(e,t,u.getNode(!t)))},yW=(e,t)=>{const o=e.selection.getNode();return hi(o)?dv(e,t,o):N.none()},I4=(e,t)=>e.selection.isCollapsed()?vW(e,t):yW(e,t),YD=e=>mo(e,t=>gc(t.dom)||$o(t.dom)).exists(t=>gc(t.dom)),XD=e=>Hh(e??"").getOr(0),W8=(e,t)=>{const o=e||Aw(t)?"margin":"padding",r=vs(t,"direction")==="rtl"?"-right":"-left";return o+r},qY=(e,t,o,r,c,u)=>{const f=W8(o,q.fromDom(u)),b=XD(e.getStyle(u,f));if(t==="outdent"){const v=Math.max(0,b-r);e.setStyle(u,f,v?v+c:"")}else{const v=b+r+c;e.setStyle(u,f,v)}},CW=(e,t)=>$a(t,o=>{const r=W8(lb(e),o),c=qs(o,r).map(XD).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),j8=e=>{const t=G8(e);return!e.mode.isReadOnly()&&(t.length>1||CW(e,t))},SW=e=>!e.mode.isReadOnly()&&WU(e),mv=e=>vi(e)||xa(e),wW=e=>Ic(e).exists(mv),G8=e=>ge(df(e.selection.getSelectedBlocks()),t=>!mv(t)&&!wW(t)&&YD(t)),q8=(e,t)=>{var b;if(e.mode.isReadOnly())return;const{dom:o}=e,r=bk(e),c=((b=/[a-z%]+$/i.exec(r))==null?void 0:b[0])??"px",u=XD(r),f=lb(e);le(G8(e),v=>{qY(o,t,f,u,c,v.dom)}),t==="indent"?WP(e):YC(e)},K8=e=>q8(e,"indent"),og=e=>q8(e,"outdent"),Tc=e=>{if(e.selection.isCollapsed()&&j8(e)){const t=e.dom,o=e.selection.getRng(),r=Ce.fromRangeStart(o),c=t.getParent(o.startContainer,t.isBlock);if(c!==null&&gE(q.fromDom(c),r,e.schema))return N.some(()=>og(e))}return N.none()},Y8=(e,t)=>{const o=hA(e.selection.getRng());return JL(o)?N.some(()=>Im(e,t,q.fromDom(e.selection.getNode()))):N.none()},k1=(e,t)=>e.selection.isCollapsed()?N.none():Y8(e,t),sg=(e,t,o)=>rc([Tc,E4,x4,(r,c)=>jD(r,t,c),S1,W_,k4,I4,Es,KD,T4,k1],r=>r(e,o)).filter(r=>e.selection.isEditable()),Vu=(e,t)=>{sg(e,t,!1).fold(()=>{e.selection.isEditable()&&($_(e),S6(e))},ls),lD(e)&&WO(e.dom,e.getBody())},rS=(e,t)=>{sg(e,t,!0).fold(()=>{e.selection.isEditable()&&_H(e)},ls),lD(e)&&WO(e.dom,e.getBody())},JD=(e,t)=>{e.addCommand("delete",()=>{Vu(e,t)}),e.addCommand("forwardDelete",()=>{rS(e,t)})},L4=5,X8=400,QD=e=>e.touches===void 0||e.touches.length!==1?N.none():N.some(e.touches[0]),xW=(e,t)=>{const o=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return o>L4||r>L4},EW=e=>{const t=Mc(),o=Bt(!1),r=ou(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},X8);e.on("touchstart",c=>{QD(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),t.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),QD(c).each(u=>{t.on(f=>{xW(u,f)&&(t.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&t.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},F4=(e,t)=>Kt(e,t.nodeName),J8=(e,t)=>ze(t)?!0:Ye(t)?!F4(e.getBlockElements(),t)&&!is(t)&&!as(e,t)&&!Rg(t)&&!h2(t):!1,Q8=(e,t,o)=>zn(XM(q.fromDom(o),q.fromDom(t)),r=>F4(e,r.dom)),TW=(e,t)=>{if(ze(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||F4(e,t.nextSibling)||Rg(t.nextSibling)}return!1},e$=e=>e.dom.create(Ns(e),qi(e)),KY=e=>{const t=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,v,w=null;const k=Ns(e);if(!u||!Ye(u))return;const O=f.nodeName.toLowerCase();if(!r.isValidChild(O,k.toLowerCase())||Q8(c,f,u))return;if(f.firstChild===f.lastChild&&Xo(f.firstChild)){b=e$(e),b.appendChild(vm().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let R=f.firstChild;for(;R;)if(Ye(R)&&Ca(r,R),J8(r,R)){if(TW(c,R)){v=R,R=R.nextSibling,t.remove(v);continue}if(!b){if(!w&&e.hasFocus()&&(w=Lm(e.selection.getRng(),()=>document.createElement("span"))),!R.parentNode){R=null;break}b=e$(e),f.insertBefore(b,R)}v=R,R=R.nextSibling,b.appendChild(v)}else b=null,R=R.nextSibling;w&&(e.selection.setRng(Hl(w)),e.nodeChanged())},kW=(e,t,o)=>{const r=q.fromDom(e$(e)),c=vm();Pn(r,c),o(t,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},Uu=e=>{e.on("NodeChange",()=>KY(e))},t$=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,_W=(e,t,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?t.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=t.lastIndexOf("<",u);if(b!==-1&&t.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},_1=(e,t,o)=>{let r=t.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(t[r],_W(e,c,zp(e)));o.content=c}},n$=(e,t)=>$a(e,o=>{const r=t.match(o);return r!==null&&r[0].length===t.length}),AW=e=>{const t="contenteditable",o=" "+He.trim(Tx(e))+" ",r=" "+He.trim(zp(e))+" ",c=t$(o),u=t$(r),f=Ik(e);f.length>0&&e.on("BeforeSetContent",b=>{_1(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let v=b.length;for(;v--;){const w=b[v];c(w)?w.attr(t,"true"):u(w)&&w.attr(t,"false")}}),e.serializer.addAttributeFilter(t,b=>{let v=b.length;for(;v--;){const w=b[v];if(!c(w)&&!u(w))continue;const k=w.attr("data-mce-content");f.length>0&&k?n$(f,k)?(w.name="#text",w.type=3,w.raw=!0,w.value=k):w.remove():w.attr(t,null)}})},H4=e=>hu(q.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),z4=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Zi(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},o$=(e,t)=>{const o=H4(e);if(o){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),z4(e,o);return}N0(o)&&(z4(e,o),e.undoManager.add())}},s$=e=>{e.on("keyup compositionstart",Me(o$,e))},r$=$o,a$=(e,t,o)=>O8(t,e,o,Wf,$m,r$),c$=(e,t,o)=>D8(t,e,o,u=>Wf(u)||iC(u),u=>$m(u)||k_(u),r$),i$=e=>{const t=e.dom.create(Ns(e));return t.innerHTML='<br data-mce-bogus="1">',t},V4=(e,t,o)=>{const r=Ll(e.getBody()),c=Me(kb,t===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Ce.fromRangeStart(o))){const b=q.fromDom(i$(e));t===1?xl(q.fromDom(u),b):zr(q.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},OW=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return a$(o,e,r).orThunk(()=>(V4(e,o,r),N.none()))},DW=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return c$(o,e,r).orThunk(()=>(V4(e,o,r),N.none()))},RW=(e,t)=>{const o=t?e.getEnd(!0):e.getStart(!0);return N_(o)?!t:t},l$=(e,t)=>OW(e,RW(e.selection,t)).exists(o=>(Zm(e,o),!0)),u$=(e,t)=>DW(e,t).exists(o=>(Zm(e,o),!0)),d$=(e,t)=>N4(e,t,t?$m:Wf),U4=(e,t)=>pD(e,!t).map(o=>{const r=o.toRange(),c=e.selection.getRng();return t?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Zm(e,o),!0)),m$=(e,t)=>{const o=f=>xn(f,t),r=f=>gc(f.dom),c=q.fromDom(e.container());return mo(c,r,o).filter(f=>!o(f))},f$=(e,t,o)=>(o?BD:w8)(e.getBody(),t).map(c=>c.toRange()),MW=(e,t)=>{const o=Ce.fromRangeStart(e.selection.getRng()),r=Ce.fromRangeEnd(e.selection.getRng()),c=q.fromDom(e.getBody());return Yd(Cs(m$(o,c),m$(r,c),(f,b)=>xn(f,b)?N.some(f):N.none())).fold(De,f=>t&&xc(f.dom,r)||!t&&D4(f.dom,o)?f$(e,t?r:o,t).exists(b=>(Zm(e,b),!0)):!1)},Wm=(e,t)=>MW(e,t),eR=e=>vt(["figcaption"],mn(e)),BW=(e,t,o)=>{const r=Me(xn,t);return mo(q.fromDom(e.container()),c=>o.isBlock(mn(c)),r).filter(eR)},NW=(e,t,o)=>t?xc(e.dom,o):D4(e.dom,o),PW=(e,t)=>{const o=q.fromDom(e.getBody()),r=Ce.fromRangeStart(e.selection.getRng());return BW(r,o,e.schema).exists(()=>{if(NW(o,t,r)){const u=kW(e,o,t?Pn:du);return e.selection.setRng(u),!0}else return!1})},Z4=(e,t)=>e.selection.isCollapsed()?PW(e,t):!1,tR=(e,t,o)=>{const r=e.selection.getRng(),c=Ce.fromRangeStart(r);return e.getBody().firstChild===t&&D4(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},g$=(e,t)=>{const o=e.selection.getRng(),r=Ce.fromRangeStart(o);return e.getBody().lastChild===t&&xc(t,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},h$=(e,t)=>t?N.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>g$(e,o)).getOr(!1):N.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>N.from(e.dom.getParent(o,"details")).map(r=>tR(e,r,o))).getOr(!1),nR=(e,t)=>h$(e,t),p$={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},aS=e=>Rt(e,t=>({...p$,...t})),W4=e=>Rt(e,t=>({...p$,...t})),oR=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,b$=(e,t)=>Vn(aS(e),o=>oR(o,t)?[o]:[]),v$=(e,t)=>Vn(W4(e),o=>oR(o,t)?[o]:[]),Ht=(e,...t)=>()=>e.apply(null,t),Mh=(e,t)=>Qn(b$(e,t),o=>o.action()),j4=(e,t)=>rc(v$(e,t),o=>o.action()),fv=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return O8(e,o,r,aC,cC,hi).exists(c=>(Zm(e,c),!0))},y$=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return D8(e,o,r,aC,cC,hi).exists(c=>(Zm(e,c),!0))},sR=(e,t)=>N4(e,t,t?cC:aC),$W=(e,t)=>C$(e,t,et),C$=(e,t,o)=>Vn(ms(e),r=>$c(r,t)?o(r)?[r]:[]:C$(r,t,o)),S$=(e,t,o=De)=>{if(o(t))return N.none();if(vt(e,mn(t)))return N.some(t);const r=c=>$c(c,"table")||o(c);return Os(t,e.join(","),r)},IW=(e,t)=>S$(["td","th"],e,t),w$=e=>$W(e,"th,td"),LW=(e,t)=>Vr(e,"table",t),x$=ei.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),cS={...x$,none:e=>x$.none(e)},rR=(e,t,o,r,c=et)=>{const u=r===1;if(!u&&o<=0)return cS.first(e[0]);if(u&&o>=e.length-1)return cS.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?cS.middle(t,b):rR(e,t,f,r,c)}},E$=(e,t)=>LW(e,t).bind(o=>{const r=w$(o);return cl(r,u=>xn(e,u)).map(u=>({index:u,all:r}))}),FW=(e,t,o)=>E$(e,o).fold(()=>cS.none(e),c=>rR(c.all,e,c.index,1,t)),HW=(e,t,o)=>E$(e,o).fold(()=>cS.none(),c=>rR(c.all,e,c.index,-1,t));var aR=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],zW=()=>{const e=w=>q.fromDom(w.dom.cloneNode(!1)),t=w=>Cl(w).dom,o=w=>ds(w)?mn(w)==="body"?!0:vt(aR,mn(w)):!1,r=w=>ds(w)?vt(["br","img","hr","input"],mn(w)):!1,c=w=>ds(w)&&Po(w,"contenteditable")==="false",u=(w,k)=>w.dom.compareDocumentPosition(k.dom),f=(w,k)=>{const O=Cn(w);Tr(k,O)},b=w=>{const k=mn(w);return vt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],k)},v=w=>ds(w)?Ni(w,"lang"):N.none();return{up:Xe({selector:Os,closest:Vr,predicate:gu,all:ci}),down:Xe({selector:_r,predicate:t0}),styles:Xe({get:vs,getRaw:qs,set:mc,remove:J1}),attrs:Xe({get:Po,set:rs,remove:Vs,copyTo:f}),insert:Xe({before:zr,after:xl,afterAll:K1,append:Pn,appendAll:li,prepend:du,wrap:Lc}),remove:Xe({unwrap:ui,remove:xo}),create:Xe({nu:q.fromTag,clone:e,text:q.fromText}),query:Xe({comparePosition:u,prevSibling:ii,nextSibling:uu}),property:Xe({children:ms,name:mn,parent:Ic,document:t,isText:qn,isComment:vl,isElement:ds,isSpecial:b,getLanguage:v,getText:aa,setText:n2,isBoundary:o,isEmptyTag:r,isNonEditable:c}),eq:xn,is:W1}};const jm=(e,t)=>({element:e,offset:t}),cR=(e,t)=>{if(e.property().isText(t))return jm(t,e.property().getText(t).length);{const o=e.property().children(t);return o.length>0?cR(e,o[o.length-1]):jm(t,o.length)}},G4=(e,t,o)=>{const r=e.property().children(t);return r.length>0&&o<r.length?G4(e,r[o],0):r.length>0&&e.property().isElement(t)&&r.length===o?cR(e,r[r.length-1]):jm(t,o)},T$=G4,iR=zW(),Bh=(e,t)=>T$(iR,e,t),lR=_s("image"),Gl=e=>{const t=e;return N.from(t[lR])},A1=(e,t)=>{const o=e;o[lR]=t},q4=_s("event"),uR=e=>{const t=e;return N.from(t[q4])},K4=e=>t=>{const o=t;o[q4]=e},k$=(e,t)=>K4(t)(e),_$=K4(0),VW=K4(2),UW=K4(1),ZW=(e=>t=>{const o=t;return N.from(o[q4]).exists(r=>r===e)})(0),A$=()=>Object.freeze({length:0,item:e=>null}),dR=_s("mode"),WW=e=>{const t=e;return N.from(t[dR])},rg=e=>t=>{const o=t;o[dR]=e},iS=(e,t)=>rg(t)(e),mR=rg(0),Y4=rg(2),fR=rg(1),O$=e=>t=>{const o=t;return N.from(o[dR]).exists(r=>r===e)},gv=O$(0),D$=O$(1),R$=(e,t)=>({...t,get length(){return t.length},add:(o,r)=>{if(gv(e))if(Y(o)){if(!es(r))return t.add(o,r)}else return t.add(o);return null},remove:o=>{gv(e)&&t.remove(o)},clear:()=>{gv(e)&&t.clear()}}),X4=["none","copy","link","move"],M$=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],hv=()=>{const e=new window.DataTransfer;let t="move",o="all";const r={get dropEffect(){return t},set dropEffect(c){vt(X4,c)&&(t=c)},get effectAllowed(){return o},set effectAllowed(c){ZW(r)&&vt(M$,c)&&(o=c)},get items(){return R$(r,e.items)},get files(){return D$(r)?A$():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{gv(r)&&(A1(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>D$(r)?"":e.getData(c),setData:(c,u)=>{gv(r)&&e.setData(c,u)},clearData:c=>{gv(r)&&e.clearData(c)}};return mR(r),r},jW=e=>{const t=hv(),o=WW(e);return Y4(e),_$(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,Gl(e).each(r=>t.setDragImage(r.image,r.x,r.y)),le(e.types,r=>{r!=="Files"&&t.setData(r,e.getData(r))}),le(e.files,r=>t.items.add(r)),uR(e).each(r=>{k$(t,r)}),o.each(r=>{iS(e,r),iS(t,r)}),t},B$=e=>{const t=e.getData("text/html");return t===""?N.none():N.some(t)},N$=(e,t)=>e.setData("text/html",t),GW=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),qW=(e,t)=>Vn(t,o=>{const r=GW(Sm(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),P$=(e,t,o)=>cn(e,(r,c)=>r.fold(()=>N.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-t)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-t)+Math.abs(c.y-o));return N.some(b<f?c:u)}),N.none()),$$=(e,t,o,r,c)=>{const u=_r(q.fromDom(o),"td,th,caption").map(b=>b.dom),f=ge(qW(e,u),b=>t(b,c));return P$(f,r,c).map(b=>b.cell)},KW=e=>e.bottom,I$=e=>e.top,lS=(e,t)=>e.y<t,YW=(e,t)=>e.y>t,L$=Me($$,KW,lS),F$=Me($$,I$,YW),H$=(e,t)=>us(t.getClientRects()).bind(o=>L$(e,o.left,o.top)).bind(o=>E1(S8(o),t)),gR=(e,t)=>Fs(t.getClientRects()).bind(o=>F$(e,o.left,o.top)).bind(o=>E1(T1(o),t)),z$=(e,t,o)=>o.breakAt.exists(r=>e(t,r).breakAt.isSome()),XW=e=>e.breakType===Um.Wrap&&e.positions.length===0,V$=e=>e.breakType===Um.Br&&e.positions.length===1,U$=(e,t,o)=>{const r=e(t,o);return XW(r)||!Xo(o.getNode())&&V$(r)?!z$(e,t,r):r.breakAt.isNone()},JW=Me(U$,Br),QW=Me(U$,nS),hR=(e,t,o)=>{const r=Ce.fromRangeStart(t);return l(!e,o).exists(c=>c.isEqual(r))},ej=(e,t,o,r)=>{const c=e.selection.getRng(),u=t?1:-1;return Cb()&&hR(t,c,o)?(tg(u,e,o,!t,!1).each(f=>{Zm(e,f)}),!0):!1},tj=(e,t,o)=>H$(t,o).orThunk(()=>us(o.getClientRects()).bind(r=>MD(oS(e,Ce.before(t)),r.left))).getOr(Ce.before(t)),J4=(e,t,o)=>gR(t,o).orThunk(()=>us(o.getClientRects()).bind(r=>MD(Dh(e,Ce.after(t)),r.left))).getOr(Ce.after(t)),Z$=(e,t)=>{const o=t.getNode(e);return za(o)?N.some(o):N.none()},pR=(e,t,o)=>{t.undoManager.transact(()=>{const r=e?xl:zr,c=kW(t,q.fromDom(o),r);Zm(t,c)})},bR=(e,t,o)=>{const r=Z$(!!t,o),c=t===!1;r.fold(()=>Zm(e,o.toRange()),u=>l(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Zm(e,o.toRange()),f=>pR(t,e,u)))},W$=(e,t,o,r)=>{const c=e.selection.getRng(),u=Ce.fromRangeStart(c),f=e.getBody();if(!t&&JW(r,u)){const b=tj(f,o,u);return bR(e,t,b),!0}else if(t&&QW(r,u)){const b=J4(f,o,u);return bR(e,t,b),!0}else return!1},vR=(e,t,o)=>N.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>N.from(e.dom.getParent(r,"table")).map(c=>o(e,t,c,r))).getOr(!1),j$=(e,t)=>vR(e,t,ej),yR=(e,t)=>vR(e,t,W$),nj=e=>{const t=im.exact(e,0,e,0);return um(t)},oj=e=>pv(e)||Kn(e).some(t=>yl(t)&&pv(t)),uS=(e,t,o)=>o.fold(N.none,N.none,(r,c)=>v3(c).map(u=>nj(u)),r=>e.mode.isReadOnly()||!sj(r)||!oj(r)?N.none():(e.execCommand("mceTableInsertRowAfter"),G$(e,t,r))),sj=e=>mo(e,lu("table")).exists(Ii),G$=(e,t,o)=>uS(e,t,FW(o,pv)),rj=(e,t,o)=>uS(e,t,HW(o,pv)),pv=e=>Ii(e)||xg(e,aj),aj=e=>yl(e)&&Ii(e),q$=(e,t)=>{const o=["table","li","dl"],r=q.fromDom(e.getBody()),c=b=>{const v=mn(b);return xn(b,r)||vt(o,v)},u=e.selection.getRng(),f=q.fromDom(t?u.endContainer:u.startContainer);return IW(f,c).map(b=>(LW(b,c).each(k=>{e.model.table.clearSelectedCells(k.dom)}),e.selection.collapse(!t),(t?G$:rj)(e,c,b).each(k=>{e.selection.setRng(k)}),!0)).getOr(!1)},K$=(e,t,o)=>{const r=Nn.os.isMacOS()||Nn.os.isiOS(),c=Nn.browser.isFirefox();Mh([{keyCode:ct.RIGHT,action:Ht(l$,e,!0)},{keyCode:ct.LEFT,action:Ht(l$,e,!1)},{keyCode:ct.UP,action:Ht(u$,e,!1)},{keyCode:ct.DOWN,action:Ht(u$,e,!0)},...r?[{keyCode:ct.UP,action:Ht(U4,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ct.DOWN,action:Ht(U4,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ct.RIGHT,action:Ht(j$,e,!0)},{keyCode:ct.LEFT,action:Ht(j$,e,!1)},{keyCode:ct.UP,action:Ht(yR,e,!1)},{keyCode:ct.DOWN,action:Ht(yR,e,!0)},{keyCode:ct.UP,action:Ht(yR,e,!1)},{keyCode:ct.UP,action:Ht(nR,e,!1)},{keyCode:ct.DOWN,action:Ht(nR,e,!0)},{keyCode:ct.RIGHT,action:Ht(fv,e,!0)},{keyCode:ct.LEFT,action:Ht(fv,e,!1)},{keyCode:ct.UP,action:Ht(y$,e,!1)},{keyCode:ct.DOWN,action:Ht(y$,e,!0)},{keyCode:ct.RIGHT,action:Ht(WD,e,t,!0)},{keyCode:ct.LEFT,action:Ht(WD,e,t,!1)},{keyCode:ct.RIGHT,ctrlKey:!r,altKey:r,action:Ht($4,e,t)},{keyCode:ct.LEFT,ctrlKey:!r,altKey:r,action:Ht(YZ,e,t)},{keyCode:ct.UP,action:Ht(Z4,e,!1)},{keyCode:ct.DOWN,action:Ht(Z4,e,!0)},...c?[{keyCode:ct.UP,action:Ht(Wm,e,!1)},{keyCode:ct.DOWN,action:Ht(Wm,e,!0)}]:[]],o).each(u=>{o.preventDefault()})},cj=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||K$(e,t,o)})},Ud=(e,t)=>({container:e,offset:t}),Q4=Tn.DOM,eT=e=>t=>e===t?-1:0,ij=e=>t=>e.isBlock(t)||vt(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",CR=(e,t,o)=>{if(ze(e)&&t>=0)return N.some(Ud(e,t));{const r=yu(Q4);return N.from(r.backwards(e,t,eT(e),o)).map(c=>Ud(c.container,c.container.data.length))}},SR=(e,t,o)=>{if(ze(e)&&t>=e.length)return N.some(Ud(e,t));{const r=yu(Q4);return N.from(r.forwards(e,t,eT(e),o)).map(c=>Ud(c.container,0))}},wR=(e,t,o)=>{if(!ze(e))return N.none();const r=e.data;if(t>=0&&t<=r.length)return N.some(Ud(e,t));{const c=yu(Q4);return N.from(c.backwards(e,t,eT(e),o)).bind(u=>{const f=u.container.data;return wR(u.container,t+f.length,o)})}},xR=(e,t,o)=>{if(!ze(e))return N.none();const r=e.data;if(t<=r.length)return N.some(Ud(e,t));{const c=yu(Q4);return N.from(c.forwards(e,t,eT(e),o)).bind(u=>xR(u.container,t-r.length,o))}},ER=(e,t,o,r,c)=>{const u=yu(e,ij(e));return N.from(u.backwards(t,o,r,c))},lj=e=>e.collapsed&&ze(e.startContainer),uj=e=>ja(e.toString().replace(/\u00A0/g," ")),Y$=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,ir=(e,t)=>e.substring(t.length),dj=(e,t,o,r=!1)=>{let c;const u=o.charAt(0);for(c=t-1;c>=0;c--){const f=e.charAt(c);if(!r&&Y$(f))return N.none();if(u===f&&ps(e,o,c,t))break}return N.some(c)},TR=(e,t,o,r=!1)=>{if(!lj(t))return N.none();const c={text:"",offset:0},u=(b,v,w)=>(c.text=w+c.text,c.offset+=v,dj(c.text,c.offset,o,r).getOr(v)),f=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return ER(e,t.startContainer,t.startOffset,u,f).bind(b=>{const v=t.cloneRange();if(v.setStart(b.container,b.offset),v.setEnd(t.endContainer,t.endOffset),v.collapsed)return N.none();const w=uj(v);return w.lastIndexOf(o)!==0?N.none():N.some({text:ir(w,o),range:v,trigger:o})})},mj=e=>e.nodeType===qv,X$=e=>e.nodeType===Zh,tT=e=>{if(mj(e))return Ud(e,e.data.length);{const t=e.childNodes;return t.length>0?tT(t[t.length-1]):Ud(e,t.length)}},kR=(e,t)=>{const o=e.childNodes;return o.length>0&&t<o.length?kR(o[t],0):o.length>0&&X$(e)&&o.length===t?tT(o[o.length-1]):Ud(e,t)},dS=(e,t)=>{const o=e.getParent(t.container,e.isBlock)??e.getRoot();return ER(e,t.container,t.offset,(r,c)=>c===0?-1:c,o).filter(r=>{const c=r.container.data.charAt(r.offset-1);return!Y$(c)}).isSome()},fj=e=>t=>{const o=kR(t.startContainer,t.startOffset);return!dS(e,o)},gj=(e,t,o)=>rc(o.triggers,r=>TR(e,t,r)),hj=(e,t)=>{const o=t(),r=e.selection.getRng();return gj(e.dom,r,o).bind(c=>J$(e,t,c))},J$=(e,t,o,r={})=>{const c=t(),f=e.selection.getRng().startContainer.nodeValue??"",b=ge(c.lookupByTrigger(o.trigger),w=>o.text.length>=w.minChars&&w.matches.getOrThunk(()=>fj(e.dom))(o.range,f,o.text));if(b.length===0)return N.none();const v=Promise.all(Rt(b,w=>w.fetch(o.text,w.maxResults,r).then(O=>({matchText:o.text,items:O,columns:w.columns,onAction:w.onAction,highlightOn:w.highlightOn}))));return N.some({lookupData:v,context:o})},pj=ay("type"),bj=Ww("fetch"),vj=Ww("onAction"),yj=e=>sh("columns",e),Cj=ka([pj,ay("trigger"),ik("minChars",1),yj(1),ik("maxResults",10),U5("matches"),bj,vj,lk("highlightOn",[],ny)]),Sj=e=>oh("Autocompleter",Cj,e),wj=()=>{const e={},t={},o={},r={},c={},u={},f={},b={},v={},w=(I,U)=>(H,j)=>{I[H.toLowerCase()]={...j,type:U}},k=(I,U)=>(H,j)=>{I[H.toLowerCase()]={type:U,...j}},O=(I,U)=>r[I.toLowerCase()]=U,R=(I,U)=>f[I.toLowerCase()]=U;return{addButton:w(e,"button"),addGroupToolbarButton:w(e,"grouptoolbarbutton"),addToggleButton:w(e,"togglebutton"),addMenuButton:w(e,"menubutton"),addSplitButton:w(e,"splitbutton"),addMenuItem:w(t,"menuitem"),addNestedMenuItem:w(t,"nestedmenuitem"),addToggleMenuItem:w(t,"togglemenuitem"),addAutocompleter:w(o,"autocompleter"),addContextMenu:w(c,"contextmenu"),addContextToolbar:w(u,"contexttoolbar"),addContextForm:k(u,"contextform"),addSidebar:w(b,"sidebar"),addView:w(v,"views"),addIcon:O,addContext:R,getAll:()=>({buttons:e,menuItems:t,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:b,views:v,contexts:f})}},xj=e=>{const t=e.ui.registry.getAll().popups,o=cc(t,f=>Sj(f).fold(b=>{throw new Error(xu(b))},Zo)),r=gg(Rc(o,f=>f.trigger)),c=Ia(o);return{dataset:o,triggers:r,lookupByTrigger:f=>ge(c,b=>b.trigger===f)}},Ej=(e,t)=>{const o=ou(t.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),t.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},Tj=e=>{const t=Mc(),o=Bt(!1),r=t.isSet,c=()=>{r()&&(_m(e),o.set(!1),t.clear())},u=O=>{r()||t.set({trigger:O.trigger,matchLength:O.text.length})},f=ga(()=>xj(e)),b=O=>t.get().map(R=>TR(e.dom,e.selection.getRng(),R.trigger,!0).bind(I=>J$(e,f,I,O))).getOrThunk(()=>hj(e,f)),v=O=>{b(O).fold(c,R=>{u(R.context),R.lookupData.then(I=>{t.get().map(U=>{const H=R.context;U.trigger===H.trigger&&(t.set({...U,matchLength:H.text.length}),o.get()?(my(e,{range:H.range}),Bp(e,{lookupData:I})):(o.set(!0),my(e,{range:H.range}),Mp(e,{lookupData:I})))})})})},w=(O,R)=>{const I=O.compareBoundaryPoints(window.Range.START_TO_START,R),U=O.compareBoundaryPoints(window.Range.END_TO_END,R);return I>=0&&U<=0},k=()=>t.get().bind(({trigger:O})=>{const R=e.selection.getRng();return TR(e.dom,R,O,o.get()).filter(({range:I})=>w(R,I)).map(({range:I})=>I)});e.addCommand("mceAutocompleterReload",(O,R)=>{const I=en(R)?R.fetchOptions:{};v(I)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{k().each(O=>{my(e,{range:O})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>k().isSome()),Ej(e,{cancelIfNecessary:c,load:v})},Q$=au().browser.isSafari(),_R=e=>ym(q.fromDom(e)),e7=(e,t)=>{var o;return e.startOffset===0&&e.endOffset===((o=t.textContent)==null?void 0:o.length)},nT=(e,t)=>N.from(e.getParent(t.container(),"details")),t7=(e,t)=>nT(e,t).isSome(),_j=(e,t)=>{const o=N.from(e.getParent(t.startContainer,"details")),r=N.from(e.getParent(t.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>N.from(e.select("summary",u)[0]));return N.some({startSummary:c,startDetails:o,endDetails:r})}else return N.none()},n7=(e,t)=>y(t).exists(o=>o.isEqual(e)),Aj=(e,t)=>E(t).exists(o=>Xo(o.getNode())&&p(t,o).exists(r=>r.isEqual(e))||o.isEqual(e)),o7=(e,t)=>t.startSummary.exists(o=>n7(e,o)),Oj=(e,t)=>t.startSummary.exists(o=>Aj(e,o)),s7=(e,t)=>t.startDetails.exists(o=>p(o,e).forall(r=>t.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),r7=(e,t,o)=>o.startDetails.exists(r=>m(e,t).forall(c=>!r.contains(c.container()))),a7=(e,t)=>{const o=t.getNode();es(o)||e.selection.setCursorLocation(o,t.offset())},c7=(e,t,o)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?y(c):E(c)).each(f=>a7(e,f))}else a7(e,t)},Dj=(e,t)=>{const o=v=>v.contains(e.startContainer),r=v=>v.contains(e.endContainer),c=t.startSummary.exists(o),u=t.startSummary.exists(r),f=t.startDetails.forall(v=>t.endDetails.forall(w=>v!==w));return(c||u)&&!(c&&u)||f},i7=(e,t,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=Ce.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),v=nT(r,f),w=b&&r.isEmpty(b),k=ie(b==null?void 0:b.previousSibling),O=ie(b==null?void 0:b.nextSibling);return w&&(t?O:k)&&mh(!t,u,f).exists(U=>t7(r,U)&&!Kd(v,nT(r,U)))?!0:mh(t,u,f).fold(De,R=>{const I=nT(r,R);if(t7(r,R)&&!Kd(v,I)){if(t||c7(e,R,!1),b&&w){if(t&&k)return!0;if(!t&&O)return!0;c7(e,R,t),e.dom.remove(b)}return!0}else return!1})}else return!1},l7=(e,t,o,r)=>{const u=e.selection.getRng(),f=Ce.fromRangeStart(u),b=e.getBody();return r==="selection"?Dj(u,t):o?Oj(f,t)||r7(b,f,t):o7(f,t)||s7(f,t)},Rj=(e,t,o)=>_j(e.dom,e.selection.getRng()).fold(()=>i7(e,t,o),r=>l7(e,r,t,o)||i7(e,t,o)),Mj=(e,t,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=Ce.fromRangeStart(u);return D3(c)?(o==="selection"&&e7(u,c)||w6(t,f,c)?_R(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:v,anchorOffset:w,focusNode:k,focusOffset:O}=b??{};const R=()=>{ve(v)&&ve(w)&&ve(k)&&ve(O)&&(b==null||b.setBaseAndExtent(v,w,k,O))},I=()=>{v=b==null?void 0:b.anchorNode,w=b==null?void 0:b.anchorOffset,k=b==null?void 0:b.focusNode,O=b==null?void 0:b.focusOffset},U=(j,oe)=>{le(j.childNodes,se=>{Yy(se)&&oe.appendChild(se)})},H=e.dom.create("span",{"data-mce-bogus":"1"});U(c,H),c.appendChild(H),R(),(o==="word"||o==="line")&&(b==null||b.modify("extend",t?"right":"left",o)),!r.isCollapsed()&&e7(r.getRng(),H)?_R(c):(e.execCommand(t?"ForwardDelete":"Delete"),I(),U(H,c),R()),e.dom.remove(H)}),!0):!1},Nh=(e,t,o)=>Rj(e,t,o)||Q$&&Mj(e,t,o)?N.some(Ot):N.none(),u7=e=>(t,o,r={})=>{const c=t.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Ot,inputType:o},f=O2(new InputEvent(e));return t.dispatch(e,{...f,...u,...r})},mS=u7("input"),fS=u7("beforeinput"),d7=au(),m7=d7.os,f7=m7.isMacOS()||m7.isiOS(),g7=d7.browser.isFirefox(),Nj=(e,t,o)=>{const r=o.keyCode===ct.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";j4([{keyCode:ct.BACKSPACE,action:Ht(Tc,e)},{keyCode:ct.BACKSPACE,action:Ht(E4,e,!1)},{keyCode:ct.DELETE,action:Ht(E4,e,!0)},{keyCode:ct.BACKSPACE,action:Ht(x4,e,!1)},{keyCode:ct.DELETE,action:Ht(x4,e,!0)},{keyCode:ct.BACKSPACE,action:Ht(jD,e,t,!1)},{keyCode:ct.DELETE,action:Ht(jD,e,t,!0)},{keyCode:ct.BACKSPACE,action:Ht(W_,e,!1)},{keyCode:ct.DELETE,action:Ht(W_,e,!0)},{keyCode:ct.BACKSPACE,action:Ht(Nh,e,!1,u)},{keyCode:ct.DELETE,action:Ht(Nh,e,!0,u)},...f7?[{keyCode:ct.BACKSPACE,altKey:!0,action:Ht(Nh,e,!1,f(!0))},{keyCode:ct.DELETE,altKey:!0,action:Ht(Nh,e,!0,f(!0))},{keyCode:ct.BACKSPACE,metaKey:!0,action:Ht(Nh,e,!1,f(!1))}]:[{keyCode:ct.BACKSPACE,ctrlKey:!0,action:Ht(Nh,e,!1,f(!0))},{keyCode:ct.DELETE,ctrlKey:!0,action:Ht(Nh,e,!0,f(!0))}],{keyCode:ct.BACKSPACE,action:Ht(k4,e,!1)},{keyCode:ct.DELETE,action:Ht(k4,e,!0)},{keyCode:ct.BACKSPACE,action:Ht(I4,e,!1)},{keyCode:ct.DELETE,action:Ht(I4,e,!0)},{keyCode:ct.BACKSPACE,action:Ht(Es,e,!1)},{keyCode:ct.DELETE,action:Ht(Es,e,!0)},{keyCode:ct.BACKSPACE,action:Ht(S1,e,!1)},{keyCode:ct.DELETE,action:Ht(S1,e,!0)},{keyCode:ct.BACKSPACE,action:Ht(KD,e,!1)},{keyCode:ct.DELETE,action:Ht(KD,e,!0)},{keyCode:ct.BACKSPACE,action:Ht(T4,e,!1)},{keyCode:ct.DELETE,action:Ht(T4,e,!0)},{keyCode:ct.BACKSPACE,action:Ht(k1,e,!1)},{keyCode:ct.DELETE,action:Ht(k1,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),fS(e,r).isDefaultPrevented()||(b(),mS(e,r))})},Pj=(e,t,o,r)=>Mh([{keyCode:ct.BACKSPACE,action:Ht(SD,e)},{keyCode:ct.DELETE,action:Ht(SD,e)},...f7?[{keyCode:ct.BACKSPACE,altKey:!0,action:Ht(sS,e)},{keyCode:ct.DELETE,altKey:!0,action:Ht(sS,e)},...o?[{keyCode:g7?224:91,action:Ht(()=>(U8(e,r),sS(e)))}]:[]]:[{keyCode:ct.BACKSPACE,ctrlKey:!0,action:Ht(sS,e)},{keyCode:ct.DELETE,ctrlKey:!0,action:Ht(sS,e)}]],t),$j=(e,t)=>{let o=!1,r=[];e.on("keydown",c=>{o=c.keyCode===ct.BACKSPACE,r=GD(e),c.isDefaultPrevented()||Nj(e,t,c)}),e.on("keyup",c=>{c.isDefaultPrevented()||(Pj(e,c,o,r),r.length=0),o=!1})},Ij=(e,t)=>{const o=q.fromDom(e),r=q.fromDom(t),c=lu("span"),u=Me(xn,o),f=v=>ds(v)&&qs(v,"font-size").isSome(),b=[...f(r)?[r]:[],...ad(r,f,u)];le(b.slice(1),v=>{J1(v,"font-size"),Vs(v,"data-mce-style"),c(v)&&yg(v)&&ui(v)})},Lj=e=>{for(;e;){if(Ye(e)||ze(e)&&e.data&&/[\r\n\s]/.test(e.data))return N.from(q.fromDom(e));e=e.nextSibling}return N.none()},bv=(e,t)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const u=v=>/^(ul|ol|dl)$/.test(mn(v)),f=v=>u(v)?N.from(v):Yh(v,u),b=v=>o.isEmpty(v.dom);Lj(t.firstChild).each(v=>{f(v).fold(()=>{if(b(v)){const w=Bh(v,0).element;ds(w)&&!Ui(w)&&Pn(w,q.fromText(ss))}},w=>{zr(w,q.fromText(ss))})})}const c=o.createRng();if(t.normalize(),t.hasChildNodes()){const u=new fs(t,t);let f=t,b;for(;b=u.current();){if(ze(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else Xo(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(c.setStartBefore(t),c.setEndBefore(t)):(c.setStartAfter(t),c.setEndAfter(t)):(c.setStart(t,0),c.setEnd(t,0));e.selection.setRng(c),Xi(e,c)},gS=(e,t)=>{const o=e.getRoot();let r,c=t;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},AR=e=>N.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),JY=e=>AR(e).fold(Xe(""),t=>t.nodeName.toUpperCase()),Fj=e=>AR(e).filter(t=>xa(q.fromDom(t))).isSome(),vv=e=>{e.innerHTML='<br data-mce-bogus="1">'},h7=(e,t,o)=>{const r=e.dom;N.from(o.style).map(r.parseStyle).each(v=>{const k={...Cg(q.fromDom(t)),...v};r.setStyles(t,k)});const c=N.from(o.class).map(v=>v.split(/\s+/)),u=N.from(t.className).map(v=>ge(v.split(/\s+/),w=>w!==""));Cs(c,u,(v,w)=>{const k=ge(w,R=>!vt(v,R)),O=[...v,...k];r.setAttrib(t,"class",O.join(" "))});const f=["style","class"],b=tu(o,(v,w)=>!vt(f,w));r.setAttribs(t,b)},yv=(e,t)=>{if(Ns(e).toLowerCase()===t.tagName.toLowerCase()){const r=qi(e);h7(e,t,r)}},p7=(e,t,o,r,c=!0,u,f)=>{const b=e.dom,v=e.schema,w=Ns(e),k=o?o.nodeName.toUpperCase():"";let O=t;const R=v.getTextInlineElements();let I;u||k==="TABLE"||k==="HR"?I=b.create(u||w,f||{}):I=o.cloneNode(!1);let U=I;if(!c)b.setAttrib(I,"style",null),b.setAttrib(I,"class",null);else{do if(R[O.nodeName]){if(M(O)||is(O))continue;const H=O.cloneNode(!1);b.setAttrib(H,"id",""),I.hasChildNodes()?(H.appendChild(I.firstChild),I.appendChild(H)):(U=H,I.appendChild(H))}while((O=O.parentNode)&&O!==r);I.nodeName!=="LI"&&Ij(I,U)}return yv(e,I),vv(U),I},b7=(e,t)=>e.dom.getParent(t,np),v7=(e,t,o)=>{let r=t;for(;r&&r!==e&&ie(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return np(c);r=c}return!1},Hj=(e,t,o)=>!t&&o.nodeName.toLowerCase()===Ns(e)&&e.dom.isEmpty(o)&&v7(e.getBody(),o,r=>Kt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),zj=(e,t,o)=>{var u,f;const r=t(Ns(e)),c=b7(e,o);c&&(e.dom.insertAfter(r,c),bv(e,r),(((f=(u=o.parentElement)==null?void 0:u.childNodes)==null?void 0:f.length)??0)>1&&e.dom.remove(o))},Vj=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,y7=e=>{var t;return((t=e.parentNode)==null?void 0:t.firstChild)===e},C7=(e,t)=>{const o=e==null?void 0:e.parentNode;return ve(o)&&o.nodeName===t},oT=e=>ve(e)&&/^(OL|UL|LI)$/.test(e.nodeName),OR=e=>ve(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Uj=e=>oT(e)&&oT(e.parentNode),sT=e=>{const t=e.parentNode;return OR(t)?t:e},hS=(e,t,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ye(r);)r=r[o?"nextSibling":"previousSibling"];return r===t},S7=e=>cn(Rc(Cg(q.fromDom(e)),(t,o)=>`${o}: ${t};`),(t,o)=>t+o,""),Zj=(e,t,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;Uj(o)&&(c="LI");const v=OR(r)?S7(r):void 0;let w=OR(r)&&v?t(c,{style:S7(r)}):t(c);if(hS(o,r,!0)&&hS(o,r,!1))if(C7(o,"LI")){const k=sT(o);u.insertAfter(w,k),y7(o)?u.remove(k):u.remove(o)}else u.replace(w,o);else if(hS(o,r,!0))C7(o,"LI")?(u.insertAfter(w,sT(o)),w.appendChild(u.doc.createTextNode(" ")),w.appendChild(o)):b.insertBefore(w,o),u.remove(r);else if(hS(o,r,!1))u.insertAfter(w,sT(o)),u.remove(r);else{o=sT(o);const k=f.cloneRange();k.setStartAfter(r),k.setEndAfter(o);const O=k.extractContents();if(c==="LI"&&Vj(O,"LI")){const R=ge(Rt(w.children,q.fromDom),to(lu("br")));w=O.firstChild,u.insertAfter(O,o),le(R,I=>du(q.fromDom(w),I)),v&&w.setAttribute("style",v)}else u.insertAfter(O,o),u.insertAfter(w,o);u.remove(r)}bv(e,w)},Wj=e=>{le(t0(q.fromDom(e),qn),t=>{const o=t.dom;o.nodeValue=ja(o.data)})},jj=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},QY=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),DR=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Gj=(e,t)=>e.nodeName===t||e.nextSibling&&e.nextSibling.nodeName===t,RR=(e,t)=>ve(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",qj=(e,t,o)=>{var f;const r=[];if(!o)return;let c=o;for(;c=c.firstChild;){if(e.isBlock(c))return;Ye(c)&&!t[c.nodeName.toLowerCase()]&&r.push(c)}let u=r.length;for(;u--;)c=r[u],(!c.hasChildNodes()||c.firstChild===c.lastChild&&((f=c.firstChild)==null?void 0:f.nodeValue)===""||QY(e,c))&&e.remove(c)},MR=(e,t,o)=>ze(t)?e?o===1&&t.data.charAt(o-1)===Js?0:o:o===t.data.length-1&&t.data.charAt(o)===Js?t.data.length:o:o,w7=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,MR(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,MR(!1,e.endContainer,e.endOffset)),t},Kj=e=>{let t=e;do ze(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},BR=(e,t,o,r,c)=>{var v;const u=e.dom,f=gS(u,r)??u.getRoot();let b=u.getParent(r,u.isBlock);if(!b||!RR(u,b)){if(b=b||f,!b.hasChildNodes()){const R=u.create(t);return yv(e,R),b.appendChild(R),o.setStart(R,0),o.setEnd(R,0),R}let w=r;for(;w&&w.parentNode!==b;)w=w.parentNode;let k;for(;w&&!u.isBlock(w);)k=w,w=w.previousSibling;const O=(v=k==null?void 0:k.parentElement)==null?void 0:v.nodeName;if(k&&O&&e.schema.isValidChild(O,t.toLowerCase())){const R=k.parentNode,I=u.create(t);for(yv(e,I),R.insertBefore(I,k),w=k;w&&!u.isBlock(w);){const U=w.nextSibling;I.appendChild(w),w=U}o.setStart(r,c),o.setEnd(r,c)}}return r},Gm=(e,t)=>{t.normalize();const o=t.lastChild;(!o||Ye(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(t,"br")},x7=(e,t)=>{const o=ab(e);return gn(t)?!1:Y(o)?vt(He.explode(o),t.nodeName.toLowerCase()):o},pS={insert:(e,t)=>{let o,r,c,u,f=!1;const b=e.dom,v=e.schema,w=v.getNonEmptyElements(),k=e.selection.getRng(),O=Ns(e),R=q.fromDom(k.startContainer),I=Mi(R,k.startOffset),U=I.exists(Ee=>yl(Ee)&&!Ii(Ee)),H=k.collapsed&&U,j=(Ee,Qe)=>p7(e,o,Je,Oe,ux(e),Ee,Qe),oe=Ee=>{const Qe=MR(Ee,o,r);if(ze(o)&&(Ee?Qe>0:Qe<o.data.length))return!1;if((o.parentNode===Je||o===Je)&&f&&!Ee||Ee&&Ye(o)&&o===Je.firstChild)return!0;if(DR(o,"TABLE")||DR(o,"HR"))return Gj(o,"BR")?!Ee:f&&!Ee||!f&&Ee;const $t=new fs(o,Je);ze(o)&&(Ee&&Qe===0?$t.prev():!Ee&&Qe===o.data.length&&$t.next());let It;for(;It=$t.current();){if(Ye(It)){if(!It.getAttribute("data-mce-bogus")){const _n=It.nodeName.toLowerCase();if(w[_n]&&_n!=="br")return!1}}else if(ze(It)&&!kg(It.data))return!1;Ee?$t.prev():$t.next()}return!0},se=()=>{let Ee;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&St!=="HGROUP"?Ee=j(O):Ee=j(),x7(e,u)&&RR(b,u)&&b.isEmpty(Je,void 0,{includeZwsp:!0})?Ee=b.split(u,Je):b.insertAfter(Ee,Je),bv(e,Ee),Ee};rE(b,k).each(Ee=>{k.setStart(Ee.startContainer,Ee.startOffset),k.setEnd(Ee.endContainer,Ee.endOffset)}),o=k.startContainer,r=k.startOffset;const ae=!!(t&&t.shiftKey),Se=!!(t&&t.ctrlKey);Ye(o)&&o.hasChildNodes()&&!H&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&ze(o)?r=o.data.length:r=0);const Oe=gS(b,o);if(!Oe||jj(e,o))return;ae||(o=BR(e,O,k,o,r));let Je=b.getParent(o,b.isBlock)||b.getRoot();u=ve(Je==null?void 0:Je.parentNode)?b.getParent(Je.parentNode,b.isBlock):null,c=Je?Je.nodeName.toUpperCase():"";const St=u?u.nodeName.toUpperCase():"";if(St==="LI"&&!Se){const Ee=u;Je=Ee,u=Ee.parentNode,c=St}if(Ye(u)&&Hj(e,ae,Je))return zj(e,j,Je);if(/^(LI|DT|DD)$/.test(c)&&Ye(u)&&b.isEmpty(Je)){Zj(e,j,u,Je,O);return}if(!H&&(Je===e.getBody()||!RR(b,Je)))return;const xe=Je.parentNode;let me;if(H)me=j(O),I.fold(()=>{Pn(R,q.fromDom(me))},Ee=>{zr(Ee,q.fromDom(me))}),e.selection.setCursorLocation(me,0);else if(pd(Je))me=Zi(Je),b.isEmpty(Je)&&vv(Je),yv(e,me),bv(e,me);else if(oe(!1))me=se();else if(oe(!0)&&xe){const Ee=Ce.fromRangeStart(k),Qe=k_(Ee),$t=q.fromDom(Je),_n=pE($t,Ee,e.schema)?n6($t,Ee,e.schema).bind(Ao=>N.from(Ao.getNode())):N.none();me=xe.insertBefore(j(),Je);const so=DR(Je,"HR")||Qe?me:_n.getOr(Je);bv(e,so)}else{const Ee=w7(k).cloneRange();Ee.setEndAfter(Je);const Qe=Ee.extractContents();Wj(Qe),Kj(Qe),me=Qe.firstChild,Je===me?ve(xe)&&b.insertAfter(Qe,xe):b.insertAfter(Qe,Je),qj(b,w,me),Gm(b,Je),b.isEmpty(Je)&&vv(Je),me.normalize(),b.isEmpty(me)?(b.remove(me),se()):(yv(e,me),bv(e,me))}b.setAttrib(me,"id",""),e.dispatch("NewBlock",{newBlock:me})},fakeEventName:"insertParagraph"},NR=(e,t,o)=>{const r=new fs(t,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||ze(c)&&c.length>0)return!0;return!1},PR=(e,t,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),Xi(e,r)},E7=(e,t)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;rE(r,c).each(I=>{c.setStart(I.startContainer,I.startOffset),c.setEnd(I.endContainer,I.endOffset)});let b=c.startOffset,v=c.startContainer;if(Ye(v)&&v.hasChildNodes()){const I=b>v.childNodes.length-1;v=v.childNodes[Math.min(b,v.childNodes.length-1)]||v,I&&ze(v)?b=v.data.length:b=0}let w=r.getParent(v,r.isBlock);const k=w&&w.parentNode?r.getParent(w.parentNode,r.isBlock):null,O=k?k.nodeName.toUpperCase():"",R=!!(t&&t.ctrlKey);O==="LI"&&!R&&(w=k),ze(v)&&b>=v.data.length&&(NR(e.schema,v,w||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),Kg(r,c,u),PR(e,u,f),e.undoManager.add()},Xj=(e,t)=>{const o=q.fromTag("br");zr(q.fromDom(t),o),e.undoManager.add()},Jj=(e,t)=>{eG(e.getBody(),t)||xl(q.fromDom(t),q.fromTag("br"));const o=q.fromTag("br");xl(q.fromDom(t),o),PR(e,o.dom,!1),e.undoManager.add()},Qj=e=>Xo(e.getNode()),eG=(e,t)=>Qj(Ce.after(t))?!0:m(e,Ce.after(t)).map(o=>Xo(o.getNode())).getOr(!1),T7=e=>e&&e.nodeName==="A"&&"href"in e,k7=e=>e.fold(De,T7,T7,De),tG=e=>{const t=Me(e1,e),o=Ce.fromRangeStart(e.selection.getRng());return Vd(t,e.getBody(),o).filter(k7)},nG=(e,t)=>{t.fold(Ot,Me(Xj,e),Me(Jj,e),Ot)},A7={insert:(e,t)=>{const o=tG(e);o.isSome()?o.each(Me(nG,e)):E7(e,t)},fakeEventName:"insertLineBreak"},O7=(e,t)=>AR(e).filter(o=>t.length>0&&$c(q.fromDom(o),t)).isSome(),oG=e=>O7(e,ix(e)),sG=e=>O7(e,lx(e)),ol=ei.generate([{br:[]},{block:[]},{none:[]}]),rG=(e,t)=>sG(e),D7=e=>(t,o)=>Fj(t)===e,R7=(e,t)=>(o,r)=>JY(o)===e.toUpperCase()===t,rT=e=>{const t=gS(e.dom,e.selection.getStart());return gn(t)},bS=e=>R7("pre",e),aG=()=>R7("summary",!0),Cv=e=>(t,o)=>sb(t)===e,$R=(e,t)=>oG(e),aT=(e,t)=>t,cG=e=>{const t=Ns(e),o=gS(e.dom,e.selection.getStart());return ve(o)&&e.schema.isValidChild(o.nodeName,t)},M7=e=>{const t=e.selection.getRng(),o=q.fromDom(t.startContainer),c=Mi(o,t.startOffset).map(u=>yl(u)&&!Ii(u));return t.collapsed&&c.getOr(!0)},ql=(e,t)=>(o,r)=>cn(e,(u,f)=>u&&f(o,r),!0)?N.some(t):N.none(),iG=(e,t)=>m8([ql([rG],ol.none()),ql([bS(!0),rT],ol.none()),ql([aG()],ol.br()),ql([bS(!0),Cv(!1),aT],ol.br()),ql([bS(!0),Cv(!1)],ol.block()),ql([bS(!0),Cv(!0),aT],ol.block()),ql([bS(!0),Cv(!0)],ol.br()),ql([D7(!0),aT],ol.br()),ql([D7(!0)],ol.block()),ql([$R],ol.br()),ql([aT],ol.br()),ql([cG],ol.block()),ql([M7],ol.block())],[e,!!(t&&t.shiftKey)]).getOr(ol.none()),cT=(e,t,o)=>{t.mode.isReadOnly()||(t.selection.isCollapsed()||C6(t),!(ve(o)&&fS(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,o),ve(o)&&mS(t,e.fakeEventName)))},B7=(e,t)=>{if(e.mode.isReadOnly())return;const o=()=>cT(A7,e,t),r=()=>cT(pS,e,t),c=iG(e,t);switch(rb(e)){case"linebreak":c.fold(o,o,Ot);break;case"block":c.fold(r,r,Ot);break;case"invert":c.fold(r,o,Ot);break;default:c.fold(o,r,Ot);break}},N7=au(),lG=N7.os.isiOS()&&N7.browser.isSafari(),IR=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),LN(e.undoManager),e.undoManager.transact(()=>{B7(e,t)}))},iT=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(ze(t)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=t.data.charAt(e.startOffset-1);return o.test(r)}else return!1},P7=e=>{let t=N.none();const o=c=>{t=N.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),t.fold(Ot,f=>c.selection.moveToBookmark(f)),IR(c,u),t=N.none()};e.on("keydown",c=>{c.keyCode===ct.ENTER&&(lG&&iT(e.selection.getRng())?o(e):IR(e,c))}),e.on("keyup",c=>{c.keyCode===ct.ENTER&&t.each(()=>r(e,c))})},$7=(e,t,o)=>{const r=Nn.os.isMacOS()||Nn.os.isiOS();Mh([{keyCode:ct.END,action:Ht(d$,e,!0)},{keyCode:ct.HOME,action:Ht(d$,e,!1)},...r?[]:[{keyCode:ct.HOME,action:Ht(U4,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ct.END,action:Ht(U4,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ct.END,action:Ht(sR,e,!0)},{keyCode:ct.HOME,action:Ht(sR,e,!1)},{keyCode:ct.END,action:Ht(Rh,e,!0,t)},{keyCode:ct.HOME,action:Ht(Rh,e,!1,t)}],o).each(c=>{o.preventDefault()})},uG=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||$7(e,t,o)})},dG=e=>{e.on("input",t=>{t.isComposing||d6(e)})},lT=au(),mG=(e,t,o)=>{Mh([{keyCode:ct.PAGE_UP,action:Ht(Rh,e,!1,t)},{keyCode:ct.PAGE_DOWN,action:Ht(Rh,e,!0,t)}],o)},LR=e=>e.stopImmediatePropagation(),I7=e=>e.keyCode===ct.PAGE_UP||e.keyCode===ct.PAGE_DOWN,FR=(e,t,o)=>{o&&!e.get()?t.on("NodeChange",LR,!0):!o&&e.get()&&t.off("NodeChange",LR),e.set(o)},fG=(e,t)=>{if(lT.os.isMacOS())return;const o=Bt(!1);e.on("keydown",r=>{I7(r)&&FR(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||mG(e,t,r),I7(r)&&o.get()&&(FR(o,e,!1),e.nodeChanged())})},L7=(e,t)=>e===t||e.contains(t),gG=(e,t)=>!L7(e.getBody(),t.startContainer)||!L7(e.getBody(),t.endContainer)?!0:HF(e.dom,t),hG=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||zn(t.getTargetRanges(),o=>!gG(e,o)))&&t.preventDefault()})},F7=(e,t)=>{const o=t.container(),r=t.offset();return ze(o)?(o.insertData(r,e),N.some(Ce(o,r+e.length))):Kp(t).map(c=>{const u=q.fromText(e);return t.isAtEnd()?xl(c,u):zr(c,u),Ce(u.dom,e.length)})},O1=Me(F7,ss),H7=Me(F7," "),pG=(e,t,o)=>dH(e,t,o)?O1(t):H7(t),z7=e=>t=>t.fold(o=>p(e.dom,Ce.before(o)),o=>y(o),o=>E(o),o=>m(e.dom,Ce.after(o))),bG=(e,t,o)=>r=>dH(e,r,o)?O1(t):H7(t),V7=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},vG=(e,t)=>e.isEditable(e.getParent(t,"summary")),U7=e=>{const t=Ce.fromRangeStart(e.selection.getRng()),o=q.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Me(e1,e),c=Ce.fromRangeStart(e.selection.getRng());return Vd(r,e.getBody(),c).bind(z7(o)).map(u=>()=>bG(o,t,e.schema)(u).each(V7(e)))}else return N.none()},yG=e=>{const t=()=>{const o=q.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ce.fromRangeStart(e.selection.getRng());pG(o,r,e.schema).each(V7(e))};return lc(Nn.browser.isFirefox()&&e.selection.isEditable()&&vG(e.dom,e.selection.getRng().startContainer),t)},CG=(e,t)=>{j4([{keyCode:ct.SPACEBAR,action:Ht(U7,e)},{keyCode:ct.SPACEBAR,action:Ht(yG,e)}],t).each(o=>{t.preventDefault(),fS(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),mS(e,"insertText",{data:" "}))})},tX=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||CG(e,t)})},uT=e=>_x(e)?[{keyCode:ct.TAB,action:Ht(q$,e,!0)},{keyCode:ct.TAB,shiftKey:!0,action:Ht(q$,e,!1)}]:[],SG=(e,t)=>{Mh([...uT(e)],t).each(o=>{t.preventDefault()})},wG=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||SG(e,t)})},xG=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Tj(e),$d(e))return Bt(null);{const t=KZ(e);return hG(e),s$(e),cj(e,t),$j(e,t),P7(e),tX(e),dG(e),wG(e),uG(e,t),fG(e,t),t}},EG=(e,t)=>{const o=GC(e);o===null||KO(e,o)||e.undoManager.transact(()=>{en(t.styles)&&e.dom.setStyles(o,t.styles),en(t.attrs)&&hn(t.attrs,(r,c)=>e.dom.setAttrib(o,c,r))})},HR=(e,t)=>()=>{const o=GC(e);return ve(o)&&o.nodeName===t},TG=e=>{e.addCommand("InsertUnorderedList",(t,o)=>{cD(e,"UL",o)}),e.addCommand("InsertOrderedList",(t,o)=>{cD(e,"OL",o)}),e.addCommand("InsertDefinitionList",(t,o)=>{cD(e,"DL",o)}),e.addCommand("RemoveList",()=>{v4(e)}),e.addCommand("mceListUpdate",(t,o)=>{en(o)&&EG(e,o)}),e.addCommand("mceListBackspaceDelete",(t,o)=>{uD(e,o)}),e.addQueryStateHandler("InsertUnorderedList",HR(e,"UL")),e.addQueryStateHandler("InsertOrderedList",HR(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",HR(e,"DL"))},kG=e=>{e.on("keydown",t=>{t.keyCode===ct.BACKSPACE?uD(e,!1)&&t.preventDefault():t.keyCode===ct.DELETE&&uD(e,!0)&&t.preventDefault()})},Z7=e=>e.type===3,W7=e=>e.length===0,_G=e=>{const t=(c,u)=>{const f=Mr.create("li");le(c,b=>f.append(b)),u?e.insert(f,u,!0):e.append(f)},o=(c,u)=>Z7(u)?[...c,u]:!W7(c)&&!Z7(u)?(t(c,u),[]):c,r=cn(e.children(),o,[]);W7(r)||t(r)},AG=e=>{e.on("PreInit",()=>{const{parser:t}=e;t.addNodeFilter("ul,ol",o=>le(o,_G))})},OG=e=>{e.on("keydown",t=>{t.keyCode!==ct.TAB||ct.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?YC(e):WP(e))&&t.preventDefault()})})},DG=e=>{Ry(e)&&OG(e)},go=e=>{kG(e),TG(e),AG(e),DG(e)};class RG{constructor(t){Ie(this,"editor");Ie(this,"lastPath",[]);this.editor=t;let o;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",c=>{const u=t.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Zf(f,o))&&t.dispatch("SelectionChange"),o=f}),t.on("contextmenu",()=>{eE(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const c=t.selection.getStart(!0);c&&Gy(t)&&!r.isSameElementPath(c)&&t.dom.isChildOf(c,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",c=>{!c.isDefaultPrevented()&&Gy(t)&&(t.selection.getNode().nodeName==="IMG"?Mu.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!Cx(o)&&!Ki(o)){const u=o.getBody();c=r.getStart(!0)||u,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,u))&&(c=u);const f=[];o.dom.getParent(c,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...t,element:c,parents:f})}}isSameElementPath(t){let o;const r=this.editor,c=Mo(r.dom.getParents(t,et,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const zR="x-tinymce/html",dT=Xe(zR),vS="<!-- "+zR+" -->",j7=e=>vS+e,MG=e=>e.replace(vS,""),G7=e=>e.indexOf(vS)!==-1,BG=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),q7=(e,t)=>{let o="<"+e;const r=Rc(t,(c,u)=>u+'="'+bc.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},mT=(e,t,o)=>{const r=e.split(/\n\n/),c=q7(t,o),u="</"+t+">",f=Rt(r,v=>v.split(/\n/).join("<br />")),b=v=>c+v+u;return f.length===1?f[0]:Rt(f,b).join("")},K7="%MCEPASTEBIN%",NG=(e,t)=>{const{dom:o,selection:r}=e,c=e.getBody();t.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},K7);Nn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},VR=(e,t)=>{const o=e.dom;if(UR(e)){let r;const c=t.get();for(;r=UR(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}t.set(null)},UR=e=>e.dom.get("mcepastebin"),PG=e=>ve(e)&&e.id==="mcepastebin",$G=e=>{const t=e.dom,o=(f,b)=>{f.appendChild(b),t.remove(b,!0)},[r,...c]=ge(e.getBody().childNodes,PG);le(c,f=>{o(r,f)});const u=t.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=t.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},Y7=e=>e===K7,X7=e=>{const t=Bt(null);return{create:()=>NG(e,t),remove:()=>VR(e,t),getEl:()=>UR(e),getHtml:()=>$G(e),getLastRng:t.get}},J7=(e,t)=>(He.each(t,o=>{sc(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),IG=e=>{const t=Ar(),o=Zb({},t);let r="";const c=t.getVoidElements(),u=He.makeMap("script noscript style textarea video audio iframe object"," "),f=t.getBlockElements(),b=v=>{const w=v.name,k=v;if(w==="br"){r+=`
`;return}if(w!=="wbr"){if(c[w]&&(r+=" "),u[w]){r+=" ";return}if(v.type===3&&(r+=v.value),!(v.name in t.getVoidElements())){let O=v.firstChild;if(O)do b(O);while(O=O.next)}f[w]&&k.next&&(r+=`
`,w==="p"&&(r+=`
`))}};return e=J7(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},ZR=e=>(e=J7(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":ss],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),LG=e=>{let t=0;return()=>e+t++},FG=e=>{const t=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return He.hasOwn(o,t)?"image/"+o[t]:"image/"+t},HG=(e,t)=>{const o=Zb({sanitize:bb(e),sandbox_iframes:lh(e),sandbox_iframes_exclusions:xd(e),convert_unsafe_embeds:Ed(e)},e.schema);o.addNodeFilter("meta",c=>{He.each(c,u=>{u.remove()})});const r=o.parse(t,{forced_root_block:!1,isRootContent:!0});return fh({validate:!0},e.schema).serialize(r)},fT=(e,t)=>({content:e,cancelled:t}),zG=(e,t,o)=>{const r=e.dom.create("div",{style:"display:none"},t),c=ex(e,r,o);return fT(c.node.innerHTML,c.isDefaultPrevented())},Q7=(e,t,o)=>{const r=Qw(e,t,o),c=HG(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?zG(e,c,o):fT(c,r.isDefaultPrevented())},VG=(e,t,o)=>Q7(e,t,o),yS=(e,t)=>(e.insertContent(t,{merge:xx(e),paste:!0}),!0),WR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),eI=(e,t)=>WR(t)&&zn(Dy(e),o=>Lr(t.toLowerCase(),`.${o.toLowerCase()}`)),UG=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),ZG=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),WG=(e,t,o)=>!e.selection.isCollapsed()&&WR(t)?ZG(e,t,o):!1,jG=(e,t,o)=>eI(e,t)?UG(e,t,o):!1,tI=(e,t)=>{He.each([WG,jG,yS],o=>!o(e,t,yS))},GG=(e,t,o)=>{o||!Ty(e)?yS(e,t):tI(e,t)},nI=LG("mceclip"),gT=e=>{const t=hv();return N$(t,e),Y4(t),t},hT=(e,t,o,r,c)=>{const u=VG(e,t,o);if(!u.cancelled){const f=u.content,b=()=>GG(e,f,r);c?fS(e,"insertFromPaste",{dataTransfer:gT(f)}).isDefaultPrevented()||(b(),mS(e,"insertFromPaste")):b()}},Sv=(e,t,o,r)=>{const c=o||G7(t);hT(e,MG(t),c,!1,r)},jR=(e,t,o)=>{const r=e.dom.encode(t).replace(/\r\n/g,`
`),c=i0(r,$k(e)),u=mT(c,Ns(e),qi(e));hT(e,u,!1,!0,o)},oI=e=>{const t={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{t[r]=e.getData(r)}catch{t[r]=""}}return t},Kl=(e,t)=>t in e&&e[t].length>0,sI=e=>Kl(e,"text/html")||Kl(e,"text/plain"),wv=(e,t)=>{const o=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ve(o)?e.dom.encode(o[1]):void 0},CS=(e,t,o,r)=>{const c=nI(),u=dx(e)&&ve(o.name),f=u?wv(e,o.name):c,b=u?o.name:void 0,v=t.create(c,o,r,f,b);return t.add(v),v},qG=(e,t)=>{pA(t.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=t.file,b=e.editorUpload.blobCache,w=b.getByData(u,r)??CS(e,b,f,u);Sv(e,`<img src="${w.blobUri()}">`,!1,!0)})},KG=e=>e.type==="paste",xv=e=>Promise.all(Rt(e,t=>bA(t).then(o=>({file:t,uri:o})))),YG=e=>{const t=Dy(e);return o=>Zt(o.type,"image/")&&zn(t,r=>FG(r)===o.type)},GR=(e,t)=>{const o=t.items?Vn(Bo(t.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=t.files?Bo(t.files):[];return ge(o.length>0?o:r,YG(e))},rI=(e,t,o)=>{const r=KG(t)?t.clipboardData:t.dataTransfer;if(pb(e)&&r){const c=GR(e,r);if(c.length>0)return t.preventDefault(),xv(c).then(u=>{o&&e.selection.setRng(o),le(u,f=>{qG(e,f)})}),!0}return!1},aI=e=>{var t,o;return Nn.os.isAndroid()&&((o=(t=e.clipboardData)==null?void 0:t.items)==null?void 0:o.length)===0},cI=e=>ct.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,SS=(e,t,o,r,c)=>{let u=ZR(o);const f=Kl(t,dT())||G7(o),b=!f&&BG(u),v=WR(u);(Y7(u)||!u.length||b&&!v)&&(r=!0),(r||v)&&(Kl(t,"text/plain")&&b?u=t["text/plain"]:u=IG(u)),!Y7(u)&&(r?jR(e,u,c):Sv(e,u,f,c))},iI=(e,t,o)=>{let r;const c=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",u=>{cI(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||aI(u))return;const f=o.get()==="text"||r;r=!1;const b=oI(u.clipboardData);!sI(b)&&rI(e,u,c())||(Kl(b,"text/html")?(u.preventDefault(),SS(e,b,b["text/html"],f,!0)):Kl(b,"text/plain")&&Kl(b,"text/uri-list")?(u.preventDefault(),SS(e,b,b["text/plain"],f,!0)):(t.create(),Mu.setEditorTimeout(e,()=>{const v=t.getHtml();t.remove(),SS(e,b,v,f,!1)},0)))})},XG=e=>{const t=c=>Zt(c,"webkit-fake-url"),o=c=>Zt(c,"data:"),r=c=>{var u;return((u=c.data)==null?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!pb(e)&&r(f))for(const b of c){const v=b.attr("src");Y(v)&&!b.attr("data-mce-object")&&v!==Nn.transparentSrc&&(t(v)||!ky(e)&&o(v))&&b.remove()}})},JG=(e,t,o)=>{iI(e,t,o),XG(e)},lI=(e,t)=>{t.get()==="text"?(t.set("html"),tx(e,!1)):(t.set("text"),tx(e,!0)),e.focus()},QG=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{lI(e,t)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&Sv(e,r.html,r.internal,!1),r.text&&jR(e,r.text,!1)})},uI=(e,t,o)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",o),e.setData(dT(),t),!0}catch{return!1}else return!1},pT=(e,t,o,r)=>{uI(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):o(t.html,r)},qR=e=>(t,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},t);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const v=r.createRng();v.selectNodeContents(f),c.setRng(v),Mu.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},dI=e=>({html:j7(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),eq=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),mI=e=>!e.selection.isCollapsed()||eq(e),fI=(e,t)=>o=>{!o.isDefaultPrevented()&&mI(e)&&e.selection.isEditable()&&pT(o,dI(e),qR(e),()=>{if(Nn.browser.isChromium()||Nn.browser.isFirefox()){const r=e.selection.getRng();Mu.setEditorTimeout(e,()=>{e.selection.setRng(r),Vu(e,t)},0)}else Vu(e,t)})},KR=e=>t=>{!t.isDefaultPrevented()&&mI(e)&&pT(t,dI(e),qR(e),Ot)},tq=(e,t)=>{e.on("cut",fI(e,t)),e.on("copy",KR(e))},YR=(e,t)=>Od.getCaretRangeFromPoint(t.clientX??0,t.clientY??0,e.getDoc()),gI=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},hI=(e,t)=>{t&&e.selection.setRng(t),e.focus()},pI=e=>zn(e.files,t=>/^image\//.test(t.type)),nq=(e,t,o,r)=>{const c=e.getParent(o,f=>as(t,f));if(!ie(e.getParent(o,"summary")))return!0;if(c&&Kt(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ie(f.querySelector(c.nodeName.toLowerCase()))}else return!1},oq=e=>{e.on("input",t=>{const o=r=>ie(r.querySelector("summary"));if(t.inputType==="deleteByDrag"){const r=ge(e.dom.select("details"),o);le(r,c=>{Xo(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(vm().dom),c.prepend(u)})}})},bT=(e,t)=>{K5(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),pb(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&pI(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=YR(e,o);if(gn(r))return;const c=oI(o.dataTransfer),u=Kl(c,dT());if((!sI(c)||gI(c))&&rI(e,o,r))return;const f=c[dT()],b=f||c["text/html"]||c["text/plain"],v=nq(e.dom,e.schema,r.startContainer,c),w=t.get();w&&!v||b&&(o.preventDefault(),Mu.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||w&&v)&&e.execCommand("Delete"),hI(e,r);const k=ZR(b);c["text/html"]?Sv(e,k,u,!0):jR(e,k,!0)})}))}),e.on("dragstart",o=>{t.set(!0)}),e.on("dragover dragend",o=>{pb(e)&&!t.get()&&(o.preventDefault(),hI(e,YR(e,o))),o.type==="dragend"&&t.set(!1)}),oq(e)},sq=e=>{const t=c=>u=>{c(e,u)},o=Rk(e);ne(o)&&e.on("PastePreProcess",t(o));const r=Mk(e);ne(r)&&e.on("PastePostProcess",t(r))},rq=(e,t)=>{e.on("PastePreProcess",o=>{o.content=t(e,o.content,o.internal)})},bI=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,XR=e=>He.trim(e).replace(bI,bi).toLowerCase(),aq=(e,t,o)=>{const r=Ey(e);if(o||r==="all"||!Nk(e))return t;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,v,w,k)=>{const O=u.parseStyle(u.decode(w)),R={};for(let U=0;U<c.length;U++){const H=O[c[U]];let j=H,oe=u.getStyle(f,c[U],!0);/color/.test(c[U])&&(j=XR(j),oe=XR(oe)),oe!==j&&(R[c[U]]=H)}const I=u.serializeStyle(R,"span");return I?v+' style="'+I+'"'+k:v+k})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,v)=>f+' style="'+b+'"'+v),t},cq=e=>{(Nn.browser.isChromium()||Nn.browser.isSafari())&&rq(e,aq)},iq=(e,t)=>{const o=Bt(!1),r=Bt(Pk(e)?"text":"html"),c=X7(e);cq(e),QG(e,r),sq(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>r.get()==="text"),e.on("PreInit",()=>{tq(e,t),bT(e,o),JG(e,c,r)})},lq=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},uq=e=>{e.parser.addNodeFilter("details",t=>{const o=ih(e);le(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const o=wd(e);le(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},vI=e=>{lq(e),uq(e)},dq=Xo,yI=ze,mq=e=>$o(e.dom),fq=e=>gc(e.dom),CI=e=>t=>xn(q.fromDom(e),t),gq=(e,t,o)=>mo(q.fromDom(e),r=>fq(r)||o.isBlock(mn(r)),CI(t)).getOr(q.fromDom(t)).dom,SI=(e,t)=>mo(q.fromDom(e),mq,CI(t)),wI=(e,t,o)=>{const r=new fs(e,t),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!dq(f);f=c())Fo(f)&&(u=f);return u},xI=(e,t,o)=>{const c=Ce.fromRangeStart(e).getNode(),u=gq(c,t,o),f=wI(c,u,!1),b=wI(c,u,!0),v=document.createRange();return SI(f,u).fold(()=>{yI(f)?v.setStart(f,0):v.setStartBefore(f)},w=>v.setStartBefore(w.dom)),SI(b,u).fold(()=>{yI(b)?v.setEnd(b,b.data.length):v.setEndAfter(b)},w=>v.setEndAfter(w.dom)),v},EI=e=>{const t=xI(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(hA(t))},hq=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),EI(e))})};var Ev;(function(e){e.Before="before",e.After="after"})(Ev||(Ev={}));const pq=(e,t)=>Math.abs(e.left-t),wS=(e,t)=>Math.abs(e.right-t),bq=(e,t)=>e>=t.top&&e<=t.bottom,vq=(e,t)=>e.top<t.bottom&&e.bottom>t.top,TI=(e,t)=>{const o=Dw(e,t)/Math.min(e.height,t.height);return vq(e,t)&&o>.5},yq=(e,t)=>{const o=ge(e,r=>bq(t,r));return yp(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=_e(e,f=>TI(f,r));return[c,u]})},Cq=(e,t)=>({node:e.node,position:pq(e,t)<wS(e,t)?Ev.Before:Ev.After}),Sq=(e,t,o)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),JR=(e,t,o,r)=>{const c=O=>Fo(O.node)?N.some(O):Ye(O.node)?JR(Bo(O.node.childNodes),t,o,!1):N.none(),u=(O,R,I)=>c(R).filter(U=>Math.abs(I(O,t,o)-I(U,t,o))<2&&ze(U.node)),f=(O,R)=>{const I=ki(O,(U,H)=>R(U,t,o)-R(H,t,o));return rc(I,c).map(U=>r&&!ze(U.node)&&I.length>1?u(U,I[1],R).getOr(U):U)},[b,v]=yq($D(e),o),{pass:w,fail:k}=_e(v,O=>O.top<o);return f(b,Sq).orThunk(()=>f(k,z2)).orThunk(()=>f(w,z2))},wq=(e,t,o,r)=>{const c=(u,f)=>{const b=w=>Ye(w)&&w.classList.contains("mce-drag-container"),v=ge(u.dom.childNodes,to(b));return f.fold(()=>JR(v,o,r,!0),w=>{const k=ge(v,O=>O!==w.dom);return JR(k,o,r,!0)}).orThunk(()=>(xn(u,e)?N.none():Ri(u)).bind(k=>c(k,N.some(u))))};return c(t,N.none())},vT=(e,t,o)=>{const r=q.fromDom(e),c=Cl(r),f=q.fromPoint(c,t,o).filter(b=>ai(r,b)).getOr(r);return wq(r,f,t,o)},QR=(e,t,o)=>vT(e,t,o).filter(r=>Wp(r.node)).map(r=>Cq(r,t)),e5=e=>{const t=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,c=o.defaultView;return{top:t.top+((c==null?void 0:c.scrollY)??0)-r.clientTop,left:t.left+((c==null?void 0:c.scrollX)??0)-r.clientLeft}},xq=e=>e.inline?e5(e.getBody()):{left:0,top:0},Eq=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},Tq=e=>{const t=e.getBody(),o=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},c={left:t.scrollLeft||o.scrollLeft,top:t.scrollTop||o.scrollTop};return e.inline?r:c},nX=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const o=e5(e.getContentAreaContainer()),r=Tq(e);return{left:t.pageX-o.left+r.left,top:t.pageY-o.top+r.top}}return{left:t.pageX,top:t.pageY}},kq=(e,t,o)=>({pageX:o.left-e.left+t.left,pageY:o.top-e.top+t.top}),_q=(e,t)=>kq(xq(e),Eq(e),nX(e,t)),yT=e=>({target:e,srcElement:e}),CT=(e,t,o,r)=>({...t,dataTransfer:r,type:e,...yT(o)}),Aq=(e,t,o)=>{const r=js("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Ot,stopImmediatePropagation:Ot,stopPropagation:Ot,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...yT(t)}},Oq=(e,t)=>{const o=jW(e);return t==="dragstart"?(_$(o),mR(o)):t==="drop"?(VW(o),Y4(o)):(UW(o),fR(o)),o},Dq=(e,t,o,r)=>{const c=Oq(o,e);return es(r)?Aq(e,t,c):CT(e,r,t,c)},xS=32,Rq=100,Tv=8,ES=16,kI=$o,Mq=V2(kI,gc),_I=(e,t,o)=>kI(o)&&o!==t&&e.isEditable(o.parentElement),Bq=(e,t,o)=>gn(t)||t===o||e.dom.isChildOf(t,o)?!1:e.dom.isEditable(t),oX=(e,t,o,r)=>{const c=e.dom,u=t.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},Nq=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},ST=(e,t)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+t,behavior:"smooth"})},AI=ST("left",-xS),t5=ST("left",xS),wT=ST("top",-xS),TS=ST("top",xS),OI=(e,t,o,r,c,u,f,b,v,w,k,O)=>{let R=0,I=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+o>c&&(R=t.pageX+o-c),t.pageY+r>u&&(I=t.pageY+r-u),e.style.width=o-R+"px",e.style.height=r-I+"px";const U=v.clientHeight,H=v.clientWidth,j=f+v.getBoundingClientRect().top,oe=b+v.getBoundingClientRect().left;k.on(se=>{se.intervalId.clear(),se.dragging&&O&&(f+Tv>=U?se.intervalId.set(TS(w)):f-Tv<=0?se.intervalId.set(wT(w)):b+Tv>=H?se.intervalId.set(t5(w)):b-Tv<=0?se.intervalId.set(AI(w)):j+ES>=window.innerHeight?se.intervalId.set(TS(window)):j-ES<=0?se.intervalId.set(wT(window)):oe+ES>=window.innerWidth?se.intervalId.set(t5(window)):oe-ES<=0&&se.intervalId.set(AI(window)))})},DI=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},Pq=(e,t)=>{const o=e.getParent(t.parentNode,e.isBlock);DI(t),o&&o!==e.getRoot()&&e.isEmpty(o)&&ym(q.fromDom(o))},$q=e=>e.button===0,Iq=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),RI=(e,t)=>o=>{if($q(o)){const r=Qn(t.dom.getParents(o.target),Mq).getOr(null);if(ve(r)&&_I(t.dom,t.getBody(),r)){const c=t.dom.getPos(r),u=t.getBody(),f=t.getDoc().documentElement;e.set({element:r,dataTransfer:hv(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(t.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(t.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:oX(t,r,r.offsetWidth,r.offsetHeight),intervalId:mg(Rq)})}}},Lq=(e,t,o)=>{e._selectionOverrides.hideFakeCaret(),QR(e.getBody(),t,o).fold(()=>e.selection.placeCaretAt(t,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===Ev.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(t,o)})},kv=(e,t,o,r,c)=>{t==="dragstart"&&N$(r,e.dom.getOuterHTML(o));const u=Dq(t,o,r,c);return e.dispatch(t,u)},Fq=(e,t)=>{const o=ot((c,u)=>Lq(t,c,u),0);t.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=kv(t,"dragstart",u.element,u.dataTransfer,c);if(ve(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,t.focus()}if(u.dragging){const b=c.currentTarget===t.getDoc().documentElement,v=Iq(u,_q(t,c));Nq(u.ghost,t.getBody()),OI(u.ghost,v,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,t.getContentAreaContainer(),t.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},Hq=e=>{const t=e.getSel();if(ve(t)){const r=t.getRangeAt(0).startContainer;return ze(r)?r.parentNode:r}else return null},n5=(e,t)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(Bq(t,Hq(t.selection),r.element)){const c=t.getDoc().elementFromPoint(o.clientX,o.clientY)??t.getBody();kv(t,"drop",c,r.dataTransfer,o).isDefaultPrevented()||t.undoManager.transact(()=>{Pq(t.dom,r.element),B$(r.dataTransfer).each(f=>t.insertContent(f)),t._selectionOverrides.hideFakeCaret()})}kv(t,"dragend",t.getBody(),r.dataTransfer,o)}}),MI(e)},o5=(e,t,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>kv(t,"dragend",r.element,r.dataTransfer),c=>kv(t,"dragend",r.element,r.dataTransfer,c))}),MI(e)},sX=(e,t)=>o=>o5(e,t,N.some(o)),MI=e=>{e.on(t=>{t.intervalId.clear(),DI(t.ghost)}),e.clear()},BI=e=>{const t=Mc(),o=Tn.DOM,r=document,c=RI(t,e),u=Fq(t,e),f=n5(t,e),b=sX(t,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",v=>{v.keyCode===ct.ESC&&o5(t,e,N.none())})},zq=e=>{const t=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(vt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&i4(e,"Dropped file type is not supported"))}},o=c=>{oE(e,c.target)&&t(c)},r=()=>{const c=Tn.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),v=["drop","dragover"];le(v,w=>{c.bind(f,w,o),u.bind(b,w,t)}),e.on("remove",()=>{le(v,w=>{c.unbind(f,w,o),u.unbind(b,w,t)})})};e.on("init",()=>{Mu.setEditorTimeout(e,r,0)})},s5=e=>{BI(e),_k(e)&&zq(e)},Vq=e=>{const t=ot(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=ng(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},Uq=e=>{e.on("init",()=>{e.on("focusin",t=>{const o=t.target;if(hi(o)){const r=Dd(e.getBody(),o),c=$o(r)?r:o;e.selection.getNode()!==c&&Vm(e,c).each(u=>e.selection.setRng(u))}})})},kS=$o,r5=(e,t)=>Dd(e.getBody(),t),xT=e=>{const t=e.selection,o=e.dom,r=e.getBody(),c=jt(e,r,o.isBlock,()=>$b(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const v=xe=>ve(xe)&&o.hasClass(xe,"mce-offscreen-selection"),w=xe=>xe!==r&&(kS(xe)||hi(xe))&&o.isChildOf(xe,r)&&o.isEditable(xe.parentNode),k=xe=>{xe&&t.setRng(xe)},O=(xe,me,Ee,Qe=!0)=>e.dispatch("ShowCaret",{target:me,direction:xe,before:Ee}).isDefaultPrevented()?null:(Qe&&t.scrollIntoView(me,xe===-1),c.show(Ee,me)),R=xe=>{xe.hasAttribute("data-mce-caret")&&(Zi(xe),t.scrollIntoView(xe))},I=()=>{e.on("click",me=>{o.isEditable(me.target)||(me.preventDefault(),e.focus())}),e.on("blur NewBlock",Oe),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",me=>{const Ee=me.target,Qe=r5(e,Ee);kS(Qe)?(me.preventDefault(),Vm(e,Qe).each(Se)):w(Ee)&&Vm(e,Ee).each(Se)},!0),e.on("mousedown",me=>{const Ee=me.target;if(Ee!==r&&Ee.nodeName!=="HTML"&&!o.isChildOf(Ee,r)||!AV(e,me.clientX,me.clientY))return;Oe(),St();const Qe=r5(e,Ee);kS(Qe)?(me.preventDefault(),Vm(e,Qe).each(Se)):QR(r,me.clientX,me.clientY).each($t=>{me.preventDefault();const It=O(1,$t.node,$t.position===Ev.Before,!1);k(It),Ha(Qe)?Qe.focus():e.getBody().focus()})}),e.on("keypress",me=>{ct.modifierPressed(me)||kS(t.getNode())&&me.preventDefault()}),e.on("GetSelectionRange",me=>{let Ee=me.range;if(b){if(!b.parentNode){b=null;return}Ee=Ee.cloneRange(),Ee.selectNode(b),me.range=Ee}}),e.on("focusin",me=>{if(!hi(me.target)&&e.getBody().contains(me.target)&&me.target!==e.getBody()&&!e.dom.isEditable(me.target.parentNode)){c.isShowing()&&c.hide(),me.target.contains(e.selection.getNode())||(e.selection.select(me.target,!0),e.selection.collapse(!0));const Ee=Se(e.selection.getRng(),!0);Ee&&e.selection.setRng(Ee)}}),e.on("SetSelectionRange",me=>{me.range=j(me.range);const Ee=Se(me.range,me.forward);Ee&&(me.range=Ee)});const xe=me=>Ye(me)&&me.id==="mcepastebin";e.on("AfterSetSelectionRange",me=>{const Ee=me.range,Qe=Ee.startContainer.parentElement;!H(Ee)&&!xe(Qe)&&St(),v(Qe)||Oe()}),s5(e),Vq(e),Uq(e)},U=xe=>Uc(xe)||Cc(xe)||Cm(xe),H=xe=>U(xe.startContainer)||U(xe.endContainer),j=xe=>{const me=e.schema.getVoidElements(),Ee=o.createRng(),Qe=xe.startContainer,$t=xe.startOffset,It=xe.endContainer,_n=xe.endOffset;return Kt(me,Qe.nodeName.toLowerCase())?$t===0?Ee.setStartBefore(Qe):Ee.setStartAfter(Qe):Ee.setStart(Qe,$t),Kt(me,It.nodeName.toLowerCase())?_n===0?Ee.setEndBefore(It):Ee.setEndAfter(It):Ee.setEnd(It,_n),Ee},oe=(xe,me)=>{const Ee=q.fromDom(e.getBody()),Qe=e.getDoc(),$t=hu(Ee,"#"+u).getOrThunk(()=>{const so=q.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Qe);return rs(so,"id",u),Pn(Ee,so),so}),It=o.createRng();Pi($t),li($t,[q.fromText(ss,Qe),q.fromDom(me),q.fromText(ss,Qe)]),It.setStart($t.dom.firstChild,1),It.setEnd($t.dom.lastChild,0),di($t,{top:o.getPos(xe,e.getBody()).y+"px"}),q1($t);const _n=t.getSel();return _n&&(_n.removeAllRanges(),_n.addRange(It)),It},se=xe=>{const me=e.getDoc().createElement("div");me.style.width=xe.style.width,me.style.height=xe.style.height;const Ee=xe.getAttribute("width");Ee&&me.setAttribute("width",Ee);const Qe=xe.getAttribute("height");return Qe&&me.setAttribute("height",Qe),me},ae=xe=>{const me=op(xe)?se(xe):xe.cloneNode(!0),Ee=e.dispatch("ObjectSelected",{target:xe,targetClone:me});if(Ee.isDefaultPrevented())return null;const Qe=oe(xe,Ee.targetClone),$t=q.fromDom(xe);return le(_r(q.fromDom(e.getBody()),`*[${f}]`),It=>{xn($t,It)||Vs(It,f)}),o.getAttrib(xe,f)||xe.setAttribute(f,"1"),b=xe,St(),Qe},Se=(xe,me)=>{if(!xe)return null;if(xe.collapsed){if(!H(xe)){const It=me?1:-1,_n=Mm(It,r,xe),so=_n.getNode(!me);if(ve(so)){if(Wp(so))return O(It,so,me?!_n.isAtEnd():!1,!1);if(Rl(so)&&$o(so.nextSibling)){const Vo=o.createRng();return Vo.setStart(so,0),Vo.setEnd(so,0),Vo}}const Ao=_n.getNode(me);if(ve(Ao)){if(Wp(Ao))return O(It,Ao,me?!1:!_n.isAtEnd(),!1);if(Rl(Ao)&&$o(Ao.previousSibling)){const Vo=o.createRng();return Vo.setStart(Ao,1),Vo.setEnd(Ao,1),Vo}}}return null}let Ee=xe.startContainer,Qe=xe.startOffset;const $t=xe.endOffset;if(ze(Ee)&&Qe===0&&kS(Ee.parentNode)&&(Ee=Ee.parentNode,Qe=o.nodeIndex(Ee),Ee=Ee.parentNode),!Ye(Ee))return null;if($t===Qe+1&&Ee===xe.endContainer){const It=Ee.childNodes[Qe];if(w(It))return ae(It)}return null},Oe=()=>{b&&b.removeAttribute(f),hu(q.fromDom(e.getBody()),"#"+u).each(xo),b=null},Je=()=>{c.destroy(),b=null},St=()=>{c.hide()};return $d(e)||I(),{showCaret:O,showBlockCaretContainer:R,hideFakeCaret:St,destroy:Je}},NI=(e,t)=>{let o=t;for(let r=e.previousSibling;ze(r);r=r.previousSibling)o+=r.data.length;return o},a5=(e,t,o,r,c)=>{if(ze(o)&&(r<0||r>o.data.length))return[];const u=c&&ze(o)?[NI(o,r)]:[r];let f=o;for(;f!==t&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===t?u.reverse():[]},c5=(e,t,o,r,c,u,f=!1)=>{const b=a5(e,t,o,r,f),v=a5(e,t,c,u,f);return{start:b,end:v}},PI=(e,t)=>{const o=t.slice(),r=o.pop();return lr(r)?cn(o,(u,f)=>u.bind(b=>N.from(b.childNodes[f])),N.some(e)).bind(u=>ze(u)&&(r<0||r>u.data.length)?N.none():N.some({node:u,offset:r})):N.none()},i5=(e,t)=>PI(e,t.start).bind(({node:o,offset:r})=>PI(e,t.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),Zq=(e,t,o,r=!1)=>c5(e,t,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),_v=(e,t,o)=>{if(t&&e.isEmpty(t)&&!o(t)){const r=t.parentNode;e.remove(t,ze(t.firstChild)&&kg(t.firstChild.data)),_v(e,r,o)}},ET=(e,t,o,r=!0)=>{const c=t.startContainer.parentNode,u=t.endContainer.parentNode;t.deleteContents(),r&&!o(t.startContainer)&&(ze(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),ze(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),_v(e,c,o),c!==u&&_v(e,u,o))},Av=(e,t)=>N.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),l5=(e,t,o)=>{const r=e.dynamicPatternsLookup({text:o,block:t});return{...e,blockPatterns:dk(r).concat(e.blockPatterns),inlinePatterns:Dp(r).concat(e.inlinePatterns)}},u5=(e,t,o,r)=>{const c=e.createRng();return c.setStart(t,0),c.setEnd(o,r),c.toString()},$I=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),TT=(e,t)=>{const o=e.createRng();return o.setStartAfter(t.start),o.setEndBefore(t.end),o},II=(e,t,o)=>{const r=i5(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),v=b.parentNode,w=f.parentNode;return{prefix:t,end:w.insertBefore($I(e,t+"-end"),f),start:v.insertBefore($I(e,t+"-start"),b)}},LI=(e,t,o)=>{_v(e,e.get(t.prefix+"-end"),o),_v(e,e.get(t.prefix+"-start"),o)},_S=e=>e.start.length===0,Wq=e=>(t,o)=>{const c=t.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},FI=(e,t,o,r)=>{const c=t.start;return ER(e,r.container,r.offset,Wq(c),o).bind(f=>{var w;const b=((w=o.textContent)==null?void 0:w.indexOf(c))??-1;if(b!==-1&&f.offset>=b+c.length){const k=e.createRng();return k.setStart(f.container,f.offset-c.length),k.setEnd(f.container,f.offset),N.some(k)}else{const k=f.offset-c.length;return wR(f.container,k,o).map(O=>{const R=e.createRng();return R.setStart(O.container,O.offset),R.setEnd(f.container,f.offset),R}).filter(O=>O.toString()===c).orThunk(()=>FI(e,t,o,Ud(f.container,0)))}})},jq=(e,t,o,r,c,u=!1)=>{if(t.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),N.some(f)}return CR(o,r,c).bind(f=>FI(e,t,c,f).bind(v=>{var w;if(u){if(v.endContainer===f.container&&v.endOffset===f.offset)return N.none();if(f.offset===0&&((w=v.endContainer.textContent)==null?void 0:w.length)===v.endOffset)return N.none()}return N.some(v)}))},HI=(e,t,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,v=o.position.offset;return wR(b,v-o.pattern.end.length,t).bind(w=>{const k=c5(c,u,w.container,w.offset,b,v,r);if(_S(f))return N.some({matches:[{pattern:f,startRng:k,endRng:k}],position:w});{const O=kT(e,o.remainingPatterns,w.container,w.offset,t,r),R=O.getOr({matches:[],position:w}),I=R.position;return jq(c,f,I.container,I.offset,t,O.isNone()).map(H=>{const j=Zq(c,u,H,r);return{matches:R.matches.concat([{pattern:f,startRng:j,endRng:k}]),position:Ud(H.startContainer,H.startOffset)}})}})},kT=(e,t,o,r,c,u)=>{const f=e.dom;return CR(o,r,f.getRoot()).bind(b=>{const v=u5(f,c,o,r);for(let w=0;w<t.length;w++){const k=t[w];if(!Lr(v,k.end))continue;const O=t.slice();O.splice(w,1);const R=HI(e,c,{pattern:k,remainingPatterns:O,position:b},u);if(R.isNone()&&r>0)return kT(e,t,o,r-1,c,u);if(R.isSome())return R}return N.none()})},zI=(e,t,o)=>{e.selection.setRng(o),t.type==="inline-format"?le(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},Gq=(e,t,o,r)=>{const c=TT(e.dom,o);ET(e.dom,c,r),zI(e,t,c)},qq=(e,t,o,r,c)=>{const u=e.dom,f=TT(u,r),b=TT(u,o);ET(u,b,c),ET(u,f,c);const v={prefix:o.prefix,start:o.end,end:r.start},w=TT(u,v);zI(e,t,w)},Kq=(e,t)=>{const o=_s("mce_textpattern"),r=yn(t,(c,u)=>{const f=II(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return yn(r,(c,u)=>{const f=r.length-c.length-1,b=_S(u.pattern)?u.endMarker:II(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},Yq=e=>ki(e,(t,o)=>o.end.length-t.end.length),Xq=(e,t)=>{const o=$a(e,r=>zn(t,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===t.length?o?e:t:e.length>t.length?e:t},VI=(e,t,o,r,c,u)=>{const f=kT(e,c.inlinePatterns,o,r,t,u).fold(()=>[],v=>v.matches),b=kT(e,Yq(c.inlinePatterns),o,r,t,u).fold(()=>[],v=>v.matches);return Xq(f,b)},d5=(e,t)=>{if(t.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=Kq(o,t);le(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=v=>v===f;_S(u.pattern)?Gq(e,u.pattern,u.endMarker,b):qq(e,u.pattern,u.startMarker,u.endMarker,b),LI(o,u.endMarker,b),LI(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},UI=(e,t,o)=>SR(t,0,t).map(r=>{const c=r.container;return xR(c,o.start.length,t).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),ET(e,f,b=>b===t)}),c}),_T=e=>(t,o)=>{const r=t.dom,c=o.pattern,u=i5(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,v)=>{const w=v.get(b);return dn(w)&&us(w).exists(k=>Kt(k,"block"))};return Av(t,u).each(b=>{c.type==="block-format"?f(c.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,b,c),t.formatter.apply(c.format)}):c.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,b,c),t.execCommand(c.cmd,!1,c.value)})}),!0},Jq=e=>ki(e,(t,o)=>o.start.length-t.start.length),ZI=e=>(t,o)=>{const r=Jq(t),c=o.replace(ss," ");return Qn(r,u=>e(u,o,c))},WI=(e,t)=>(o,r,c,u,f=r.textContent??"")=>{const b=o.dom,v=Ns(o);return b.is(r,v)?e(c.blockPatterns,f).map(w=>t&&He.trim(f).length===w.start.length?[]:[{pattern:w,range:c5(b,b.getRoot(),r,0,r,0,u)}]).getOr([]):[]},Qq=e=>/^\s[^\s]/.test(e),eK=_T((e,t,o)=>{UI(e,t,o).each(r=>{const c=q.fromDom(r),u=aa(c);Qq(u)&&n2(c,u.slice(1))})}),AT=ZI((e,t,o)=>t.indexOf(e.start)===0||o.indexOf(e.start)===0),tK=WI(AT,!0),nK=(e,t)=>{const o=e.selection.getRng();return Av(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=l5(t,r,r.textContent??""),f=VI(e,r,o.startContainer,c,u,!0),b=tK(e,r,u,!0);return{inlineMatches:f,blockMatches:b}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},oK=(e,t)=>{if(t.length===0)return;const o=e.selection.getBookmark();le(t,r=>eK(e,r)),e.selection.moveToBookmark(o)},sK=_T(UI),rK=ZI((e,t,o)=>t===e.start||o===e.start),aK=WI(rK,!1),cK=(e,t)=>{const o=e.selection.getRng();return Av(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=u5(e.dom,r,o.startContainer,c),f=l5(t,r,u);return aK(e,r,f,!1,u)}).filter(r=>r.length>0)},iK=(e,t)=>{le(t,o=>sK(e,o))},lK=(e,t)=>nK(e,t).fold(De,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{B0(e),d5(e,o),oK(e,r);const c=e.selection.getRng(),u=CR(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Ju&&(b.deleteData(f.offset-1,1),_v(e.dom,b.parentNode,v=>v===e.dom.getRoot()))})}),!0)),jI=(e,t)=>{const o=e.selection.getRng();Av(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=u5(e.dom,r,o.startContainer,c),f=l5(t,r,u),b=VI(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{d5(e,b)})})},uK=(e,t)=>cK(e,t).fold(De,o=>(e.undoManager.transact(()=>{iK(e,o)}),!0)),m5=(e,t,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1},dK=(e,t)=>m5(e,t,(o,r)=>o===r.keyCode&&!ct.modifierPressed(r)),mK=(e,t)=>m5(e,t,(o,r)=>o.charCodeAt(0)===r.charCode),GI=e=>{const t=[",",".",";",":","!","?"],o=[32],r=()=>mk(Ex(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),wt(e)),c=()=>ch(e);e.on("keydown",f=>{if(f.keyCode===13&&!ct.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=Rp(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&lK(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=Rp(r(),"space");(b.blockPatterns.length>0||c())&&uK(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=Rp(r(),"space");(f.inlinePatterns.length>0||c())&&jI(e,f)}};e.on("keyup",f=>{dK(o,f)&&u()}),e.on("keypress",f=>{mK(t,f)&&Mu.setEditorTimeout(e,u)})},AS=e=>{GI(e)},fK=e=>{const t=He.each,o=ct.BACKSPACE,r=ct.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Nn.browser,v=b.isFirefox(),w=b.isChromium()||b.isSafari(),k=Nn.deviceType.isiPhone()||Nn.deviceType.isiPad(),O=Nn.os.isMacOS()||Nn.os.isiOS(),R=(ke,Ge)=>{try{e.getDoc().execCommand(ke,!1,String(Ge))}catch{}},I=ke=>ke.isDefaultPrevented(),U=()=>{const ke=ut=>{const wn=c.create("body"),Qt=ut.cloneContents();return wn.appendChild(Qt),u.serializer.serialize(wn,{format:"html"})},Ge=ut=>{const wn=ke(ut),Qt=c.createRng();Qt.selectNode(e.getBody());const uo=ke(Qt);return wn===uo};e.on("keydown",ut=>{const wn=ut.keyCode;if(!I(ut)&&(wn===r||wn===o)&&e.selection.isEditable()){const Qt=e.selection.isCollapsed(),uo=e.getBody();if(Qt&&!Tt(e.schema,uo)||!Qt&&!Ge(e.selection.getRng()))return;ut.preventDefault(),e.setContent(""),uo.firstChild&&c.isBlock(uo.firstChild)?e.selection.setCursorLocation(uo.firstChild,0):e.selection.setCursorLocation(uo,0),e.nodeChanged()}})},H=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},j=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",ke=>{var ut;let Ge;if(ke.target===e.getDoc().documentElement)if(Ge=u.getRng(),((ut=e.getDoc().getSelection())==null?void 0:ut.anchorNode)!==null&&e.getBody().focus(),ke.type==="mousedown"){if(Uc(Ge.startContainer))return;u.placeCaretAt(ke.clientX,ke.clientY)}else u.setRng(Ge)})},oe=()=>{e.on("keydown",ke=>{if(!I(ke)&&ke.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Ge=u.getNode(),ut=Ge.previousSibling;if(Ge.nodeName==="HR"){c.remove(Ge),ke.preventDefault();return}ut&&ut.nodeName&&ut.nodeName.toLowerCase()==="hr"&&(c.remove(ut),ke.preventDefault())}}})},se=()=>{Range.prototype.getClientRects||e.on("mousedown",ke=>{if(!I(ke)&&ke.target.nodeName==="HTML"){const Ge=e.getBody();Ge.blur(),Mu.setEditorTimeout(e,()=>{Ge.focus()})}})},ae=()=>{const ke=gb(e);e.on("click",Ge=>{const ut=Ge.target;/^(IMG|HR)$/.test(ut.nodeName)&&c.isEditable(ut)&&(Ge.preventDefault(),e.selection.select(ut),e.nodeChanged()),ut.nodeName==="A"&&c.hasClass(ut,ke)&&ut.childNodes.length===0&&c.isEditable(ut.parentNode)&&(Ge.preventDefault(),u.select(ut))})},Se=()=>{const ke=Ge=>Ge.nodeName==="IMG"&&e.dom.isEditable(Ge);e.on("mousedown",Ge=>{Cs(N.from(Ge.clientX),N.from(Ge.clientY),(ut,wn)=>{var Jl;const Qt=e.getDoc().caretPositionFromPoint(ut,wn),uo=((Jl=Qt==null?void 0:Qt.offsetNode)==null?void 0:Jl.childNodes[Qt.offset-(Qt.offset>0?1:0)])||(Qt==null?void 0:Qt.offsetNode);if(ve(uo)&&ke(uo)){const kc=uo.getBoundingClientRect();Ge.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(uo),Ge.clientX<kc.left||Ge.clientY<kc.top?e.selection.collapse(!0):(Ge.clientX>kc.right||Ge.clientY>kc.bottom)&&e.selection.collapse(!1)}})})},Oe=()=>{const ke=()=>{const ut=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const wn=u.getStart();wn!==e.getBody()&&(c.setAttrib(wn,"style",null),t(ut,Qt=>{wn.setAttributeNode(Qt.cloneNode(!0))}))}},Ge=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",ut=>{let wn;return!I(ut)&&(ut.keyCode===8||ut.keyCode===46)&&Ge()?(wn=ke(),e.getDoc().execCommand("delete",!1),wn(),ut.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",ut=>{if(!I(ut)&&Ge()){const wn=ke();Mu.setEditorTimeout(e,()=>{wn()})}})},Je=()=>{e.on("keydown",ke=>{if(!I(ke)&&ke.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Ge=u.getNode().previousSibling;if(Ge&&Ge.nodeName&&Ge.nodeName.toLowerCase()==="table")return ke.preventDefault(),!1}return!0})},St=()=>{e.on("keydown",ke=>{if(I(ke)||ke.keyCode!==ct.BACKSPACE)return;let Ge=u.getRng();const ut=Ge.startContainer,wn=Ge.startOffset,Qt=c.getRoot();let uo=ut;if(!(!Ge.collapsed||wn!==0)){for(;uo.parentNode&&uo.parentNode.firstChild===uo&&uo.parentNode!==Qt;)uo=uo.parentNode;uo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,uo),Ge=c.createRng(),Ge.setStart(ut,0),Ge.setEnd(ut,0),u.setRng(Ge))}})},xe=()=>{const ke=lu("figcaption");e.on("keydown",Ge=>{if(Ge.keyCode===ct.LEFT||Ge.keyCode===ct.RIGHT){const ut=q.fromDom(e.selection.getNode());ke(ut)&&e.selection.isCollapsed()&&Ic(ut).bind(wn=>{var Qt;return e.selection.getRng().startOffset===0&&Ge.keyCode===ct.LEFT?ii(wn):e.selection.getRng().endOffset===((Qt=ut.dom.textContent)==null?void 0:Qt.length)&&Ge.keyCode===ct.RIGHT?uu(wn):N.none()}).each(wn=>{e.selection.setCursorLocation(wn.dom,0)})}})},me=()=>{const ke=()=>{R("StyleWithCSS",!1),R("enableInlineTableEditing",!1),bx(e)||R("enableObjectResizing",!1)};Lp(e)||e.on("BeforeExecCommand mousedown",ke)},Ee=()=>{const ke=()=>{t(c.select("a:not([data-mce-block])"),Ge=>{var Qt;let ut=Ge.parentNode;const wn=c.getRoot();if((ut==null?void 0:ut.lastChild)===Ge){for(;ut&&!c.isBlock(ut);){if(((Qt=ut.parentNode)==null?void 0:Qt.lastChild)!==ut||ut===wn)return;ut=ut.parentNode}c.add(ut,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ge=>{(Ge.type==="setcontent"||Ge.command==="mceInsertLink")&&ke()})},Qe=()=>{e.on("init",()=>{R("DefaultParagraphSeparator",Ns(e))})},$t=ke=>{const Ge=ke.getBody(),ut=ke.selection.getRng();return ut.startContainer===ut.endContainer&&ut.startContainer===Ge&&ut.startOffset===0&&ut.endOffset===Ge.childNodes.length},It=()=>{e.on("keyup focusin mouseup",ke=>{!ct.modifierPressed(ke)&&!$t(e)&&u.normalize()},!0)},_n=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},so=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Ao=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",ke=>{let Ge;ke.target.nodeName==="HTML"&&(Ge=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ge),e.selection.normalize(),e.nodeChanged())}))},Vo=()=>{O&&e.on("keydown",ke=>{ct.metaKeyPressed(ke)&&!ke.shiftKey&&(ke.keyCode===37||ke.keyCode===39)&&(ke.preventDefault(),e.selection.getSel().modify("move",ke.keyCode===37?"backward":"forward","lineboundary"))})},Pr=()=>{e.on("click",ke=>{let Ge=ke.target;do if(Ge.tagName==="A"){ke.preventDefault();return}while(Ge=Ge.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ei=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",ke=>{ke.preventDefault()})})},nt=()=>{f.addNodeFilter("br",ke=>{let Ge=ke.length;for(;Ge--;)ke[Ge].attr("class")==="Apple-interchange-newline"&&ke[Ge].remove()})},_t=Ot,jn=()=>{if(!v||e.removed)return!1;const ke=e.selection.getSel();return!ke||!ke.rangeCount||ke.rangeCount===0},Fn=()=>{w&&(j(),ae(),Ei(),H(),k&&(so(),Ao(),Pr())),v&&(se(),me(),_n(),Vo())},Jr=()=>{St(),U(),Nn.windowsPhone||It(),w&&(j(),ae(),Qe(),Ei(),Je(),nt(),k?(so(),Ao(),Pr()):H()),v&&(xe(),Se(),oe(),se(),Oe(),me(),Ee(),_n(),Vo(),Je())};return $d(e)?Fn():Jr(),{refreshContentEditable:_t,isHidden:jn}};class f5 extends Error{constructor(o,r){super(o);Ie(this,"url");this.url=r}}const g5={},gK=(e,t,o)=>new Promise((r,c)=>{const u=q.fromTag("script");Tr(u,{type:"text/javascript",src:e,...o});const f=()=>{xo(u)};Qv(u,"load",()=>{f(),r()}),Qv(u,"error",()=>{f(),c(new Error(`Failed to load script url: ${e}`))}),Pn(LS(t),u)}),qI=async(e,t)=>{const o=Zn.ScriptLoader.getScriptAttributes(e);return await gK(e,t,o).catch(()=>Promise.reject(new f5(`Failed to load component url: ${e}`,e))),e},hK=e=>Rc(e,(t,o)=>vo(g5,t).getOrThunk(()=>{if(gn(window.customElements.get(o))){const r=qI(t,G1());return g5[t]=r,r}else return Promise.resolve(t)}).catch(r=>(delete g5[t],Promise.reject(r)))),KI=(e,t)=>{const o=ac(Ia(e));return Rt(o,r=>qI(r,q.fromDom(t)))},pK=e=>{const t=e.schema.getComponentUrls();return e.inline?hK(t):KI(t,e.getDoc())},YI=async e=>{const t=pK(e),o=ge(await Promise.allSettled(t),r=>r.status==="rejected");o.length>0&&le(o,r=>{if(r.reason instanceof f5){const{url:c}=r.reason;MV(e,c)}})},bK=e=>{YI(e)},h5=Tn.DOM,vK=(e,t)=>{const o=q.fromDom(e.getBody()),r=Xv(wr(o)),c=q.fromTag("style");rs(c,"type","text/css"),Pn(c,q.fromText(t)),Pn(r,c),e.on("remove",()=>{xo(c)})},yK=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,p5=e=>tu(e,t=>es(t)===!1),XI=e=>{const t=e.options.get,o=e.editorUpload.blobCache;return p5({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_html_in_comments:t("allow_html_in_comments"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:yK(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:xd(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},JI=e=>{const t=e.options.get;return p5({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},CK=e=>{const t=e.options.get;return{...XI(e),...JI(e),...p5({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},SK=e=>{const t=Zb(XI(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let v=b.attr(r);if(v&&!b.attr(u)){if(v.indexOf("data:")===0||v.indexOf("blob:")===0)continue;r==="style"?(v=c.serializeStyle(c.parseStyle(v),b.name),v.length||(v=null),b.attr(u,v),b.attr(r,v)):r==="tabindex"?(b.attr(u,v),b.attr(r,null)):b.attr(u,e.convertURL(v,r,b.name))}}}),t.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),_y(e)&&t.addNodeFilter("#cdata",o=>{let r=o.length;for(;r--;){const c=o[r];c.type=8,c.name="#comment",c.value="[CDATA["+e.dom.encode(c.value??"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Mr("br",1))}}),t},QI=e=>{const t=Ok(e);t&&Mu.setEditorTimeout(e,()=>{let o;t===!0?o=e:o=e.editorManager.get(t),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},b5=e=>{const t=e.dom.getRoot();!e.inline&&(!Gy(e)||e.selection.getStart(!0)===t)&&y(t).each(o=>{const r=o.getNode(),c=za(r)?y(r).getOr(o):o;e.selection.setRng(c.toRange())})},eL=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Yw(e),e.focus(!0),b5(e),e.nodeChanged({initial:!0});const t=Ak(e);ne(t)&&t.call(e,e),QI(e),Jf(e)&&bP(e,!0)},OT=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,wK=(e,t,o)=>{const{pass:r,fail:c}=_e(t,b=>tinymce.Resource.has(Th(b))),f=[...r.map(b=>{const v=tinymce.Resource.get(Th(b));return Y(v)?Promise.resolve(OT(e).loadRawCss(b,v)):Promise.resolve()}),OT(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},tL=e=>{const t=OT(e),o=vy(e),r=e.contentCSS,c=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let v="";He.each(e.contentStyles,w=>{v+=w+`\r
`}),e.dom.addStyle(v)}const f=Promise.all(wK(e,r,o)).then(u).catch(u),b=Nf(e);return b&&vK(e,b),f},xK=e=>{const t=e.getDoc(),o=e.getBody();Kw(e),wx(e)||(t.body.spellcheck=!1,h5.setAttrib(o,"spellcheck","false")),e.quirks=fK(e),$n(e);const r=yk(e);r!==void 0&&(o.dir=r);const c=Dk(e);c&&e.on("BeforeSetContent",u=>{He.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},nL=e=>{$d(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},DT=e=>{e.removed!==!0&&(nL(e),eL(e))},EK=e=>{let t=!1;const o=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(o),t=!0,e.setProgressState(!1)}},oL=e=>{const t=e.getElement();let o=e.getDoc();e.inline&&(h5.addClass(t,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();r.disabled=!0,e.readonly=Lp(e),e._editableRoot=fb(e),!Ki(e)&&e.hasEditableRoot()&&(e.inline&&h5.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=p1(e),e.schema=Ar(JI(e)),e.dom=Tn(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:gx(e),referrerPolicy:ib(e),crossOrigin:Bf(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=SK(e),e.serializer=hO(CK(e),e),e.selection=fO(e.dom,e.getWin(),e.serializer,e),e.annotator=dM(e),e.formatter=xP(e),e.undoManager=nU(e),e._nodeChangeDispatcher=new RG(e),e._selectionOverrides=xT(e),go(e),EW(e),vI(e),AW(e),$d(e)||(hq(e),AS(e));const c=xG(e);JD(e,c),Uu(e),aU(e),iq(e,c);const u=cV(e);xK(e),bK(e),u.fold(()=>{const f=EK(e);tL(e).then(()=>{DT(e),f()})},f=>{e.setProgressState(!0),tL(e).then(()=>{f().then(b=>{e.setProgressState(!1),DT(e),s4(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),DT(e),s4(e)})})})},OS=Tn.DOM,RT=(e,t,o,r)=>{const c=q.fromTag("iframe");return r.each(u=>rs(c,"tabindex",u)),Tr(c,o),Tr(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",...Nn.browser.isFirefox()?{title:t}:{}}),Fc(c,"tox-edit-area__iframe"),c},sL=e=>{let t=fy(e)+"<html><head>";gy(e)!==e.editorManager.documentBaseURL&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=rx(e),r=ax(e),c=e.translate(hb(e)),u=Nn.browser.isFirefox()?"":`aria-label="${c}"`;return cx(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+cx(e)+'" />'),t+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" ${u}><br></body></html>`,t},rL=(e,t)=>{const o=hb(e),r=e.translate(o),c=Ni(q.fromDom(e.getElement()),"tabindex").bind(Hh),u=RT(e.id,r,sx(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=u,e.iframeHTML=sL(e),OS.add(t.iframeContainer,u)},aL=e=>{const t=e.iframeElement,o=()=>{e.contentDocument=t.contentDocument,oL(e)};if(Up(e)||Nn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=Qv(q.fromDom(t),"load",()=>{r.unbind(),o()});t.srcdoc=e.iframeHTML}},TK=(e,t)=>{rL(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=OS.isHidden(t.editorContainer)),e.getElement().style.display="none",OS.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,aL(e)},cL=Tn.DOM,kK=(e,t,o)=>{const r=Eh.get(o),c=Eh.urls[o]||e.editorManager.documentBaseURL.replace(/\/$/,"");if(o=He.trim(o),r&&He.inArray(t,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,ne(u.init)&&(u.init(e,c),t.push(o))}catch(u){BV(e,o,u)}}},_K=e=>{const t=o=>{o.keyCode===ct.ESC&&!o.defaultPrevented&&ox(e).isDefaultPrevented()&&o.preventDefault()};document.addEventListener("keyup",t),e.inline||e.on("keyup",t),e.on("remove",()=>{document.removeEventListener("keyup",t),e.inline||e.off("keyup",t)})},qm=e=>e.replace(/^\-/,""),iL=e=>{const t=[];le(Fp(e),o=>{kK(e,t,qm(o))})},AK=e=>{const t=He.trim($p(e)),o=e.ui.registry.getAll().icons,r={...c4.get("default").icons,...c4.get(t).icons};hn(r,(c,u)=>{Kt(o,u)||e.ui.registry.addIcon(u,c)})},lL=e=>{const t=Tu(e);if(Y(t)){const o=u1.get(t);e.theme=o(e,u1.urls[t])||{},ne(e.theme.init)&&e.theme.init(e,u1.urls[t]||e.editorManager.documentBaseURL.replace(/\/$/,""))}else e.theme={}},OK=e=>{const t=db(e),o=Qb.get(t);e.model=o(e,Qb.urls[t])},DK=e=>{MO.init(e)},v5=e=>{const t=e.theme.renderUI;return t?t():dL(e)},MT=e=>{const t=e.getElement(),r=Tu(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r},uL=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),RK=e=>{const t=cL.create("div");return cL.insertAfter(t,e),uL(t,t)},dL=e=>{const t=e.getElement();return e.inline?uL(null):RK(t)},mL=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,Y(Tu(e))?v5(e):ne(Tu(e))?MT(e):dL(e)},MK=(e,t)=>{const o={show:N.from(t.show).getOr(Ot),hide:N.from(t.hide).getOr(Ot),isEnabled:N.from(t.isEnabled).getOr(et),setEnabled:r=>{r&&(e.mode.get()==="readonly"||Jf(e))||N.from(t.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},fL=async e=>{e.dispatch("ScriptsLoaded"),AK(e),_K(e),lL(e),OK(e),DK(e),iL(e);const t=await mL(e);MK(e,N.from(t.api).getOr({})),e.editorContainer=t.editorContainer,ZV(e),e.inline?oL(e):TK(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},D1=Tn.DOM,gL=e=>e.charAt(0)==="-",BK=(e,t)=>{const o=hx(t),r=px(t);if(!yc.hasCode(o)&&o!=="en"){const c=jo(r)?r:`${t.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{m1(t,c,o)})}},NK=(e,t)=>{const o=Tu(e);if(Y(o)&&!gL(o)&&!Kt(u1.urls,o)){const r=vx(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${t}.js`;u1.load(o,c).catch(()=>{aP(e,c,o)})}},PK=(e,t)=>{const o=db(e);if(o!=="plugin"&&!Kt(Qb.urls,o)){const r=wk(e),c=Y(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${t}.js`;Qb.load(o,c).catch(()=>{RV(e,c,o)})}},hL=(e,t)=>{MO.load(e,t)},BT=e=>N.from(py(e)).filter(jo).map(t=>({url:t,name:N.none()})),NT=(e,t,o)=>N.from(t).filter(r=>jo(r)&&!c4.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:N.some(r)})),$K=(e,t,o)=>{const r=NT(t,"default",o),c=BT(t).orThunk(()=>NT(t,$p(t),""));le(ic([r,c]),u=>{e.add(u.url).catch(()=>{DV(t,u.url,u.name.getOrUndefined())})})},pL=(e,t)=>{const o=(r,c)=>{r!=="licensekeymanager"&&Eh.load(r,c).catch(()=>{rP(e,c,r)})};hn(xy(e),(r,c)=>{o(c,r),e.options.set("plugins",Fp(e).concat(c))}),le(Fp(e),r=>{r=He.trim(r),r&&!Eh.urls[r]&&!gL(r)&&o(r,`plugins/${r}/plugin${t}.js`)})},bL=e=>{const t=Tu(e);return!Y(t)||ve(u1.get(t))},IK=e=>{const t=db(e);return ve(Qb.get(t))},vL=(e,t)=>{const o=Zn.ScriptLoader,r=()=>{!e.removed&&bL(e)&&IK(e)&&fL(e)};NK(e,t),PK(e,t),hL(e,t),BK(o,e),$K(o,e,t),pL(e,t),o.loadQueue().then(r,r)},LK=(e,t)=>C2.forElement(e,{contentCssCors:wy(t),referrerPolicy:ib(t)}),FK=e=>{const t=e.id;yc.setCode(hx(e));const o=()=>{D1.unbind(window,"ready",o),e.render()};if(!Vg.Event.domLoaded){D1.bind(window,"ready",o);return}if(!e.getElement())return;const r=q.fromDom(e.getElement()),c=Cn(r);e.on("remove",()=>{ks(r.dom.attributes,f=>Vs(r,f.name)),Tr(r,c)}),e.ui.styleSheetLoader=LK(r,e),Ip(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||D1.getParent(t,"form");u&&(e.formElement=u,Sy(e)&&!fi(e.getElement())&&(D1.insertAfter(D1.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},D1.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),Tk(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=sP(e),e.notificationManager=HC(e),kx(e)&&e.on("GetContent",f=>{f.save&&(f.content=D1.encode(f.content))}),kk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),mb(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),vL(e,e.suffix)},yL=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],HK=e=>{var t;return Intl.Segmenter?`${(t=new Intl.Segmenter().segment(e)[Symbol.iterator]().next().value)==null?void 0:t.segment}`:e.trim()[0]},CL=(e,t)=>{let o=5381;for(let r=0;r<e.length;r++)o=(o<<5)+o+e.charCodeAt(r);return(o>>>0)%(t+1)},SL=e=>{const t=CL(e??"",yL.length-1);return yL[t]},wL=(e,t,o)=>{const r=o/2;return`<svg height="${o}" width="${o}" xmlns="http://www.w3.org/2000/svg"><circle cx="${r}" cy="${r}" r="${r}" fill="${t}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${r}">`+e+"</text></svg>"},xL=(e,t,o)=>"data:image/svg+xml,"+encodeURIComponent(wL(e,t,o)),PT=(e,t={size:36})=>xL(HK(e.name),SL(e.id),t.size),EL=ka([Cd("id"),km("name"),km("avatar"),kn("custom")]),y5=e=>{const t={};return hn(e,(o,r)=>{o.each(c=>{t[r]=c})}),t},TL=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const t=Rt(e,c=>oh("Invalid user object",EL,c)),{errors:o,values:r}=fa(t);if(o.length>0){const c=Rt(o,(u,f)=>`User at index ${f}: ${xu(u)}`);console.warn(`User validation errors:
`+c.join(`
`))}return Rt(r,c=>{const{id:u,name:f,avatar:b,...v}=c;return{id:u,name:f.getOr(u),avatar:b.getOr(PT({id:u,name:f.getOr(u)})),...y5(v)}})},kL=e=>{const t=new Map,o=new Map,r=w=>N.from(t.get(w)),c=(w,k)=>{t.set(k,w)},u=(w,k)=>N.from(o.get(w)).each(({reject:O})=>{O(k),o.delete(w)}),f=(w,k)=>N.from(o.get(w)).each(({resolve:O})=>{O(k),o.delete(w)}),b=w=>{const k=Dx(e);if(Array.isArray(w)){if(!k)return Ku(w,R=>Promise.resolve({id:R,name:R,avatar:PT({id:R,name:R})}))}else return{};const O=ac(ge(w,R=>!r(R).isSome()));return le(O,R=>{const I=new Promise((U,H)=>{o.set(R,{resolve:U,reject:H})});c(I,R)}),O.length>0&&k(O).then(TL).then(R=>{const I=new Set(Rt(R,U=>U.id));le(R,U=>f(U.id,U)),le(O,U=>{I.has(U)||u(U,new Error(`User ${U} not found`))})}).catch(R=>{le(O,I=>u(I,R instanceof Error?R:new Error("Network error")))}),cn(w,(R,I)=>(R[I]=r(I).getOr(Promise.resolve({id:I,name:I,avatar:PT({id:I,name:I})})),R),{})},v=Ox(e);return Object.freeze({userId:v,fetchUsers:b})},_L=e=>kL(e),zK=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,Jf(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),nx(e,t))},VK=e=>e._editableRoot,AL=(e,t)=>({sections:Xe(e),options:Xe(t)}),C5=au().deviceType,S5=C5.isPhone(),OL=C5.isTablet(),R1=e=>{if(gn(e))return[];{const t=dn(e)?e:e.split(/[ ,]/),o=Rt(t,os);return ge(o,jo)}},w5=(e,t)=>{const o=Qm(t,(r,c)=>vt(e,c));return AL(o.t,o.f)},$T=(e,t,o={})=>{const r=e.sections(),c=vo(r,t).getOr({});return He.extend({},o,c)},IT=(e,t)=>Kt(e.sections(),t),DL=(e,t)=>IT(e,t)?e.sections()[t]:{},RL=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:vo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),x5=(e,t)=>{const o=t.external_plugins??{};return e&&e.external_plugins?He.extend({},e.external_plugins,o):o},ML=(e,t)=>[...R1(e),...R1(t)],BL=(e,t,o,r)=>e&&IT(t,"mobile")?r:o,UK=(e,t,o,r)=>{const c=R1(o.forced_plugins),u=R1(r.plugins),f=DL(t,"mobile"),b=f.plugins?R1(f.plugins):u,v=BL(e,t,u,b),w=ML(c,v);return He.extend(r,{forced_plugins:c,plugins:w})},NL=(e,t)=>e&&IT(t,"mobile"),ZK=(e,t,o,r,c)=>{const u=e?{mobile:RL(c.mobile??{},t)}:{},f=w5(["mobile"],Gd(u,c)),b=He.extend(o,r,f.options(),NL(e,f)?$T(f,"mobile"):{},{external_plugins:x5(r,f.options())});return UK(e,f,r,b)},WK=(e,t)=>{const o=qd(t);return ZK(S5||OL,S5,o,e,o)},jK=(e,t)=>GN(e,t),PL=e=>{const t=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{le("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&t("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},GK=e=>{const t=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return zn(c,u=>ve(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},$L=e=>{PL(e),GK(e)},LT=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const o=e.getDoc();let r;try{o.execCommand(t)}catch{r=!0}if(t==="paste"&&!o.queryCommandEnabled(t)&&(r=!0),r||!o.queryCommandSupported(t)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Nn.os.isMacOS()||Nn.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},qK=(e,t,o,r)=>{const c=q.fromDom(e.getRoot());return lC(c,Ce.fromRangeStart(t),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Oa(c,Ce.fromRangeEnd(t),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},IL=e=>{if(typeof e!="string"){const t=He.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},KK=(e,t)=>{const o=e.selection,r=e.dom;return/^ | $/.test(t)?qK(r,o.getRng(),t,e.schema):t},DS=(e,t)=>{if(e.selection.isEditable()){const{content:o,details:r}=IL(t);kC(e,{...r,content:KK(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=Yf(e,c.content,r);$A(e,u,c),e.addVisual()})}},E5=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,o,r)=>{DS(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,o,r)=>{DS(e,e.dom.encode(r))},insertHTML:(t,o,r)=>{DS(e,r)},mceInsertContent:(t,o,r)=>{DS(e,r)},mceSetContent:(t,o,r)=>{e.setContent(r)},mceReplaceContent:(t,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Bk(e))}})},YK={"font-size":"size","font-family":"face"},XK=lu("font"),LL=(e,t,o)=>{const r=u=>qs(u,e).orThunk(()=>XK(u)?vo(YK,e).bind(f=>Ni(u,f)):N.none()),c=u=>xn(q.fromDom(t),u);return o0(q.fromDom(o),u=>r(u),c)},JK=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),QK=(e,t)=>N.from(Tn.DOM.getStyle(t,e,!0)),FL=e=>(t,o)=>N.from(o).map(q.fromDom).filter(ds).bind(r=>LL(e,t,r.dom).or(QK(e,r.dom))).getOr(""),eY=FL("font-size"),tY=T(JK,FL("font-family")),HL=e=>y(e.getBody()).bind(t=>{const o=t.container();return N.from(ze(o)?o.parentNode:o)}),zL=e=>N.from(e.selection.getRng()).bind(t=>{const o=e.getBody();return t.startContainer===o&&t.startOffset===0?N.none():N.from(e.selection.getStart(!0))}),nY=(e,t)=>zL(e).orThunk(Me(HL,e)).map(q.fromDom).filter(ds).bind(t),T5=(e,t)=>nY(e,Uo(N.some,t)),VL=(e,t)=>{if(/^[0-9.]+$/.test(t)){const o=parseInt(t,10);if(o>=1&&o<=7){const r=Ay(e),c=Oy(e);return c.length>0?c[o-1]||t:r[o-1]||t}else return t}else return t},oY=e=>{const t=e.split(/\s*,\s*/);return Rt(t,o=>o.indexOf(" ")!==-1&&!(Zt(o,'"')||Zt(o,"'"))?`'${o}'`:o).join(",")},Zu=(e,t)=>{const o=VL(e,t);e.formatter.toggle("fontname",{value:oY(o)}),e.nodeChanged()},n=e=>T5(e,t=>tY(e.getBody(),t.dom)).getOr(""),s=(e,t)=>{e.formatter.toggle("fontsize",{value:VL(e,t)}),e.nodeChanged()},a=e=>T5(e,t=>eY(e.getBody(),t.dom)).getOr(""),i=e=>T5(e,t=>{const o=q.fromDom(e.getBody()),r=o0(t,u=>qs(u,"line-height"),Me(xn,o)),c=()=>{const u=parseFloat(vs(t,"line-height")),f=parseFloat(vs(t,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),d=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},g=e=>{const t=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{t(o)},"ForeColor,HiliteColor":(o,r,c)=>{t(o,{value:c})},BackColor:(o,r,c)=>{t("hilitecolor",{value:c})},FontName:(o,r,c)=>{Zu(e,c)},FontSize:(o,r,c)=>{s(e,c)},LineHeight:(o,r,c)=>{d(e,c)},Lang:(o,r,c)=>{t(o,{value:c.code,customValue:c.customCode??null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(o,r,c)=>{t(Y(c)?c:"p")},mceToggleFormat:(o,r,c)=>{t(c)}})},h=e=>{const t=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>t(o),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>n(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>a(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>i(e))},C=e=>{g(e),h(e)},S=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},x=e=>{e.editorCommands.addCommands({Indent:()=>{K8(e)},Outdent:()=>{og(e)}}),e.editorCommands.addCommands({Outdent:()=>j8(e),Indent:()=>SW(e)},"state")},_=e=>{const t=(o,r,c)=>{if(e.mode.isReadOnly())return;const u=Y(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");en(u)&&Y(u.href)&&(u.href=u.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},D=(e,t,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(t)?t:c.getParent(r,u,o);return N.from(f).map(q.fromDom)},P=(e,t)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=t?e.selection.getStart():e.selection.getEnd(),u=t?r.startContainer:r.endContainer,f=gS(o,u);if(!f||!f.isContentEditable)return;const b=t?zr:xl,v=Ns(e);D(e,c,f,u).each(w=>{const k=p7(e,u,w.dom,f,!1,v);b(w,q.fromDom(k)),e.selection.setCursorLocation(k,0),e.dispatch("NewBlock",{newBlock:k}),mS(e,"insertParagraph")})},F=e=>P(e,!0),z=e=>P(e,!1),G=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{F(e)},InsertNewBlockAfter:()=>{z(e)}})},J=e=>{e.editorCommands.addCommands({insertParagraph:()=>{cT(pS,e)},mceInsertNewLine:(t,o,r)=>{B7(e,r)},InsertLineBreak:(t,o,r)=>{cT(A7,e)}})},W=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>Ye(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(t,o,r)=>{e.selection.select(r)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),gc);if(t){const o=e.dom.createRng();o.selectNodeContents(t),e.selection.setRng(o)}}})},ee=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,o,r)=>{CM(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},re=e=>{$L(e),LT(e),S(e),W(e),E5(e),_(e),x(e),G(e),J(e),C(e),ee(e)},fe=["toggleview"],be=e=>vt(fe,e.toLowerCase());class Ke{constructor(t){Ie(this,"editor");Ie(this,"commands",{state:{},exec:{},value:{}});this.editor=t}execCommand(t,o=!1,r,c){const u=this.editor,f=t.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():fF(u)),u.dispatch("BeforeExecCommand",{command:t,ui:o,value:r}).isDefaultPrevented()))return!1;const w=this.commands.exec[f];return ne(w)?(w(f,o,r,c),u.dispatch("ExecCommand",{command:t,ui:o,value:r,args:c}),!0):!1}queryCommandState(t){if(!be(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=t.toLowerCase(),r=this.commands.state[o];return ne(r)?r(o):!1}queryCommandValue(t){if(!be(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=t.toLowerCase(),r=this.commands.value[o];return ne(r)?r(o):""}addCommands(t,o="exec"){const r=this.commands;hn(t,(c,u)=>{le(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(t,o,r){const c=t.toLowerCase();this.commands.exec[c]=(u,f,b,v)=>o.call(r??this.editor,f,b,v)}removeCommand(t,o){const r=t.toLowerCase();o?delete this.commands[o][r]:(delete this.commands.exec[r],delete this.commands.state[r],delete this.commands.value[r])}queryCommandSupported(t){const o=t.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(t,o,r){this.commands.state[t.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(t,o,r){this.commands.value[t.toLowerCase()]=()=>o.call(r??this.editor)}}const Re=He.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class $e{constructor(t){Ie(this,"settings");Ie(this,"scope");Ie(this,"toggleEvent");Ie(this,"bindings",{});this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||De}static isNative(t){return!!Re[t.toLowerCase()]}fire(t,o){return this.dispatch(t,o)}dispatch(t,o){const r=t.toLowerCase(),c=S0(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const v=u[f];if(!v.removed){if(v.once&&this.off(r,v.func),c.isImmediatePropagationStopped())return c;if(v.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(t,o,r,c){if(o===!1&&(o=De),o){const u={func:o,removed:!1};c&&He.extend(u,c);const f=t.toLowerCase().split(" ");let b=f.length;for(;b--;){const v=f[b];let w=this.bindings[v];w||(w=[],this.toggleEvent(v,!0)),r?w=[u,...w]:w=[...w,u],this.bindings[v]=w}}return this}off(t,o){if(t){const r=t.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return hn(this.bindings,(b,v)=>{this.toggleEvent(v,!1),delete this.bindings[v]}),this;if(f){if(!o)f.length=0;else{const b=_e(f,v=>v.func===o);f=b.fail,this.bindings[u]=f,le(b.pass,v=>{v.removed=!0})}f.length||(this.toggleEvent(t,!1),delete this.bindings[u])}}}else hn(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(t,o,r){return this.on(t,o,r,{once:!0})}has(t){t=t.toLowerCase();const o=this.bindings[t];return!(!o||o.length===0)}}const Ne=e=>(e._eventDispatcher||(e._eventDispatcher=new $e({scope:e,toggleEvent:(t,o)=>{$e.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,o)}})),e._eventDispatcher),Et={fire(e,t,o){return _C("fire"),this.dispatch(e,t,o)},dispatch(e,t,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return S0(e.toLowerCase(),t??{},r);const c=Ne(r).dispatch(e,t);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,t,o){return Ne(this).on(e,t,o)},off(e,t){return Ne(this).off(e,t)},once(e,t){return Ne(this).once(e,t)},hasEventListeners(e){return Ne(this).has(e)}},gt=Tn.DOM;let sn;const kt=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const o=ub(e);return o?(e.eventRoot||(e.eventRoot=gt.select(o)[0]),e.eventRoot):e.getBody()},Yt=e=>!e.hidden&&!Jf(e),ht=(e,t,o)=>{Yt(e)?e.dispatch(t,o):Jf(e)&&FV(e,o)},Ae=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const o=kt(e,t);if(ub(e)){if(sn||(sn={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||sn&&(hn(sn,(c,u)=>{e.dom.unbind(kt(e,u))}),sn=null)})),sn[t])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const v=f[b].getBody();(v===u||gt.isChildOf(u,v))&&ht(f[b],t,c)}};sn[t]=r,gt.bind(o,t,r)}else{const r=c=>{ht(e,t,c)};gt.bind(o,t,r),e.delegates[t]=r}},Ze={...Et,bindPendingEventDelegates(){const e=this;He.each(e._pendingNativeEvents,t=>{Ae(e,t)})},toggleNativeEvent(e,t){const o=this;e==="focus"||e==="blur"||o.removed||(t?o.initialized?Ae(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(kt(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),o=e.dom;e.delegates&&(hn(e.delegates,(r,c)=>{e.dom.unbind(kt(e,c),c,r)}),delete e.delegates),!e.inline&&t&&o&&(t.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(t),o.unbind(e.getContainer()))}},Pt=e=>Y(e)?{value:e.split(/[ ,]/),valid:!0}:In(e,Y)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Xt=e=>{const t=(()=>{switch(e){case"array":return dn;case"boolean":return an;case"function":return ne;case"number":return lr;case"object":return en;case"string":return Y;case"string[]":return Pt;case"object[]":return o=>In(o,en);case"regexp":return o=>sc(o,RegExp);default:return et}})();return o=>Rn(o,t,`The value must be a ${e}.`)},Ct=e=>Y(e.processor),qt=(e,t)=>{const o=Xu(t.message)?"":`. ${t.message}`;return e+o},eo=e=>e.valid,Rn=(e,t,o="")=>{const r=t(e);return an(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Ja=(e,t,o)=>{if(!es(t)){const r=Rn(t,o);if(eo(r))return r.value;console.error(qt(`Invalid default value passed for the "${e}" option`,r))}},zo=(e,t,o=t)=>{const r={},c={},u=(I,U,H)=>{const j=Rn(U,H);return eo(j)?(c[I]=j.value,!0):(console.warn(qt(`Invalid value passed for the ${I} option`,j)),!1)},f=(I,U)=>{const H=Ct(U)?Xt(U.processor):U.processor,j=Ja(I,U.default,H);r[I]={...U,default:j,processor:H},vo(c,I).orThunk(()=>vo(t,I)).each(se=>u(I,se,H))},b=I=>Kt(r,I);return{register:f,isRegistered:b,get:I=>vo(c,I).orThunk(()=>vo(r,I).map(U=>U.default)).getOrUndefined(),set:(I,U)=>{if(b(I)){const H=r[I];return H.immutable?(console.error(`"${I}" is an immutable option and cannot be updated`),!1):u(I,U,H.processor)}else return console.warn(`"${I}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:I=>{const U=b(I);return U&&delete c[I],U},isSet:I=>Kt(c,I),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(I,U)=>an(U)||lr(U)||Y(U)||ie(U)||dn(U)||Qc(U)?U:Object.prototype.toString.call(U))))}catch(I){console.error(I)}}}},Kc=(e,t)=>{e.dom.contentEditable="true"},Nr=(e,t)=>{const o=q.fromDom(e.getBody());t?(e.readonly=!0,e.hasEditableRoot()&&Kc(o),PO(e)):(e.readonly=!1,pP(e))},Ra=e=>e.readonly,Yc=e=>{const t=e.undoManager.add();ve(t)&&(e.undoManager.undo(),e.undoManager.reset())},Yl=e=>zn(e,t=>t.type==="characterData"||t.type==="childList"),Ph=e=>{const t=r=>{Ra(e)&&Yl(r)&&Yc(e)},o=new MutationObserver(t);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Ra(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&Ra(e)&&r.preventDefault()}),e.on("compositionstart",()=>{Ra(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Ra(e)){const r=o.takeRecords();t(r)}o.disconnect()})},Km=["design","readonly"],M1=(e,t,o,r)=>{const c=o[t.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&Nr(e,u.editorReadOnly),t.set(r),gk(e,r)},ag=(e,t,o,r)=>{if(!(r===o.get()||e.initialized&&Jf(e))){if(!Kt(t,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?M1(e,o,t,r):e.on("init",()=>M1(e,o,t,r))}},RS=(e,t,o)=>{if(vt(Km,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${t}:`,r)}}}}},k5=e=>{const t=Bt("design"),o=Bt({design:{activate:Ot,deactivate:Ot,editorReadOnly:!1},readonly:{activate:Ot,deactivate:Ot,editorReadOnly:!0}});return Ph(e),HV(e),{isReadOnly:()=>Ra(e),set:r=>ag(e,o.get(),t,r),get:()=>t.get(),register:(r,c)=>{o.set(RS(o.get(),r,c))}}},$h=He.each,Ov=He.explode,FT={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},_5=He.makeMap("alt,ctrl,shift,meta,access"),UL=e=>e in _5,sY=e=>{const t={},o=Nn.os.isMacOS()||Nn.os.isiOS();$h(Ov(e.toLowerCase(),"+"),u=>{UL(u)?t[u]=!0:/^[0-9]{2,}$/.test(u)?t.keyCode=parseInt(u,10):(t.charCode=u.charCodeAt(0),t.keyCode=FT[u]||u.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let c;for(c in _5)t[c]?r.push(c):t[c]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,o?t.ctrl=!0:t.shift=!0),t.meta&&(o?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class HT{constructor(t){Ie(this,"editor");Ie(this,"shortcuts",{});Ie(this,"pendingPatterns",[]);this.editor=t;const o=this;t.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&($h(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(t,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return $h(Ov(He.trim(t)),b=>{const v=u.createShortcut(b,o,f,c);u.shortcuts[v.id]=v}),!0}remove(t){const o=this.createShortcut(t);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(t){const o=this,r=t;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:He.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,o,r,c){const u=He.map(Ov(t,">"),sY);return u[u.length-1]=He.extend(u[u.length-1],{func:r,scope:c||this.editor}),He.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,o){return!o||o.ctrl!==t.ctrlKey||o.meta!==t.metaKey||o.alt!==t.altKey||o.shift!==t.shiftKey?!1:t.keyCode===o.keyCode||t.charCode&&t.charCode===o.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const MS=()=>{const e=wj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Wu=Tn.DOM,B1=He.extend,ZL=He.each;class BS{constructor(t,o,r){Ie(this,"baseUri");Ie(this,"id");Ie(this,"editorUid");Ie(this,"plugins",{});Ie(this,"documentBaseURI");Ie(this,"baseURI");Ie(this,"contentCSS",[]);Ie(this,"contentStyles",[]);Ie(this,"ui");Ie(this,"mode");Ie(this,"options");Ie(this,"editorUpload");Ie(this,"userLookup");Ie(this,"shortcuts");Ie(this,"loadedCSS",{});Ie(this,"editorCommands");Ie(this,"suffix");Ie(this,"editorManager");Ie(this,"hidden");Ie(this,"inline");Ie(this,"hasVisual");Ie(this,"isNotDirty",!1);Ie(this,"annotator");Ie(this,"bodyElement");Ie(this,"bookmark");Ie(this,"composing",!1);Ie(this,"container");Ie(this,"contentAreaContainer");Ie(this,"contentDocument");Ie(this,"contentWindow");Ie(this,"delegates");Ie(this,"destroyed",!1);Ie(this,"dom");Ie(this,"editorContainer");Ie(this,"eventRoot");Ie(this,"formatter");Ie(this,"formElement");Ie(this,"formEventDelegate");Ie(this,"hasHiddenInput",!1);Ie(this,"iframeElement",null);Ie(this,"iframeHTML");Ie(this,"initialized",!1);Ie(this,"notificationManager");Ie(this,"orgDisplay");Ie(this,"orgVisibility");Ie(this,"parser");Ie(this,"quirks");Ie(this,"readonly",!1);Ie(this,"removed",!1);Ie(this,"schema");Ie(this,"selection");Ie(this,"serializer");Ie(this,"startContent","");Ie(this,"targetElm");Ie(this,"theme");Ie(this,"model");Ie(this,"undoManager");Ie(this,"windowManager");Ie(this,"licenseKeyManager");Ie(this,"_beforeUnload");Ie(this,"_eventDispatcher");Ie(this,"_nodeChangeDispatcher");Ie(this,"_pendingNativeEvents",[]);Ie(this,"_selectionOverrides");Ie(this,"_skinLoaded",!1);Ie(this,"_editableRoot",!0);Ie(this,"bindPendingEventDelegates");Ie(this,"toggleNativeEvent");Ie(this,"unbindAllNativeEvents");Ie(this,"fire");Ie(this,"dispatch");Ie(this,"on");Ie(this,"off");Ie(this,"once");Ie(this,"hasEventListeners");this.editorManager=r,B1(this,Ze);const c=this;this.id=t,this.editorUid=nu(),this.hidden=!1;const u=WK(r.defaultOptions,o);this.options=zo(c,u,o),Pp(c),this.userLookup=_L(this);const f=this.options.get;f("deprecation_warnings")&&fz(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const v=f("base_url");v&&r._setBaseUrl(v),this.baseUri=r.baseURI;const w=ib(c);w&&(Zn.ScriptLoader._setReferrerPolicy(w),Tn.DOM.styleSheetLoader._setReferrerPolicy(w)),Zn.ScriptLoader._setCrossOrigin(I=>Bf(c)(I,"script")),Tn.DOM.styleSheetLoader._setCrossOrigin(I=>Bf(c)(I,"stylesheet"));const k=wy(c);ve(k)&&Tn.DOM.styleSheetLoader._setContentCssCors(k),Xs.languageLoad=f("language_load"),Xs.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Iu(gy(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Ip(c),this.hasVisual=Hp(c),this.shortcuts=new HT(this),this.editorCommands=new Ke(this),re(this);const O=f("cache_suffix");O&&(Nn.cacheSuffix=O.replace(/^[\?\&]+/,"")),this.ui={registry:MS(),styleSheetLoader:void 0,show:Ot,hide:Ot,setEnabled:Ot,isEnabled:et},this.mode=k5(c),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),r.dispatch("SetupEditor",{editor:this});const R=Pf(c);ne(R)&&R.call(c,c)}render(){FK(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return $b(this)}translate(t){return yc.translate(t)}getParam(t,o,r){const c=this.options;return c.isRegistered(t)||(ve(r)?c.register(t,{processor:r,default:o}):c.register(t,{processor:et,default:o})),!c.isSet(t)&&!es(o)?o:c.get(t)}hasPlugin(t,o){return vt(Fp(this),t)?o?Eh.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,o,r){this.editorCommands.addCommand(t,o,r)}addQueryStateHandler(t,o,r){this.editorCommands.addQueryStateHandler(t,o,r)}addQueryValueHandler(t,o,r){this.editorCommands.addQueryValueHandler(t,o,r)}addShortcut(t,o,r,c){this.shortcuts.add(t,o,r,c)}execCommand(t,o,r,c){return this.editorCommands.execCommand(t,o,r,c)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Wu.show(t.getContainer()),Wu.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Wu.hide(t.getContainer()),Wu.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,o){this.dispatch("ProgressState",{state:t,time:o})}load(t={}){const o=this,r=o.getElement();if(!o.removed&&r){const c={...t,load:!0},u=fi(r)?r.value:r.innerHTML;o.setContent(u,c),c.no_events||o.dispatch("LoadContent",{...c,element:r})}}save(t={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...t,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,fi(r))r.value=u;else{(t.is_removing||!o.inline)&&(r.innerHTML=u);const b=Wu.getParent(o.id,"form");b&&ZL(b.elements,v=>v.name===o.id?(v.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(t,o){pO(this,t,o)}getContent(t){return xV(this,t)}insertContent(t,o){o&&(t=B1({content:t},o)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?pO(this,this.startContent,{initial:!0,format:"raw"}):pO(this,t,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const o=!this.isNotDirty;this.isNotDirty=!t,t&&t!==o&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Wu.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Wu.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const o=t.iframeElement;o&&(t.contentWindow=o.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const o=t.getWin();o&&(t.contentDocument=o.document)}return t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement??(t==null?void 0:t.body)??null}convertURL(t,o,r){const c=this,u=c.options.get,f=ku(c);if(ne(f))return f.call(c,t,r,!0,o);if(!u("convert_urls")||r==="link"||en(r)&&r.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const b=new Iu(t);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?t:u("relative_urls")?c.documentBaseURI.toRelative(t):(t=c.documentBaseURI.toAbsolute(t,u("remove_script_host")),t)}addVisual(t){jK(this,t)}setEditableRoot(t){zK(this,t)}hasEditableRoot(){return VK(this)}remove(){vO(this)}destroy(t){oP(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const N1=Tn.DOM,Dv=He.each;let A5=!1,P1,Ma=[];const ju=e=>{const t=e.type;Dv(Zd.get(),o=>{switch(t){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},$1=e=>{if(e!==A5){const t=Tn.DOM;e?(t.bind(window,"resize",ju),t.bind(window,"scroll",ju)):(t.unbind(window,"resize",ju),t.unbind(window,"scroll",ju)),A5=e}},zT=e=>{const t=Ma;return Ma=ge(Ma,o=>e!==o),Zd.activeEditor===e&&(Zd.activeEditor=Ma.length>0?Ma[0]:null),Zd.focusedEditor===e&&(Zd.focusedEditor=null),t.length!==Ma.length},O5=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(zT(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},rY=document.compatMode!=="CSS1Compat",Zd={...Et,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:nu(),majorVersion:"8",minorVersion:"3.1",releaseDate:"2025-12-17",i18n:yc,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",o="",r=Iu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)t=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const v=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){v.indexOf(".min")!==-1&&(o=".min"),t=b.substring(0,b.lastIndexOf("/"));break}}if(!t&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),t=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Iu(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new Iu(e.baseURL),e.suffix=o,pM(e),le(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],u=>Object.defineProperty(e,u,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&hn(r,(c,u)=>{Xs.PluginManager.urls[u]=c})},init(e){const t=this;let o;const r=He.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(k,O)=>k.inline&&O.tagName.toLowerCase()in r,u=k=>{let O=k.id;return O||(O=vo(k,"name").filter(R=>!N1.get(R)).getOrThunk(N1.uniqueId),k.setAttribute("id",O)),O},f=k=>{const O=e[k];if(O)return O.apply(t,[])},b=k=>Nn.browser.isIE()||Nn.browser.isEdge()?(l4("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):rY?(l4("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Y(k.selector)?N1.select(k.selector):ve(k.target)?[k.target]:[];let v=k=>{o=k};const w=()=>{let k=0;const O=[];let R;const I=(U,H,j)=>{const oe=new BS(U,H,t);O.push(oe),oe.on("init",()=>{++k===R.length&&v(O)}),oe.targetElm=oe.targetElm||j,oe.render()};N1.unbind(window,"ready",w),f("onpageload"),R=ac(b(e)),He.each(R,U=>{O5(t.get(U.id))}),R=He.grep(R,U=>!t.get(U.id)),R.length===0?v([]):Dv(R,U=>{c(e,U)?l4("Could not initialize inline editor on invalid inline target element",U):I(u(U),e,U)})};return N1.bind(window,"ready",w),new Promise(k=>{o?k(o):v=O=>{k(O)}})},get(e){return arguments.length===0?Ma.slice(0):Y(e)?Qn(Ma,t=>t.id===e).getOr(null):lr(e)&&Ma[e]?Ma[e]:null},add(e){const t=this,o=t.get(e.id);return o===e||(o===null&&Ma.push(e),$1(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),P1||(P1=r=>{const c=t.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",P1))),e},createEditor(e,t){return this.add(new BS(e,t,this))},remove(e){const t=this;let o;if(!e){for(let r=Ma.length-1;r>=0;r--)t.remove(Ma[r]);return}if(Y(e)){Dv(N1.select(e),r=>{o=t.get(r.id),o&&t.remove(o)});return}return o=e,ie(t.get(o.id))?null:(zT(o)&&t.dispatch("RemoveEditor",{editor:o}),Ma.length===0&&window.removeEventListener("beforeunload",P1),o.remove(),$1(Ma.length>0),o)},execCommand(e,t,o){const r=this,c=en(o)?o.id??o.index:o;switch(e){case"mceAddEditor":{if(!r.get(c)){const u=o.options;new BS(c,u,r).render()}return!0}case"mceRemoveEditor":{const u=r.get(c);return u&&u.remove(),!0}case"mceToggleEditor":{const u=r.get(c);return u?(u.isHidden()?u.show():u.hide(),!0):(r.execCommand("mceAddEditor",!1,o),!0)}}return r.activeEditor?r.activeEditor.execCommand(e,t,o):!1},triggerSave:()=>{Dv(Ma,e=>{e.save()})},addI18n:(e,t)=>{yc.add(e,t)},translate:e=>yc.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Iu(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Iu(this.baseURL)},_addLicenseKeyManager:e=>MO.add(e)};Zd.setup();const aY=(()=>{const e=Mc(),t=u=>({items:u,types:bt(u),getType:f=>vo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:t,write:o,read:r,clear:c}})(),Rv=Math.min,Mv=Math.max,VT=Math.round,Ba=(e,t,o)=>{let r=t.x,c=t.y;const u=e.w,f=e.h,b=t.w,v=t.h,w=(o||"").split("");return w[0]==="b"&&(c+=v),w[1]==="r"&&(r+=b),w[0]==="c"&&(c+=VT(v/2)),w[1]==="c"&&(r+=VT(b/2)),w[3]==="b"&&(c-=f),w[4]==="r"&&(r-=u),w[3]==="c"&&(c-=VT(f/2)),w[4]==="c"&&(r-=VT(u/2)),I1(r,c,u,f)},Bv=(e,t,o,r)=>{for(let c=0;c<r.length;c++){const u=Ba(e,t,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},cY=(e,t,o)=>I1(e.x-t,e.y-o,e.w+t*2,e.h+o*2),WL=(e,t)=>{const o=Mv(e.x,t.x),r=Mv(e.y,t.y),c=Rv(e.x+e.w,t.x+t.w),u=Rv(e.y+e.h,t.y+t.h);return c-o<0||u-r<0?null:I1(o,r,c-o,u-r)},R5=(e,t,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=t.x+t.w,v=t.y+t.h,w=Mv(0,t.x-r),k=Mv(0,t.y-c),O=Mv(0,u-b),R=Mv(0,f-v);return r+=w,c+=k,o&&(u+=w,f+=k,r-=O,c-=R),u-=O,f-=R,I1(r,c,u-r,f-c)},I1=(e,t,o,r)=>({x:e,y:t,w:o,h:r}),lY={inflate:cY,relativePosition:Ba,findBestRelativePosition:Bv,intersect:WL,clamp:R5,create:I1,fromClientRect:e=>I1(e.left,e.top,e.width,e.height)},Ym=(e,t,o=1e3)=>{let r=!1,c=null;const u=w=>(...k)=>{r||(r=!0,c!==null&&(window.clearTimeout(c),c=null),w.apply(null,k))},f=u(e),b=u(t);return{start:(...w)=>{!r&&c===null&&(c=window.setTimeout(()=>b.apply(null,w),o))},resolve:f,reject:b}},jL=(()=>{const e={},t={},o={};return{load:(v,w)=>{const k=`Script at URL "${w}" failed to load`,O=`Script at URL "${w}" did not call \`tinymce.Resource.add('${v}', data)\` within 1 second`;if(e[v]!==void 0)return e[v];{const R=new Promise((I,U)=>{const H=Ym(I,U);t[v]=H.resolve,Zn.ScriptLoader.loadScript(w).then(()=>H.start(O),()=>H.reject(k))});return e[v]=R,R}},add:(v,w)=>{t[v]!==void 0&&(t[v](w),delete t[v]),e[v]=Promise.resolve(w),o[v]=w},has:v=>v in o,get:v=>o[v],unload:v=>{delete e[v],delete o[v]}}})(),GL=()=>(()=>{let e={},t=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{t.push(r),e[r]=String(c)},key:r=>t[r],removeItem:r=>{t=t.filter(c=>c===r),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),o})();let L1;try{const e="__storage_test__";L1=window.localStorage,L1.setItem(e,e),L1.removeItem(e)}catch{L1=GL()}var qL=L1;const cg={geom:{Rect:lY},util:{Delay:Mu,Tools:He,VK:ct,URI:Iu,EventDispatcher:$e,Observable:Et,I18n:yc,LocalStorage:qL,ImageUploader:CP},dom:{EventUtils:Vg,TreeWalker:fs,TextSeeker:yu,DOMUtils:Tn,ScriptLoader:Zn,RangeUtils:Od,Serializer:hO,StyleSheetLoader:Bg,ControlSelection:_F,BookmarkManager:Nb,Selection:fO,Event:Vg.Event},html:{Styles:gd,Entities:bc,Node:Mr,Schema:Ar,DomParser:Zb,Writer:S_,Serializer:fh},Env:Nn,AddOnManager:Xs,Annotator:dM,Formatter:xP,UndoManager:nU,EditorCommands:Ke,WindowManager:sP,NotificationManager:HC,EditorObservable:Ze,Shortcuts:HT,Editor:BS,FocusManager:gM,EditorManager:Zd,DOM:Tn.DOM,ScriptLoader:Zn.ScriptLoader,PluginManager:Eh,ThemeManager:u1,ModelManager:Qb,IconManager:c4,Resource:jL,FakeClipboard:aY,trim:He.trim,isArray:He.isArray,is:He.is,toArray:He.toArray,makeMap:He.makeMap,each:He.each,map:He.map,grep:He.grep,inArray:He.inArray,extend:He.extend,walk:He.walk,resolve:He.resolve,explode:He.explode,_addCacheSuffix:He._addCacheSuffix},M5=He.extend(Zd,cg),KL=e=>{try{pr.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(M5),KL(M5)})()})(bX);var EX=bX.exports;const TX=xX(EX);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',"upload-from-device":'<svg width="24" height="25"><path d="M11 19a1 1 0 1 0 2 0v-3.2l1.5 1a1 1 0 1 0 1-1.7L12 12.8l-3.5 2.3a1 1 0 0 0 1 1.7l1.5-1V19Z"/><path d="M9.6 4c.3 0 .6.2.8.5l1.3 2h6.7c.7 0 1.4.2 1.8.7.5.5.8 1.2.8 1.9v8.3c0 .7-.3 1.3-.8 1.8a2.6 2.6 0 0 1-1.8.8H16v-2h2.4a.6.6 0 0 0 .4-.2.6.6 0 0 0 .2-.4V9a.6.6 0 0 0-.2-.5.6.6 0 0 0-.4-.1h-7.2a1 1 0 0 1-.8-.5L9 6H5.6a.6.6 0 0 0-.4.2.6.6 0 0 0-.2.4v10.8c0 .1 0 .3.2.4a.6.6 0 0 0 .4.2H8v2H5.6a2.6 2.6 0 0 1-1.8-.8 2.7 2.7 0 0 1-.8-1.8V6.6c0-.7.3-1.3.8-1.8A2.6 2.6 0 0 1 5.6 4h4Z"/></svg>',"upload-from-link":'<svg height="25" width="24"><path d="M11.5 11.8a1 1 0 0 1 1.9-.5 5 5 0 0 1-1.3 4.8l-2.4 2.3A4 4 0 1 1 4 13L5 12a1 1 0 0 1 1.4 1.4l-.7.8A2 2 0 1 0 8.3 17l2.4-2.4a3 3 0 0 0 .8-2.8z"/><path d="M10.1 11.8a1 1 0 0 1-2 .5 5 5 0 0 1 1.4-4.8L12 5.1a4 4 0 0 1 5.5 5.6l-.7.8a1 1 0 0 1-1.5-1.4l.8-.8a2 2 0 1 0-2.7-2.7l-2.4 2.3a3 3 0 0 0-.8 3zm5.7 7.2a1 1 0 1 0 2 0v-3l1.4 1.1a1 1 0 0 0 1.2-1.5l-3.6-2.9-3.6 2.9a1 1 0 0 0 1.2 1.5l1.4-1z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const pr=Object.getPrototypeOf,ua=(n,s,a)=>{var i;return a(n,s.prototype)?!0:((i=n.constructor)==null?void 0:i.name)===s.name},Jc=n=>{const s=typeof n;return n===null?"null":s==="object"&&Array.isArray(n)?"array":s==="object"&&ua(n,String,(a,i)=>i.isPrototypeOf(a))?"string":s},ec=n=>s=>Jc(s)===n,Oc=n=>s=>typeof s===n,tc=n=>s=>n===s,Na=(n,s)=>bo(n)&&ua(n,s,(a,i)=>pr(a)===i),on=ec("string"),bo=ec("object"),qu=n=>Na(n,Object),Qr=ec("array"),nc=tc(null),br=Oc("boolean"),Is=tc(void 0),oc=n=>n==null,Jn=n=>!oc(n),Dt=Oc("function"),Pa=Oc("number"),sc=(n,s)=>{if(Qr(n)){for(let a=0,i=n.length;a<i;++a)if(!s(n[a]))return!1;return!0}return!1},Y=()=>{},en=n=>()=>n(),Qc=(n,s)=>(...a)=>n(s.apply(null,a)),dn=(n,s)=>a=>n(s(a)),ie=n=>()=>n,an=n=>n,es=(n,s)=>n===s;function gn(n,...s){return(...a)=>{const i=s.concat(a);return n.apply(null,i)}}const ve=n=>s=>!n(s),ne=n=>()=>{throw new Error(n)},lr=n=>n(),In=ie(!1),Ot=ie(!0),Zu=class Zu{constructor(s,a){Ie(this,"tag");Ie(this,"value");this.tag=s,this.value=a}static some(s){return new Zu(!0,s)}static none(){return Zu.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?Zu.some(s(this.value)):Zu.none()}bind(s){return this.tag?s(this.value):Zu.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:Zu.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Jn(s)?Zu.some(s):Zu.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(Zu,"singletonNone",new Zu(!1));let T=Zu;const Uo=Array.prototype.slice,Xe=Array.prototype.indexOf,Zo=Array.prototype.push,zt=(n,s)=>Xe.call(n,s),Me=(n,s)=>{const a=zt(n,s);return a===-1?T.none():T.some(a)},to=(n,s)=>zt(n,s)>-1,js=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];if(s(d,a))return!0}return!1},Ro=(n,s)=>{const a=[];for(let i=0;i<n;i++)a.push(s(i));return a},ls=(n,s)=>{const a=[];for(let i=0;i<n.length;i+=s){const d=Uo.call(n,i,i+s);a.push(d)}return a},De=(n,s)=>{const a=n.length,i=new Array(a);for(let d=0;d<a;d++){const g=n[d];i[d]=s(g,d)}return i},et=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];s(d,a)}},N=(n,s)=>{for(let a=n.length-1;a>=0;a--){const i=n[a];s(i,a)}},Dc=(n,s)=>{const a=[],i=[];for(let d=0,g=n.length;d<g;d++){const h=n[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},no=(n,s)=>{const a=[];for(let i=0,d=n.length;i<d;i++){const g=n[i];s(g,i)&&a.push(g)}return a},ts=(n,s,a)=>(N(n,(i,d)=>{a=s(a,i,d)}),a),po=(n,s,a)=>(et(n,(i,d)=>{a=s(a,i,d)}),a),ea=(n,s,a)=>{for(let i=0,d=n.length;i<d;i++){const g=n[i];if(s(g,i))return T.some(g);if(a(g,i))break}return T.none()},vt=(n,s)=>ea(n,s,In),zn=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];if(s(d,a))return T.some(a)}return T.none()},Rt=n=>{const s=[];for(let a=0,i=n.length;a<i;++a){if(!Qr(n[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+n);Zo.apply(s,n[a])}return s},le=(n,s)=>Rt(De(n,s)),ks=(n,s)=>{for(let a=0,i=n.length;a<i;++a){const d=n[a];if(s(d,a)!==!0)return!1}return!0},_e=n=>{const s=Uo.call(n,0);return s.reverse(),s},ge=(n,s)=>no(n,a=>!to(s,a)),tn=(n,s)=>{const a={};for(let i=0,d=n.length;i<d;i++){const g=n[i];a[String(g)]=s(g,i)}return a},yn=n=>[n],cn=(n,s)=>{const a=Uo.call(n,0);return a.sort(s),a},Ls=(n,s)=>s>=0&&s<n.length?T.some(n[s]):T.none(),Qn=n=>Ls(n,0),cl=n=>Ls(n,n.length-1),Lh=Dt(Array.from)?Array.from:n=>Uo.call(n),ta=(n,s)=>{for(let a=0;a<n.length;a++){const i=s(n[a],a);if(i.isSome())return i}return T.none()},Vn=Object.keys,$a=Object.hasOwnProperty,Mo=(n,s)=>{const a=Vn(n);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=n[g];s(h,g)}},ns=(n,s)=>Ku(n,(a,i)=>({k:i,v:s(a,i)})),Ku=(n,s)=>{const a={};return Mo(n,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},ki=n=>(s,a)=>{n[a]=s},Ir=(n,s,a,i)=>{Mo(n,(d,g)=>{(s(d,g)?a:i)(d,g)})},us=(n,s)=>{const a={},i={};return Ir(n,s,ki(a),ki(i)),{t:a,f:i}},Fs=(n,s)=>{const a={};return Ir(n,s,ki(a),Y),a},Bo=(n,s)=>{const a=[];return Mo(n,(i,d)=>{a.push(s(i,d))}),a},rc=(n,s)=>{const a=Vn(n);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=n[g];if(s(h,g,n))return T.some(h)}return T.none()},ac=n=>Bo(n,an),bt=(n,s)=>Mn(n,s)?T.from(n[s]):T.none(),Mn=(n,s)=>$a.call(n,s),hn=(n,s)=>Mn(n,s)&&n[s]!==void 0&&n[s]!==null,da={generate:n=>{if(!Qr(n))throw new Error("cases must be an array");if(n.length===0)throw new Error("there must be at least one case");const s=[],a={};return et(n,(i,d)=>{const g=Vn(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Qr(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...S)=>{const x=S.length;if(x!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+x);return{fold:(...D)=>{if(D.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+D.length);return D[d].apply(null,S)},match:D=>{const P=Vn(D);if(s.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+P.join(","));if(!ks(s,z=>to(P,z)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+s.join(", "));return D[h].apply(null,S)},log:D=>{console.log(D,{constructors:s,constructor:h,params:S})}}}}),a}},pt=n=>{let s=n;return{get:()=>s,set:d=>{s=d}}},il=n=>{let s=T.none(),a=[];const i=x=>il(_=>{d(D=>{_(x(D))})}),d=x=>{h()?S(x):a.push(x)},g=x=>{h()||(s=T.some(x),C(a),a=[])},h=()=>s.isSome(),C=x=>{et(x,S)},S=x=>{s.each(_=>{setTimeout(()=>{x(_)},0)})};return n(g),{get:d,map:i,isReady:h}},tu={nu:il,pure:n=>il(s=>{s(n)})},Rc=n=>{setTimeout(()=>{throw n},0)},Ia=n=>{const s=S=>{n().then(S,Rc)};return{map:S=>Ia(()=>n().then(S)),bind:S=>Ia(()=>n().then(x=>S(x).toPromise())),anonBind:S=>Ia(()=>n().then(()=>S.toPromise())),toLazy:()=>tu.nu(s),toCached:()=>{let S=null;return Ia(()=>(S===null&&(S=n()),S))},toPromise:n,get:s}},Wo={nu:n=>Ia(()=>new Promise(n)),pure:n=>Ia(()=>Promise.resolve(n))},ef=n=>{const s=g=>g(n),a=ie(n),i=()=>d,d={tag:!0,inner:n,fold:(g,h)=>h(n),isValue:Ot,isError:In,map:g=>Bt.value(g(n)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(n)},toOptional:()=>T.some(n)};return d},Yu=n=>{const s=()=>a,a={tag:!1,inner:n,fold:(i,d)=>i(n),isValue:In,isError:Ot,map:s,mapError:i=>Bt.error(i(n)),bind:s,exists:In,forall:Ot,getOr:an,or:an,getOrThunk:lr,orThunk:lr,getOrDie:ne(String(n)),each:Y,toOptional:T.none};return a},Bt={value:ef,error:Yu,fromOption:(n,s)=>n.fold(()=>Yu(s),ef)},ma=n=>({...n,toCached:()=>ma(n.toCached()),bindFuture:S=>ma(n.bind(x=>x.fold(_=>Wo.pure(Bt.error(_)),_=>S(_)))),bindResult:S=>ma(n.map(x=>x.bind(S))),mapResult:S=>ma(n.map(x=>x.map(S))),mapError:S=>ma(n.map(x=>x.mapError(S))),foldResult:(S,x)=>n.map(_=>_.fold(S,x)),withTimeout:(S,x)=>ma(Wo.nu(_=>{let D=!1;const P=setTimeout(()=>{D=!0,_(Bt.error(x()))},S);n.get(F=>{D||(clearTimeout(P),_(F))})}))}),ll=n=>ma(Wo.nu(n)),Fh=n=>ma(Wo.pure(Bt.value(n))),jd={nu:ll,wrap:ma,pure:Fh,value:Fh,error:n=>ma(Wo.pure(Bt.error(n))),fromResult:n=>ma(Wo.pure(n)),fromFuture:n=>ma(n.map(Bt.value)),fromPromise:n=>ll(s=>{n.then(a=>{s(Bt.value(a))},a=>{s(Bt.error(a))})})},ul=typeof window<"u"?window:Function("return this;")(),_i=(n,s,a,i)=>{const d=n+s;return d>i?a:d<a?i:d},_s=(n,s,a)=>Math.min(Math.max(n,s),a),nu=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let dg=0;const st=n=>{const a=new Date().getTime(),i=Math.floor(nu()*1e9);return dg++,n+"_"+i+dg+String(a)},La=(n,s)=>s,Gd=(n,s)=>qu(n)&&qu(s)?ro(n,s):s,qd=n=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Mn(d,g)&&(a[g]=n(a[g],d[g]))}return a},ro=qd(Gd),Kd=qd(La),ic=(n,s,a=es)=>n.exists(i=>a(i,s)),Cs=(n,s,a=es)=>lc(n,s,a).getOr(n.isNone()&&s.isNone()),Ai=n=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<n.length;i++)n[i].each(a);return s},Yd=n=>{const s=[];for(let a=0;a<n.length;a++){const i=n[a];if(i.isSome())s.push(i.getOrDie());else return T.none()}return T.some(s)},lc=(n,s,a)=>n.isSome()&&s.isSome()?T.some(a(n.getOrDie(),s.getOrDie())):T.none(),yr=(n,s,a,i)=>n.isSome()&&s.isSome()&&a.isSome()?T.some(i(n.getOrDie(),s.getOrDie(),a.getOrDie())):T.none(),ti=(n,s)=>n!=null?T.some(s(n)):T.none(),fa=(n,s)=>n?T.some(s):T.none(),z1=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),mg=(n,s)=>{let a=s??ul;for(let i=0;i<n.length&&a!==void 0&&a!==null;++i)a=a[n[i]];return a},Mc=(n,s)=>{const a=n.split(".");return mg(a,s)};da.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const dl=n=>{const s=[],a=[];return et(n,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},ml=n=>{const s=pt(T.none()),a=()=>s.get().each(n);return{clear:()=>{a(),s.set(T.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(T.some(C))}}},fg=()=>ml(n=>n.destroy()),ps=()=>ml(n=>n.unbind()),Zt=()=>{const n=ml(Y);return{...n,on:a=>n.get().each(a)}},Lr=(n,s)=>n+s,Cr=(n,s)=>n.substring(s),os=(n,s,a)=>s===""||n.length>=s.length&&n.substr(a,a+s.length)===s,nf=(n,s)=>Xu(n,s)?Cr(n,s.length):n,Xd=(n,s)=>ni(n,s)?n:Lr(n,s),jo=(n,s,a=0,i)=>{const d=n.indexOf(s,a);return d!==-1?Is(i)?!0:d+s.length<=i:!1},Xu=(n,s)=>os(n,s,0),ni=(n,s)=>os(n,s,n.length-s.length),ot=(n=>s=>s.replace(n,""))(/^\s+|\s+$/g),ou=n=>n.length>0,ga=n=>!ou(n),Ju=n=>{const s=parseFloat(n);return isNaN(s)?T.none():T.some(s)},ss=(n,s)=>{let a=null,i=null;return{cancel:()=>{nc(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,nc(a)&&(a=setTimeout(()=>{const C=i;a=null,i=null,n.apply(null,C)},s))}}},zh=(n,s)=>{let a=null;return{cancel:()=>{nc(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{nc(a)&&(a=setTimeout(()=>{a=null,n.apply(null,g)},s))}}},oi=(n,s)=>{let a=null;const i=()=>{nc(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,n.apply(null,g)},s)}}},Bc=n=>{let s=!1,a;return(...i)=>(s||(s=!0,a=n.apply(null,i)),a)},gg="\uFEFF",hg=" ",fl=(n,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,n),new Error(d)}return gl(i.childNodes[0])},pg=(n,s)=>{const i=(s||document).createElement(n);return gl(i)},Jd=(n,s)=>{const i=(s||document).createTextNode(n);return gl(i)},gl=n=>{if(n==null)throw new Error("Node cannot be null or undefined");return{dom:n}},We={fromHtml:fl,fromTag:pg,fromText:Jd,fromDom:gl,fromPoint:(n,s,a)=>T.from(n.dom.elementFromPoint(s,a)).map(gl)},Qd=(n,s)=>{s.fold(a=>{n.setStartBefore(a.dom)},(a,i)=>{n.setStart(a.dom,i)},a=>{n.setStartAfter(a.dom)})},of=(n,s)=>{s.fold(a=>{n.setEndBefore(a.dom)},(a,i)=>{n.setEnd(a.dom,i)},a=>{n.setEndAfter(a.dom)})},si=(n,s,a)=>{const i=n.document.createRange();return Qd(i,s),of(i,a),i},su=(n,s,a,i,d)=>{const g=n.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},em=n=>({left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}),ha=n=>{const s=n.getClientRects(),a=s.length>0?s[0]:n.getBoundingClientRect();return a.width>0||a.height>0?T.some(a).map(em):T.none()},ed=n=>{const s=n.getBoundingClientRect();return s.width>0||s.height>0?T.some(s).map(em):T.none()},ru=da.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),hl=(n,s,a)=>s(We.fromDom(a.startContainer),a.startOffset,We.fromDom(a.endContainer),a.endOffset),ao=(n,s)=>s.match({domRange:a=>({ltr:ie(a),rtl:T.none}),relative:(a,i)=>({ltr:Bc(()=>si(n,a,i)),rtl:Bc(()=>T.some(si(n,i,a)))}),exact:(a,i,d,g)=>({ltr:Bc(()=>su(n,a,i,d,g)),rtl:Bc(()=>T.some(su(n,d,g,a,i)))})}),tm=(n,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>ru.rtl(We.fromDom(d.endContainer),d.endOffset,We.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>hl(n,ru.ltr,a)):hl(n,ru.ltr,a)},Fr=(n,s)=>{const a=ao(n,s);return tm(n,a)},B=(n,s)=>Fr(n,s).match({ltr:(i,d,g,h)=>{const C=n.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,h),C},rtl:(i,d,g,h)=>{const C=n.document.createRange();return C.setStart(g.dom,h),C.setEnd(i.dom,d),C}});ru.ltr,ru.rtl;const V=9,X=11,ye=1,yt=3,ln=(n,s)=>{const a=n.dom;if(a.nodeType!==ye)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Oo=n=>n.nodeType!==ye&&n.nodeType!==V&&n.nodeType!==X||n.childElementCount===0,pa=(n,s)=>{const a=s===void 0?document:s.dom;return Oo(a)?[]:De(a.querySelectorAll(n),We.fromDom)},Nc=(n,s)=>{const a=s===void 0?document:s.dom;return Oo(a)?T.none():T.from(a.querySelector(n)).map(We.fromDom)},un=(n,s)=>n.dom===s.dom,$=(n,s)=>{const a=n.dom,i=s.dom;return a===i?!1:a.contains(i)},K=(n,s,a,i)=>{const d=n.isiOS()&&/ipad/i.test(a)===!0,g=n.isiOS()&&!d,h=n.isiOS()||n.isAndroid(),C=h||i("(pointer:coarse)"),S=d||!g&&h&&i("(min-device-width:768px)"),x=g||h&&!S,_=s.isSafari()&&n.isiOS()&&/safari/i.test(a)===!1,D=!x&&!S&&!_;return{isiPad:ie(d),isiPhone:ie(g),isTablet:ie(S),isPhone:ie(x),isTouch:ie(C),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:ie(_),isDesktop:ie(D)}},te=(n,s)=>{for(let a=0;a<n.length;a++){const i=n[a];if(i.test(s))return i}},we=(n,s)=>{const a=te(n,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return nn(i(1),i(2))},Ue=(n,s)=>{const a=String(s).toLowerCase();return n.length===0?dt():we(n,a)},dt=()=>nn(0,0),nn=(n,s)=>({major:n,minor:s}),Gn={nu:nn,detect:Ue,unknown:dt},Un=(n,s)=>ta(s.brands,a=>{const i=a.brand.toLowerCase();return vt(n,d=>{var g;return i===((g=d.brand)==null?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Gn.nu(parseInt(a.version,10),0)}))}),As=(n,s)=>{const a=String(s).toLowerCase();return vt(n,i=>i.search(a))},Ss=(n,s)=>As(n,s).map(a=>{const i=Gn.detect(a.versionRegexes,s);return{current:a.name,version:i}}),sf=(n,s)=>As(n,s).map(a=>{const i=Gn.detect(a.versionRegexes,s);return{current:a.name,version:i}}),rf=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ri=n=>s=>jo(s,n),V1=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:n=>jo(n,"edge/")&&jo(n,"chrome")&&jo(n,"safari")&&jo(n,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rf],search:n=>jo(n,"chrome")&&!jo(n,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:n=>jo(n,"msie")||jo(n,"trident")},{name:"Opera",versionRegexes:[rf,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ri("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ri("firefox")},{name:"Safari",versionRegexes:[rf,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:n=>(jo(n,"safari")||jo(n,"mobile/"))&&jo(n,"applewebkit")}],$S=[{name:"Windows",search:ri("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:n=>jo(n,"iphone")||jo(n,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ri("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ri("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ri("linux"),versionRegexes:[]},{name:"Solaris",search:ri("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ri("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ri("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Iv={browsers:ie(V1),oses:ie($S)},I5="Edge",YT="Chromium",XT="IE",JT="Opera",au="Firefox",QT="Safari",e3=()=>Lv({current:void 0,version:Gn.unknown()}),Lv=n=>{const s=n.current,a=n.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(I5),isChromium:i(YT),isIE:i(XT),isOpera:i(JT),isFirefox:i(au),isSafari:i(QT)}},Fv={unknown:e3,nu:Lv},L5="Windows",t3="iOS",Hv="Android",cu="Linux",pl="macOS",af="Solaris",n3="FreeBSD",Nn="ChromeOS",o3=()=>zv({current:void 0,version:Gn.unknown()}),zv=n=>{const s=n.current,a=n.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(L5),isiOS:i(t3),isAndroid:i(Hv),isMacOS:i(pl),isLinux:i(cu),isSolaris:i(af),isFreeBSD:i(n3),isChromeOS:i(Nn)}},bs={unknown:o3,nu:zv},U1={detect:(n,s,a)=>{const i=Iv.browsers(),d=Iv.oses(),g=s.bind(S=>Un(i,S)).orThunk(()=>Ss(i,n)).fold(Fv.unknown,Fv.nu),h=sf(d,n).fold(bs.unknown,bs.nu),C=K(h,g,n,a);return{browser:g,os:h,deviceType:C}}},r3=n=>window.matchMedia(n).matches;let Vv=Bc(()=>U1.detect(window.navigator.userAgent,T.from(window.navigator.userAgentData),r3));const Hr=()=>Vv(),bg=(n,s)=>Mc(n,s),a3=(n,s)=>{const a=bg(n,s);if(a==null)throw new Error(n+" not available on this browser");return a},He=Object.getPrototypeOf,Pc=n=>a3("HTMLElement",n),Z1=n=>{const s=Mc("ownerDocument.defaultView",n);return bo(n)&&(Pc(s).prototype.isPrototypeOf(n)||/^HTML\w*Element$/.test(He(n).constructor.name))},Oi=n=>n.dom.nodeName.toLowerCase(),Vh=n=>n.dom.nodeType,Uv=n=>s=>Vh(s)===n,q=n=>uc(n)&&Z1(n.dom),uc=Uv(ye),nm=Uv(yt),Zv=Uv(V),vg=Uv(X),na=n=>s=>uc(s)&&Oi(s)===n,dc=n=>We.fromDom(n.dom.ownerDocument),Wv=n=>Zv(n)?n:dc(n),jv=n=>We.fromDom(Wv(n).dom.documentElement),Uh=n=>We.fromDom(Wv(n).dom.defaultView),Fa=n=>T.from(n.dom.parentNode).map(We.fromDom),Gv=n=>Fa(n),iu=n=>T.from(n.dom.parentElement).map(We.fromDom),Zh=(n,s)=>{const a=Dt(s)?s:In;let i=n.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=We.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},qv=n=>T.from(n.dom.offsetParent).map(We.fromDom),$c=n=>T.from(n.dom.previousSibling).map(We.fromDom),Kv=n=>T.from(n.dom.nextSibling).map(We.fromDom),bl=n=>De(n.dom.childNodes,We.fromDom),om=(n,s)=>{const a=n.dom.childNodes;return T.from(a[s]).map(We.fromDom)},xn=n=>om(n,0),ai=(n,s)=>({element:n,offset:s}),W1=(n,s)=>{const a=bl(n);return a.length>0&&s<a.length?ai(a[s],0):ai(n,s)},IS=(n,s,a,i)=>{const g=dc(n).dom.createRange();return g.setStart(n.dom,s),g.setEnd(a.dom,i),g},mn=(n,s,a,i)=>{const d=IS(n,s,a,i),g=un(n,a)&&s===i;return d.collapsed&&!g},td=n=>vg(n)&&Jn(n.dom.host),Hs=n=>We.fromDom(n.dom.getRootNode()),vl=n=>td(n)?n:We.fromDom(Wv(n).dom.body),yl=n=>ds(n).isSome(),ds=n=>{const s=Hs(n);return td(s)?T.some(s):T.none()},qn=n=>We.fromDom(n.dom.host),c3=n=>{if(Jn(n.target)){const s=We.fromDom(n.target);if(uc(s)&&i3(s)&&n.composed&&n.composedPath){const a=n.composedPath();if(a)return Qn(a)}}return T.from(n.target)},i3=n=>Jn(n.dom.shadowRoot),lu=(n,s,a,i,d,g,h)=>({target:n,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),Di=n=>{const s=We.fromDom(c3(n).getOr(n.target)),a=()=>n.stopPropagation(),i=()=>n.preventDefault(),d=Qc(i,a);return lu(s,n.clientX,n.clientY,a,i,d,n)},Cl=(n,s)=>a=>{n(a)&&s(Di(a))},Gs=(n,s,a,i,d)=>{const g=Cl(a,i);return n.dom.addEventListener(s,g,d),{unbind:gn(Ri,n,s,g,d)}},nd=(n,s,a,i)=>Gs(n,s,a,i,!1),Ic=(n,s,a,i)=>Gs(n,s,a,i,!0),Ri=(n,s,a,i)=>{n.dom.removeEventListener(s,a,i)},ci=Ot,Kn=(n,s,a)=>nd(n,s,ci,a),ii=(n,s,a)=>Ic(n,s,ci,a),uu=Di,oa=()=>We.fromDom(document),ur=(n,s=!1)=>n.dom.focus({preventScroll:s}),ms=n=>n.dom.blur(),Mi=n=>{const s=Hs(n).dom;return n.dom===s.activeElement},Sr=(n=oa())=>T.from(n.dom.activeElement).map(We.fromDom),zs=n=>Sr(Hs(n)).filter(s=>n.dom.contains(s.dom)),cf=(n,s)=>{Fa(n).each(i=>{i.dom.insertBefore(s.dom,n.dom)})},LS=(n,s)=>{Kv(n).fold(()=>{Fa(n).each(d=>{wr(d,s)})},i=>{cf(i,s)})},Yv=(n,s)=>{xn(n).fold(()=>{wr(n,s)},i=>{n.dom.insertBefore(s.dom,i.dom)})},wr=(n,s)=>{n.dom.appendChild(s.dom)},Xv=(n,s,a)=>{om(n,a).fold(()=>{wr(n,s)},i=>{cf(i,s)})},FS=(n,s)=>{et(s,a=>{wr(n,a)})},lf=(n,s,a)=>{if(on(a)||br(a)||Pa(a))n.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",n),new Error("Attribute value was not simple")},Nt=(n,s,a)=>{lf(n.dom,s,a)},Jv=(n,s)=>{const a=n.dom;Mo(s,(i,d)=>{lf(a,d,i)})},tr=(n,s)=>{const a=n.dom.getAttribute(s);return a===null?void 0:a},xr=(n,s)=>T.from(tr(n,s)),Er=(n,s)=>{const a=n.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},No=(n,s)=>{n.dom.removeAttribute(s)},uf=n=>po(n.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),j1=n=>{n.dom.textContent="",et(bl(n),s=>{Bi(s)})},Bi=n=>{const s=n.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Sl=(n,s)=>We.fromDom(n.dom.cloneNode(s)),Qv=n=>Sl(n,!1),G1=n=>Sl(n,!0),q1=(n,s)=>{const i=(s||document).createElement("div");return i.innerHTML=n,bl(We.fromDom(i))},od=n=>n.dom.innerHTML,wl=(n,s)=>{const i=dc(n).dom,d=We.fromDom(i.createDocumentFragment()),g=q1(s,i);FS(d,g),j1(n),wr(n,d)},l3=n=>{const s=We.fromTag("div"),a=We.fromDom(n.dom.cloneNode(!0));return wr(s,a),od(s)},zr=n=>{if(td(n))return"#shadow-root";{const s=Qv(n);return l3(s)}},xl=n=>new Promise((s,a)=>{const i=()=>{g(),s(n)},d=[Kn(n,"load",i),Kn(n,"error",()=>{g(),a("Unable to load data from image: "+n.dom.src)})],g=()=>et(d,h=>h.unbind());n.dom.complete&&i()}),du=n=>n.style!==void 0&&Dt(n.style.getPropertyValue),Pn=n=>{const s=nm(n)?n.dom.parentNode:n.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return ds(We.fromDom(s)).fold(()=>a.body.contains(s),dn(Pn,qn))},Lc=()=>HS(We.fromDom(document)),HS=n=>{const s=n.dom.body;if(s==null)throw new Error("Body is not available yet");return We.fromDom(s)},K1=(n,s,a)=>{if(!on(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",n),new Error("CSS value must be a string: "+a);du(n)&&n.style.setProperty(s,a)},li=(n,s)=>{du(n)&&n.style.removeProperty(s)},Ft=(n,s,a)=>{const i=n.dom;K1(i,s,a)},rs=(n,s)=>{const a=n.dom;Mo(s,(i,d)=>{K1(a,d,i)})},Tr=(n,s)=>{const a=n.dom;Mo(s,(i,d)=>{i.fold(()=>{li(a,d)},g=>{K1(a,d,g)})})},Po=(n,s)=>{const a=n.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Pn(n)?Ni(a,s):d},Ni=(n,s)=>du(n)?n.style.getPropertyValue(s):"",Go=(n,s)=>{const a=n.dom,i=Ni(a,s);return T.from(i).filter(d=>d.length>0)},Vs=n=>{const s={},a=n.dom;if(du(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},yg=(n,s,a)=>{const i=We.fromTag(n);return Ft(i,s,a),Go(i,s).isSome()},Cn=(n,s)=>{const a=n.dom;li(a,s),ic(xr(n,"style").map(ot),"")&&No(n,"style")},Pi=n=>n.dom.offsetWidth,xo=(n,s)=>{const a=(C,S)=>{if(!Pa(S)&&!S.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+S);const x=C.dom;du(x)&&(x.style[n]=S+"px")},i=C=>{const S=s(C);if(S<=0||S===null){const x=Po(C,n);return parseFloat(x)||0}return S},d=i,g=(C,S)=>po(S,(x,_)=>{const D=Po(C,_),P=D===void 0?0:parseInt(D,10);return isNaN(P)?x:x+P},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,S,x)=>{const _=g(C,x);return S>_?S-_:0}}},ui=xo("height",n=>{const s=n.dom;return Pn(n)?s.getBoundingClientRect().height:s.offsetHeight}),nr=n=>ui.get(n),sa=n=>ui.getOuter(n),Wh=(n,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=ui.max(n,s,a);Ft(n,"max-height",i+"px")},zS=n=>n.offsetWidth<=0&&n.offsetHeight<=0,jh=n=>!zS(n.dom),Gh=xo("width",n=>{const s=n.dom;return Pn(n)?s.getBoundingClientRect().width:s.offsetWidth}),df=(n,s)=>Gh.set(n,s),ra=n=>Gh.get(n),sd=n=>Gh.getOuter(n),u3=(n,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Gh.max(n,s,a);Ft(n,"max-width",i+"px")},mf=(n,s)=>({left:n,top:s,translate:(i,d)=>mf(n+i,s+d)}),co=mf,Y1=n=>{const s=n.getBoundingClientRect();return co(s.left,s.top)},X1=(n,s)=>n!==void 0?n:s!==void 0?s:0,mc=n=>{const s=n.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===n.dom)return co(a.offsetLeft,a.offsetTop);const g=X1(i==null?void 0:i.pageYOffset,d.scrollTop),h=X1(i==null?void 0:i.pageXOffset,d.scrollLeft),C=X1(d.clientTop,a.clientTop),S=X1(d.clientLeft,a.clientLeft);return di(n).translate(h-S,g-C)},di=n=>{const s=n.dom,i=s.ownerDocument.body;return i===s?co(i.offsetLeft,i.offsetTop):Pn(n)?Y1(s):co(0,0)},vs=n=>{const s=n!==void 0?n.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return co(a,i)},sm=(n,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(n,s)},Cg=((n,s)=>{const a=g=>{if(!n(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>n(g)?T.from(g.dom.nodeValue):T.none();return{get:a,getOption:i,set:(g,h)=>{if(!n(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(nm,"text"),J1=n=>Cg.get(n),e2=(n,s)=>a=>F5(a)==="rtl"?s:n,F5=n=>Po(n,"direction")==="rtl"?"rtl":"ltr",El=(n,s)=>{const a=tr(n,s);return a===void 0||a===""?[]:a.split(" ")},d3=(n,s,a)=>{const d=El(n,s).concat([a]);return Nt(n,s,d.join(" ")),!0},VS=(n,s,a)=>{const i=no(El(n,s),d=>d!==a);return i.length>0?Nt(n,s,i.join(" ")):No(n,s),!1};var Tl=(n,s,a,i,d)=>n(a,i)?T.some(a):Dt(d)&&d(a)?T.none():s(a,i,d);const US=(n,s,a)=>{let i=n.dom;const d=Dt(a)?a:In;for(;i.parentNode;){i=i.parentNode;const g=We.fromDom(i);if(s(g))return T.some(g);if(d(g))break}return T.none()},Sg=(n,s,a)=>Tl((d,g)=>g(d),US,n,s,a),qh=(n,s)=>{const a=n.dom;return a.parentNode?Kh(We.fromDom(a.parentNode),i=>!un(n,i)&&s(i)):T.none()},Kh=(n,s)=>{const a=d=>s(We.fromDom(d));return vt(n.dom.childNodes,a).map(We.fromDom)},t2=(n,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=We.fromDom(i.childNodes[d]);if(s(g))return T.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return T.none()};return a(n.dom)},ZS=n=>Nc(n),$i=(n,s,a)=>US(n,i=>ln(i,s),a),m3=(n,s)=>qh(n,a=>ln(a,s)),rm=(n,s)=>Kh(n,a=>ln(a,s)),oo=(n,s)=>Nc(s,n),aa=(n,s,a)=>Tl((d,g)=>ln(d,g),$i,n,s,a),mu=(n,s)=>{n.dom.checked=s},n2=n=>n.dom.checked,am=n=>n.dom.classList!==void 0,o2=n=>El(n,"class"),WS=(n,s)=>d3(n,"class",s),fu=(n,s)=>VS(n,"class",s),gu=(n,s)=>to(o2(n),s)?fu(n,s):WS(n,s),mo=(n,s)=>{am(n)?n.dom.classList.add(s):WS(n,s)},jS=n=>{(am(n)?n.dom.classList:o2(n)).length===0&&No(n,"class")},Yo=(n,s)=>{am(n)?n.dom.classList.remove(s):fu(n,s),jS(n)},Yh=(n,s)=>{const a=am(n)?n.dom.classList.toggle(s):gu(n,s);return jS(n),a},Os=(n,s)=>am(n)&&n.dom.classList.contains(s),hu=(n,s)=>{et(s,a=>{mo(n,a)})},Vr=(n,s)=>{et(s,a=>{Yo(n,a)})},rd=(n,s)=>{et(s,a=>{Yh(n,a)})},Q1=(n,s)=>ks(s,a=>Os(n,a)),GS=n=>{const s=n.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},s2=n=>am(n)?GS(n):o2(n),f3=n=>n.dom.textContent,Fc=n=>n.dom.value,cm=(n,s)=>{if(s===void 0)throw new Error("Value.set was undefined");n.dom.value=s},or=(n,s,a)=>no(Zh(n,a),s),kr=(n,s)=>pa(s,n),e0=(n,s,a)=>Sg(n,s,a).isSome(),Xh=(n,s,a)=>aa(n,s,a).isSome(),qS=n=>Dt(n)?n:In,KS=(n,s,a)=>{let i=n.dom;const d=qS(a);for(;i.parentNode;){i=i.parentNode;const g=We.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return T.none()},Ii=(n,s,a)=>{const i=s(n),d=qS(a);return i.orThunk(()=>d(n)?T.none():KS(n,s,d))},ff={create:(n,s,a,i)=>({start:n,soffset:s,finish:a,foffset:i})},ad=da.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),g3=(n,s,a,i)=>n.fold(s,a,i),t0=n=>n.fold(an,an,an),h3=ad.before,_r=ad.on,wg=ad.after,p3={before:h3,on:_r,after:wg,cata:g3,getStart:t0},xg=da.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),n0=n=>xg.exact(n.start,n.soffset,n.finish,n.foffset),YS=n=>n.match({domRange:s=>We.fromDom(s.startContainer),relative:(s,a)=>p3.getStart(s),exact:(s,a,i,d)=>s}),r2=xg.domRange,XS=xg.relative,JS=xg.exact,o0=n=>{const s=YS(n);return Uh(s)},QS=ff.create,Eg={domRange:r2,relative:XS,exact:JS,exactFromRange:n0,getWin:o0,range:QS},b3=n=>T.from(n.getSelection()),a2=n=>{if(n.rangeCount>0){const s=n.getRangeAt(0),a=n.getRangeAt(n.rangeCount-1);return T.some(ff.create(We.fromDom(s.startContainer),s.startOffset,We.fromDom(a.endContainer),a.endOffset))}else return T.none()},v3=n=>{if(n.anchorNode===null||n.focusNode===null)return a2(n);{const s=We.fromDom(n.anchorNode),a=We.fromDom(n.focusNode);return mn(s,n.anchorOffset,a,n.focusOffset)?T.some(ff.create(s,n.anchorOffset,a,n.focusOffset)):a2(n)}},y3=n=>b3(n).filter(s=>s.rangeCount>0).bind(v3),c2=(n,s)=>{const a=B(n,s);return ha(a)},i2=(n,s)=>{const a=B(n,s);return ed(a)},C3={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},S3=(()=>{const n="[0-9]+",a="[eE]"+("[+-]?"+n),i="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",n+i+d(n)+d(a),i+n+d(a),n+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),w3=(n,s)=>js(s,a=>js(C3[a],i=>n===i)),s0=(n,s)=>T.from(S3.exec(n)).bind(i=>{const d=Number(i[1]),g=i[2];return w3(g,s)?T.some({value:d,unit:g}):T.none()}),x3=(n,s)=>s0(n,s).map(({value:a,unit:i})=>a+i),Li=n=>{const s=n===void 0?window:n;return Hr().browser.isFirefox()?T.none():T.from(s.visualViewport)},Tg=(n,s,a,i)=>({x:n,y:s,width:a,height:i,right:n+a,bottom:s+i}),r0=n=>{const s=n===void 0?window:n,a=s.document,i=vs(We.fromDom(a));return Li(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return Tg(i.left,i.top,g,h)},d=>Tg(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},Jh=(n,s)=>n.view(s).fold(ie([]),i=>{const d=n.owner(i),g=Jh(n,d);return[i].concat(g)}),E3=(n,s)=>{const a=s.owner(n),i=Jh(s,a);return T.some(i)};var cd=Object.freeze({__proto__:null,view:n=>{var a;return(n.dom===document?T.none():T.from((a=n.dom.defaultView)==null?void 0:a.frameElement)).map(We.fromDom)},owner:n=>dc(n)});const Qh=n=>{const s=oa(),a=vs(s);return E3(n,cd).fold(gn(mc,n),d=>{const g=di(n),h=ts(d,(C,S)=>{const x=di(S);return{left:C.left+x.left,top:C.top+x.top}},{left:0,top:0});return co(h.left+g.left+a.left,h.top+g.top+a.top)})},im=(n,s,a)=>({point:n,width:s,height:a}),k3=(n,s,a,i)=>({x:n,y:s,width:a,height:i}),Us=(n,s,a,i)=>({x:n,y:s,width:a,height:i,right:n+a,bottom:s+i}),Ds=n=>{const s=mc(n),a=sd(n),i=sa(n);return Us(s.left,s.top,a,i)},lm=n=>{const s=Qh(n),a=sd(n),i=sa(n);return Us(s.left,s.top,a,i)},id=(n,s)=>{const a=Math.max(n.x,s.x),i=Math.max(n.y,s.y),d=Math.min(n.right,s.right),g=Math.min(n.bottom,s.bottom),h=d-a,C=g-i;return Us(a,i,h,C)},l2=(n,s)=>po(s,(a,i)=>id(a,i),n),Ur=()=>r0(window),u2=(n,s)=>un(n.element,s.event.target),um=n=>(ic(Go(n,"position"),"fixed")?T.none():qv(n)).orThunk(()=>{const i=We.fromTag("span");return Fa(n).bind(d=>{wr(d,i);const g=qv(i);return Bi(i),g})}),a0=n=>um(n).map(mc).getOrThunk(()=>co(0,0)),Hc=(n,s)=>{const a=T.from(tr(n,"id")).getOrThunk(()=>{const i=st("aria");return Nt(s,"id",i),i});Nt(n,"aria-describedby",a)},d2=n=>{No(n,"aria-describedby")};var fc;(function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"})(fc||(fc={}));const fs=(n,s,a)=>n.stype===fc.Error?s(n.serror):a(n.svalue),c0=n=>{const s=[],a=[];return et(n,i=>{fs(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},kg=(n,s)=>n.stype===fc.Error?{stype:fc.Error,serror:s(n.serror)}:n,tw=(n,s)=>n.stype===fc.Value?{stype:fc.Value,svalue:s(n.svalue)}:n,m2=(n,s)=>n.stype===fc.Value?s(n.svalue):n,nw=(n,s)=>n.stype===fc.Error?s(n.serror):n,ow=n=>({stype:fc.Value,svalue:n}),i0=n=>({stype:fc.Error,serror:n}),Ye={fromResult:n=>n.fold(i0,ow),toResult:n=>fs(n,Bt.error,Bt.value),svalue:ow,partition:c0,serror:i0,bind:m2,bindError:nw,map:tw,mapError:kg,fold:fs},Ha=n=>bo(n)&&Vn(n).length>100?" removed due to size":JSON.stringify(n,null,2),_3=n=>{const s=n.length>10?n.slice(0,10).concat([{path:[],getErrorInfo:ie("... (only showing first ten failures)")}]):n;return De(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},ba=(n,s)=>Ye.serror([{path:n,getErrorInfo:s}]),mi=(n,s,a)=>ba(n,()=>'Could not find valid *required* value for "'+s+'" in '+Ha(a)),u0=(n,s)=>ba(n,()=>'Choice schema did not contain choice key: "'+s+'"'),A3=(n,s,a)=>ba(n,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Ha(s)),dm=(n,s)=>ba(n,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),O3=(n,s)=>ba(n,ie(s)),za=n=>{const s=(i,d)=>Ye.bindError(n(d),g=>O3(i,g)),a=ie("val");return{extract:s,toString:a}},sw=za(Ye.svalue),fi=ie(sw),ze=(n,s)=>za(a=>{const i=typeof a;return n(a)?Ye.svalue(a):Ye.serror(`Expected type: ${s} but got: ${i}`)}),f2=ze(Pa,"number"),Ks=ze(on,"string"),rn=ze(br,"boolean"),ld=ze(Dt,"function"),Ag=n=>{if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(s=>Ag(n[s]));default:return!1}},Xo=za(n=>Ag(n)?Ye.svalue(n):Ye.serror("Expected value to be acceptable for sending via postMessage")),gi=()=>({tag:"required",process:{}}),ep=n=>({tag:"defaultedThunk",process:n}),gc=n=>ep(ie(n)),$o=()=>({tag:"option",process:{}}),ud=n=>({tag:"mergeWithThunk",process:n}),Og=n=>ud(ie(n)),g2=(n,s,a,i)=>({tag:"field",key:n,newKey:s,presence:a,prop:i}),h2=(n,s)=>({tag:"custom",newKey:n,instantiator:s}),hi=(n,s,a)=>{switch(n.tag){case"field":return s(n.key,n.newKey,n.presence,n.prop);case"custom":return a(n.newKey,n.instantiator)}},tp=(n,s)=>Ye.svalue(ro(s,Kd.apply(void 0,n))),np=n=>Qc(Ye.serror,Rt)(n),op={consolidateObj:(n,s)=>{const a=Ye.partition(n);return a.errors.length>0?np(a.errors):tp(a.values,s)},consolidateArr:n=>{const s=Ye.partition(n);return s.errors.length>0?np(s.errors):Ye.svalue(s.values)}},p2=(n,s,a,i)=>bt(s,a).fold(()=>mi(n,a,s),i),d0=(n,s,a,i)=>{const d=bt(n,s).getOrThunk(()=>a(n));return i(d)},R3=(n,s,a)=>a(bt(n,s)),M3=(n,s,a,i)=>{const d=bt(n,s).map(g=>g===!0?a(n):g);return i(d)},b2=(n,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),h=C=>C.fold(()=>Ye.svalue(T.none()),S=>{const x=d.extract(s.concat([i]),S);return Ye.map(x,T.some)});switch(n.tag){case"required":return p2(s,a,i,g);case"defaultedThunk":return d0(a,i,n.process,g);case"option":return R3(a,i,h);case"defaultedOptionThunk":return M3(a,i,n.process,h);case"mergeWithThunk":return d0(a,i,ie({}),C=>{const S=ro(n.process(a),C);return g(S)})}},B3=(n,s,a)=>{const i={},d=[];for(const g of a)hi(g,(h,C,S,x)=>{const _=b2(S,n,s,h,x);Ye.fold(_,D=>{d.push(...D)},D=>{i[C]=D})},(h,C)=>{i[h]=C(s)});return d.length>0?Ye.serror(d):Ye.svalue(i)},sp=n=>({extract:(i,d)=>n().extract(i,d),toString:()=>n().toString()}),z5=n=>Vn(Fs(n,Jn)),hc=n=>{const s=Tt(n),a=ts(n,(d,g)=>hi(g,h=>ro(d,{[h]:!0}),ie(d)),{});return{extract:(d,g)=>{const h=br(g)?[]:z5(g),C=no(h,S=>!hn(a,S));return C.length===0?s.extract(d,g):dm(d,C)},toString:s.toString}},Tt=n=>({extract:(i,d)=>B3(i,d,n),toString:()=>`obj{
`+De(n,d=>hi(d,(g,h,C,S)=>g+" -> "+S.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),gs=n=>({extract:(i,d)=>{const g=De(d,(h,C)=>n.extract(i.concat(["["+C+"]"]),h));return op.consolidateArr(g)},toString:()=>"array("+n.toString()+")"}),Dg=(n,s)=>{const a=s!==void 0?s:an;return{extract:(g,h)=>{const C=[];for(const S of n){const x=S.extract(g,h);if(x.stype===fc.Value)return{stype:fc.Value,svalue:a(x.svalue)};C.push(x)}return op.consolidateArr(C)},toString:()=>"oneOf("+De(n,g=>g.toString()).join(", ")+")"}},aw=(n,s)=>{const a=(g,h)=>gs(za(n)).extract(g,h);return{extract:(g,h)=>{const C=Vn(h),S=a(g,C);return Ye.bind(S,x=>{const _=De(x,D=>g2(D,D,gi(),s));return Tt(_).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},gf=(n,s)=>{const a=Bc(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},Rg=Qc(gs,Tt),v2=(n,s,a,i)=>bt(a,i).fold(()=>A3(n,a,i),g=>g.extract(n.concat(["branch: "+i]),s)),hf=(n,s)=>({extract:(d,g)=>bt(g,n).fold(()=>u0(d,n),C=>v2(d,g,s,C)),toString:()=>"chooseOn("+n+"). Possible values: "+Vn(s)}),cw=()=>gs(sw),pu=n=>za(s=>n(s).fold(Ye.serror,Ye.svalue)),iw=(n,s)=>aw(a=>Ye.fromResult(n(a)),s),y2=(n,s,a)=>{const i=s.extract([n],a);return Ye.mapError(i,d=>({input:a,errors:d}))},qo=(n,s,a)=>Ye.toResult(y2(n,s,a)),pi=n=>n.fold(s=>{throw new Error(Mg(s))},an),va=(n,s,a)=>pi(qo(n,s,a)),Mg=n=>`Errors: 
`+_3(n.errors).join(`
`)+`

Input object: `+Ha(n.input),ya=(n,s)=>hf(n,ns(s,Tt)),pf=(n,s)=>gf(n,s),sr=g2,Ca=h2,m0=n=>pu(s=>to(n,s)?Bt.value(s):Bt.error(`Unsupported value: "${s}", choose one of "${n.join(", ")}".`)),Be=n=>sr(n,n,gi(),fi()),Va=(n,s)=>sr(n,n,gi(),s),rp=n=>Va(n,f2),as=n=>Va(n,Ks),Fi=(n,s)=>sr(n,n,gi(),m0(s)),pc=n=>Va(n,ld),N3=(n,s)=>sr(n,n,$o(),za(a=>Ye.serror("The field: "+n+" is forbidden. "+s))),bu=(n,s)=>sr(n,n,gi(),Tt(s)),lw=(n,s)=>sr(n,n,gi(),Rg(s)),Ua=(n,s)=>sr(n,n,gi(),gs(s)),Yn=n=>sr(n,n,$o(),fi()),kl=(n,s)=>sr(n,n,$o(),s),Bg=n=>kl(n,f2),cs=n=>kl(n,Ks),C2=(n,s)=>kl(n,m0(s)),S2=n=>kl(n,rn),Hi=n=>kl(n,ld),f0=(n,s)=>kl(n,gs(s)),Za=(n,s)=>kl(n,Tt(s)),P3=(n,s)=>kl(n,hc(s)),de=(n,s)=>sr(n,n,gc(s),fi()),zc=(n,s,a)=>sr(n,n,gc(s),a),ap=(n,s)=>zc(n,s,f2),Jo=(n,s)=>zc(n,s,Ks),Sa=(n,s,a)=>zc(n,s,m0(a)),Ys=(n,s)=>zc(n,s,rn),yo=(n,s)=>zc(n,s,ld),uw=(n,s)=>zc(n,s,Xo),mm=(n,s,a)=>zc(n,s,gs(a)),fm=(n,s,a)=>zc(n,s,Tt(a)),Ng=(n,s)=>{const a={};return Mo(n,(i,d)=>{to(s,d)||(a[d]=i)}),a},cp=(n,s)=>({[n]:s}),w2=n=>{const s={};return et(n,a=>{s[a.key]=a.value}),s},x2=(n,s)=>Ng(n,s),gm=(n,s)=>cp(n,s),Pg=n=>w2(n),dw=(n,s)=>n.length===0?Bt.value(s):Bt.value(ro(s,Kd.apply(void 0,n))),E2=n=>Bt.error(Rt(n)),$3=(n,s)=>{const a=dl(n);return a.errors.length>0?E2(a.errors):dw(a.values,s)},Zr=ie,bc=Zr("touchstart"),ys=Zr("touchmove"),hm=Zr("touchend"),ip=Zr("touchcancel"),Wa=Zr("mousedown"),$g=Zr("mousemove"),Zs=Zr("mouseout"),g0=Zr("mouseup"),Vc=Zr("mouseover"),zi=Zr("focusin"),T2=Zr("focusout"),rr=Zr("keydown"),Ig=Zr("keyup"),_l=Zr("input"),bf=Zr("change"),vf=Zr("click"),I3=Zr("transitioncancel"),h0=Zr("transitionend"),dd=Zr("transitionstart"),lp=Zr("selectstart"),Co=n=>ie("alloy."+n),mw={tap:Co("tap")},md=Co("focus"),Lg=Co("blur.post"),p0=Co("paste.post"),fd=Co("receive"),Ar=Co("execute"),yf=Co("focus.item"),Fg=mw.tap,b0=Co("longpress"),v0=Co("sandbox.close"),y0=Co("typeahead.cancel"),up=Co("system.init"),fw=Co("system.touchmove"),k2=Co("system.touchend"),_2=Co("system.scroll"),Hg=Co("system.resize"),Al=Co("system.attached"),bi=Co("system.detached"),gd=Co("system.dismissRequested"),gw=Co("system.repositionRequested"),C0=Co("focusmanager.shifted"),A2=Co("slotcontainer.visibility"),hw=Co("system.external.element.scroll"),O2=Co("change.tab"),S0=Co("dismiss.tab"),w0=Co("highlight"),x0=Co("dehighlight"),Ol=n=>zr(n),dp="unknown";var zg;(function(n){n[n.STOP=0]="STOP",n[n.NORMAL=1]="NORMAL",n[n.LOGGING=2]="LOGGING"})(zg||(zg={}));const Cf=pt({}),pw=(n,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();to(["mousemove","mouseover","mouseout",up()],n)||console.log(n,{event:n,time:d-i,target:s.dom,sequence:De(a,g=>to(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Ol(g.target)+")":g.outcome)})}}},Vg=(n,s,a)=>{switch(bt(Cf.get(),n).orThunk(()=>{const d=Vn(Cf.get());return ta(d,g=>n.indexOf(g)>-1?T.some(Cf.get()[g]):T.none())}).getOr(zg.NORMAL)){case zg.NORMAL:return a(E0());case zg.LOGGING:{const d=pw(n,s),g=a(d);return d.write(),g}case zg.STOP:return!0}},wa=["alloy/data/Fields","alloy/debugging/Debugging"],L3=()=>{const n=new Error;if(n.stack!==void 0){const s=n.stack.split(`
`);return vt(s,a=>a.indexOf("alloy")>0&&!js(wa,i=>a.indexOf(i)>-1)).getOr(dp)}else return dp},D2={logEventCut:Y,logEventStopped:Y,logNoParent:Y,logEventNoHandlers:Y,logEventResponse:Y,write:Y},R2=(n,s,a)=>Vg(n,s,a),E0=ie(D2),bw=ie([Be("menu"),Be("selectedMenu")]),Sf=ie([Be("item"),Be("selectedItem")]);ie(Tt(Sf().concat(bw())));const vw=ie(Tt(Sf())),mp=bu("initSize",[Be("numColumns"),Be("numRows")]),M2=()=>Va("markers",vw()),yw=()=>bu("markers",[Be("backgroundMenu")].concat(bw()).concat(Sf())),Tn=n=>bu("markers",De(n,Be)),T0=(n,s,a)=>(L3(),sr(s,s,a,pu(i=>Bt.value((...d)=>i.apply(void 0,d))))),Dn=n=>T0("onHandler",n,gc(Y)),vc=n=>T0("onKeyboardHandler",n,gc(T.none)),pm=n=>T0("onHandler",n,gi()),fp=n=>T0("onKeyboardHandler",n,gi()),Zn=(n,s)=>Ca(n,ie(s)),Cw=n=>Ca(n,an),Sw=ie(mp),F3=(n,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:wf(h.slice(0,1).concat(h.slice(3)))}),n},wf=n=>De(n,s=>ni(s,"/*")?s.substring(0,s.length-2):s),gp=(n,s)=>{const a=n.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:wf(g)}),n},ww=(n,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:wf(g.slice(1))}),n},H3=(n,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{n.apply(null,g),a=null},s)}}},z3=5,xw=400,Ew=n=>{const s=n.raw;return s.touches===void 0||s.touches.length!==1?T.none():T.some(s.touches[0])},V3=(n,s)=>{const a=Math.abs(n.clientX-s.x),i=Math.abs(n.clientY-s.y);return a>z3||i>z3},U3=n=>{const s=Zt(),a=pt(!1),i=H3(x=>{n.triggerEvent(b0(),x),a.set(!0)},xw),d=x=>(Ew(x).each(_=>{i.cancel();const D={x:_.clientX,y:_.clientY,target:x.target};i.schedule(x),a.set(!1),s.set(D)}),T.none()),g=x=>(i.cancel(),Ew(x).each(_=>{s.on(D=>{V3(_,D)&&s.clear()})}),T.none()),h=x=>{i.cancel();const _=D=>un(D.target,x.target);return s.get().filter(_).map(D=>a.get()?(x.prevent(),!1):n.triggerEvent(Fg(),x))},C=Pg([{key:bc(),value:d},{key:ys(),value:g},{key:hm(),value:h}]);return{fireIfReady:(x,_)=>bt(C,_).bind(D=>D(x))}};var xf;(function(n){n.OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi"})(xf||(xf={}));const yc="placeholder",Xs=da.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),bm=n=>Mn(n,"uiType"),Vi=(n,s,a,i)=>n.exists(d=>d!==a.owner)?Xs.single(!0,ie(a)):bt(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Vn(i)+`]
Namespace: `+n.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),vu=(n,s,a,i)=>bm(a)&&a.uiType===yc?Vi(n,s,a,i):Xs.single(!1,ie(a)),Ug=(n,s,a,i)=>vu(n,s,a,i).fold((g,h)=>{const C=bm(a)?h(s,a.config,a.validated):h(s),S=bt(C,"components").getOr([]),x=le(S,_=>Ug(n,s,_,i));return[{...C,components:x}]},(g,h)=>{if(bm(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(an)(C)}else return h(s)}),Zg=(n,s,a,i)=>le(a,d=>Ug(n,s,d,i)),k0=(n,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+n);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:ie(n),required:g,used:i,replace:d}},Z3=(n,s,a,i)=>{const d=ns(i,(h,C)=>k0(C,h)),g=Zg(n,s,a,d);return Mo(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+n.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},_0=Xs.single,B2=Xs.multiple,N2=ie(yc),hp=da.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),hd=de("factory",{sketch:an}),A0=de("schema",[]),pp=Be("name"),O0=sr("pname","pname",ep(n=>"<alloy."+st(n.name)+">"),fi()),Tw=Ca("schema",()=>[Yn("preprocess")]),yu=de("defaults",ie({})),D0=de("overrides",ie({})),kw=Tt([hd,A0,pp,O0,yu,D0]),W3=Tt([hd,A0,pp,yu,D0]),j3=Tt([hd,A0,pp,O0,yu,D0]),_w=Tt([hd,Tw,pp,Be("unit"),O0,yu,D0]),P2=n=>n.fold(T.some,T.none,T.some,T.some),Cu=n=>{const s=a=>a.name;return n.fold(s,s,s,s)},Aw=n=>n.fold(an,an,an,an),Ui=(n,s)=>a=>{const i=va("Converting part type",s,a);return n(i)},ca=Ui(hp.required,kw),vi=Ui(hp.external,W3),xa=Ui(hp.optional,j3),R0=Ui(hp.group,_w),Ef=ie("entirety");var M0=Object.freeze({__proto__:null,required:ca,external:vi,optional:xa,group:R0,asNamedPart:P2,name:Cu,asCommon:Aw,original:Ef});const $2=(n,s,a,i)=>ro(s.defaults(n,a,i),a,{uid:n.partUids[s.name]},s.overrides(n,a,i)),G3=(n,s,a)=>{const i={},d={};return et(a,g=>{g.fold(h=>{i[h.pname]=_0(!0,(C,S,x)=>h.factory.sketch($2(C,h,S,x)))},h=>{const C=s.parts[h.name];d[h.name]=ie(h.factory.sketch($2(s,h,C[Ef()]),C))},h=>{i[h.pname]=_0(!1,(C,S,x)=>h.factory.sketch($2(C,h,S,x)))},h=>{i[h.pname]=B2(!0,(C,S,x)=>{const _=C[h.name];return De(_,D=>h.factory.sketch(ro(h.defaults(C,D,x),D,h.overrides(C,D))))})})}),{internals:ie(i),externals:ie(d)}},vm=(n,s)=>{const a={};return et(s,i=>{P2(i).each(d=>{const g=ym(n,d.pname);a[d.name]=h=>{const C=va("Part: "+d.name+" in "+n,Tt(d.schema),h);return{...g,config:h,validated:C}}})}),a},ym=(n,s)=>({uiType:N2(),owner:n,name:s}),I2=(n,s,a)=>({uiType:N2(),owner:n,name:s,config:a,validated:{}}),Js=n=>le(n,s=>s.fold(T.none,T.some,T.none,T.none).map(a=>bu(a.name,a.schema.concat([Cw(Ef())]))).toArray()),bp=n=>De(n,Cu),ja=(n,s,a)=>G3(n,s,a),B0=(n,s,a)=>Z3(T.some(n),s,s.components,a),fo=(n,s,a)=>{const i=s.partUids[a];return n.getSystem().getByUid(i).toOptional()},Dl=(n,s,a)=>fo(n,s,a).getOrDie("Could not find part: "+a),pd=(n,s,a)=>{const i={},d=s.partUids,g=n.getSystem();return et(a,h=>{i[h]=ie(g.getByUid(d[h]))}),i},Rl=(n,s)=>{const a=n.getSystem();return ns(s.partUids,(i,d)=>ie(a.getByUid(i)))},Uc=n=>Vn(n.partUids),N0=(n,s,a)=>{const i={},d=s.partUids,g=n.getSystem();return et(a,h=>{i[h]=ie(g.getByUid(d[h]).getOrDie())}),i},Ow=(n,s)=>{const a=bp(s);return Pg(De(a,i=>({key:i,value:n+"-"+i})))},bd=n=>sr("partUids","partUids",ud(s=>Ow(s.uid,n)),fi());var Tf=Object.freeze({__proto__:null,generate:vm,generateOne:I2,schemas:Js,names:bp,substitutes:ja,components:B0,defaultUids:Ow,defaultUidsSchema:bd,getAllParts:Rl,getAllPartNames:Uc,getPart:fo,getPartOrDie:Dl,getParts:pd,getPartsOrDie:N0});const L2=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Cc=(n,s,a,i=1)=>{const d=n*i,g=s*i,h=S=>bt(a,S).getOr([]),C=(S,x,_)=>{const D=ge(L2,_);return{offset:co(S,x),classesOn:le(_,h),classesOff:le(D,h)}};return{southeast:()=>C(-n,s,["top","alignLeft"]),southwest:()=>C(n,s,["top","alignRight"]),south:()=>C(-n/2,s,["top","alignCentre"]),northeast:()=>C(-n,-s,["bottom","alignLeft"]),northwest:()=>C(n,-s,["bottom","alignRight"]),north:()=>C(-n/2,-s,["bottom","alignCentre"]),east:()=>C(n,-s/2,["valignCentre","left"]),west:()=>C(-n,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},Cm=()=>Cc(0,0,{}),Or=(n,s,a,i,d,g,h,C=!1)=>({x:n,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),Zi=da.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),P0=(n,s,a,i,d,g,h,C,S)=>n.fold(s,a,i,d,g,h,C,S),kf=(n,s,a,i)=>n.fold(s,s,i,i,s,i,a,a),Sm=(n,s,a,i)=>n.fold(s,i,s,i,a,a,s,i),vp=Zi.southeast,F2=Zi.southwest,$0=Zi.northeast,_f=Zi.northwest,wm=Zi.south,H2=Zi.north,yp=Zi.east,z2=Zi.west,Dw=(n,s)=>{switch(s){case 1:return n.x;case 0:return n.x+n.width;case 2:return n.y;case 3:return n.y+n.height}},Qs=(n,s)=>tn(["left","right","top","bottom"],a=>bt(s,a).map(i=>Dw(n,i))),xm=(n,s,a)=>{const i=(S,x)=>s[S].map(_=>{const D=S==="top"||S==="bottom",P=D?a.top:a.left,z=(S==="left"||S==="top"?Math.max:Math.min)(_,x)+P;return D?_s(z,n.y,n.bottom):_s(z,n.x,n.right)}).getOr(x),d=i("left",n.x),g=i("top",n.y),h=i("right",n.right),C=i("bottom",n.bottom);return Us(d,g,h-d,C-g)},Em="layout",Rw=n=>n.x,I0=(n,s)=>n.x+n.width/2-s.width/2,V2=(n,s)=>n.x+n.width-s.width,Cp=(n,s)=>n.y-s.height,L0=n=>n.y+n.height,Mw=(n,s)=>n.y+n.height/2-s.height/2,q3=n=>n.x+n.width,Sp=(n,s)=>n.x-s.width,Ws=(n,s,a)=>Or(Rw(n),L0(n),a.southeast(),vp(),"southeast",Qs(n,{left:1,top:3}),Em),Rs=(n,s,a)=>Or(V2(n,s),L0(n),a.southwest(),F2(),"southwest",Qs(n,{right:0,top:3}),Em),Dr=(n,s,a)=>Or(Rw(n),Cp(n,s),a.northeast(),$0(),"northeast",Qs(n,{left:1,bottom:2}),Em),dr=(n,s,a)=>Or(V2(n,s),Cp(n,s),a.northwest(),_f(),"northwest",Qs(n,{right:0,bottom:2}),Em),Fo=(n,s,a)=>Or(I0(n,s),Cp(n,s),a.north(),H2(),"north",Qs(n,{bottom:2}),Em),Ms=(n,s,a)=>Or(I0(n,s),L0(n),a.south(),wm(),"south",Qs(n,{top:3}),Em),Wg=(n,s,a)=>Or(q3(n),Mw(n,s),a.east(),yp(),"east",Qs(n,{left:0}),Em),U2=(n,s,a)=>Or(Sp(n,s),Mw(n,s),a.west(),z2(),"west",Qs(n,{right:1}),Em),Z2=()=>[Ws,Rs,Dr,dr,Ms,Fo,Wg,U2],Bw=()=>[Rs,Ws,dr,Dr,Ms,Fo,Wg,U2],F0=()=>[Dr,dr,Ws,Rs,Fo,Ms],W2=()=>[dr,Dr,Rs,Ws,Fo,Ms],j2=()=>[Ws,Rs,Dr,dr,Ms,Fo],H0=()=>[Rs,Ws,dr,Dr,Ms,Fo],G2="data-alloy-placement",jg=(n,s)=>{Nt(n,G2,s)},Nw=n=>xr(n,G2),wp=n=>No(n,G2),Ml="layout-inset",z0=n=>n.x,xp=(n,s)=>n.x+n.width/2-s.width/2,Gg=(n,s)=>n.x+n.width-s.width,Af=n=>n.y,Ep=(n,s)=>n.y+n.height-s.height,V0=(n,s)=>n.y+n.height/2-s.height/2,Tp=(n,s,a)=>Or(Gg(n,s),Ep(n,s),a.insetSouthwest(),_f(),"southwest",Qs(n,{right:0,bottom:3}),Ml),U0=(n,s,a)=>Or(z0(n),Ep(n,s),a.insetSoutheast(),$0(),"southeast",Qs(n,{left:1,bottom:3}),Ml),Of=(n,s,a)=>Or(Gg(n,s),Af(n),a.insetNorthwest(),F2(),"northwest",Qs(n,{right:0,top:2}),Ml),Ea=(n,s,a)=>Or(z0(n),Af(n),a.insetNortheast(),vp(),"northeast",Qs(n,{left:1,top:2}),Ml),Wr=(n,s,a)=>Or(xp(n,s),Af(n),a.insetNorth(),wm(),"north",Qs(n,{top:2}),Ml),qg=(n,s,a)=>Or(xp(n,s),Ep(n,s),a.insetSouth(),H2(),"south",Qs(n,{bottom:3}),Ml),Ce=(n,s,a)=>Or(Gg(n,s),V0(n,s),a.insetEast(),z2(),"east",Qs(n,{right:0}),Ml),kp=(n,s,a)=>Or(z0(n),V0(n,s),a.insetWest(),yp(),"west",Qs(n,{left:1}),Ml),K3=n=>{switch(n){case"north":return Wr;case"northeast":return Ea;case"northwest":return Of;case"south":return qg;case"southeast":return U0;case"southwest":return Tp;case"east":return Ce;case"west":return kp}},Ta=(n,s,a,i,d)=>Nw(i).map(K3).getOr(Wr)(n,s,a,i,d),Kg=n=>{switch(n){case"north":return qg;case"northeast":return U0;case"northwest":return Tp;case"south":return Wr;case"southeast":return Ea;case"southwest":return Of;case"east":return kp;case"west":return Ce}},Bl=(n,s,a,i,d)=>Nw(i).map(Kg).getOr(Wr)(n,s,a,i,d),q2=(n,s)=>{Wh(n,Math.floor(s))},K2=ie((n,s)=>{q2(n,s),rs(n,{"overflow-x":"hidden","overflow-y":"auto"})}),Df=ie((n,s)=>{q2(n,s)}),_p=ie((n,s)=>{u3(n,Math.floor(s))});var vd;(function(n){n.TopToBottom="toptobottom",n.BottomToTop="bottomtotop"})(vd||(vd={}));const Z0="data-alloy-vertical-dir",Y3=n=>e0(n,s=>uc(s)&&tr(s,"data-alloy-vertical-dir")===vd.BottomToTop);var jr;(function(n){n[n.HighlightMenuAndItem=0]="HighlightMenuAndItem",n[n.HighlightJustMenu=1]="HighlightJustMenu",n[n.HighlightNone=2]="HighlightNone"})(jr||(jr={}));const Nl={init:()=>Sc({readState:ie("No State required")})},Sc=n=>n,X3={can:Ot,abort:In,run:Y},Yg=n=>{if(!hn(n,"can")&&!hn(n,"abort")&&!hn(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return{...X3,...n}},Pw=(n,s)=>(...a)=>po(n,(i,d)=>i&&s(d).apply(void 0,a),!0),W0=(n,s)=>(...a)=>po(n,(i,d)=>i||s(d).apply(void 0,a),!1),J3=n=>Dt(n)?{can:Ot,abort:In,run:n}:n,$w=n=>{const s=Pw(n,d=>d.can),a=W0(n,d=>d.abort);return{can:s,abort:a,run:(...d)=>{et(n,g=>{g.run.apply(void 0,d)})}}},fn=(n,s)=>{G0(n,n.element,s,{})},xt=(n,s,a)=>{G0(n,n.element,s,a)},Xg=n=>{fn(n,Ar())},j0=(n,s,a)=>{G0(n,s,a,{})},G0=(n,s,a,i)=>{const d={target:s,...i};n.getSystem().triggerEvent(a,s,d)},Q3=(n,s,a,i)=>{const d={...i,target:s};n.getSystem().triggerEvent(a,s,d)},Y2=(n,s,a,i)=>{n.getSystem().triggerEvent(a,s,i.event)},Io=n=>Pg(n),q0=(n,s)=>({key:n,value:Yg({abort:s})}),K0=(n,s)=>({key:n,value:Yg({can:s})}),X2=n=>({key:n,value:Yg({run:(s,a)=>{a.event.prevent()}})}),Te=(n,s)=>({key:n,value:Yg({run:s})}),Jg=(n,s,a)=>({key:n,value:Yg({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),Rf=n=>s=>Te(n,s),Su=n=>s=>({key:n,value:Yg({run:(a,i)=>{u2(a,i)&&s(a,i)}})}),Wi=(n,s)=>Te(n,(a,i)=>{a.getSystem().getByUid(s).each(d=>{Y2(d,d.element,n,i)})}),wu=(n,s,a)=>{const i=s.partUids[a];return Wi(n,i)},Qg=(n,s)=>Te(n,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Ii(d.target,C=>a.getSystem().getByDom(C).toOptional(),In).getOr(a));s(a,g,i)}),Mf=n=>Te(n,(s,a)=>{a.cut()}),ek=n=>Te(n,(s,a)=>{a.stop()}),eh=(n,s)=>Su(n)(s),Eo=Su(Al()),ji=Su(bi()),J2=Su(up()),Tm=Rf(Ar()),Pl=n=>({classes:Is(n.classes)?[]:n.classes,attributes:Is(n.attributes)?{}:n.attributes,styles:Is(n.styles)?{}:n.styles}),Gr=(n,s)=>({...n,attributes:{...n.attributes,...s.attributes},styles:{...n.styles,...s.styles},classes:n.classes.concat(s.classes)}),Iw=(n,s,a)=>Tm(i=>{a(i,n,s)}),Q2=(n,s,a)=>J2((i,d)=>{a(i,n,s)}),Lw=(n,s,a,i,d,g)=>{const h=hc(n),C=Za(s,[P3("config",n)]);return Fw(h,C,s,a,i,d,g)},tk=(n,s,a,i,d,g)=>{const h=n,C=Za(s,[kl("config",n)]);return Fw(h,C,s,a,i,d,g)},nk=(n,s,a)=>F3((d,...g)=>{const h=[d].concat(g);return d.config({name:ie(n)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+a)},C=>{const S=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},a,s),ey=n=>({key:n,value:void 0}),Fw=(n,s,a,i,d,g,h)=>{const C=D=>hn(D,a)?D[a]():T.none(),S=ns(d,(D,P)=>nk(a,D,P)),_={...ns(g,(D,P)=>gp(D,P)),...S,revoke:gn(ey,a),config:D=>{const P=va(a+"-config",n,D);return{key:a,value:{config:P,me:_,configAsRaw:Bc(()=>va(a+"-config",n,D)),initialConfig:D,state:h}}},schema:ie(s),exhibit:(D,P)=>lc(C(D),bt(i,"exhibit"),(F,z)=>z(P,F.config,F.state)).getOrThunk(()=>Pl({})),name:ie(a),handlers:D=>C(D).map(P=>bt(i,"events").getOr(()=>({}))(P.config,P.state)).getOr({})};return _},Ve=n=>Pg(n),ty=hc([Be("fields"),Be("name"),de("active",{}),de("apis",{}),de("state",Nl),de("extra",{})]),mr=n=>{const s=va("Creating behaviour: "+n.name,ty,n);return Lw(s.fields,s.name,s.active,s.apis,s.extra,s.state)},ny=hc([Be("branchKey"),Be("branches"),Be("name"),de("active",{}),de("apis",{}),de("state",Nl),de("extra",{})]),oy=n=>{const s=va("Creating behaviour: "+n.name,ny,n);return tk(ya(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},sy=ie(void 0),ok=(n,s)=>{const a=Io(s);return mr({fields:[Be("enabled")],name:n,active:{events:ie(a)}})},Vt=(n,s)=>{const a=ok(n,s);return{key:n,value:{config:{},me:a,configAsRaw:ie({}),initialConfig:{},state:Nl}}},Hw=n=>({init:()=>{const a=pt(n);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(n),readState:()=>a.get()}}}),zw=(n,s)=>{s.ignore||(ur(n.element),s.onFocus(n))};var Vw=Object.freeze({__proto__:null,focus:zw,blur:(n,s)=>{s.ignore||ms(n.element)},isFocused:n=>Mi(n.element)}),Uw=Object.freeze({__proto__:null,exhibit:(n,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Pl(a)},events:n=>Io([Te(md(),(s,a)=>{zw(s,n),a.stop()})].concat(n.stopMousedown?[Te(Wa(),(s,a)=>{a.event.prevent()})]:[]))}),ak=[Dn("onFocus"),de("stopMousedown",!1),de("ignore",!1)];const Ut=mr({fields:ak,name:"focusing",active:Uw,apis:Vw}),ry=[8],yd=[9],yi=[13],Y0=[27],ka=[32],th=[37],Ap=[38],X0=[39],nh=[40],oh=ie("tooltipping.close.all"),xu=ie("dismiss.popups"),Bs=ie("reposition.popups"),Cd=ie("mouse.released"),Zw=(n,s,a)=>{const i=_e(n.slice(0,s)),d=_e(n.slice(s+1));return vt(i.concat(d),a)},ay=(n,s,a)=>{const i=_e(n.slice(0,s));return vt(i,a)},Ww=(n,s,a)=>{const i=n.slice(0,s),d=n.slice(s+1);return vt(d.concat(i),a)},ck=(n,s,a)=>{const i=n.slice(s+1);return vt(i,a)},kn=n=>s=>{const a=s.raw;return to(n,a.which)},Gi=n=>s=>ks(n,a=>a(s)),km=n=>n.raw.shiftKey===!0,U5=n=>n.raw.ctrlKey===!0,sh=ve(km),An=(n,s)=>({matches:n,classification:s}),ik=(n,s)=>vt(n,i=>i.matches(s)).map(i=>i.classification),lk=(n,s,a,i)=>{const d=kr(n.element,"."+s.highlightClass);et(d,g=>{js(i,C=>un(C.element,g))||(Yo(g,s.highlightClass),n.getSystem().getByDom(g).each(C=>{s.onDehighlight(n,C),fn(C,x0())}))})},Z5=(n,s,a)=>lk(n,s,a,[]),W5=(n,s,a,i)=>{Rp(n,s,a,i)&&(Yo(i.element,s.highlightClass),s.onDehighlight(n,i),fn(i,x0()))},Op=(n,s,a,i)=>{lk(n,s,a,[i]),Rp(n,s,a,i)||(mo(i.element,s.highlightClass),s.onHighlight(n,i),fn(i,w0()))},uk=(n,s,a)=>{J0(n,s).each(i=>{Op(n,s,a,i)})},dk=(n,s,a)=>{cy(n,s).each(i=>{Op(n,s,a,i)})},Dp=(n,s,a,i)=>{fk(n,s,a,i).fold(d=>{throw d},d=>{Op(n,s,a,d)})},mk=(n,s,a,i)=>{const d=qw(n,s);vt(d,i).each(h=>{Op(n,s,a,h)})},Rp=(n,s,a,i)=>Os(i.element,s.highlightClass),jw=(n,s,a)=>oo(n.element,"."+s.highlightClass).bind(i=>n.getSystem().getByDom(i).toOptional()),fk=(n,s,a,i)=>{const d=kr(n.element,"."+s.itemClass);return T.from(d[i]).fold(()=>Bt.error(new Error("No element found with index "+i)),n.getSystem().getByDom)},J0=(n,s,a)=>oo(n.element,"."+s.itemClass).bind(i=>n.getSystem().getByDom(i).toOptional()),cy=(n,s,a)=>{const i=kr(n.element,"."+s.itemClass);return(i.length>0?T.some(i[i.length-1]):T.none()).bind(g=>n.getSystem().getByDom(g).toOptional())},iy=(n,s,a,i)=>{const d=kr(n.element,"."+s.itemClass);return zn(d,h=>Os(h,s.highlightClass)).bind(h=>{const C=_i(h,i,0,d.length-1);return n.getSystem().getByDom(d[C]).toOptional()})},Gw=(n,s,a)=>iy(n,s,a,-1),gk=(n,s,a)=>iy(n,s,a,1),qw=(n,s,a)=>{const i=kr(n.element,"."+s.itemClass);return Ai(De(i,d=>n.getSystem().getByDom(d).toOptional()))};var ly=Object.freeze({__proto__:null,dehighlightAll:Z5,dehighlight:W5,highlight:Op,highlightFirst:uk,highlightLast:dk,highlightAt:Dp,highlightBy:mk,isHighlighted:Rp,getHighlighted:jw,getFirst:J0,getLast:cy,getPrevious:Gw,getNext:gk,getCandidates:qw}),Kw=[Be("highlightClass"),Be("itemClass"),Dn("onHighlight"),Dn("onDehighlight")];const $n=mr({fields:Kw,name:"highlighting",apis:ly}),Yw=(n,s,a)=>{s.exists(d=>a.exists(g=>un(g,d)))||xt(n,C0(),{prevFocus:s,newFocus:a})},uy=()=>{const n=a=>zs(a.element);return{get:n,set:(a,i)=>{const d=n(a);a.getSystem().triggerFocus(i,a.element);const g=n(a);Yw(a,d,g)}}},Q0=()=>{const n=a=>$n.getHighlighted(a).map(i=>i.element);return{get:n,set:(a,i)=>{const d=n(a);a.getSystem().getByDom(i).fold(Y,h=>{$n.highlight(a,h)});const g=n(a);Yw(a,d,g)}}},Sd=(n,s,a,i,d)=>{const g=()=>n.concat([de("focusManager",uy()),zc("focusInside","onFocus",pu(x=>to(["onFocus","onEnterOrSpace","onApi"],x)?Bt.value(x):Bt.error("Invalid value for focusInside"))),Zn("handler",S),Zn("state",s),Zn("sendFocusIn",d)]),h=(x,_,D,P,F)=>{const z=D(x,_,P,F);return ik(z,_.event).bind(G=>G(x,_,P,F))},S={schema:g,processKey:h,toEvents:(x,_)=>{const D=x.focusInside!==xf.OnFocusMode?T.none():d(x).map(z=>Te(md(),(G,J)=>{z(G,x,_),J.stop()})),P=(z,G)=>{const J=kn(ka.concat(yi))(G.event);x.focusInside===xf.OnEnterOrSpaceMode&&J&&u2(z,G)&&d(x).each(W=>{W(z,x,_),G.stop()})},F=[Te(rr(),(z,G)=>{h(z,G,a,x,_).fold(()=>{P(z,G)},J=>{G.stop()})}),Te(Ig(),(z,G)=>{h(z,G,i,x,_).each(J=>{G.stop()})})];return Io(D.toArray().concat(F))}};return S},dy=n=>{const s=[Yn("onEscape"),Yn("onEnter"),de("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),de("firstTabstop",0),de("useTabstopAt",Ot),Yn("visibilitySelector")].concat([n]),a=(W,ee)=>{const re=W.visibilitySelector.bind(fe=>aa(ee,fe)).getOr(ee);return nr(re)>0},i=(W,ee)=>{const re=kr(W.element,ee.selector),fe=no(re,be=>a(ee,be));return T.from(fe[ee.firstTabstop])},d=(W,ee)=>ee.focusManager.get(W).bind(re=>aa(re,ee.selector)),g=(W,ee)=>a(W,ee)&&W.useTabstopAt(ee),h=(W,ee,re)=>{i(W,ee).each(fe=>{ee.focusManager.set(W,fe)})},C=(W,ee,re,fe,be)=>be(ee,re,Ke=>g(fe,Ke)).fold(()=>fe.cyclic?T.some(!0):T.none(),Ke=>(fe.focusManager.set(W,Ke),T.some(!0))),S=(W,ee,re,fe)=>{const be=no(kr(W.element,re.selector),Ke=>a(re,Ke));return d(W,re).bind(Ke=>zn(be,gn(un,Ke)).bind($e=>C(W,be,$e,re,fe)))},x=(W,ee,re)=>{const fe=re.cyclic?Zw:ay;return S(W,ee,re,fe)},_=(W,ee,re)=>{const fe=re.cyclic?Ww:ck;return S(W,ee,re,fe)},D=W=>Gv(W).bind(xn).exists(ee=>un(ee,W)),P=(W,ee,re)=>d(W,re).filter(fe=>!re.useTabstopAt(fe)).bind(fe=>(D(fe)?x:_)(W,ee,re)),F=(W,ee,re)=>re.onEnter.bind(fe=>fe(W,ee)),z=(W,ee,re)=>(W.getSystem().broadcastOn([oh()],{closedTooltip:()=>{ee.stop()}}),ee.isStopped()?T.none():re.onEscape.bind(fe=>fe(W,ee))),G=ie([An(Gi([km,kn(yd)]),x),An(kn(yd),_),An(Gi([sh,kn(yi)]),F)]),J=ie([An(kn(Y0),z),An(kn(yd),P)]);return Sd(s,Nl.init,G,J,()=>T.some(h))};var hk=dy(Ca("cyclic",In)),Xw=dy(Ca("cyclic",Ot));const rh=n=>na("input")(n)&&tr(n,"type")!=="radio"||na("textarea")(n),Jw=(n,s,a)=>(j0(n,a,Ar()),T.some(!0)),Mp=(n,s,a)=>rh(a)&&kn(ka)(s.event)?T.none():Jw(n,s,a),Bp=(n,s)=>T.some(!0),my=[de("execute",Mp),de("useSpace",!1),de("useEnter",!0),de("useControlEnter",!1),de("useDown",!1)],_m=(n,s,a)=>a.execute(n,s,n.element),Qw=(n,s,a,i)=>{const d=a.useSpace&&!rh(n.element)?ka:[],g=a.useEnter?yi:[],h=a.useDown?nh:[],C=d.concat(g).concat(h);return[An(kn(C),_m)].concat(a.useControlEnter?[An(Gi([U5,kn(yi)]),_m)]:[])},ex=(n,s,a,i)=>a.useSpace&&!rh(n.element)?[An(kn(ka),Bp)]:[];var tx=Sd(my,Nl.init,Qw,ex,()=>T.none());const nx=()=>{const n=Zt();return Sc({readState:()=>n.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{n.set({numRows:d,numColumns:g})},getNumRows:()=>n.get().map(d=>d.numRows),getNumColumns:()=>n.get().map(d=>d.numColumns)})};var ox=Object.freeze({__proto__:null,flatgrid:nx,init:n=>n.state(n)});const eb=n=>(s,a,i,d)=>{const g=n(s.element);return ob(g,s,a,i,d)},tb=(n,s)=>{const a=e2(n,s);return eb(a)},Np=(n,s)=>{const a=e2(s,n);return eb(a)},nb=n=>(s,a,i,d)=>ob(n,s,a,i,d),ob=(n,s,a,i,d)=>i.focusManager.get(s).bind(h=>n(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),lt=nb,Am=nb,Eu=nb,Pp=(n,s)=>zn(n,s).map(a=>({index:a,candidates:n})),sx=(n,s,a)=>{const i=h=>un(h,s),d=kr(n,a),g=no(d,jh);return Pp(g,i)},fy=(n,s)=>zn(n,a=>un(s,a)),gy=(n,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<n.length?T.some(n[C]):T.none()})},rx=(n,s,a,i,d)=>gy(n,s,i,(g,h)=>{const S=g===a-1?n.length-g*i:i,x=_i(h,d,0,S-1);return T.some({row:g,column:x})}),ax=(n,s,a,i,d)=>gy(n,s,i,(g,h)=>{const C=_i(g,d,0,a-1),x=C===a-1?n.length-C*i:i,_=_s(h,0,x-1);return T.some({row:C,column:_})}),cx=(n,s,a,i)=>rx(n,s,a,i,1),sb=(n,s,a,i)=>rx(n,s,a,i,-1),Ns=(n,s,a,i)=>ax(n,s,a,i,-1),qi=(n,s,a,i)=>ax(n,s,a,i,1),rb=[Be("selector"),de("execute",Mp),vc("onEscape"),de("captureTab",!1),Sw()],ix=(n,s,a)=>{oo(n.element,s.selector).each(i=>{s.focusManager.set(n,i)})},lx=(n,s)=>s.focusManager.get(n).bind(a=>aa(a,s.selector)),ux=(n,s,a,i)=>lx(n,a).bind(d=>a.execute(n,s,d)),ab=n=>(s,a,i,d)=>sx(s,a,i.selector).bind(g=>n(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),hy=(n,s,a)=>a.captureTab?T.some(!0):T.none(),dx=(n,s,a)=>a.onEscape(n,s),mx=ab(sb),$p=ab(cx),py=ab(Ns),cb=ab(qi),by=ie([An(kn(th),tb(mx,$p)),An(kn(X0),Np(mx,$p)),An(kn(Ap),lt(py)),An(kn(nh),Am(cb)),An(Gi([km,kn(yd)]),hy),An(Gi([sh,kn(yd)]),hy),An(kn(ka.concat(yi)),ux)]),pk=ie([An(kn(Y0),dx),An(kn(ka),Bp)]);var fx=Sd(rb,nx,by,pk,()=>T.some(ix));const gx=(n,s,a,i,d)=>{const g=C=>Oi(C)==="button"&&tr(C,"disabled")==="disabled",h=(C,S,x)=>d(C,S,i,0,x.length-1,x[S],_=>g(x[_])?h(C,_,x):T.from(x[_]));return sx(n,a,s).bind(C=>{const S=C.index,x=C.candidates;return h(S,S,x)})},ib=(n,s,a,i)=>gx(n,s,a,i,(d,g,h,C,S,x,_)=>{const D=_s(g+h,C,S);return D===d?T.from(x):_(D)}),Bf=(n,s,a,i)=>gx(n,s,a,i,(d,g,h,C,S,x,_)=>{const D=_i(g,h,C,S);return D===d?T.none():_(D)}),hx=[Be("selector"),de("getInitial",T.none),de("execute",Mp),vc("onEscape"),de("executeOnMove",!1),de("allowVertical",!0),de("allowHorizontal",!0),de("cycles",!0)],px=(n,s)=>s.focusManager.get(n).bind(a=>aa(a,s.selector)),lb=(n,s,a)=>px(n,a).bind(i=>a.execute(n,s,i)),bk=(n,s,a)=>{s.getInitial(n).orThunk(()=>oo(n.element,s.selector)).each(i=>{s.focusManager.set(n,i)})},vk=(n,s,a)=>(a.cycles?Bf:ib)(n,a.selector,s,-1),Nf=(n,s,a)=>(a.cycles?Bf:ib)(n,a.selector,s,1),vy=n=>(s,a,i,d)=>n(s,a,i,d).bind(()=>i.executeOnMove?lb(s,a,i):T.some(!0)),yk=(n,s,a)=>a.onEscape(n,s),Ck=(n,s,a,i)=>{const d=[...a.allowHorizontal?th:[]].concat(a.allowVertical?Ap:[]),g=[...a.allowHorizontal?X0:[]].concat(a.allowVertical?nh:[]);return[An(kn(d),vy(tb(vk,Nf))),An(kn(g),vy(Np(vk,Nf))),An(kn(yi),lb),An(kn(ka),lb)]},bx=ie([An(kn(ka),Bp),An(kn(Y0),yk)]);var Sk=Sd(hx,Nl.init,Ck,bx,()=>T.some(bk));const yy=(n,s,a)=>T.from(n[s]).bind(i=>T.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),ub=(n,s,a,i)=>{const g=n[s].length,h=_i(a,i,0,g-1);return yy(n,s,h)},Cy=(n,s,a,i)=>{const d=_i(a,i,0,n.length-1),g=n[d].length,h=_s(s,0,g-1);return yy(n,d,h)},Tu=(n,s,a,i)=>{const g=n[s].length,h=_s(a+i,0,g-1);return yy(n,s,h)},vx=(n,s,a,i)=>{const d=_s(a+i,0,n.length-1),g=n[d].length,h=_s(s,0,g-1);return yy(n,d,h)},db=(n,s,a)=>ub(n,s,a,1),wk=(n,s,a)=>ub(n,s,a,-1),Om=(n,s,a)=>Cy(n,a,s,-1),xk=(n,s,a)=>Cy(n,a,s,1),Ek=(n,s,a)=>Tu(n,s,a,-1),G5=(n,s,a)=>Tu(n,s,a,1),q5=(n,s,a)=>vx(n,a,s,-1),ah=(n,s,a)=>vx(n,a,s,1),Ip=[bu("selectors",[Be("row"),Be("cell")]),de("cycles",!0),de("previousSelector",T.none),de("execute",Mp)],Sy=(n,s,a)=>{s.previousSelector(n).orThunk(()=>{const d=s.selectors;return oo(n.element,d.cell)}).each(d=>{s.focusManager.set(n,d)})},Tk=(n,s,a)=>zs(n.element).bind(i=>a.execute(n,s,i)),kk=(n,s)=>De(n,a=>kr(a,s.selectors.cell)),mb=(n,s)=>(a,i,d)=>{const g=d.cycles?n:s;return aa(i,d.selectors.row).bind(h=>{const C=kr(h,d.selectors.cell);return fy(C,i).bind(S=>{const x=kr(a,d.selectors.row);return fy(x,h).bind(_=>{const D=kk(x,d);return g(D,_,S).map(P=>P.cell)})})})},yx=mb(wk,Ek),Cx=mb(db,G5),Lp=mb(Om,q5),fb=mb(xk,ah),wy=ie([An(kn(th),tb(yx,Cx)),An(kn(X0),Np(yx,Cx)),An(kn(Ap),lt(Lp)),An(kn(nh),Am(fb)),An(kn(ka.concat(yi)),Tk)]),Fp=ie([An(kn(ka),Bp)]);var xy=Sd(Ip,Nl.init,wy,Fp,()=>T.some(Sy));const _k=[Be("selector"),de("execute",Mp),de("moveOnTab",!1)],Hp=(n,s,a)=>a.focusManager.get(n).bind(i=>a.execute(n,s,i)),Sx=(n,s,a)=>{oo(n.element,s.selector).each(i=>{s.focusManager.set(n,i)})},gb=(n,s,a)=>Bf(n,a.selector,s,-1),hb=(n,s,a)=>Bf(n,a.selector,s,1),Pf=(n,s,a,i)=>a.moveOnTab?Eu(gb)(n,s,a,i):T.none(),Ak=(n,s,a,i)=>a.moveOnTab?Eu(hb)(n,s,a,i):T.none(),ku=ie([An(kn(Ap),Eu(gb)),An(kn(nh),Eu(hb)),An(Gi([km,kn(yd)]),Pf),An(Gi([sh,kn(yd)]),Ak),An(kn(yi),Hp),An(kn(ka),Hp)]),Ok=ie([An(kn(ka),Bp)]);var wx=Sd(_k,Nl.init,ku,Ok,()=>T.some(Sx));const Dk=[vc("onSpace"),vc("onEnter"),vc("onShiftEnter"),vc("onLeft"),vc("onRight"),vc("onTab"),vc("onShiftTab"),vc("onUp"),vc("onDown"),vc("onEscape"),de("stopSpaceKeyup",!1),Yn("focusIn")],K5=(n,s,a)=>[An(kn(ka),a.onSpace),An(Gi([sh,kn(yi)]),a.onEnter),An(Gi([km,kn(yi)]),a.onShiftEnter),An(Gi([km,kn(yd)]),a.onShiftTab),An(Gi([sh,kn(yd)]),a.onTab),An(kn(Ap),a.onUp),An(kn(nh),a.onDown),An(kn(th),a.onLeft),An(kn(X0),a.onRight),An(kn(ka),a.onSpace)],pb=(n,s,a)=>[...a.stopSpaceKeyup?[An(kn(ka),Bp)]:[],An(kn(Y0),a.onEscape)];var Rk=Sd(Dk,Nl.init,K5,pb,n=>n.focusIn);const Mk=hk.schema(),Bk=Xw.schema(),Ey=Sk.schema(),Nk=fx.schema(),xx=xy.schema(),Ty=tx.schema(),Pk=wx.schema(),$k=Rk.schema();var ky=Object.freeze({__proto__:null,acyclic:Mk,cyclic:Bk,flow:Ey,flatgrid:Nk,matrix:xx,execution:Ty,menu:Pk,special:$k});const Ex=n=>hn(n,"setGridSize"),wt=oy({branchKey:"mode",branches:ky,name:"keying",active:{events:(n,s)=>n.handler.toEvents(n,s)},apis:{focusIn:(n,s,a)=>{s.sendFocusIn(s).fold(()=>{n.getSystem().triggerFocus(n.element,n.element)},i=>{i(n,s,a)})},setGridSize:(n,s,a,i,d)=>{Ex(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:ox}),zp=st("alloy-premade"),Tx=n=>(Object.defineProperty(n.element.dom,zp,{value:n.uid,writable:!0}),gm(zp,n)),Ik=n=>Mn(n.dom,zp),_y=n=>bt(n,zp),Vp=n=>ww((s,...a)=>n(s.getApis(),s,...a),n),bb=n=>n.getSystem().isConnected(),Up=n=>{fn(n,bi());const s=n.components();et(s,Up)},ch=n=>{const s=n.components();et(s,ch),fn(n,Al())},Ay=(n,s)=>{n.getSystem().addToWorld(s),Pn(n.element)&&ch(s)},Oy=n=>{Up(n),n.getSystem().removeFromWorld(n)},kx=(n,s)=>{wr(n.element,s.element)},Dy=n=>{et(n.components(),s=>Bi(s.element)),j1(n.element),n.syncComponents()},_x=(n,s,a)=>{const i=n.components();Dy(n);const d=a(s),g=ge(i,d);et(g,h=>{Up(h),n.getSystem().removeFromWorld(h)}),et(d,h=>{bb(h)?kx(n,h):(n.getSystem().addToWorld(h),kx(n,h),Pn(n.element)&&ch(h))}),n.syncComponents()},ih=(n,s,a)=>{const i=n.components(),d=le(s,C=>_y(C).toArray());et(i,C=>{to(d,C)||Oy(C)});const g=a(s),h=ge(i,g);et(h,C=>{bb(C)&&Oy(C)}),et(g,C=>{bb(C)||Ay(n,C)}),n.syncComponents()},wd=(n,s)=>{lh(n,s,wr)},lh=(n,s,a)=>{n.getSystem().addToWorld(s),a(n.element,s.element),Pn(n.element)&&ch(s),n.syncComponents()},xd=n=>{Up(n),Bi(n.element),n.getSystem().removeFromWorld(n)},Ed=n=>{const s=Fa(n.element).bind(a=>n.getSystem().getByDom(a).toOptional());xd(n),s.each(a=>{a.syncComponents()})},Ax=n=>{const s=n.components();et(s,xd),j1(n.element),n.syncComponents()},Zp=(n,s)=>{Ox(n,s,wr)},Ki=(n,s)=>{Ox(n,s,LS)},Ox=(n,s,a)=>{a(n,s.element);const i=bl(s.element);et(i,d=>{s.getByDom(d).each(ch)})},Dx=n=>{const s=bl(n.element);et(s,a=>{n.getByDom(a).each(Up)}),Bi(n.element)},Ry=(n,s,a)=>om(n,s).map(d=>{if(a.exists(h=>!un(h,d))){const h=a.map(Oi).getOr("span"),C=We.fromTag(h);return cf(d,C),C}else return d}),My=(n,s,a)=>{a.fold(()=>wr(n,s),i=>{un(i,s)||(cf(i,s),Bi(i))})},Rx=(n,s,a)=>{const i=De(s,a),d=bl(n);return et(d.slice(i.length),Bi),i},Mx=(n,s,a,i)=>{const d=om(n,s),g=i(a,d),h=Ry(n,s,d);return My(n,g.element,h),g},Lk=(n,s,a)=>Rx(n,s,(i,d)=>Mx(n,d,i,a)),Bx=(n,s)=>Rx(n,s,(a,i)=>{const d=om(n,i);return My(n,a,d),a}),$f=(n,s)=>{const a=Hs(s),i=Sr(a).bind(g=>{const h=C=>un(g,C);return h(s)?T.some(s):t2(s,h)}),d=n(s);return i.each(g=>{Sr(a).filter(h=>un(h,g)).fold(()=>{ur(g)},Y)}),d},By=(n,s)=>{$f(()=>{_x(n,s,()=>De(s,n.getSystem().build))},n.element)},Nx=(n,s)=>{$f(()=>{ih(n,s,()=>Lk(n.element,s,n.getSystem().buildOrPatch))},n.element)},Ny=(n,s,a,i)=>{Oy(s);const d=Mx(n.element,a,i,n.getSystem().buildOrPatch);Ay(n,d),n.syncComponents()},Py=(n,s,a)=>{const i=n.getSystem().build(a);lh(n,i,s)},$y=(n,s,a,i)=>{Ed(s),Py(n,(d,g)=>Xv(d,g,a),i)},Fk=(n,s,a,i)=>(s.reuseDom?Nx:By)(n,i),If=(n,s,a,i)=>{Py(n,wr,i)},Lf=(n,s,a,i)=>{Py(n,Yv,i)},vb=(n,s,a,i)=>{const d=yb(n);vt(d,h=>un(i.element,h.element)).each(Ed)},yb=(n,s)=>n.components(),Px=(n,s,a,i,d)=>{const g=yb(n);return T.from(g[i]).map(h=>(d.fold(()=>Ed(h),C=>{(s.reuseDom?Ny:$y)(n,h,i,C)}),h))};var $x=Object.freeze({__proto__:null,append:If,prepend:Lf,remove:vb,replaceAt:Px,replaceBy:(n,s,a,i,d)=>{const g=yb(n);return zn(g,i).bind(h=>Px(n,s,a,h,d))},set:Fk,contents:yb});const jt=mr({fields:[Ys("reuseDom",!0)],name:"replacing",apis:$x}),Cb=(n,s,a)=>un(s,n.element)&&!un(s,a),Zc=Io([K0(md(),(n,s)=>{const a=s.event,i=a.originator,d=a.target;return Cb(n,i,d)?(console.warn(md()+` did not get interpreted by the desired target. 
Originator: `+Ol(i)+`
Target: `+Ol(d)+`
Check the `+md()+" event handlers"),!1):!0})]);var Wp=Object.freeze({__proto__:null,events:Zc});const zk=ie("alloy-id-"),Sb=ie("data-alloy-id"),Vk=zk(),Iy=Sb(),Ly=(n,s)=>{const a=st(Vk+n);return jp(s,a),a},jp=(n,s)=>{Object.defineProperty(n.dom,Iy,{value:s,writable:!0})},$l=n=>{const s=uc(n)?n.dom[Iy]:null;return T.from(s)},uh=n=>st(n),Uk=an,Ff=n=>{const s=d=>`The component must be in a context to execute: ${d}`+(n?`
`+Ol(n().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:ie("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:In}},Gp=Ff(),wb=(n,s)=>{const a=De(s,d=>Za(d.name(),[Be("config"),de("state",Nl)])),i=qo("component.behaviours",Tt(a),n.behaviours).fold(d=>{throw new Error(Mg(d)+`
Complete spec:
`+JSON.stringify(n,null,2))},an);return{list:s,data:ns(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return ie(g)})}},er=n=>n.list,Zk=n=>n.data,Fy=(n,s)=>{const a={};return Mo(n,(i,d)=>{Mo(i,(g,h)=>{const C=bt(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},Dm=(n,s,a,i)=>{const d={...s};et(a,_=>{d[_.name()]=_.exhibit(n,i)});const g=Fy(d,(_,D)=>({name:_,modification:D})),h=_=>ts(_,(D,P)=>({...P.modification,...D}),{}),C=ts(g.classes,(_,D)=>D.modification.concat(_),[]),S=h(g.attributes),x=h(g.styles);return Pl({classes:C,attributes:S,styles:x})},_u=(n,s,a,i)=>{try{const d=cn(a,(g,h)=>{const C=g[s],S=h[s],x=i.indexOf(C),_=i.indexOf(S);if(x===-1)throw new Error("The ordering for "+n+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(_===-1)throw new Error("The ordering for "+n+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));return x<_?-1:_<x?1:0});return Bt.value(d)}catch(d){return Bt.error([d])}},Hy=(n,s)=>({handler:n,purpose:s}),Ix=(n,s)=>({cHandler:n,purpose:s}),Wk=(n,s)=>Ix(gn.apply(void 0,[n.handler].concat(s)),n.purpose),xb=n=>n.cHandler,qp=(n,s)=>({name:n,handler:s}),Rm=(n,s)=>{const a={};return et(n,i=>{a[i.name()]=i.handlers(s)}),a},Eb=(n,s,a)=>{const i={...a,...Rm(s,n)};return Fy(i,qp)},Tb=(n,s,a,i)=>{const d=Eb(n,a,i);return kb(d,s)},Mm=n=>{const s=J3(n);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Kp=(n,s)=>Bt.error(["The event ("+n+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(De(s,a=>a.name),null,2)]),zy=(n,s,a)=>{const i=s[a];return i?_u("Event: "+a,"name",n,i).map(d=>{const g=De(d,h=>h.handler);return $w(g)}):Kp(a,n)},kb=(n,s)=>{const a=Bo(n,(i,d)=>(i.length===1?Bt.value(i[0].handler):zy(i,s,d)).map(h=>{const C=Mm(h),S=i.length>1?no(s[d],x=>js(i,_=>_.name===x)).join(" > "):i[0].name;return gm(d,Hy(C,S))}));return $3(a,{})},Il="alloy.base.behaviour",Lx=Tt([sr("dom","dom",gi(),Tt([Be("tag"),de("styles",{}),de("classes",[]),de("attributes",{}),Yn("value"),Yn("innerHtml")])),Be("components"),Be("uid"),de("events",{}),de("apis",{}),sr("eventOrder","eventOrder",Og({[Ar()]:["disabling",Il,"toggling","typeaheadevents"],[md()]:[Il,"focusing","keying"],[up()]:[Il,"disabling","toggling","representing","tooltipping"],[_l()]:[Il,"representing","streaming","invalidating"],[bi()]:[Il,"representing","item-events","toolbar-button-events","tooltipping"],[Wa()]:["focusing",Il,"item-type-events"],[bc()]:["focusing",Il,"item-type-events"],[Vc()]:["item-type-events","tooltipping"],[fd()]:["receiving","reflecting","tooltipping"]}),fi()),Yn("domModification")]),Au=n=>qo("custom.definition",Lx,n),Vy=n=>({...n.dom,uid:n.uid,domChildren:De(n.components,s=>s.element)}),_b=n=>n.domModification.fold(()=>Pl({}),Pl),dh=n=>n.events,Yp=(n,s)=>{const a=Vn(n),i=Vn(s),d=ge(i,a),g=us(n,(h,C)=>!Mn(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},Ab=(n,s)=>{const{class:a,style:i,...d}=uf(s),{toSet:g,toRemove:h}=Yp(n.attributes,d),C=()=>{et(h,re=>No(s,re)),Jv(s,g)},S=Vs(s),{toSet:x,toRemove:_}=Yp(n.styles,S),D=()=>{et(_,re=>Cn(s,re)),rs(s,x)},P=s2(s),F=ge(P,n.classes),z=ge(n.classes,P),G=()=>{hu(s,z),Vr(s,F)},J=re=>{wl(s,re)},W=()=>{const re=n.domChildren;Bx(s,re)},ee=()=>{const re=s,fe=n.value.getOrUndefined();fe!==Fc(re)&&cm(re,fe??"")};return C(),G(),D(),n.innerHtml.fold(W,J),ee(),s},jk=n=>{const s=We.fromTag(n.tag);Jv(s,n.attributes),hu(s,n.classes),rs(s,n.styles),n.innerHtml.each(i=>wl(s,i));const a=n.domChildren;return FS(s,a),n.value.each(i=>{cm(s,i)}),s},Fx=(n,s)=>{try{const a=Ab(n,s);return T.some(a)}catch{return T.none()}},Ob=n=>n.innerHtml.isSome()&&n.domChildren.length>0,Gk=(n,s)=>{const a=d=>Oi(d)===n.tag&&!Ob(n)&&!Ik(d),i=s.filter(a).bind(d=>Fx(n,d)).getOrThunk(()=>jk(n));return jp(i,n.uid),i},Uy=n=>{const s=bt(n,"behaviours").getOr({});return le(Vn(s),a=>{const i=s[a];return Jn(i)?[i.me]:[]})},Ll=(n,s)=>wb(n,s),Zy=n=>{const s=Uy(n);return Ll(n,s)},qk=(n,s,a)=>{const i=Vy(n),d=_b(n),g={"alloy.base.modification":d},h=s.length>0?Dm(a,g,s,i):d;return Gr(i,h)},Hx=(n,s,a)=>{const i={"alloy.base.behaviour":dh(n)};return Tb(a,n.eventOrder,s,i).getOrDie()},zx=(n,s)=>{const a=()=>re,i=pt(Gp),d=pi(Au(n)),g=Zy(n),h=er(g),C=Zk(g),S=qk(d,h,C),x=Gk(S,s),_=Hx(d,h,C),D=pt(d.components),P=fe=>{i.set(fe)},F=()=>{i.set(Ff(a))},z=()=>{const fe=bl(x),be=le(fe,Ke=>i.get().getByDom(Ke).fold(()=>[],yn));D.set(be)},G=fe=>{const be=C;return(Dt(be[fe.name()])?be[fe.name()]:()=>{throw new Error("Could not find "+fe.name()+" in "+JSON.stringify(n,null,2))})()},J=fe=>Dt(C[fe.name()]),W=()=>d.apis,ee=fe=>C[fe]().map(be=>be.state.readState()).getOr("not enabled"),re={uid:n.uid,getSystem:i.get,config:G,hasConfigured:J,spec:n,readState:ee,getApis:W,connect:P,disconnect:F,element:x,syncComponents:z,components:D.get,events:_};return re},Vx=(n,s)=>{const a=bt(n,"components").getOr([]);return s.fold(()=>De(a,m),i=>De(a,(d,g)=>l(d,om(i,g))))},Kk=(n,s)=>{const{events:a,...i}=Uk(n),d=Vx(i,s),g={...i,events:{...Wp,...a},components:d};return Bt.value(zx(g,s))},Do=n=>{const s=We.fromText(n);return Wc({element:s})},Wc=n=>{const s=va("external.component",hc([Be("element"),Yn("uid")]),n),a=pt(Ff()),i=C=>{a.set(C)},d=()=>{a.set(Ff(()=>h))},g=s.uid.getOrThunk(()=>uh("external"));jp(s.element,g);const h={uid:g,getSystem:a.get,config:T.none,hasConfigured:In,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:n,readState:ie("No state"),syncComponents:Y,components:ie([]),events:{}};return Tx(h)},mh=uh,Ci=n=>Mn(n,"uid"),l=(n,s)=>_y(n).getOrThunk(()=>{const a=Ci(n)?n:{uid:mh(""),...n};return Kk(a,s).getOrDie()}),m=n=>l(n,T.none()),p=Tx;var M=Object.freeze({__proto__:null,block:(n,s,a,i)=>{Nt(n.element,"aria-busy",!0);const d=s.getRoot(n).getOr(n),g=Ve([wt.config({mode:"special",onTab:()=>T.some(!0),onShiftTab:()=>T.some(!0)}),Ut.config({})]),h=i(d,g),C=d.getSystem().build(h);jt.append(d,p(C)),C.hasConfigured(wt)&&s.focus&&wt.focusIn(C),a.isBlocked()||s.onBlock(n),a.blockWith(()=>jt.remove(d,C))},unblock:(n,s,a)=>{No(n.element,"aria-busy"),a.isBlocked()&&s.onUnblock(n),a.clear()},isBlocked:(n,s,a)=>a.isBlocked()}),L=[yo("getRoot",T.none),Ys("focus",!0),Dn("onBlock"),Dn("onUnblock")],Q=Object.freeze({__proto__:null,init:()=>{const n=fg(),s=a=>{n.set({destroy:a})};return Sc({readState:n.isSet,blockWith:s,clear:n.clear,isBlocked:n.isSet})}});const ce=mr({fields:L,name:"blocking",apis:M,state:Q});var at=Object.freeze({__proto__:null,getCurrent:(n,s,a)=>s.find(n)});const tt=[Be("find")],Le=mr({fields:tt,name:"composing",apis:at});var Mt=Object.freeze({__proto__:null,getCoupled:(n,s,a,i)=>a.getOrCreate(n,s,i),getExistingCoupled:(n,s,a,i)=>a.getExisting(n,s,i)}),Jt=[Va("others",iw(Bt.value,fi()))],Wn=Object.freeze({__proto__:null,init:()=>{const n={},s=(g,h)=>{if(Vn(g.others).length===0)throw new Error("Cannot find any known coupled components");return bt(n,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const x=bt(h.others,C).getOrDie("No information found for coupled component: "+C)(g),_=g.getSystem().build(x);return n[C]=_,_}),i=(g,h,C)=>s(h,C).orThunk(()=>(bt(h.others,C).getOrDie("No information found for coupled component: "+C),T.none())),d=ie({});return Sc({readState:d,getExisting:i,getOrCreate:a})}});const Gt=mr({fields:Jt,name:"coupling",apis:Mt,state:Wn}),Xn=["input","button","textarea","select"],ws=(n,s,a)=>{(s.disabled()?_a:fr)(n,s)},jc=(n,s)=>s.useNative===!0&&to(Xn,Oi(n.element)),Hf=n=>Er(n.element,"disabled"),Bm=n=>{Nt(n.element,"disabled","disabled")},zf=n=>{No(n.element,"disabled")},io=n=>tr(n.element,"aria-disabled")==="true",is=n=>{Nt(n.element,"aria-disabled","true")},Ga=n=>{Nt(n.element,"aria-disabled","false")},_a=(n,s,a)=>{s.disableClass.each(d=>{mo(n.element,d)}),(jc(n,s)?Bm:is)(n),s.onDisabled(n)},fr=(n,s,a)=>{s.disableClass.each(d=>{Yo(n.element,d)}),(jc(n,s)?zf:Ga)(n),s.onEnabled(n)},Td=(n,s)=>jc(n,s)?Hf(n):io(n);var Wy=Object.freeze({__proto__:null,enable:fr,disable:_a,isDisabled:Td,onLoad:ws,set:(n,s,a,i)=>{(i?_a:fr)(n,s)}}),qr=Object.freeze({__proto__:null,exhibit:(n,s)=>Pl({classes:s.disabled()?s.disableClass.toArray():[]}),events:(n,s)=>Io([q0(Ar(),(a,i)=>Td(a,n)),Q2(n,s,ws)])}),Ux=[yo("disabled",In),de("useNative",!0),Yn("disableClass"),Dn("onDisabled"),Dn("onEnabled")];const ft=mr({fields:Ux,name:"disabling",active:qr,apis:Wy}),qa=(n,s,a,i,d)=>{const g=h=>h+"px";return{position:n,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},Yk=n=>({...n,position:T.some(n.position)}),Zx=(n,s)=>{Tr(n,Yk(s))},Rb=(n,s)=>{const a=n.element;mo(a,s.transitionClass),Yo(a,s.fadeOutClass),mo(a,s.fadeInClass),s.onShow(n)},jy=(n,s)=>{const a=n.element;mo(a,s.transitionClass),Yo(a,s.fadeInClass),mo(a,s.fadeOutClass),s.onHide(n)},Vf=(n,s)=>n.y<s.bottom&&n.bottom>s.y,Wx=(n,s)=>n.y>=s.y,Gy=(n,s)=>n.bottom<=s.bottom,qy=(n,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-n.y}),jx=(n,s,a)=>({location:"bottom",leftX:s,bottomY:n.bottom-a.bounds.bottom}),Ky=n=>n.box.x-n.win.x,JL=(n,s,a)=>{const i=s.win,d=s.box,g=Ky(s);return ta(n,h=>{switch(h){case"bottom":return Gy(d,a.bounds)?T.none():T.some(jx(i,g,a));case"top":return Wx(d,a.bounds)?T.none():T.some(qy(i,g,a));default:return T.none()}}).getOr({location:"no-dock"})},QL=(n,s,a)=>ks(n,i=>{switch(i){case"bottom":return Gy(s,a.bounds);case"top":return Wx(s,a.bounds)}}),eF=(n,s)=>{const a=s.optScrollEnv.fold(ie(n.bounds.y),i=>i.scrollElmTop+(n.bounds.y-i.currentScrollTop));return co(n.bounds.x,a)},Yy=(n,s)=>{const a=s.optScrollEnv.fold(ie(n.y),i=>n.y+i.currentScrollTop-i.scrollElmTop);return co(n.x,a)},Xy=(n,s,a)=>a.getInitialPos().map(i=>{const d=eF(i,s);return{box:Us(d.left,d.top,ra(n),nr(n)),location:i.location}}),Y5=(n,s,a,i,d)=>{const g=Yy(s,a),h=Us(g.left,g.top,s.width,s.height);i.setInitialPos({style:Vs(n),position:Po(n,"position")||"static",bounds:h,location:d.location})},X5=(n,s,a,i,d)=>{i.getInitialPos().fold(()=>Y5(n,s,a,i,d),()=>Y)},J5=(n,s,a)=>a.getInitialPos().bind(i=>{switch(a.clearInitialPos(),i.position){case"static":return T.some({morph:"static"});case"absolute":const d=um(n).getOr(Lc()),g=Ds(d),h=d.dom.scrollTop??0;return T.some({morph:"absolute",positionCss:qa("absolute",bt(i.style,"left").map(C=>s.x-g.x),bt(i.style,"top").map(C=>s.y-g.y+h),bt(i.style,"right").map(C=>g.right-s.right),bt(i.style,"bottom").map(C=>g.bottom-s.bottom))});default:return T.none()}}),Q5=(n,s,a)=>Xy(n,s,a).filter(({box:i})=>QL(a.getModes(),i,s)).bind(({box:i})=>J5(n,i,a)),Jy=n=>{switch(n.location){case"top":return T.some({morph:"fixed",positionCss:qa("fixed",T.some(n.leftX),T.some(n.topY),T.none(),T.none())});case"bottom":return T.some({morph:"fixed",positionCss:qa("fixed",T.some(n.leftX),T.none(),T.none(),T.some(n.bottomY))});default:return T.none()}},Mb=(n,s,a)=>{const i=Ds(n),d=Ur(),g=JL(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(Y5(n,i,s,a,g),Jy(g)):T.none()},Xk=(n,s,a)=>Q5(n,s,a).orThunk(()=>s.optScrollEnv.bind(i=>Xy(n,s,a)).bind(({box:i,location:d})=>{const g=Ur(),h=Ky({win:g,box:i}),C=d==="top"?qy(g,h,s):jx(g,h,s);return Jy(C)})),tF=(n,s,a)=>{const i=n.element;return ic(Go(i,"position"),"fixed")?Xk(i,s,a):Mb(i,s,a)},nF=(n,s,a)=>{const i=n.element;return Xy(i,s,a).bind(({box:d})=>J5(i,d,a))},eM=(n,s,a,i)=>{const d=Ds(n),g=Ur(),h=Ky({win:g,box:d}),C=i(g,h,s);return C.location==="bottom"||C.location==="top"?(X5(n,d,s,a,C),Jy(C)):T.none()},Uf=(n,s,a)=>{a.setDocked(!1),et(["left","right","top","bottom","position"],i=>Cn(n.element,i)),s.onUndocked(n)},Qy=(n,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),Zx(n.element,i),(d?s.onDocked:s.onUndocked)(n)},Gx=(n,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(n).each(h=>{const C=Vf(h,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(hu(n.element,[g.fadeOutClass]),g.onHide(n)):(C?Rb:jy)(n,g))})})},eC=(n,s,a,i,d)=>{Gx(n,s,a,i,!0),Qy(n,s,a,d.positionCss)},tM=(n,s,a,i,d)=>{switch(d.morph){case"static":return Uf(n,s,a);case"absolute":return Qy(n,s,a,d.positionCss);case"fixed":return eC(n,s,a,i,d)}},qx=(n,s,a)=>{const i=s.lazyViewport(n);Gx(n,s,a,i),tF(n,i,a).each(d=>{tM(n,s,a,i,d)})},Jk=(n,s,a)=>{const i=n.element;a.setDocked(!1);const d=s.lazyViewport(n);nF(n,d,a).each(g=>{switch(g.morph){case"static":{Uf(n,s,a);break}case"absolute":{Qy(n,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Vr(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(n)}),Kx(n,s,a)},Kx=(n,s,a)=>{n.getSystem().isConnected()&&qx(n,s,a)},nM=(n,s,a)=>{a.isDocked()&&Jk(n,s,a)},_d=n=>(s,a,i)=>{const d=a.lazyViewport(s);eM(s.element,d,i,n).each(h=>{eC(s,a,i,d,h)})},oF=_d(qy),sF=_d(jx);var Qk=Object.freeze({__proto__:null,refresh:Kx,reset:nM,isDocked:(n,s,a)=>a.isDocked(),getModes:(n,s,a)=>a.getModes(),setModes:(n,s,a,i)=>a.setModes(i),forceDockToTop:oF,forceDockToBottom:sF}),oM=Object.freeze({__proto__:null,events:(n,s)=>Io([eh(h0(),(a,i)=>{n.contextual.each(d=>{Os(a.element,d.transitionClass)&&(Vr(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),Te(_2(),(a,i)=>{Kx(a,n,s)}),Te(hw(),(a,i)=>{Kx(a,n,s)}),Te(Hg(),(a,i)=>{nM(a,n,s)})])}),e_=[Za("contextual",[as("fadeInClass"),as("fadeOutClass"),as("transitionClass"),pc("lazyContext"),Dn("onShow"),Dn("onShown"),Dn("onHide"),Dn("onHidden")]),yo("lazyViewport",()=>({bounds:Ur(),optScrollEnv:T.none()})),mm("modes",["top","bottom"],Ks),Dn("onDocked"),Dn("onUndocked")],sM=Object.freeze({__proto__:null,init:n=>{const s=pt(!1),a=pt(!0),i=Zt(),d=pt(n.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Sc({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Ho=mr({fields:e_,name:"docking",active:oM,apis:Qk,state:sM}),t_=da.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Yx=n=>s=>s.translate(-n.left,-n.top),nC=n=>s=>s.translate(n.left,n.top),Nm=n=>(s,a)=>po(n,(i,d)=>d(i),co(s,a)),Xx=(n,s,a)=>n.fold(Nm([nC(a),Yx(s)]),Nm([Yx(s)]),Nm([])),Bb=(n,s,a)=>n.fold(Nm([nC(a)]),Nm([]),Nm([nC(s)])),n_=(n,s,a)=>n.fold(Nm([]),Nm([Yx(a)]),Nm([nC(s),Yx(a)])),rM=(n,s,a,i,d,g)=>{const h=Bb(n,d,g),C=Bb(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=i},aM=(n,s,a,i,d,g)=>{const h=Bb(n,d,g),C=Bb(s,d,g),S=Math.abs(h.left-C.left),x=Math.abs(h.top-C.top);return co(S,x)},o_=(n,s,a)=>{const i=n.fold((d,g)=>({position:T.some("absolute"),left:T.some(d+"px"),top:T.some(g+"px")}),(d,g)=>({position:T.some("absolute"),left:T.some(d-a.left+"px"),top:T.some(g-a.top+"px")}),(d,g)=>({position:T.some("fixed"),left:T.some(d+"px"),top:T.some(g+"px")}));return{right:T.none(),bottom:T.none(),...i}},Jx=(n,s,a)=>n.fold((i,d)=>Pm(i+s,d+a),(i,d)=>Du(i+s,d+a),(i,d)=>Xp(i+s,d+a)),Qx=(n,s,a,i)=>{const d=(g,h)=>(C,S)=>{const x=g(s,a,i);return h(C.getOr(x.left),S.getOr(x.top))};return n.fold(d(n_,Pm),d(Bb,Du),d(Xx,Xp))},Pm=t_.offset,Du=t_.absolute,Xp=t_.fixed,cM=(n,s)=>{const a=tr(n,s);return Is(a)?NaN:parseInt(a,10)},rF=(n,s)=>{const a=n.element,i=cM(a,s.leftAttr),d=cM(a,s.topAttr);return isNaN(i)||isNaN(d)?T.none():T.some(co(i,d))},aF=(n,s,a)=>{const i=n.element;Nt(i,s.leftAttr,a.left+"px"),Nt(i,s.topAttr,a.top+"px")},iM=(n,s)=>{const a=n.element;No(a,s.leftAttr),No(a,s.topAttr)},cF=(n,s,a,i)=>rF(n,s).fold(()=>a,d=>Xp(d.left+i.left,d.top+i.top)),lM=(n,s,a,i,d,g)=>{const h=cF(n,s,a,i),C=s.mustSnap?dM(n,s,h,d,g):Nb(n,s,h,d,g),S=Xx(h,d,g);return aF(n,s,S),C.fold(()=>({coord:Xp(S.left,S.top),extra:T.none()}),x=>({coord:x.output,extra:x.extra}))},iF=(n,s)=>{iM(n,s)},uM=(n,s,a,i)=>ta(n,d=>{const g=d.sensor;return rM(s,g,d.range.left,d.range.top,a,i)?T.some({output:Qx(d.output,s,a,i),extra:d.extra}):T.none()}),dM=(n,s,a,i,d)=>{const g=s.getSnapPoints(n);return uM(g,a,i,d).orThunk(()=>po(g,(S,x)=>{const _=x.sensor,D=aM(a,_,x.range.left,x.range.top,i,d);return S.deltas.fold(()=>({deltas:T.some(D),snap:T.some(x)}),P=>{const F=(D.left+D.top)/2,z=(P.left+P.top)/2;return F<=z?{deltas:T.some(D),snap:T.some(x)}:S})},{deltas:T.none(),snap:T.none()}).snap.map(S=>({output:Qx(S.output,a,i,d),extra:S.extra})))},Nb=(n,s,a,i,d)=>{const g=s.getSnapPoints(n);return uM(g,a,i,d)},mM=(n,s,a)=>({coord:Qx(n.output,n.output,s,a),extra:n.extra});var uF=Object.freeze({__proto__:null,snapTo:(n,s,a,i)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=dc(n.element),h=vs(g),C=a0(d),S=mM(i,h,C),x=o_(S.coord,h,C);Tr(d,x)}}});const Rr=(n,s)=>fm(n,{},De(s,a=>N3(a.name(),"Cannot configure "+a.name()+" for "+n)).concat([Ca("dump",an)])),oC=n=>n.dump,la=(n,s)=>({...Ve(s),...n.dump}),Ru={field:Rr,augment:la,get:oC},dF=(n,s)=>(n.length>0?[bu("parts",n)]:[]).concat([Be("uid"),de("dom",{}),de("components",[]),Cw("originalSpec"),de("debug.sketcher",{})]).concat(s),fM=(n,s,a,i,d)=>{const g=dF(i,d);return va(n+" [SpecSchema]",hc(g.concat(s)),a)},mF=(n,s,a,i)=>{const d=tE(i),g=fM(n,s,d,[],[]);return a(g,d)},s_=(n,s,a,i,d)=>{const g=tE(d),h=Js(a),C=bd(a),S=fM(n,s,g,h,[C]),x=ja(n,S,a),_=B0(n,S,x.internals());return i(S,_,g,x.externals())},eE=n=>Mn(n,"uid"),tE=n=>eE(n)?n:{...n,uid:uh("uid")},fF=n=>n.uid!==void 0,hY=hc([Be("name"),Be("factory"),Be("configFields"),de("apis",{}),de("extraApis",{})]),gM=hc([Be("name"),Be("factory"),Be("configFields"),Be("partFields"),de("apis",{}),de("extraApis",{})]),Yi=n=>{const s=va("Sketcher for "+n.name,hY,n),a=g=>mF(s.name,s.configFields,s.factory,g),i=ns(s.apis,Vp),d=ns(s.extraApis,(g,h)=>gp(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},wc=n=>{const s=va("Sketcher for "+n.name,gM,n),a=h=>s_(s.name,s.configFields,s.partFields,s.factory,h),i=vm(s.name,s.partFields),d=ns(s.apis,Vp),g=ns(s.extraApis,(h,C)=>gp(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},Ad=Yi({name:"Container",factory:n=>{const{attributes:s,...a}=n.dom;return{uid:n.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:n.components,behaviours:oC(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[de("components",[]),Rr("containerBehaviours",[]),de("events",{}),de("domModification",{}),de("eventOrder",{})]}),r_="data-initial-z-index",gF=n=>{Fa(n.element).filter(uc).each(s=>{xr(s,r_).fold(()=>Cn(s,"z-index"),a=>Ft(s,"z-index",a)),No(s,r_)})},hF=n=>{Fa(n.element).filter(uc).each(s=>{Go(s,"z-index").each(a=>{Nt(s,r_,a)}),Ft(s,"z-index",Po(n.element,"z-index"))})},hM=(n,s)=>{n.getSystem().addToGui(s),hF(s)},Pb=n=>{gF(n),n.getSystem().removeFromGui(n)},nE=(n,s,a)=>n.getSystem().build(Ad.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var pF=Za("snaps",[Be("getSnapPoints"),Dn("onSensor"),Be("leftAttr"),Be("topAttr"),de("lazyViewport",Ur),de("mustSnap",!1)]);const sC=[de("useFixed",In),Be("blockerClass"),de("getTarget",an),de("onDrag",Y),de("repositionTarget",!0),de("onDrop",Y),yo("getBounds",Ur),pF],oE=n=>yr(Go(n,"left"),Go(n,"top"),Go(n,"position"),(s,a,i)=>(i==="fixed"?Xp:Pm)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=mc(n);return Du(s.left,s.top)}),a_=(n,s,a,i,d)=>{const g=d.bounds,h=Bb(s,a,i),C=_s(h.left,g.x,g.x+g.width-d.width),S=_s(h.top,g.y,g.y+g.height-d.height),x=Du(C,S);return s.fold(()=>{const _=n_(x,a,i);return Pm(_.left,_.top)},ie(x),()=>{const _=Xx(x,a,i);return Xp(_.left,_.top)})},bF=(n,s,a,i,d,g,h)=>{const C=s.fold(()=>{const S=Jx(a,g.left,g.top),x=Xx(S,i,d);return Xp(x.left,x.top)},S=>{const x=lM(n,S,a,g,i,d);return x.extra.each(_=>{S.onSensor(n,_)}),x.coord});return a_(n,C,i,d,h)},vF=(n,s,a,i)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=dc(n.element),h=vs(g),C=a0(d),S=oE(d),x=bF(n,s.snaps,S,h,C,i,a),_=o_(x,h,C);Tr(d,_)}s.onDrag(n,d,i)},pM=(n,s)=>({bounds:n.getBounds(),height:sa(s.element),width:sd(s.element)}),c_=(n,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>pM(s,n));g.each(C=>{vF(n,s,h,C)})},bM=(n,s,a,i)=>{s.each(Pb),a.snaps.each(g=>{iF(n,g)});const d=a.getTarget(n.element);i.reset(),a.onDrop(n,d)},i_=n=>(s,a)=>{const i=d=>{a.setStartData(pM(s,d))};return Io([Te(_2(),d=>{a.getStartData().each(()=>i(d))}),...n(s,a,i)])},yF=n=>Io([Te(Wa(),n.forceDrop),Te(g0(),n.drop),Te($g(),(s,a)=>{n.move(a.event)}),Te(Zs(),n.delayDrop)]);var SF=Object.freeze({__proto__:null,getData:n=>T.from(co(n.x,n.y)),getDelta:(n,s)=>co(s.left-n.left,s.top-n.top)});const vM=(n,s,a)=>[Te(Wa(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>bM(i,T.some(x),n,s),C=H3(h,200),S={drop:h,delayDrop:C.schedule,forceDrop:h,move:D=>{C.cancel(),c_(i,n,s,SF,D)}},x=nE(i,n.blockerClass,yF(S));(()=>{a(i),hM(i,x)})()})],wF=[...sC,Zn("dragger",{handlers:i_(vM)})],xF=n=>Io([Te(bc(),n.forceDrop),Te(hm(),n.drop),Te(ip(),n.drop),Te(ys(),(s,a)=>{n.move(a.event)})]),$b=n=>{const s=n[0];return T.some(co(s.clientX,s.clientY))};var sE=Object.freeze({__proto__:null,getData:n=>{const a=n.raw.touches;return a.length===1?$b(a):T.none()},getDelta:(n,s)=>co(s.left-n.left,s.top-n.top)});const CM=(n,s,a)=>{const i=Zt(),d=g=>{bM(g,i.get(),n,s),i.clear()};return[Te(bc(),(g,h)=>{h.stop();const C=()=>d(g),S={drop:C,delayDrop:Y,forceDrop:C,move:D=>{c_(g,n,s,sE,D)}},x=nE(g,n.blockerClass,xF(S));i.set(x),(()=>{a(g),hM(g,x)})()}),Te(ys(),(g,h)=>{h.stop(),c_(g,n,s,sE,h.event)}),Te(hm(),(g,h)=>{h.stop(),d(g)}),Te(ip(),d)]},ct=[...sC,Zn("dragger",{handlers:i_(CM)})],Jp=(n,s,a)=>[...vM(n,s,a),...CM(n,s,a)],EF=[...sC,Zn("dragger",{handlers:i_(Jp)})];var kF=Object.freeze({__proto__:null,mouse:wF,touch:ct,mouseOrTouch:EF}),wM=Object.freeze({__proto__:null,init:()=>{let n=T.none(),s=T.none();const a=()=>{n=T.none(),s=T.none()},i=(S,x)=>{const _=n.map(D=>S.getDelta(D,x));return n=T.some(x),_},d=(S,x)=>S.getData(x).bind(_=>i(S,_)),g=S=>{s=T.some(S)},h=()=>s,C=ie({});return Sc({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const Zf=oy({branchKey:"mode",branches:kF,name:"dragging",active:{events:(n,s)=>n.dragger.handlers(n,s)},extra:{snap:n=>({sensor:n.sensor,range:n.range,output:n.output,extra:T.from(n.extra)})},state:wM,apis:uF}),AF=["input","textarea"],d_=n=>{const s=Oi(n);return to(AF,s)},xM=(n,s)=>{const a=s.getRoot(n).getOr(n.element);Yo(a,s.invalidClass),s.notify.each(i=>{d_(n.element)&&Nt(n.element,"aria-invalid",!1),i.getContainer(n).each(d=>{wl(d,i.validHtml)}),i.onValid(n)})},EM=(n,s,a,i)=>{const d=s.getRoot(n).getOr(n.element);mo(d,s.invalidClass),s.notify.each(g=>{d_(n.element)&&Nt(n.element,"aria-invalid",!0),g.getContainer(n).each(h=>{wl(h,i)}),g.onInvalid(n,i)})},m_=(n,s,a)=>s.validator.fold(()=>Wo.pure(Bt.value(!0)),i=>i.validate(n)),f_=(n,s,a)=>(s.notify.each(i=>{i.onValidate(n)}),m_(n,s).map(i=>n.getSystem().isConnected()?i.fold(d=>(EM(n,s,a,d),Bt.error(d)),d=>(xM(n,s),Bt.value(d))):Bt.error("No longer in system")));var g_=Object.freeze({__proto__:null,markValid:xM,markInvalid:EM,query:m_,run:f_,isInvalid:(n,s)=>{const a=s.getRoot(n).getOr(n.element);return Os(a,s.invalidClass)}}),rE=Object.freeze({__proto__:null,events:(n,s)=>n.validator.map(a=>Io([Te(a.onEvent,i=>{f_(i,n,s).get(an)})].concat(a.validateOnLoad?[Eo(i=>{f_(i,n,s).get(Y)})]:[]))).getOr({})}),aE=[Be("invalidClass"),de("getRoot",T.none),Za("notify",[de("aria","alert"),de("getContainer",T.none),de("validHtml",""),Dn("onValid"),Dn("onInvalid"),Dn("onValidate")]),Za("validator",[Be("validate"),de("onEvent","input"),de("validateOnLoad",!0)])];const Ib=(n,s,a)=>{s.store.manager.onLoad(n,s,a)},Od=(n,s,a)=>{s.store.manager.onUnload(n,s,a)};var yY=Object.freeze({__proto__:null,onLoad:Ib,onUnload:Od,setValue:(n,s,a,i)=>{s.store.manager.setValue(n,s,a,i)},getValue:(n,s,a)=>s.store.manager.getValue(n,s,a),getState:(n,s,a)=>a}),RF=Object.freeze({__proto__:null,events:(n,s)=>{const a=n.resetOnDom?[Eo((i,d)=>{Ib(i,n,s)}),ji((i,d)=>{Od(i,n,s)})]:[Q2(n,s,Ib)];return Io(a)}});const cE=()=>{const n=pt(null),s=()=>({mode:"memory",value:n.get()}),a=()=>n.get()===null,i=()=>{n.set(null)};return Sc({set:n.set,get:n.get,isNotSet:a,clear:i,readState:s})},MF=()=>Sc({readState:Y}),TM=()=>{const n=pt({}),s=pt({});return Sc({readState:()=>({mode:"dataset",dataByValue:n.get(),dataByText:s.get()}),lookup:h=>bt(n.get(),h).orThunk(()=>bt(s.get(),h)),update:h=>{const C=n.get(),S=s.get(),x={},_={};et(h,D=>{x[D.value]=D,bt(D,"meta").each(P=>{bt(P,"text").each(F=>{_[F]=D})})}),n.set({...C,...x}),s.set({...S,..._})},clear:()=>{n.set({}),s.set({})}})};var kM=Object.freeze({__proto__:null,memory:cE,dataset:TM,manual:MF,init:n=>n.store.manager.state(n)});const _M=(n,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(n,i),s.onSetValue(n,i)},BF=(n,s,a)=>{const i=s.store,d=i.getDataKey(n);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},AM=(n,s,a)=>{s.store.initialValue.each(d=>{_M(n,s,a,d)})},OM=(n,s,a)=>{a.clear()};var NF=[Yn("initialValue"),Be("getFallbackEntry"),Be("getDataKey"),Be("setValue"),Zn("manager",{setValue:_M,getValue:BF,onLoad:AM,onUnload:OM,state:TM})];const DM=(n,s,a)=>s.store.getValue(n),PF=(n,s,a,i)=>{s.store.setValue(n,i),s.onSetValue(n,i)},h_=(n,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(n,i)})};var RM=[Be("getValue"),de("setValue",Y),Yn("initialValue"),Zn("manager",{setValue:PF,getValue:DM,onLoad:h_,onUnload:Y,state:Nl.init})];const MM=(n,s,a,i)=>{a.set(i),s.onSetValue(n,i)},BM=(n,s,a)=>a.get(),$F=(n,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},IF=(n,s,a)=>{a.clear()};var LF=[Yn("initialValue"),Zn("manager",{setValue:MM,getValue:BM,onLoad:$F,onUnload:IF,state:cE})],FF=[zc("store",{mode:"memory"},ya("mode",{memory:LF,manual:RM,dataset:NF})),Dn("onSetValue"),de("resetOnDom",!1)];const it=mr({fields:FF,name:"representing",active:RF,apis:yY,extra:{setValueFrom:(n,s)=>{const a=it.getValue(s);it.setValue(n,a)}},state:kM}),Xi=mr({fields:aE,name:"invalidating",active:rE,apis:g_,extra:{validation:n=>s=>{const a=it.getValue(s);return Wo.pure(n(a))}}});var NM=Object.freeze({__proto__:null,exhibit:(n,s)=>Pl({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const iE=da.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),p_=(n,s,a,i,d,g)=>{const h=s.rect,C=h.x-a,S=h.y-i,x=h.width,_=h.height,D=d-(C+x),P=g-(S+_),F=T.some(C),z=T.some(S),G=T.some(D),J=T.some(P),W=T.none();return P0(s.direction,()=>qa(n,F,z,W,W),()=>qa(n,W,z,G,W),()=>qa(n,F,W,W,J),()=>qa(n,W,W,G,J),()=>qa(n,F,z,W,W),()=>qa(n,F,W,W,J),()=>qa(n,F,z,W,W),()=>qa(n,W,z,G,W))},b_=(n,s)=>n.fold(()=>{const a=s.rect;return qa("absolute",T.some(a.x),T.some(a.y),T.none(),T.none())},(a,i,d,g)=>p_("absolute",s,a,i,d,g),(a,i,d,g)=>p_("fixed",s,a,i,d,g)),v_=(n,s)=>{const a=gn(Qh,s),i=n.fold(a,a,()=>{const h=vs();return Qh(s).translate(-h.left,-h.top)}),d=sd(s),g=sa(s);return Us(i.left,i.top,d,g)},zF=(n,s)=>s.fold(()=>n.fold(Ur,Ur,Us),a=>n.fold(ie(a),ie(a),()=>{const i=PM(n,a.x,a.y);return Us(i.left,i.top,a.width,a.height)})),PM=(n,s,a)=>{const i=co(s,a),d=()=>{const g=vs();return i.translate(-g.left,-g.top)};return n.fold(ie(i),ie(i),d)},y_=(n,s,a,i)=>n.fold(s,a,i);iE.none;const VF=iE.relative,lE=iE.fixed,UF=(n,s)=>({anchorBox:n,origin:s}),$M=(n,s)=>UF(n,s),Mr=da.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),ZF=(n,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,right:S,bottom:x,width:_,height:D}=n,P=h>=a&&h<=d,F=C>=i&&C<=g,z=P&&F,G=S<=d&&S>=a,J=x<=g&&x>=i,W=G&&J,ee=Math.min(_,h>=a?d-h:S-a),re=Math.min(D,C>=i?g-C:x-i);return{originInBounds:z,sizeInBounds:W,visibleW:ee,visibleH:re}},IM=(n,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,width:S,height:x}=n,_=Math.max(a,d-S),D=Math.max(i,g-x),P=_s(h,a,_),F=_s(C,i,D),z=Math.min(P+S,d)-P,G=Math.min(F+x,g)-F;return Us(P,F,z,G)},LM=(n,s,a)=>{const i=ie(s.bottom-a.y),d=ie(a.bottom-s.y),g=kf(n,d,d,i),h=ie(s.right-a.x),C=ie(a.right-s.x);return{maxWidth:Sm(n,C,C,h),maxHeight:g}},WF=(n,s,a,i)=>{const d=n.bubble,g=d.offset,h=xm(i,n.restriction,g),C=n.x+g.left,S=n.y+g.top,x=Us(C,S,s,a),{originInBounds:_,sizeInBounds:D,visibleW:P,visibleH:F}=ZF(x,h),z=_&&D,G=z?x:IM(x,h),J=G.width>0&&G.height>0,{maxWidth:W,maxHeight:ee}=LM(n.direction,G,i),re={rect:G,maxHeight:ee,maxWidth:W,direction:n.direction,placement:n.placement,classes:{on:d.classesOn,off:d.classesOff},layout:n.label,testY:S};return z||n.alwaysFit?Mr.fit(re):Mr.nofit(re,P,F,J)},FM=(n,s,a,i,d,g)=>{const h=i.width,C=i.height,S=(_,D,P,F,z)=>{const G=_(a,i,d,n,g),J=WF(G,h,C,g);return J.fold(ie(J),(W,ee,re,fe)=>(z===fe?re>F||ee>P:!z&&fe)?J:Mr.nofit(D,P,F,z))};return po(s,(_,D)=>{const P=gn(S,D);return _.fold(ie(_),P)},Mr.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:vp(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(an,an)},C_=["top","bottom","right","left"],uE="data-alloy-transition-timer",jF=(n,s)=>Q1(n,s.classes),GF=(n,s,a)=>a.exists(i=>{const d=n.mode;return d==="all"?!0:i[d]!==s[d]}),qF=(n,s)=>{const a=i=>parseFloat(i).toFixed(3);return rc(s,(i,d)=>{const g=n[d].map(a),h=i.map(a);return!Cs(g,h)}).isSome()},HM=n=>{const s=g=>{const C=Po(n,g).split(/\s*,\s*/);return no(C,ou)},a=g=>{if(on(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return ni(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return po(d,(g,h,C)=>{const S=a(i[C])+a(h);return Math.max(g,S)},0)},KF=(n,s)=>{const a=ps(),i=ps();let d;const g=x=>{const _=x.raw.pseudoElement??"";return un(x.target,n)&&ga(_)&&to(C_,x.raw.propertyName)},h=x=>{if(oc(x)||g(x)){a.clear(),i.clear();const _=x==null?void 0:x.raw.type;(oc(_)||_===h0())&&(clearTimeout(d),No(n,uE),Vr(n,s.classes))}},C=Kn(n,dd(),x=>{g(x)&&(C.unbind(),a.set(Kn(n,h0(),h)),i.set(Kn(n,I3(),h)))}),S=HM(n);window.requestAnimationFrame(()=>{d=setTimeout(h,S+17),Nt(n,uE,d)})},YF=(n,s)=>{hu(n,s.classes),xr(n,uE).each(a=>{clearTimeout(parseInt(a,10)),No(n,uE)}),KF(n,s)},zM=(n,s,a,i,d,g)=>{const h=GF(i,d,g);if(h||jF(n,i)){Ft(n,"position",a.position);const C=v_(s,n),S=b_(s,{...d,rect:C}),x=tn(C_,_=>S[_]);qF(a,x)&&(Tr(n,x),h&&YF(n,i),Pi(n))}else Vr(n,i.classes)},VM=n=>({width:Math.ceil(sd(n)),height:sa(n)}),UM=(n,s,a,i)=>{Cn(s,"max-height"),Cn(s,"max-width");const d=VM(s);return FM(s,i.preference,n,d,a,i.bounds)},XF=(n,s)=>{const a=s.classes;Vr(n,a.off),hu(n,a.on)},JF=(n,s,a)=>{const i=a.maxHeightFunction;i(n,s.maxHeight)},QF=(n,s,a)=>{const i=a.maxWidthFunction;i(n,s.maxWidth)},eH=(n,s,a)=>{const i=b_(a.origin,s);a.transition.each(d=>{zM(n,a.origin,i,d,s,a.lastPlacement)}),Zx(n,i)},ZM=(n,s)=>{jg(n,s.placement)},S_=(n,s,a)=>n[s]===void 0?a:n[s],fh=(n,s,a,i,d,g,h,C)=>{const S=S_(h,"maxHeightFunction",K2()),x=S_(h,"maxWidthFunction",Y),_=n.anchorBox,D=n.origin,P={bounds:zF(D,g),origin:D,preference:i,maxHeightFunction:S,maxWidthFunction:x,lastPlacement:d,transition:C};return WM(_,s,a,P)},WM=(n,s,a,i)=>{const d=UM(n,s,a,i);return eH(s,d,i),ZM(s,d),XF(s,d),JF(s,d,i),QF(s,d,i),{layout:d.layout,placement:d.placement}},rC=an,gh=()=>Za("layouts",[Be("onLtr"),Be("onRtl"),Yn("onBottomLtr"),Yn("onBottomRtl")]),dE=(n,s,a,i,d,g,h)=>{const C=h.map(Y3).getOr(!1),S=s.layouts.map(F=>F.onLtr(n)),x=s.layouts.map(F=>F.onRtl(n)),_=C?s.layouts.bind(F=>F.onBottomLtr.map(z=>z(n))).or(S).getOr(d):S.getOr(a),D=C?s.layouts.bind(F=>F.onBottomRtl.map(z=>z(n))).or(x).getOr(g):x.getOr(i);return e2(_,D)(n)},Lb=(n,s,a)=>{const i=s.hotspot,d=v_(a,i.element),g=dE(n.element,s,j2(),H0(),F0(),W2(),T.some(s.hotspot.element));return T.some(rC({anchorBox:d,bubble:s.bubble.getOr(Cm()),overrides:s.overrides,layouts:g}))};var tH=[Be("hotspot"),Yn("bubble"),de("overrides",{}),gh(),Zn("placement",Lb)];const nH=(n,s,a)=>{const i=PM(a,s.x,s.y),d=Us(i.left,i.top,s.width,s.height),g=dE(n.element,s,Z2(),Bw(),Z2(),Bw(),T.none());return T.some(rC({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var jM=[Be("x"),Be("y"),de("height",0),de("width",0),de("bubble",Cm()),de("overrides",{}),gh(),Zn("placement",nH)];const GM=da.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),oH=n=>n.fold(an,(s,a,i)=>s.translate(-a,-i)),sH=n=>n.fold(an,an),w_=n=>po(n,(s,a)=>s.translate(a.left,a.top),co(0,0)),x_=n=>{const s=De(n,oH);return w_(s)},mE=n=>{const s=De(n,sH);return w_(s)},rH=GM.screen,hh=GM.absolute,qM=(n,s,a)=>{const i=Uh(a.root).dom,d=g=>{const h=dc(g),C=dc(n.element);return un(h,C)};return T.from(i.frameElement).map(We.fromDom).filter(d).map(mc)},E_=(n,s,a)=>{const i=dc(n.element),d=vs(i),g=qM(n,s,a).getOr(d);return hh(g,d.left,d.top)},T_=(n,s,a,i)=>{const d=rH(co(n,s));return T.some(im(d,a,i))},KM=(n,s,a,i,d)=>n.map(g=>{const h=[s,g.point],C=y_(i,()=>mE(h),()=>mE(h),()=>x_(h)),S=k3(C.left,C.top,g.width,g.height),x=a.showAbove?F0():j2(),_=a.showAbove?W2():H0(),D=dE(d,a,x,_,x,_,T.none());return rC({anchorBox:S,bubble:a.bubble.getOr(Cm()),overrides:a.overrides,layouts:D})}),aC=(n,s,a)=>{const i=E_(n,a,s);return s.node.filter(Pn).bind(d=>{const g=d.dom.getBoundingClientRect(),h=T_(g.left,g.top,g.width,g.height),C=s.node.getOr(n.element);return KM(h,i,s,a,C)})};var cC=[Be("node"),Be("root"),Yn("bubble"),gh(),de("overrides",{}),de("showAbove",!1),Zn("placement",aC)];const iC=(n,s)=>({element:n,offset:s}),k_=(n,s)=>{const a=bl(n);if(a.length===0)return iC(n,s);if(s<a.length)return iC(a[s],0);{const i=a[a.length-1],d=nm(i)?J1(i).length:bl(i).length;return iC(i,d)}},Wf=(n,s)=>nm(n)?iC(n,s):k_(n,s),$m=n=>n.foffset!==void 0,YM=(n,s)=>s.getSelection.getOrThunk(()=>()=>y3(n))().map(i=>{if($m(i)){const d=Wf(i.start,i.soffset),g=Wf(i.finish,i.foffset);return Eg.range(d.element,d.offset,g.element,g.offset)}else return i}),aH=(n,s,a)=>{const i=Uh(s.root).dom,d=E_(n,a,s),g=YM(i,s).bind(S=>{if($m(S))return i2(i,Eg.exactFromRange(S)).orThunk(()=>{const _=We.fromText(gg);cf(S.start,_);const D=c2(i,Eg.exact(_,0,_,1));return Bi(_),D}).bind(_=>T_(_.left,_.top,_.width,_.height));{const x=ns(S,D=>D.dom.getBoundingClientRect()),_={left:Math.min(x.firstCell.left,x.lastCell.left),right:Math.max(x.firstCell.right,x.lastCell.right),top:Math.min(x.firstCell.top,x.lastCell.top),bottom:Math.max(x.firstCell.bottom,x.lastCell.bottom)};return T_(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),C=YM(i,s).bind(S=>$m(S)?uc(S.start)?T.some(S.start):iu(S.start):T.some(S.firstCell)).getOr(n.element);return KM(g,d,s,a,C)};var XM=[Yn("getSelection"),Be("root"),Yn("bubble"),gh(),de("overrides",{}),de("showAbove",!1),Zn("placement",aH)];const Bu="link-layout",fE=n=>n.x+n.width,JM=(n,s)=>n.x-s.width,__=(n,s)=>n.y-s.height+n.height,A_=n=>n.y,O_=(n,s,a)=>Or(fE(n),A_(n),a.southeast(),vp(),"southeast",Qs(n,{left:0,top:2}),Bu),gE=(n,s,a)=>Or(JM(n,s),A_(n),a.southwest(),F2(),"southwest",Qs(n,{right:1,top:2}),Bu),D_=(n,s,a)=>Or(fE(n),__(n,s),a.northeast(),$0(),"northeast",Qs(n,{left:0,bottom:3}),Bu),QM=(n,s,a)=>Or(JM(n,s),__(n,s),a.northwest(),_f(),"northwest",Qs(n,{right:1,bottom:3}),Bu),e6=()=>[O_,gE,D_,QM],t6=()=>[gE,O_,QM,D_],hE=(n,s,a)=>{const i=v_(a,s.item.element),d=dE(n.element,s,e6(),t6(),e6(),t6(),T.none());return T.some(rC({anchorBox:i,bubble:Cm(),overrides:s.overrides,layouts:d}))};var R_=[Be("item"),gh(),de("overrides",{}),Zn("placement",hE)],pE=ya("type",{selection:XM,node:cC,hotspot:tH,submenu:R_,makeshift:jM});const n6=[Ua("classes",Ks),Sa("mode","all",["all","layout","placement"])],cH=[de("useFixed",In),Yn("getBounds")],o6=[Va("anchor",pE),Za("transition",n6)],s6=()=>{const n=document.documentElement;return lE(0,0,n.clientWidth,n.clientHeight)},r6=n=>{const s=mc(n.element),a=n.element.dom.getBoundingClientRect();return VF(s.left,s.top,a.width,a.height)},a6=(n,s,a,i,d,g)=>{const h=$M(s.anchorBox,n);return fh(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},iH=(n,s,a,i,d)=>{const g=T.none();bE(n,s,a,i,d,g)},bE=(n,s,a,i,d,g)=>{const h=va("placement.info",Tt(o6),d),C=h.anchor,S=i.element,x=a.get(i.uid);$f(()=>{Ft(S,"position","fixed");const _=Go(S,"visibility");Ft(S,"visibility","hidden");const D=s.useFixed()?s6():r6(n);C.placement(n,C,D).each(P=>{const F=g.orThunk(()=>s.getBounds.map(lr)),z=a6(D,P,F,i,x,h.transition);a.set(i.uid,z)}),_.fold(()=>{Cn(S,"visibility")},P=>{Ft(S,"visibility",P)}),Go(S,"left").isNone()&&Go(S,"top").isNone()&&Go(S,"right").isNone()&&Go(S,"bottom").isNone()&&ic(Go(S,"position"),"fixed")&&Cn(S,"position")},S)};var lH=Object.freeze({__proto__:null,position:iH,positionWithinBounds:bE,getMode:(n,s,a)=>s.useFixed()?"fixed":"absolute",reset:(n,s,a,i)=>{const d=i.element;et(["position","left","right","top","bottom"],g=>Cn(d,g)),wp(d),a.clear(i.uid)}}),c6=Object.freeze({__proto__:null,init:()=>{let n={};return Sc({readState:()=>n,clear:d=>{Jn(d)?delete n[d]:n={}},set:(d,g)=>{n[d]=g},get:d=>bt(n,d)})}});const Aa=mr({fields:cH,name:"positioning",active:NM,apis:lH,state:c6}),uH=(n,s)=>s.universal?n:no(n,a=>to(s.channels,a));var lC=Object.freeze({__proto__:null,events:n=>Io([Te(fd(),(s,a)=>{const i=n.channels,d=Vn(i),g=a,h=uH(d,g);et(h,C=>{const S=i[C],x=S.schema,_=va("channel["+C+`] data
Receiver: `+Ol(s.element),x,g.data);S.onReceive(s,_)})})])}),mH=[Va("channels",iw(Bt.value,hc([pm("onReceive"),de("schema",fi())])))];const Oa=mr({fields:mH,name:"receiving",active:lC});var l6=Object.freeze({__proto__:null,events:(n,s)=>{const a=(i,d)=>{n.updateState.each(g=>{const h=g(i,d);s.set(h)}),n.renderComponents.each(g=>{const h=g(d,s.get());(n.reuseDom?Nx:By)(i,h)})};return Io([Te(fd(),(i,d)=>{const g=d;if(!g.universal){const h=n.channel;to(g.channels,h)&&a(i,g.data)}}),Eo((i,d)=>{n.initialData.each(g=>{a(i,g)})})])}}),gH=Object.freeze({__proto__:null,getState:(n,s,a)=>a}),hH=[Be("channel"),Yn("renderComponents"),Yn("updateState"),Yn("initialData"),Ys("reuseDom",!0)],bH=Object.freeze({__proto__:null,init:()=>{const n=pt(T.none()),s=()=>n.set(T.none());return{readState:()=>n.get().getOr("none"),get:n.get,set:n.set,clear:s}}});const Gc=mr({fields:hH,name:"reflecting",active:l6,apis:gH,state:bH}),u6=(n,s,a,i)=>{a.get().each(h=>{Ax(n)});const d=s.getAttachPoint(n);wd(d,n);const g=n.getSystem().build(i);return wd(n,g),a.set(g),g},d6=(n,s,a,i)=>{const d=u6(n,s,a,i);return s.onOpen(n,d),d},m6=(n,s,a,i)=>a.get().map(()=>u6(n,s,a,i)),vE=(n,s,a,i,d)=>{M_(n,s),d6(n,s,a,i),d(),g6(n,s)},yE=(n,s,a)=>{a.get().each(i=>{Ax(n),Ed(n),s.onClose(n,i),a.clear()})},CE=(n,s,a)=>a.isOpen(),vH=(n,s,a,i)=>CE(n,s,a)&&a.get().exists(d=>s.isPartOf(n,d,i)),yH=(n,s,a)=>a.get(),CH=(n,s,a,i)=>{Go(n.element,s).fold(()=>{No(n.element,a)},d=>{Nt(n.element,a,d)}),Ft(n.element,s,i)},SH=(n,s,a)=>{xr(n.element,a).fold(()=>Cn(n.element,s),i=>Ft(n.element,s,i))},M_=(n,s,a)=>{const i=s.getAttachPoint(n);Ft(n.element,"position",Aa.getMode(i)),CH(n,"visibility",s.cloakVisibilityAttr,"hidden")},f6=n=>js(["top","left","right","bottom"],s=>Go(n,s).isSome()),g6=(n,s,a)=>{f6(n.element)||Cn(n.element,"position"),SH(n,"visibility",s.cloakVisibilityAttr)};var wH=Object.freeze({__proto__:null,cloak:M_,decloak:g6,open:d6,openWhileCloaked:vE,close:yE,isOpen:CE,isPartOf:vH,getState:yH,setContent:m6}),xH=Object.freeze({__proto__:null,events:(n,s)=>Io([Te(v0(),(a,i)=>{yE(a,n,s)})])}),EH=[Dn("onOpen"),Dn("onClose"),Be("isPartOf"),Be("getAttachPoint"),de("cloakVisibilityAttr","data-precloak-visibility")],h6=Object.freeze({__proto__:null,init:()=>{const n=Zt(),s=ie("not-implemented");return Sc({readState:s,isOpen:n.isSet,clear:n.clear,set:n.set,get:n.get})}});const Bn=mr({fields:EH,name:"sandboxing",active:xH,apis:wH,state:h6}),uC=(n,s)=>s.getAnimationRoot.fold(()=>n.element,a=>a(n)),jf=n=>n.dimension.property,Qp=(n,s)=>n.dimension.getDimension(s),SE=(n,s)=>{const a=uC(n,s);Vr(a,[s.shrinkingClass,s.growingClass])},Im=(n,s)=>{Yo(n.element,s.openClass),mo(n.element,s.closedClass),Ft(n.element,jf(s),"0px"),Pi(n.element)},B_=(n,s)=>{Yo(n.element,s.closedClass),mo(n.element,s.openClass),Cn(n.element,jf(s))},p6=(n,s,a,i)=>{a.setCollapsed(),Ft(n.element,jf(s),Qp(s,n.element)),SE(n,s),Im(n,s),s.onStartShrink(n),s.onShrunk(n)},e1=(n,s,a,i)=>{const d=i.getOrThunk(()=>Qp(s,n.element));a.setCollapsed(),Ft(n.element,jf(s),d),Pi(n.element);const g=uC(n,s);Yo(g,s.growingClass),mo(g,s.shrinkingClass),Im(n,s),s.onStartShrink(n)},N_=(n,s,a)=>{const i=Qp(s,n.element);(i==="0px"?p6:e1)(n,s,a,T.some(i))},b6=(n,s,a)=>{const i=uC(n,s),d=Os(i,s.shrinkingClass),g=Qp(s,n.element);B_(n,s);const h=Qp(s,n.element);(d?()=>{Ft(n.element,jf(s),g),Pi(n.element)}:()=>{Im(n,s)})(),Yo(i,s.shrinkingClass),mo(i,s.growingClass),B_(n,s),Ft(n.element,jf(s),h),a.setExpanded(),s.onStartGrow(n)},ph=(n,s,a)=>{if(a.isExpanded()){Cn(n.element,jf(s));const i=Qp(s,n.element);Ft(n.element,jf(s),i)}},TH=(n,s,a)=>{a.isExpanded()||b6(n,s,a)},kH=(n,s,a)=>{a.isExpanded()&&N_(n,s,a)},Fl=(n,s,a)=>{a.isExpanded()&&p6(n,s,a)},v6=(n,s,a)=>a.isExpanded(),y6=(n,s,a)=>a.isCollapsed(),P_=(n,s,a)=>{const i=uC(n,s);return Os(i,s.growingClass)===!0},C6=(n,s,a)=>{const i=uC(n,s);return Os(i,s.shrinkingClass)===!0};var AH=Object.freeze({__proto__:null,refresh:ph,grow:TH,shrink:kH,immediateShrink:Fl,hasGrown:v6,hasShrunk:y6,isGrowing:P_,isShrinking:C6,isTransitioning:(n,s,a)=>P_(n,s)||C6(n,s),toggleGrow:(n,s,a)=>{(a.isExpanded()?N_:b6)(n,s,a)},disableTransitions:SE,immediateGrow:(n,s,a)=>{a.isExpanded()||(B_(n,s),Ft(n.element,jf(s),Qp(s,n.element)),SE(n,s),a.setExpanded(),s.onStartGrow(n),s.onGrown(n))}}),w6=Object.freeze({__proto__:null,exhibit:(n,s,a)=>{const i=s.expanded;return Pl(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:gm(s.dimension.property,"0px")})},events:(n,s)=>Io([eh(h0(),(a,i)=>{i.event.raw.propertyName===n.dimension.property&&(SE(a,n),s.isExpanded()&&Cn(a.element,n.dimension.property),(s.isExpanded()?n.onGrown:n.onShrunk)(a))})])}),x6=[Be("closedClass"),Be("openClass"),Be("shrinkingClass"),Be("growingClass"),Yn("getAnimationRoot"),Dn("onShrunk"),Dn("onStartShrink"),Dn("onGrown"),Dn("onStartGrow"),de("expanded",!1),Va("dimension",ya("property",{width:[Zn("property","width"),Zn("getDimension",n=>ra(n)+"px")],height:[Zn("property","height"),Zn("getDimension",n=>nr(n)+"px")]}))],DH=Object.freeze({__proto__:null,init:n=>{const s=pt(n.expanded),a=()=>"expanded: "+s.get();return Sc({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:gn(s.set,!1),setExpanded:gn(s.set,!0),readState:a})}});const Ka=mr({fields:x6,name:"sliding",active:w6,apis:AH,state:DH});var MH=Object.freeze({__proto__:null,events:(n,s)=>{const i=n.stream.streams.setup(n,s);return Io([Te(n.event,i),ji(()=>s.cancel())].concat(n.cancelEvent.map(d=>[Te(d,()=>s.cancel())]).getOr([])))}});const E6=n=>{const s=pt(null);return Sc({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var L_=Object.freeze({__proto__:null,throttle:E6,init:n=>n.stream.streams.state(n)});const BH=(n,s)=>{const a=n.stream,i=oi(n.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var dC=[Va("stream",ya("mode",{throttle:[Be("delay"),de("stopEvent",!0),Zn("streams",{setup:BH,state:E6})]})),de("event","input"),Yn("cancelEvent"),pm("onStream")];const Fb=mr({fields:dC,name:"streaming",active:MH,state:L_});var T6=Object.freeze({__proto__:null,exhibit:(n,s)=>Pl({attributes:Pg([{key:s.tabAttr,value:"true"}])})}),PH=[de("tabAttr","data-alloy-tabstop")];const So=mr({fields:PH,name:"tabstopping",active:T6}),$H=(n,s,a)=>{const i=s.aria;i.update(n,i,a.get())},IH=(n,s,a)=>{s.toggleClass.each(i=>{a.get()?mo(n.element,i):Yo(n.element,i)})},t1=(n,s,a,i)=>{const d=a.get();a.set(i),IH(n,s,a),$H(n,s,a),d!==i&&s.onToggled(n,i)},F_=(n,s,a)=>{t1(n,s,a,!a.get())},k6=(n,s,a)=>{t1(n,s,a,!0)},H_=(n,s,a)=>{t1(n,s,a,!1)},LH=(n,s,a)=>a.get(),z_=(n,s,a)=>{t1(n,s,a,s.selected)};var FH=Object.freeze({__proto__:null,onLoad:z_,toggle:F_,isOn:LH,on:k6,off:H_,set:t1}),_6=Object.freeze({__proto__:null,exhibit:()=>Pl({}),events:(n,s)=>{const a=Iw(n,s,F_),i=Q2(n,s,z_);return Io(Rt([n.toggleOnExecute?[a]:[],[i]]))}});const HH=(n,s,a)=>{Nt(n.element,"aria-pressed",a),s.syncWithExpanded&&U_(n,s,a)},zH=(n,s,a)=>{Nt(n.element,"aria-selected",a)},V_=(n,s,a)=>{Nt(n.element,"aria-checked",a)},U_=(n,s,a)=>{Nt(n.element,"aria-expanded",a)};var A6=[de("selected",!1),Yn("toggleClass"),de("toggleOnExecute",!0),Dn("onToggled"),zc("aria",{mode:"none"},ya("mode",{pressed:[de("syncWithExpanded",!1),Zn("update",HH)],checked:[Zn("update",V_)],expanded:[Zn("update",U_)],selected:[Zn("update",zH)],none:[Zn("update",Y)]}))];const Sn=mr({fields:A6,name:"toggling",active:_6,apis:FH,state:Hw(!1)}),wE=st("tooltip.exclusive"),mC=st("tooltip.show"),fC=st("tooltip.hide"),gC=st("tooltip.immediateHide"),hC=st("tooltip.immediateShow"),O6=(n,s,a)=>{n.getSystem().broadcastOn([wE],{})};var UH=Object.freeze({__proto__:null,hideAllExclusive:O6,immediateOpenClose:(n,s,a,i)=>fn(n,i?hC:gC),isEnabled:(n,s,a)=>a.isEnabled(),setComponents:(n,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&jt.set(d,i)})},setEnabled:(n,s,a,i)=>a.setEnabled(i)}),ZH=Object.freeze({__proto__:null,events:(n,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(Ed(C),n.onHide(h,C),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){O6(h);const C=n.lazySink(h).getOrDie(),S=h.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:Io(n.mode==="normal"?[Te(Vc(),x=>{fn(h,mC)}),Te(Zs(),x=>{fn(h,fC)})]:[]),behaviours:Ve([jt.config({})])});s.setTooltip(S),wd(C,S),n.onShow(h,S),Aa.position(C,S,{anchor:n.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const S=n.lazySink(h).getOrDie();Aa.position(S,C,{anchor:n.anchor(h)})})},g=()=>{switch(n.mode){case"normal":return[Te(zi(),h=>{fn(h,hC)}),Te(Lg(),h=>{fn(h,gC)}),Te(Vc(),h=>{fn(h,mC)}),Te(Zs(),h=>{fn(h,fC)})];case"follow-highlight":return[Te(w0(),(h,C)=>{fn(h,mC)}),Te(x0(),h=>{fn(h,fC)})];case"children-normal":return[Te(zi(),(h,C)=>{zs(h.element).each(S=>{ln(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{fn(h,hC)},x=>{s.isShowing()&&(n.onShow(h,x),d(h))})})}),Te(Lg(),h=>{zs(h.element).fold(()=>{fn(h,gC)},Y)}),Te(Vc(),h=>{oo(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{fn(h,mC)},S=>{s.isShowing()&&(n.onShow(h,S),d(h))})})}),Te(Zs(),h=>{oo(h.element,"[data-mce-tooltip]:hover").fold(()=>{fn(h,fC)},Y)})];default:return[Te(zi(),(h,C)=>{zs(h.element).each(S=>{ln(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{fn(h,hC)},x=>{s.isShowing()&&(n.onShow(h,x),d(h))})})}),Te(Lg(),h=>{zs(h.element).fold(()=>{fn(h,gC)},Y)})]}};return Io(Rt([[J2(h=>{n.onSetup(h)}),Te(mC,h=>{s.resetTimer(()=>{i(h)},n.delayForShow())}),Te(fC,h=>{s.resetTimer(()=>{a(h)},n.delayForHide())}),Te(hC,h=>{s.resetTimer(()=>{i(h)},0)}),Te(gC,h=>{s.resetTimer(()=>{a(h)},0)}),Te(fd(),(h,C)=>{const S=C;S.universal||(to(S.channels,wE)||to(S.channels,oh()))&&(S.data.closedTooltip&&s.isShowing()&&S.data.closedTooltip(),a(h))}),ji(h=>{a(h)})],g()]))}}),WH=[Be("lazySink"),Be("tooltipDom"),de("exclusive",!0),de("tooltipComponents",[]),yo("delayForShow",ie(300)),yo("delayForHide",ie(100)),yo("onSetup",Y),Sa("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),de("anchor",n=>({type:"hotspot",hotspot:n,layouts:{onLtr:ie([Ms,Fo,Ws,Dr,Rs,dr]),onRtl:ie([Ms,Fo,Ws,Dr,Rs,dr])},bubble:Cc(0,-2,{})})),Dn("onHide"),Dn("onShow")],jH=Object.freeze({__proto__:null,init:()=>{const n=pt(!0),s=Zt(),a=Zt(),i=()=>{s.on(clearTimeout)},d=(h,C)=>{i(),s.set(setTimeout(h,C))},g=ie("not-implemented");return Sc({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>n.get(),setEnabled:h=>n.set(h)})}});const To=mr({fields:WH,name:"tooltipping",active:ZH,state:jH,apis:UH});var W_=Object.freeze({__proto__:null,events:()=>Io([q0(lp(),Ot)]),exhibit:()=>Pl({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Dd=mr({fields:[],name:"unselecting",active:W_}),GH=n=>{const s=n.dom.attributes!==void 0?n.dom.attributes:[];return po(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},qH=n=>Array.prototype.slice.call(n.dom.classList,0),Rd=n=>{const s=We.fromHtml(n),a=bl(s),i=GH(s),d=qH(s),g=a.length===0?{}:{innerHtml:od(s)};return{tag:Oi(s),classes:d,attributes:i,...g}},Ln=n=>{const s=fF(n)&&hn(n,"uid")?n.uid:uh("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...n,uid:s})}},gr=Tf,Ji=M0,KH=(n,s)=>{const a=pt(!1),i=pt(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:n,setSource:s.set,getSource:s.get}},R6=n=>{const s=pt(!1);return{stop:()=>{s.set(!0)},cut:Y,isStopped:s.get,isCut:In,event:n,setSource:ne("Cannot set source of a broadcasted event"),getSource:ne("Cannot get source of a broadcasted event")}},M6=n=>n.raw.which===ry[0]&&!to(["input","textarea"],Oi(n.target))&&!Xh(n.target,'[contenteditable="true"]'),B6=(n,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=U3(a),g=De(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),F=>Kn(n,F,z=>{d.fireIfReady(z,F).each(J=>{J&&z.kill()}),a.triggerEvent(F,z)&&z.kill()})),h=Zt(),C=Kn(n,"paste",F=>{d.fireIfReady(F,"paste").each(G=>{G&&F.kill()}),a.triggerEvent("paste",F)&&F.kill(),h.set(setTimeout(()=>{a.triggerEvent(p0(),F)},0))}),S=Kn(n,"keydown",F=>{a.triggerEvent("keydown",F)?F.kill():a.stopBackspace&&M6(F)&&F.prevent()}),x=Kn(n,"focusin",F=>{a.triggerEvent("focusin",F)&&F.kill()}),_=Zt(),D=Kn(n,"focusout",F=>{a.triggerEvent("focusout",F)&&F.kill(),_.set(setTimeout(()=>{a.triggerEvent(Lg(),F)},0))});return{unbind:()=>{et(g,F=>{F.unbind()}),S.unbind(),x.unbind(),D.unbind(),C.unbind(),h.on(clearTimeout),_.on(clearTimeout)}}},Lm=(n,s)=>{const a=bt(n,"target").getOr(s);return pt(a)},Hl=da.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),j_=(n,s,a,i,d,g)=>{const h=n(s,i),C=KH(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),Hl.complete()),S=>{const x=S.descHandler;return xb(x)(C),C.isStopped()?(g.logEventStopped(s,S.element,x.purpose),Hl.stopped()):C.isCut()?(g.logEventCut(s,S.element,x.purpose),Hl.complete()):Fa(S.element).fold(()=>(g.logNoParent(s,S.element,x.purpose),Hl.complete()),D=>(g.logEventResponse(s,S.element,x.purpose),Hl.resume(D)))})},n1=(n,s,a,i,d,g)=>j_(n,s,a,i,d,g).fold(Ot,h=>n1(n,s,a,h,d,g),In),YH=(n,s,a,i,d)=>{const g=Lm(a,i);return j_(n,s,a,i,g,d)},G_=(n,s,a)=>{const i=R6(s);return et(n,d=>{const g=d.descHandler;xb(g)(i)}),i.isStopped()},N6=(n,s,a,i)=>xE(n,s,a,a.target,i),xE=(n,s,a,i,d)=>{const g=Lm(a,i);return n1(n,s,a,i,g,d)},EE=(n,s)=>({element:n,descHandler:s}),P6=(n,s)=>({id:n,descHandler:s}),zl=()=>{const n={},s=(h,C,S)=>{Mo(S,(x,_)=>{const D=n[_]!==void 0?n[_]:{};D[C]=Wk(x,h),n[_]=D})},a=(h,C)=>$l(C).bind(S=>bt(h,S)).map(S=>EE(C,S));return{registerId:s,unregisterId:h=>{Mo(n,(C,S)=>{Mn(C,h)&&delete C[h]})},filterByType:h=>bt(n,h).map(C=>Bo(C,(S,x)=>P6(x,S))).getOr([]),find:(h,C,S)=>bt(n,C).bind(x=>Ii(S,_=>a(x,_),h))}},q_=()=>{const n=zl(),s={},a=x=>{const _=x.element;return $l(_).getOrThunk(()=>Ly("uid-",x.element))},i=(x,_)=>{const D=s[_];if(D===x)g(x);else throw new Error('The tagId "'+_+'" is already used by: '+Ol(D.element)+`
Cannot use it for: `+Ol(x.element)+`
The conflicting element is`+(Pn(D.element)?" ":" not ")+"already in the DOM")},d=x=>{const _=a(x);hn(s,_)&&i(x,_);const D=[x];n.registerId(D,_,x.events),s[_]=x},g=x=>{$l(x.element).each(_=>{delete s[_],n.unregisterId(_)})};return{find:(x,_,D)=>n.find(x,_,D),filter:x=>n.filterByType(x),register:d,unregister:g,getById:x=>bt(s,x)}},K_=n=>{const s=W=>Fa(n.element).fold(Ot,ee=>un(W,ee)),a=q_(),i=(W,ee)=>a.find(s,W,ee),d=B6(n.element,{triggerEvent:(W,ee)=>R2(W,ee.target,re=>N6(i,W,ee,re))}),g={debugInfo:ie("real"),triggerEvent:(W,ee,re)=>{R2(W,ee,fe=>xE(i,W,re,ee,fe))},triggerFocus:(W,ee)=>{$l(W).fold(()=>{ur(W)},re=>{R2(md(),W,fe=>(YH(i,md(),{originator:ee,kill:Y,prevent:Y,target:W},W,fe),!1))})},triggerEscape:(W,ee)=>{g.triggerEvent("keydown",W.element,ee.event)},getByUid:W=>G(W),getByDom:W=>J(W),build:m,buildOrPatch:l,addToGui:W=>{S(W)},removeFromGui:W=>{x(W)},addToWorld:W=>{h(W)},removeFromWorld:W=>{C(W)},broadcast:W=>{P(W)},broadcastOn:(W,ee)=>{F(W,ee)},broadcastEvent:(W,ee)=>{z(W,ee)},isConnected:Ot},h=W=>{W.connect(g),nm(W.element)||(a.register(W),et(W.components(),h),g.triggerEvent(up(),W.element,{target:W.element}))},C=W=>{nm(W.element)||(et(W.components(),C),a.unregister(W)),W.disconnect()},S=W=>{wd(n,W)},x=W=>{Ed(W)},_=()=>{d.unbind(),Bi(n.element)},D=W=>{const ee=a.filter(fd());et(ee,re=>{const fe=re.descHandler;xb(fe)(W)})},P=W=>{D({universal:!0,data:W})},F=(W,ee)=>{D({universal:!1,channels:W,data:ee})},z=(W,ee)=>{const re=a.filter(W);return G_(re,ee)},G=W=>a.getById(W).fold(()=>Bt.error(new Error('Could not find component with uid: "'+W+'" in system.')),Bt.value),J=W=>{const ee=$l(W).getOr("not found");return G(ee)};return h(n),{root:n,element:n.element,destroy:_,add:S,remove:x,getByUid:G,getByDom:J,addToWorld:h,removeFromWorld:C,broadcast:P,broadcastOn:F,broadcastEvent:z}},$6=()=>{const n=(s,a)=>{a.stop(),Xg(s)};return[Te(vf(),n),Te(Fg(),n),Mf(bc()),Mf(Wa())]},Y_=n=>{const s=a=>Tm((i,d)=>{a(i),d.stop()});return Io(Rt([n.map(s).toArray(),$6()]))},ar=Yi({name:"Button",factory:n=>{const s=Y_(n.action),a=n.dom.tag,i=g=>bt(n.dom,"attributes").bind(h=>bt(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:n.role.getOr(i("role").getOr("button"))}};return{uid:n.uid,dom:n.dom,components:n.components,events:s,behaviours:Ru.augment(n.buttonBehaviours,[Ut.config({}),wt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:n.eventOrder}},configFields:[de("uid",void 0),Be("dom"),de("components",[]),Ru.field("buttonBehaviours",[Ut,wt]),Yn("action"),Yn("role"),de("eventOrder",{})]}),XH=ie([de("shell",!1),Be("makeItem"),de("setupItem",Y),Ru.field("listBehaviours",[jt])]),X_=xa({name:"items",overrides:()=>({behaviours:Ve([jt.config({})])})}),QH=ie([X_]),J_=ie("CustomList"),Q_=(n,s,a,i)=>{const d=(C,S)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},x=>{const _=jt.contents(x),D=S.length,P=D-_.length,F=P>0?Ro(P,()=>n.makeItem()):[],z=_.slice(D);et(z,J=>jt.remove(x,J)),et(F,J=>jt.append(x,J));const G=jt.contents(x);et(G,(J,W)=>{n.setupItem(C,J,S[W],W)})})},g=n.shell?{behaviours:[jt.config({})],components:[]}:{behaviours:[],components:s},h=C=>n.shell?T.some(C):fo(C,n,"items");return{uid:n.uid,dom:n.dom,components:g.components,behaviours:la(n.listBehaviours,g.behaviours),apis:{setItems:d}}},I6=wc({name:J_(),configFields:XH(),partFields:QH(),factory:Q_,apis:{setItems:(n,s,a)=>{n.setItems(s,a)}}}),Hb="aria-controls",L6=n=>Sg(n,a=>{if(!uc(a))return!1;const i=tr(a,"id");return i!==void 0&&i.indexOf(Hb)>-1}).bind(a=>{const i=tr(a,"id"),d=Hs(a);return oo(d,`[${Hb}="${i}"]`)}),F6=()=>{const n=st(Hb);return{id:n,link:i=>{Nt(i,Hb,n)},unlink:i=>{No(i,Hb)}}},H6=(n,s)=>L6(s).exists(a=>bh(n,a)),bh=(n,s)=>e0(s,a=>un(a,n.element),In)||H6(n,s),z6="alloy.item-hover",V6="alloy.item-focus",U6="alloy.item-toggled",Z6=n=>{(zs(n.element).isNone()||Ut.isFocused(n))&&(Ut.isFocused(n)||Ut.focus(n),xt(n,z6,{item:n}))},W6=n=>{xt(n,V6,{item:n})},j6=(n,s)=>{xt(n,U6,{item:n,state:s})},eA=ie(z6),e9=ie(V6),G6=ie(U6),q6=n=>n.role.fold(()=>n.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),an),t9=(n,s)=>({aria:{mode:s?"selected":"checked"},...Fs(n,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{Dt(n.onToggled)&&n.onToggled(a,i),j6(a,i)}}),n9=n=>({dom:n.dom,domModification:{...n.domModification,attributes:{role:q6(n),...n.domModification.attributes,"aria-haspopup":n.hasSubmenu,...n.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ru.augment(n.itemBehaviours,[n.toggling.fold(Sn.revoke,s=>Sn.config(t9(s,n.role.exists(a=>a==="option")))),Ut.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:s=>{W6(s)}}),wt.config({mode:"execution"}),it.config({store:{mode:"memory",initialValue:n.data}}),Vt("item-type-events",[...$6(),Te(Vc(),Z6),Te(yf(),Ut.focus)])]),components:n.components,eventOrder:n.eventOrder});var tA=[Be("data"),Be("components"),Be("dom"),de("hasSubmenu",!1),Yn("toggling"),Yn("role"),Ru.field("itemBehaviours",[Sn,Ut,wt,it]),de("ignoreFocus",!1),de("domModification",{}),Zn("builder",n9),de("eventOrder",{})];const K6=n=>({dom:n.dom,components:n.components,events:Io([ek(yf())])});var Y6=[Be("dom"),Be("components"),Zn("builder",K6)];const nA=ie("item-widget"),oA=ie([ca({name:"widget",overrides:n=>({behaviours:Ve([it.config({store:{mode:"manual",getValue:s=>n.data,setValue:Y}})])})})]),X6=n=>{const s=ja(nA(),n,oA()),a=B0(nA(),n,s.internals()),i=g=>fo(g,n,"widget").map(h=>(wt.focusIn(h),h)),d=(g,h)=>rh(h.event.target)?T.none():(n.autofocus&&h.setSource(g.element),T.none());return{dom:n.dom,components:a,domModification:n.domModification,events:Io([Tm((g,h)=>{i(g).each(C=>{h.stop()})}),Te(Vc(),Z6),Te(yf(),(g,h)=>{n.autofocus?i(g):Ut.focus(g)})]),behaviours:Ru.augment(n.widgetBehaviours,[it.config({store:{mode:"memory",initialValue:n.data}}),Ut.config({ignore:n.ignoreFocus,onFocus:g=>{W6(g)}}),wt.config({mode:"special",focusIn:n.autofocus?g=>{i(g)}:sy(),onLeft:d,onRight:d,onEscape:(g,h)=>!Ut.isFocused(g)&&!n.autofocus?(Ut.focus(g),T.some(!0)):(n.autofocus&&h.setSource(g.element),T.none())})])}};var sA=[Be("uid"),Be("data"),Be("components"),Be("dom"),de("autofocus",!1),de("ignoreFocus",!1),Ru.field("widgetBehaviours",[it,Ut,wt]),de("domModification",{}),bd(oA()),Zn("builder",X6)];const Q6=ya("type",{widget:sA,item:tA,separator:Y6}),eB=(n,s)=>({mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:n.focusManager}),tB=(n,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+n.markers.item},previousSelector:s.previousSelector,focusManager:n.focusManager}),r9=(n,s)=>({mode:"menu",selector:"."+n.markers.item,moveOnTab:s.moveOnTab,focusManager:n.focusManager}),rA=ie([R0({factory:{sketch:n=>{const s=va("menu.spec item",Q6,n);return s.builder(s)}},name:"items",unit:"item",defaults:(n,s)=>Mn(s,"uid")?s:{...s,uid:uh("item")},overrides:(n,s)=>({type:s.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}})})]),a9=ie([cs("role"),Be("value"),Be("items"),Be("dom"),Be("components"),de("eventOrder",{}),Rr("menuBehaviours",[$n,it,Le,wt]),zc("movement",{mode:"menu",moveOnTab:!0},ya("mode",{grid:[Sw(),Zn("config",eB)],matrix:[Zn("config",tB),Be("rowSelector"),de("previousSelector",T.none)],menu:[de("moveOnTab",!0),Zn("config",r9)]})),M2(),de("fakeFocus",!1),de("focusManager",uy()),Dn("onHighlight"),Dn("onDehighlight"),de("showMenuRole",!0)]),aA=ie("alloy.menu-focus"),nB=(n,s)=>{const a=kr(n.element,'[role="menuitemradio"][aria-checked="true"]');et(a,i=>{un(i,s.element)||n.getSystem().getByDom(i).each(d=>{Sn.off(d)})})},o1=(n,s,a,i)=>({uid:n.uid,dom:n.dom,markers:n.markers,behaviours:la(n.menuBehaviours,[$n.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight,onDehighlight:n.onDehighlight}),it.config({store:{mode:"memory",initialValue:n.value}}),Le.config({find:T.some}),wt.config(n.movement.config(n,n.movement))]),events:Io([Te(e9(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{$n.highlight(d,C),g.stop(),xt(d,aA(),{menu:d,item:C})})}),Te(eA(),(d,g)=>{const h=g.event.item;$n.highlight(d,h)}),Te(G6(),(d,g)=>{const{item:h,state:C}=g.event;C&&tr(h.element,"role")==="menuitemradio"&&nB(d,h)})]),components:s,eventOrder:n.eventOrder,...n.showMenuRole?{domModification:{attributes:{role:n.role.getOr("menu")}}}:{}}),Gf=wc({name:"Menu",configFields:a9(),partFields:rA(),factory:o1}),cA=n=>Ku(n,(s,a)=>({k:s,v:a})),pC=(n,s,a,i)=>bt(a,i).bind(d=>bt(n,d).bind(g=>{const h=pC(n,s,a,g);return T.some([g].concat(h))})).getOr([]),c9=(n,s)=>{const a={};Mo(n,(h,C)=>{et(h,S=>{a[S]=C})});const i=s,d=cA(s),g=ns(d,(h,C)=>[C].concat(pC(a,i,d,C)));return ns(a,h=>bt(g,h).getOr([h]))},oB=()=>{const n=pt({}),s=pt({}),a=pt({}),i=Zt(),d=pt({}),g=()=>{n.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),C=(be,Ke)=>{s.set({...s.get(),[be]:{type:"prepared",menu:Ke}})},S=(be,Ke,Re,$e)=>{i.set(be),n.set(Re),s.set(Ke),d.set($e);const Ne=c9($e,Re);a.set(Ne)},x=be=>rc(n.get(),(Ke,Re)=>Ke===be),_=(be,Ke,Re)=>G(be).bind($e=>x(be).bind(Ne=>Ke(Ne).map(Et=>({triggeredMenu:$e,triggeringItem:Et,triggeringPath:Re})))),D=(be,Ke)=>{const Re=no(W(be).toArray(),$e=>G($e).isSome());return bt(a.get(),be).bind($e=>{const Ne=_e(Re.concat($e)),Et=le(Ne,(gt,sn)=>_(gt,Ke,Ne.slice(0,sn+1)).fold(()=>ic(i.get(),gt)?[]:[T.none()],kt=>[T.some(kt)]));return Yd(Et)})},P=be=>bt(n.get(),be).map(Ke=>{const Re=bt(a.get(),be).getOr([]);return[Ke].concat(Re)}),F=be=>bt(a.get(),be).bind(Ke=>Ke.length>1?T.some(Ke.slice(1)):T.none()),z=be=>bt(a.get(),be),G=be=>J(be).bind(iA),J=be=>bt(s.get(),be),W=be=>bt(n.get(),be);return{setMenuBuilt:C,setContents:S,expand:P,refresh:z,collapse:F,lookupMenu:J,lookupItem:W,otherMenus:be=>{const Ke=d.get();return ge(Vn(Ke),be)},getPrimary:()=>i.get().bind(G),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:D}},iA=n=>n.type==="prepared"?T.some(n.menu):T.none(),lA={init:oB,extractPreparedMenu:iA},TE=st("tiered-menu-item-highlight"),uA=st("tiered-menu-item-dehighlight"),i9=(n,s)=>{const a=Zt(),i=(Ae,Ze,Pt)=>ns(Pt,(Xt,Ct)=>{const qt=()=>Gf.sketch({...Xt,value:Ct,markers:n.markers,fakeFocus:n.fakeFocus,onHighlight:(eo,Rn)=>{xt(eo,TE,{menuComp:eo,itemComp:Rn})},onDehighlight:(eo,Rn)=>{xt(eo,uA,{menuComp:eo,itemComp:Rn})},focusManager:n.fakeFocus?Q0():uy()});return Ct===Ze?{type:"prepared",menu:Ae.getSystem().build(qt())}:{type:"notbuilt",nbMenu:qt}}),d=lA.init(),g=Ae=>{const Ze=i(Ae,n.data.primary,n.data.menus),Pt=S();return d.setContents(n.data.primary,Ze,n.data.expansions,Pt),d.getPrimary()},h=Ae=>it.getValue(Ae).value,C=(Ae,Ze,Pt)=>ta(Ze,Xt=>{if(!Xt.getSystem().isConnected())return T.none();const Ct=$n.getCandidates(Xt);return vt(Ct,qt=>h(qt)===Pt)}),S=Ae=>ns(n.data.menus,(Ze,Pt)=>le(Ze.items,Xt=>Xt.type==="separator"?[]:[Xt.data.value])),x=$n.highlight,_=(Ae,Ze)=>{x(Ae,Ze),$n.getHighlighted(Ze).orThunk(()=>$n.getFirst(Ze)).each(Pt=>{n.fakeFocus?$n.highlight(Ze,Pt):j0(Ae,Pt.element,yf())})},D=(Ae,Ze)=>Ai(De(Ze,Pt=>Ae.lookupMenu(Pt).bind(Xt=>Xt.type==="prepared"?T.some(Xt.menu):T.none()))),P=(Ae,Ze,Pt)=>{const Xt=D(Ze,Ze.otherMenus(Pt));et(Xt,Ct=>{Vr(Ct.element,[n.markers.backgroundMenu]),n.stayInDom||jt.remove(Ae,Ct)})},F=Ae=>a.get().getOrThunk(()=>{const Ze={},Pt=kr(Ae.element,`.${n.markers.item}`),Xt=no(Pt,Ct=>tr(Ct,"aria-haspopup")==="true");return et(Xt,Ct=>{Ae.getSystem().getByDom(Ct).each(qt=>{const eo=h(qt);Ze[eo]=qt})}),a.set(Ze),Ze}),z=(Ae,Ze)=>{const Pt=F(Ae);Mo(Pt,(Xt,Ct)=>{const qt=to(Ze,Ct);Nt(Xt.element,"aria-expanded",qt)})},G=(Ae,Ze,Pt)=>T.from(Pt[0]).bind(Xt=>Ze.lookupMenu(Xt).bind(Ct=>{if(Ct.type==="notbuilt")return T.none();{const qt=Ct.menu,eo=D(Ze,Pt.slice(1));return et(eo,Rn=>{mo(Rn.element,n.markers.backgroundMenu)}),Pn(qt.element)||jt.append(Ae,p(qt)),Vr(qt.element,[n.markers.backgroundMenu]),_(Ae,qt),P(Ae,Ze,Pt),T.some(qt)}}));let J;(function(Ae){Ae[Ae.HighlightSubmenu=0]="HighlightSubmenu",Ae[Ae.HighlightParent=1]="HighlightParent"})(J||(J={}));const W=(Ae,Ze,Pt)=>{if(Pt.type==="notbuilt"){const Xt=Ae.getSystem().build(Pt.nbMenu());return d.setMenuBuilt(Ze,Xt),Xt}else return Pt.menu},ee=(Ae,Ze,Pt=J.HighlightSubmenu)=>{if(Ze.hasConfigured(ft)&&ft.isDisabled(Ze))return T.some(Ze);{const Xt=h(Ze);return d.expand(Xt).bind(Ct=>(z(Ae,Ct),T.from(Ct[0]).bind(qt=>d.lookupMenu(qt).bind(eo=>{const Rn=W(Ae,qt,eo);return Pn(Rn.element)||jt.append(Ae,p(Rn)),n.onOpenSubmenu(Ae,Ze,Rn,_e(Ct)),Pt===J.HighlightSubmenu?($n.highlightFirst(Rn),G(Ae,d,Ct)):($n.dehighlightAll(Rn),T.some(Ze))}))))}},re=(Ae,Ze)=>{const Pt=h(Ze);return d.collapse(Pt).bind(Xt=>(z(Ae,Xt),G(Ae,d,Xt).map(Ct=>(n.onCollapseMenu(Ae,Ze,Ct),Ct))))},fe=(Ae,Ze)=>{const Pt=h(Ze);return d.refresh(Pt).bind(Xt=>(z(Ae,Xt),G(Ae,d,Xt)))},be=(Ae,Ze)=>rh(Ze.element)?T.none():ee(Ae,Ze,J.HighlightSubmenu),Ke=(Ae,Ze)=>rh(Ze.element)?T.none():re(Ae,Ze),Re=(Ae,Ze)=>re(Ae,Ze).orThunk(()=>n.onEscape(Ae,Ze).map(()=>Ae)),$e=Ae=>(Ze,Pt)=>aa(Pt.getSource(),`.${n.markers.item}`).bind(Xt=>Ze.getSystem().getByDom(Xt).toOptional().bind(Ct=>Ae(Ze,Ct).map(Ot))),Ne=Io([Te(aA(),(Ae,Ze)=>{const Pt=Ze.event.item;d.lookupItem(h(Pt)).each(()=>{const Xt=Ze.event.menu;$n.highlight(Ae,Xt);const Ct=h(Ze.event.item);d.refresh(Ct).each(qt=>P(Ae,d,qt))})}),Tm((Ae,Ze)=>{const Pt=Ze.event.target;Ae.getSystem().getByDom(Pt).each(Xt=>{h(Xt).indexOf("collapse-item")===0&&re(Ae,Xt),ee(Ae,Xt,J.HighlightSubmenu).fold(()=>{n.onExecute(Ae,Xt)},Y)})}),Eo((Ae,Ze)=>{g(Ae).each(Pt=>{jt.append(Ae,p(Pt)),n.onOpenMenu(Ae,Pt),n.highlightOnOpen===jr.HighlightMenuAndItem?_(Ae,Pt):n.highlightOnOpen===jr.HighlightJustMenu&&x(Ae,Pt)})}),Te(TE,(Ae,Ze)=>{n.onHighlightItem(Ae,Ze.event.menuComp,Ze.event.itemComp)}),Te(uA,(Ae,Ze)=>{n.onDehighlightItem(Ae,Ze.event.menuComp,Ze.event.itemComp)}),...n.navigateOnHover?[Te(eA(),(Ae,Ze)=>{const Pt=Ze.event.item;fe(Ae,Pt),ee(Ae,Pt,J.HighlightParent),n.onHover(Ae,Pt)})]:[]]),Et=Ae=>$n.getHighlighted(Ae).bind($n.getHighlighted),gt=Ae=>{Et(Ae).each(Ze=>{re(Ae,Ze)})},sn=Ae=>{d.getPrimary().each(Ze=>{_(Ae,Ze)})},kt=Ae=>T.from(Ae.components()[0]).filter(Ze=>tr(Ze.element,"role")==="menu"),ht={collapseMenu:gt,highlightPrimary:sn,repositionMenus:Ae=>{d.getPrimary().bind(Pt=>Et(Ae).bind(Xt=>{const Ct=h(Xt),qt=ac(d.getMenus()),eo=Ai(De(qt,lA.extractPreparedMenu));return d.getTriggeringPath(Ct,Rn=>C(Ae,eo,Rn))}).map(Xt=>({primary:Pt,triggeringPath:Xt}))).fold(()=>{kt(Ae).each(Pt=>{n.onRepositionMenu(Ae,Pt,[])})},({primary:Pt,triggeringPath:Xt})=>{n.onRepositionMenu(Ae,Pt,Xt)})}};return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:la(n.tmenuBehaviours,[wt.config({mode:"special",onRight:$e(be),onLeft:$e(Ke),onEscape:$e(Re),focusIn:(Ae,Ze)=>{d.getPrimary().each(Pt=>{j0(Ae,Pt.element,yf())})}}),$n.config({highlightClass:n.markers.selectedMenu,itemClass:n.markers.menu}),Le.config({find:Ae=>$n.getHighlighted(Ae)}),jt.config({})]),eventOrder:n.eventOrder,apis:ht,events:Ne}},sB=ie("collapse-item"),rB=(n,s,a)=>({primary:n,menus:s,expansions:a}),aB=(n,s)=>({primary:n,menus:gm(n,s),expansions:{}}),cB=n=>({value:st(sB()),meta:{text:n}}),s1=Yi({name:"TieredMenu",configFields:[fp("onExecute"),fp("onEscape"),pm("onOpenMenu"),pm("onOpenSubmenu"),Dn("onRepositionMenu"),Dn("onCollapseMenu"),de("highlightOnOpen",jr.HighlightMenuAndItem),bu("data",[Be("primary"),Be("menus"),Be("expansions")]),de("fakeFocus",!1),Dn("onHighlightItem"),Dn("onDehighlightItem"),Dn("onHover"),yw(),Be("dom"),de("navigateOnHover",!0),de("stayInDom",!1),Rr("tmenuBehaviours",[wt,$n,Le,jt]),de("eventOrder",{})],apis:{collapseMenu:(n,s)=>{n.collapseMenu(s)},highlightPrimary:(n,s)=>{n.highlightPrimary(s)},repositionMenus:(n,s)=>{n.repositionMenus(s)}},factory:i9,extraApis:{tieredData:rB,singleData:aB,collapseItem:cB}}),kE=ie("sink"),l9=ie(xa({name:kE(),overrides:ie({dom:{tag:"div"},behaviours:Ve([Aa.config({useFixed:Ot})]),events:Io([Mf(rr()),Mf(Wa()),Mf(vf())])})})),u9=hc([de("isExtraPart",In),Za("fireEventInstead",[de("event",gd())])]),dA=n=>{const s=va("Dismissal",u9,n);return{[xu()]:{schema:hc([Be("target")]),onReceive:(a,i)=>{Bn.isOpen(a)&&(Bn.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>Bn.close(a),g=>fn(a,g.event)))}}}},d9=hc([Za("fireEventInstead",[de("event",gw())]),pc("doReposition")]),_E=n=>{const s=va("Reposition",d9,n);return{[Bs()]:{onReceive:a=>{Bn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>fn(a,i.event))}}}},iB=(n,s)=>{const a=n.getHotspot(s).getOr(s),i="hotspot",d=n.getAnchorOverrides();return n.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},bC=(n,s,a)=>{const i=n.fetch;return i(a).map(s)},lB=(n,s,a,i,d,g,h)=>{const C=bC(n,s,i),S=uB(i,n);return C.map(x=>x.bind(_=>{const D=_.menus[_.primary];return T.from(D).each(P=>{n.listRole.each(F=>{P.role=F})}),T.from(s1.sketch({...g.menu(),uid:uh(""),data:_,highlightOnOpen:h,onOpenMenu:(P,F)=>{const z=S().getOrDie();Aa.position(z,F,{anchor:a}),Bn.decloak(d)},onOpenSubmenu:(P,F,z)=>{const G=S().getOrDie();Aa.position(G,z,{anchor:{type:"submenu",item:F}}),Bn.decloak(d)},onRepositionMenu:(P,F,z)=>{const G=S().getOrDie();Aa.position(G,F,{anchor:a}),et(z,J=>{Aa.position(G,J.triggeredMenu,{anchor:{type:"submenu",item:J.triggeringItem}})})},onEscape:()=>(Ut.focus(i),Bn.close(d),T.some(!0))}))}))},AE=(n,s,a,i,d,g,h)=>{const C=iB(n,a);return lB(n,s,C,a,i,d,h).map(x=>(x.fold(()=>{Bn.isOpen(i)&&Bn.close(i)},_=>{Bn.cloak(i),Bn.open(i,_),g(i)}),i))},m9=(n,s,a,i,d,g,h)=>(Bn.close(i),Wo.pure(i)),OE=(n,s,a,i,d,g)=>{const h=Gt.getCoupled(a,"sandbox");return(Bn.isOpen(h)?m9:AE)(n,s,a,h,i,d,g)},f9=(n,s,a)=>{const i=Le.getCurrent(s).getOr(s),d=ra(n.element);a?Ft(i.element,"min-width",d+"px"):df(i.element,d)},uB=(n,s)=>n.getSystem().getByUid(s.uid+"-"+kE()).map(a=>()=>Bt.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Bt.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(n))),dB=n=>{Bn.getState(n).each(s=>{s1.repositionMenus(s)})},mB=(n,s,a)=>{const i=F6(),d=(C,S)=>{const x=iB(n,s);i.link(s.element),n.matchWidth&&f9(x.hotspot,S,n.useMinWidth),n.onOpen(x,C,S),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,S)},g=(C,S)=>{i.unlink(s.element),h().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,S)},h=uB(s,n);return{dom:{tag:"div",classes:n.sandboxClasses,attributes:{id:i.id}},behaviours:Ru.augment(n.sandboxBehaviours,[it.config({store:{mode:"memory",initialValue:s}}),Bn.config({onOpen:d,onClose:g,isPartOf:(C,S,x)=>bh(S,x)||bh(s,x),getAttachPoint:()=>h().getOrDie()}),Le.config({find:C=>Bn.getState(C).bind(S=>Le.getCurrent(S))}),Oa.config({channels:{...dA({isExtraPart:In}),..._E({doReposition:dB})}})])}},g9=n=>{const s=Gt.getCoupled(n,"sandbox");dB(s)},mA=()=>[de("sandboxClasses",[]),Ru.field("sandboxBehaviours",[Le,Oa,Bn,it])],h9=ie([Be("dom"),Be("fetch"),Dn("onOpen"),vc("onExecute"),de("getHotspot",T.some),de("getAnchorOverrides",ie({})),gh(),Rr("dropdownBehaviours",[Sn,Gt,wt,Ut]),Be("toggleClass"),de("eventOrder",{}),Yn("lazySink"),de("matchWidth",!1),de("useMinWidth",!1),Yn("role"),Yn("listRole")].concat(mA())),p9=ie([vi({schema:[yw(),de("fakeFocus",!1)],name:"menu",defaults:n=>({onExecute:n.onExecute})}),l9()]),b9=(n,s,a,i)=>{const d=_=>bt(n.dom,"attributes").bind(D=>bt(D,_)),g=_=>{Bn.getState(_).each(D=>{s1.highlightPrimary(D)})},h=(_,D,P)=>OE(n,an,_,i,D,P),C=_=>{h(_,g,jr.HighlightMenuAndItem).get(Y)},S={expand:_=>{Sn.isOn(_)||h(_,Y,jr.HighlightNone).get(Y)},open:_=>{Sn.isOn(_)||h(_,Y,jr.HighlightMenuAndItem).get(Y)},refetch:_=>Gt.getExistingCoupled(_,"sandbox").fold(()=>h(_,Y,jr.HighlightMenuAndItem).map(Y),P=>AE(n,an,_,P,i,Y,jr.HighlightMenuAndItem).map(Y)),isOpen:Sn.isOn,close:_=>{Sn.isOn(_)&&h(_,Y,jr.HighlightMenuAndItem).get(Y)},repositionMenus:_=>{Sn.isOn(_)&&g9(_)}},x=(_,D)=>(Xg(_),T.some(!0));return{uid:n.uid,dom:n.dom,components:s,behaviours:la(n.dropdownBehaviours,[Sn.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),Gt.config({others:{sandbox:_=>mB(n,_,{onOpen:()=>Sn.on(_),onClose:()=>Sn.off(_)})}}),wt.config({mode:"special",onSpace:x,onEnter:x,onDown:(_,D)=>{if(qc.isOpen(_)){const P=Gt.getCoupled(_,"sandbox");g(P)}else qc.open(_);return T.some(!0)},onEscape:(_,D)=>qc.isOpen(_)?(qc.close(_),T.some(!0)):T.none()}),Ut.config({})]),events:Y_(T.some(C)),eventOrder:{...n.eventOrder,[Ar()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":n.listRole.getOr("true"),...n.role.fold(()=>({}),_=>({role:_})),...n.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},qc=wc({name:"Dropdown",configFields:h9(),partFields:p9(),factory:b9,apis:{open:(n,s)=>n.open(s),refetch:(n,s)=>n.refetch(s),expand:(n,s)=>n.expand(s),close:(n,s)=>n.close(s),isOpen:(n,s)=>n.isOpen(s),repositionMenus:(n,s)=>n.repositionMenus(s)}}),fB="form",v9=[Rr("formBehaviours",[it])],fA=n=>"<alloy.field."+n+">",y9=n=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),I2(fB,fA(C),S)),record:ie(g)}})(),a=n(s),i=s.record(),d=De(i,g=>ca({name:g,pname:fA(g)}));return s_(fB,v9,d,hB,a)},gB=(n,s)=>n.fold(()=>Bt.error(s),Bt.value),hB=(n,s)=>({uid:n.uid,dom:n.dom,components:s,behaviours:la(n.formBehaviours,[it.config({store:{mode:"manual",getValue:a=>{const i=Rl(a,n);return ns(i,(d,g)=>d().bind(h=>{const C=Le.getCurrent(h);return gB(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Ol(h.element)))}).map(it.getValue))},setValue:(a,i)=>{Mo(i,(d,g)=>{fo(a,n,g).each(h=>{Le.getCurrent(h).each(C=>{it.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>fo(a,n,i).bind(Le.getCurrent)}}),vh={getField:Vp((n,s,a)=>n.getField(s,a)),sketch:y9},zb=ie([Be("dom"),de("shell",!0),Rr("toolbarBehaviours",[jt])]),S9=ie([xa({name:"groups",overrides:()=>({behaviours:Ve([jt.config({})])})})]),vC=(n,s,a,i)=>{const d=(C,S)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},x=>{jt.set(x,S)})},g=C=>n.shell?T.some(C):fo(C,n,"groups"),h=n.shell?{behaviours:[jt.config({})],components:[]}:{behaviours:[],components:s};return{uid:n.uid,dom:n.dom,components:h.components,behaviours:la(n.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:Y},domModification:{attributes:{role:"group"}}}},Md=wc({name:"Toolbar",configFields:zb(),partFields:S9(),factory:vC,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)}}}),w9=ie([Tn(["toggledClass"]),Be("lazySink"),pc("fetch"),Hi("getBounds"),Za("fireDismissalEventInstead",[de("event",gd())]),gh(),Dn("onToggled")]),x9=ie([vi({name:"button",overrides:n=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ve([Sn.config({toggleClass:n.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:n.onToggled})])})}),vi({factory:Md,schema:zb(),name:"toolbar",overrides:n=>({toolbarBehaviours:Ve([wt.config({mode:"cyclic",onEscape:s=>(fo(s,n,"button").each(Ut.focus),T.none())})])})})]),Vb=Zt(),pB=(n,s)=>{Vb.set(!0),gA(n,s),Vb.clear()},gA=(n,s)=>{const a=Gt.getCoupled(n,"toolbarSandbox");Bn.isOpen(a)?Bn.close(a):Bn.open(a,s.toolbar())},yC=(n,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(n).getOrDie();Aa.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:n,layouts:i,overrides:{maxWidthFunction:_p()}}},d)},bB=(n,s,a,i,d)=>{Md.setGroups(s,d),yC(n,s,a,i),Sn.on(n)},E9=(n,s,a)=>{const i=F6(),d=(h,C)=>{const S=Vb.get().getOr(!1);a.fetch().get(x=>{bB(n,C,a,s.layouts,x),i.link(n.element),S||wt.focusIn(C)})},g=()=>{Sn.off(n),Vb.get().getOr(!1)||Ut.focus(n),i.unlink(n.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Ve([wt.config({mode:"special",onEscape:h=>(Bn.close(h),T.some(!0))}),Bn.config({onOpen:d,onClose:g,isPartOf:(h,C,S)=>bh(C,S)||bh(n,S),getAttachPoint:()=>a.lazySink(n).getOrDie()}),Oa.config({channels:{...dA({isExtraPart:In,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),..._E({doReposition:()=>{Bn.getState(Gt.getCoupled(n,"toolbarSandbox")).each(h=>{yC(n,h,a,s.layouts)})}})}})])}},qf=wc({name:"FloatingToolbarButton",factory:(n,s,a,i)=>({...ar.sketch({...i.button(),action:d=>{gA(d,i)},buttonBehaviours:Ru.augment({dump:i.button().buttonBehaviours},[Gt.config({others:{toolbarSandbox:d=>E9(d,a,n)}})])}),apis:{setGroups:(d,g)=>{Bn.getState(Gt.getCoupled(d,"toolbarSandbox")).each(h=>{bB(d,h,n,a.layouts,g)})},reposition:d=>{Bn.getState(Gt.getCoupled(d,"toolbarSandbox")).each(g=>{yC(d,g,n,a.layouts)})},toggle:d=>{gA(d,i)},toggleWithoutFocusing:d=>{pB(d,i)},getToolbar:d=>Bn.getState(Gt.getCoupled(d,"toolbarSandbox")),isOpen:d=>Bn.isOpen(Gt.getCoupled(d,"toolbarSandbox"))}}),configFields:w9(),partFields:x9(),apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggleWithoutFocusing(s)},getToolbar:(n,s)=>n.getToolbar(s),isOpen:(n,s)=>n.isOpen(s)}}),vB=ie([de("prefix","form-field"),Rr("fieldBehaviours",[Le,it])]),T9=ie([xa({schema:[Be("dom")],name:"label"}),xa({factory:{sketch:n=>({uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}})},schema:[Be("text")],name:"aria-descriptor"}),ca({factory:{sketch:n=>{const s=x2(n,["factory"]);return n.factory.sketch(s)}},schema:[Be("factory")],name:"field"})]),k9=(n,s,a,i)=>{const d=la(n.fieldBehaviours,[Le.config({find:C=>fo(C,n,"field")}),it.config({store:{mode:"manual",getValue:C=>Le.getCurrent(C).bind(it.getValue),setValue:(C,S)=>{Le.getCurrent(C).each(x=>{it.setValue(x,S)})}}})]),g=Io([Eo((C,S)=>{const x=pd(C,n,["label","field","aria-descriptor"]);x.field().each(_=>{const D=st(n.prefix);x.label().each(P=>{Nt(P.element,"for",D),Nt(_.element,"id",D)}),x["aria-descriptor"]().each(P=>{const F=st(n.prefix);Nt(P.element,"id",F),Nt(_.element,"aria-describedby",F)})})})]),h={getField:C=>fo(C,n,"field"),getLabel:C=>fo(C,n,"label")};return{uid:n.uid,dom:n.dom,components:s,behaviours:d,events:g,apis:h}},pn=wc({name:"FormField",configFields:vB(),partFields:T9(),factory:k9,apis:{getField:(n,s)=>n.getField(s),getLabel:(n,s)=>n.getLabel(s)}}),_9=ie([de("field1Name","field1"),de("field2Name","field2"),pm("onLockedChange"),Tn(["lockClass"]),de("locked",!1),Ru.field("coupledFieldBehaviours",[Le,it]),yo("onInput",Y)]),A9=(n,s,a)=>fo(n,s,a).bind(Le.getCurrent),yB=(n,s)=>ca({factory:pn,name:n,overrides:a=>({fieldBehaviours:Ve([Vt("coupled-input-behaviour",[Te(_l(),i=>{A9(i,a,s).each(d=>{fo(i,a,"lock").each(g=>{Sn.isOn(g)&&a.onLockedChange(i,d,g),a.onInput(i)})})})])])})}),O9=ie([yB("field1","field2"),yB("field2","field1"),ca({factory:ar,schema:[Be("dom")],name:"lock",overrides:n=>({buttonBehaviours:Ve([Sn.config({selected:n.locked,toggleClass:n.markers.lockClass,aria:{mode:"pressed"}})])})})]),D9=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,behaviours:Ru.augment(n.coupledFieldBehaviours,[Le.config({find:T.some}),it.config({store:{mode:"manual",getValue:d=>{const g=N0(d,n,["field1","field2"]);return{[n.field1Name]:it.getValue(g.field1()),[n.field2Name]:it.getValue(g.field2())}},setValue:(d,g)=>{const h=N0(d,n,["field1","field2"]);hn(g,n.field1Name)&&it.setValue(h.field1(),g[n.field1Name]),hn(g,n.field2Name)&&it.setValue(h.field2(),g[n.field2Name])}}})]),apis:{getField1:d=>fo(d,n,"field1"),getField2:d=>fo(d,n,"field2"),getLock:d=>fo(d,n,"lock")}}),xs=wc({name:"FormCoupledInputs",configFields:_9(),partFields:O9(),factory:D9,apis:{getField1:(n,s)=>n.getField1(s),getField2:(n,s)=>n.getField2(s),getLock:(n,s)=>n.getLock(s)}}),R9=(n,s)=>{const a=De(n.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=n.data.map(d=>gm("initialValue",d)).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:a,behaviours:la(n.selectBehaviours,[Ut.config({}),it.config({store:{mode:"manual",getValue:d=>Fc(d.element),setValue:(d,g)=>{const h=Qn(n.options);vt(n.options,S=>S.value===g).isSome()?cm(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(S=>cm(d.element,S.value))},...i}})])}},pA=Yi({name:"HtmlSelect",configFields:[Be("options"),Rr("selectBehaviours",[Ut,it]),de("selectClasses",[]),de("selectAttributes",{}),Yn("data")],factory:R9}),CB=(n,s,a,i,d)=>{const g=()=>n.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>j2(),onRtl:()=>H0()}}:{},C=x=>x.length===2,S=x=>C(x)?h:{};return s1.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Bn.close(s),n.onEscape.map(x=>x(s)),T.some(!0)),onExecute:()=>T.some(!0),onOpenMenu:(x,_)=>{Aa.positionWithinBounds(g().getOrDie(),_,a,d())},onOpenSubmenu:(x,_,D,P)=>{const F=g().getOrDie();Aa.position(F,D,{anchor:{type:"submenu",item:_,...S(P)}})},onRepositionMenu:(x,_,D)=>{const P=g().getOrDie();Aa.positionWithinBounds(P,_,a,d()),et(D,F=>{const z=S(F.triggeringPath);Aa.position(P,F.triggeredMenu,{anchor:{type:"submenu",item:F.triggeringItem,...z}})})}})},M9=(n,s)=>{const a=(P,F)=>n.getRelated(P).exists(G=>bh(G,F)),i=(P,F)=>{Bn.setContent(P,F)},d=(P,F,z)=>{const G=T.none;g(P,F,z,G)},g=(P,F,z,G)=>{const J=n.lazySink(P).getOrDie();Bn.openWhileCloaked(P,F,()=>Aa.positionWithinBounds(J,P,z,G())),it.setValue(P,T.some({mode:"position",config:z,getBounds:G}))},h=(P,F,z)=>{C(P,F,z,T.none)},C=(P,F,z,G)=>{const J=CB(n,P,F,z,G);Bn.open(P,J),it.setValue(P,T.some({mode:"menu",menu:J}))},S=P=>{Bn.isOpen(P)&&(it.setValue(P,T.none()),Bn.close(P))},x=P=>Bn.getState(P),_=P=>{Bn.isOpen(P)&&it.getValue(P).each(F=>{switch(F.mode){case"menu":Bn.getState(P).each(s1.repositionMenus);break;case"position":const z=n.lazySink(P).getOrDie();Aa.positionWithinBounds(z,P,F.config,F.getBounds());break}})},D={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:S,getContent:x,reposition:_,isOpen:Bn.isOpen};return{uid:n.uid,dom:n.dom,behaviours:la(n.inlineBehaviours,[Bn.config({isPartOf:(P,F,z)=>bh(F,z)||a(P,z),getAttachPoint:P=>n.lazySink(P).getOrDie(),onOpen:P=>{n.onShow(P)},onClose:P=>{n.onHide(P)}}),it.config({store:{mode:"memory",initialValue:T.none()}}),Oa.config({channels:{...dA({isExtraPart:s.isExtraPart,...n.fireDismissalEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({})}),..._E({...n.fireRepositionEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({}),doReposition:_})}})]),eventOrder:n.eventOrder,apis:D}},Qo=Yi({name:"InlineView",configFields:[Be("lazySink"),Dn("onShow"),Dn("onHide"),Hi("onEscape"),Rr("inlineBehaviours",[Bn,it,Oa]),Za("fireDismissalEventInstead",[de("event",gd())]),Za("fireRepositionEventInstead",[de("event",gw())]),de("getRelated",T.none),de("isExtraPart",In),de("eventOrder",T.none)],factory:M9,apis:{showAt:(n,s,a,i)=>{n.showAt(s,a,i)},showWithinBounds:(n,s,a,i,d)=>{n.showWithinBounds(s,a,i,d)},showMenuAt:(n,s,a,i)=>{n.showMenuAt(s,a,i)},showMenuWithinBounds:(n,s,a,i,d)=>{n.showMenuWithinBounds(s,a,i,d)},hide:(n,s)=>{n.hide(s)},isOpen:(n,s)=>n.isOpen(s),getContent:(n,s)=>n.getContent(s),setContent:(n,s,a)=>{n.setContent(s,a)},reposition:(n,s)=>{n.reposition(s)}}}),bA=ie([Jo("type","text"),Yn("data"),de("inputAttributes",{}),de("inputStyles",{}),de("tag","input"),de("inputClasses",[]),Dn("onSetValue"),yo("fromInputValue",an),yo("toInputValue",an),de("styles",{}),de("eventOrder",{}),Rr("inputBehaviours",[it,Ut]),de("selectOnFocus",!0)]),SB=n=>Ve([Ut.config({onFocus:n.selectOnFocus?s=>{const a=s.element,i=Fc(a);n.type!=="range"&&a.dom.setSelectionRange(0,i.length)}:Y})]),B9=n=>({...SB(n),...la(n.inputBehaviours,[it.config({store:{mode:"manual",...n.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>n.fromInputValue(Fc(s.element)),setValue:(s,a)=>{Fc(s.element)!==a&&cm(s.element,n.toInputValue(a))}},onSetValue:n.onSetValue})])}),vA=n=>({tag:n.tag,attributes:{type:n.type,...n.inputAttributes},styles:n.inputStyles,classes:n.inputClasses}),wB=(n,s)=>({uid:n.uid,dom:vA(n),components:[],behaviours:B9(n),eventOrder:n.eventOrder}),Fm=Yi({name:"Input",configFields:bA(),factory:wB}),yA=vm(nA(),oA()),N9=(n,s)=>{const a=xr(n,"id").fold(()=>{const i=st("dialog-label");return Nt(s,"id",i),i},an);Nt(n,"aria-labelledby",a)},P9=ie([Be("lazySink"),Yn("dragBlockClass"),yo("getBounds",Ur),de("useTabstopAt",Ot),de("firstTabstop",0),de("eventOrder",{}),Rr("modalBehaviours",[wt]),vc("onExecute"),fp("onEscape")]),DE={sketch:an},CA=ie([xa({name:"draghandle",overrides:(n,s)=>({behaviours:Ve([Zf.config({mode:"mouse",getTarget:a=>$i(a,'[role="dialog"]').getOr(a),blockerClass:n.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:n.getDragBounds})])})}),ca({schema:[Be("dom")],name:"title"}),ca({factory:DE,schema:[Be("dom")],name:"close"}),ca({factory:DE,schema:[Be("dom")],name:"body"}),xa({factory:DE,schema:[Be("dom")],name:"footer"}),vi({factory:{sketch:(n,s)=>({...n,dom:s.dom,components:s.components})},schema:[de("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),de("components",[])],name:"blocker"})]),$9=(n,s,a,i)=>{const d=Zt(),g=z=>{d.set(z);const G=n.lazySink(z).getOrDie(),J=i.blocker(),W=G.getSystem().build({...J,components:J.components.concat([p(z)]),behaviours:Ve([Ut.config({}),Vt("dialog-blocker-events",[eh(zi(),()=>{ce.isBlocked(z)?Y():wt.focusIn(z)})])])});wd(G,W),wt.focusIn(z)},h=z=>{d.clear(),Fa(z.element).each(G=>{z.getSystem().getByDom(G).each(J=>{Ed(J)})})},C=z=>Dl(z,n,"body"),S=z=>fo(z,n,"footer"),x=(z,G)=>{ce.block(z,G)},_=z=>{ce.unblock(z)},D=st("modal-events"),P={...n.eventOrder,[Al()]:[D].concat(n.eventOrder["alloy.system.attached"]||[])},F=Hr();return{uid:n.uid,dom:n.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:S,setIdle:_,setBusy:x},eventOrder:P,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:la(n.modalBehaviours,[jt.config({}),wt.config({mode:"cyclic",onEnter:n.onExecute,onEscape:n.onEscape,useTabstopAt:n.useTabstopAt,firstTabstop:n.firstTabstop}),ce.config({getRoot:d.get}),Vt(D,[Eo(z=>{const G=Dl(z,n,"title").element,J=f3(G);F.os.isMacOS()&&Jn(J)?Nt(z.element,"aria-label",J):N9(z.element,G)})])])}},cr=wc({name:"ModalDialog",configFields:P9(),partFields:CA(),factory:$9,apis:{show:(n,s)=>{n.show(s)},hide:(n,s)=>{n.hide(s)},getBody:(n,s)=>n.getBody(s),getFooter:(n,s)=>n.getFooter(s),setBusy:(n,s,a)=>{n.setBusy(s,a)},setIdle:(n,s)=>{n.setIdle(s)}}}),I9=xa({schema:[Be("dom")],name:"label"}),yh=n=>xa({name:""+n+"-edge",overrides:s=>s.model.manager.edgeActions[n].fold(()=>({}),i=>({events:Io([Jg(bc(),(d,g,h)=>i(d,h),[s]),Jg(Wa(),(d,g,h)=>i(d,h),[s]),Jg($g(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),L9=yh("top-left"),F9=yh("top"),xB=yh("top-right"),EB=yh("right"),H9=yh("bottom-right"),z9=yh("bottom"),V9=yh("bottom-left"),Si=yh("left"),Nu=ca({name:"thumb",defaults:ie({dom:{styles:{position:"absolute"}}}),overrides:n=>({events:Io([wu(bc(),n,"spectrum"),wu(ys(),n,"spectrum"),wu(hm(),n,"spectrum"),wu(Wa(),n,"spectrum"),wu($g(),n,"spectrum"),wu(g0(),n,"spectrum")])})}),CC=n=>km(n.event),SA=ca({schema:[Ca("mouseIsDown",()=>pt(!1))],name:"spectrum",overrides:n=>{const a=n.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,n,h));return{behaviours:Ve([wt.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,n,CC(g)),onRight:(d,g)=>a.onRight(d,n,CC(g)),onUp:(d,g)=>a.onUp(d,n,CC(g)),onDown:(d,g)=>a.onDown(d,n,CC(g))}),So.config({}),Ut.config({})]),events:Io([Te(bc(),i),Te(ys(),i),Te(Wa(),i),Te($g(),(d,g)=>{n.mouseIsDown.get()&&i(d,g)})])}}});var wA=[I9,Si,EB,F9,z9,L9,xB,V9,H9,Nu,SA];const SC=ie("slider.change.value"),TB=n=>n.type.indexOf("touch")!==-1,r1=n=>{const s=n.event.raw;if(TB(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?T.some(a.touches[0]).map(i=>co(i.clientX,i.clientY)):T.none()}else{const a=s;return a.clientX!==void 0?T.some(a).map(i=>co(i.clientX,i.clientY)):T.none()}},U9="top",RE="right",EA="bottom",kB="left",Bd=n=>n.model.minX,a1=n=>n.model.minY,ME=n=>n.model.minX-1,Qi=n=>n.model.minY-1,Yr=n=>n.model.maxX,Nd=n=>n.model.maxY,Ya=n=>n.model.maxX+1,BE=n=>n.model.maxY+1,wo=(n,s,a)=>s(n)-a(n),TA=n=>wo(n,Yr,Bd),Pd=n=>wo(n,Nd,a1),Ub=n=>TA(n)/2,kA=n=>Pd(n)/2,Ch=(n,s)=>s?n.stepSize*n.speedMultiplier:n.stepSize,NE=n=>n.snapToGrid,_B=n=>n.snapStart,PE=n=>n.rounded,$E=(n,s)=>n[s+"-edge"]!==void 0,_A=n=>$E(n,kB),AA=n=>$E(n,RE),IE=n=>$E(n,U9),OA=n=>$E(n,EA),Pu=n=>n.model.value.get(),Sh=(n,s)=>({x:n,y:s}),$u=(n,s)=>{xt(n,SC(),{value:s})},Z9=(n,s)=>{$u(n,Sh(ME(s),Qi(s)))},W9=(n,s)=>{$u(n,Qi(s))},j9=(n,s)=>{$u(n,Sh(Ub(s),Qi(s)))},AB=(n,s)=>{$u(n,Sh(Ya(s),Qi(s)))},G9=(n,s)=>{$u(n,Ya(s))},q9=(n,s)=>{$u(n,Sh(Ya(s),kA(s)))},OB=(n,s)=>{$u(n,Sh(Ya(s),BE(s)))},K9=(n,s)=>{$u(n,BE(s))},DB=(n,s)=>{$u(n,Sh(Ub(s),BE(s)))},wC=(n,s)=>{$u(n,Sh(ME(s),BE(s)))},Y9=(n,s)=>{$u(n,ME(s))},X9=(n,s)=>{$u(n,Sh(ME(s),kA(s)))},LE=(n,s,a,i)=>n<s?n:n>a?a:n===s?s-1:Math.max(s,n-i),FE=(n,s,a,i)=>n>a?n:n<s?s:n===a?a+1:Math.min(a,n+i),HE=(n,s,a)=>Math.max(s,Math.min(a,n)),RB=(n,s,a,i,d)=>d.fold(()=>{const g=n-s,h=Math.round(g/i)*i;return HE(s+h,s-1,a+1)},g=>{const h=(n-g)%i,C=Math.round(h/i),S=Math.floor((n-g)/i),x=Math.floor((a-g)/i),_=Math.min(x,S+C),D=g+_*i;return Math.max(g,D)}),J9=(n,s,a)=>Math.min(a,Math.max(n,s))-s,MB=n=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:C,rounded:S,hasMinEdge:x,hasMaxEdge:_,minBound:D,maxBound:P,screenRange:F}=n,z=x?s-1:s,G=_?a+1:a;if(d<D)return z;if(d>P)return G;{const J=J9(d,D,P),W=HE(J/F*i+s,z,G);return h&&W>=s&&W<=a?RB(W,s,a,g,C):S?Math.round(W):W}},BB=n=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:S,centerMinEdge:x,centerMaxEdge:_}=n;return d<s?g?0:x:d>a?h?C:_:(d-s)/i*S},DA="top",NB="right",PB="bottom",zE="left",Iu="width",Q9="height",Lu=n=>n.element.dom.getBoundingClientRect(),Vl=(n,s)=>n[s],xC=n=>{const s=Lu(n);return Vl(s,zE)},$B=n=>{const s=Lu(n);return Vl(s,NB)},EC=n=>{const s=Lu(n);return Vl(s,DA)},RA=n=>{const s=Lu(n);return Vl(s,PB)},MA=n=>{const s=Lu(n);return Vl(s,Iu)},IB=n=>{const s=Lu(n);return Vl(s,Q9)},LB=(n,s,a)=>(n+s)/2-a,FB=(n,s)=>{const a=Lu(n),i=Lu(s),d=Vl(a,zE),g=Vl(a,NB),h=Vl(i,zE);return LB(d,g,h)},HB=(n,s)=>{const a=Lu(n),i=Lu(s),d=Vl(a,DA),g=Vl(a,PB),h=Vl(i,DA);return LB(d,g,h)},VE=(n,s)=>{xt(n,SC(),{value:s})},BA=(n,s,a)=>{const i={min:Bd(s),max:Yr(s),range:TA(s),value:a,step:Ch(s),snap:NE(s),snapStart:_B(s),rounded:PE(s),hasMinEdge:_A(s),hasMaxEdge:AA(s),minBound:xC(n),maxBound:$B(n),screenRange:MA(n)};return MB(i)},ez=(n,s,a)=>{const i=BA(n,s,a);return VE(n,i),i},zB=(n,s)=>{const a=Bd(s);VE(n,a)},VB=(n,s)=>{const a=Yr(s);VE(n,a)},UB=(n,s,a,i)=>{const g=(n>0?FE:LE)(Pu(a),Bd(a),Yr(a),Ch(a,i));return VE(s,g),T.some(g)},NA=n=>(s,a,i)=>UB(n,s,a,i).map(Ot),tz=n=>r1(n).map(a=>a.left),nz=(n,s,a,i,d)=>{const h=MA(n),C=i.bind(_=>T.some(FB(_,n))).getOr(0),S=d.bind(_=>T.some(FB(_,n))).getOr(h),x={min:Bd(s),max:Yr(s),range:TA(s),value:a,hasMinEdge:_A(s),hasMaxEdge:AA(s),minBound:xC(n),maxBound:$B(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return BB(x)},PA=(n,s,a,i,d,g)=>{const h=nz(s,g,a,i,d);return xC(s)-xC(n)+h},ZB=(n,s,a,i)=>{const d=Pu(a),g=PA(n,i.getSpectrum(n),d,i.getLeftEdge(n),i.getRightEdge(n),a),h=ra(s.element)/2;Ft(s.element,"left",g-h+"px")},Zb=NA(-1),UE=NA(1),oz=T.none,WB=T.none,jB={"top-left":T.none(),top:T.none(),"top-right":T.none(),right:T.some(G9),"bottom-right":T.none(),bottom:T.none(),"bottom-left":T.none(),left:T.some(Y9)};var GB=Object.freeze({__proto__:null,setValueFrom:ez,setToMin:zB,setToMax:VB,findValueOfOffset:BA,getValueFromEvent:tz,findPositionOfValue:PA,setPositionFromValue:ZB,onLeft:Zb,onRight:UE,onUp:oz,onDown:WB,edgeActions:jB});const TC=(n,s)=>{xt(n,SC(),{value:s})},kC=(n,s,a)=>{const i={min:a1(s),max:Nd(s),range:Pd(s),value:a,step:Ch(s),snap:NE(s),snapStart:_B(s),rounded:PE(s),hasMinEdge:IE(s),hasMaxEdge:OA(s),minBound:EC(n),maxBound:RA(n),screenRange:IB(n)};return MB(i)},$A=(n,s,a)=>{const i=kC(n,s,a);return TC(n,i),i},sz=(n,s)=>{const a=a1(s);TC(n,a)},rz=(n,s)=>{const a=Nd(s);TC(n,a)},az=(n,s,a,i)=>{const g=(n>0?FE:LE)(Pu(a),a1(a),Nd(a),Ch(a,i));return TC(s,g),T.some(g)},IA=n=>(s,a,i)=>az(n,s,a,i).map(Ot),qB=n=>r1(n).map(a=>a.top),cz=(n,s,a,i,d)=>{const h=IB(n),C=i.bind(_=>T.some(HB(_,n))).getOr(0),S=d.bind(_=>T.some(HB(_,n))).getOr(h),x={min:a1(s),max:Nd(s),range:Pd(s),value:a,hasMinEdge:IE(s),hasMaxEdge:OA(s),minBound:EC(n),maxBound:RA(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return BB(x)},LA=(n,s,a,i,d,g)=>{const h=cz(s,g,a,i,d);return EC(s)-EC(n)+h},KB=(n,s,a,i)=>{const d=Pu(a),g=LA(n,i.getSpectrum(n),d,i.getTopEdge(n),i.getBottomEdge(n),a),h=nr(s.element)/2;Ft(s.element,"top",g-h+"px")},iz=T.none,lz=T.none,uz=IA(-1),dz=IA(1),mz={"top-left":T.none(),top:T.some(W9),"top-right":T.none(),right:T.none(),"bottom-right":T.none(),bottom:T.some(K9),"bottom-left":T.none(),left:T.none()};var fz=Object.freeze({__proto__:null,setValueFrom:$A,setToMin:sz,setToMax:rz,findValueOfOffset:kC,getValueFromEvent:qB,findPositionOfValue:LA,setPositionFromValue:KB,onLeft:iz,onRight:lz,onUp:uz,onDown:dz,edgeActions:mz});const ZE=(n,s)=>{xt(n,SC(),{value:s})},_C=(n,s)=>({x:n,y:s}),YB=(n,s,a)=>{const i=BA(n,s,a.left),d=kC(n,s,a.top),g=_C(i,d);return ZE(n,g),g},gz=(n,s,a,i,d)=>{const g=n>0?FE:LE,h=s?Pu(i).x:g(Pu(i).x,Bd(i),Yr(i),Ch(i,d)),C=s?g(Pu(i).y,a1(i),Nd(i),Ch(i,d)):Pu(i).y;return ZE(a,_C(h,C)),T.some(h)},WE=(n,s)=>(a,i,d)=>gz(n,s,a,i,d).map(Ot),hz=(n,s)=>{const a=Bd(s),i=a1(s);ZE(n,_C(a,i))},XB=(n,s)=>{const a=Yr(s),i=Nd(s);ZE(n,_C(a,i))},pz=n=>r1(n),bz=(n,s,a,i)=>{const d=Pu(a),g=PA(n,i.getSpectrum(n),d.x,i.getLeftEdge(n),i.getRightEdge(n),a),h=LA(n,i.getSpectrum(n),d.y,i.getTopEdge(n),i.getBottomEdge(n),a),C=ra(s.element)/2,S=nr(s.element)/2;Ft(s.element,"left",g-C+"px"),Ft(s.element,"top",h-S+"px")},vz=WE(-1,!1),jE=WE(1,!1),yz=WE(-1,!0),Cz=WE(1,!0),Sz={"top-left":T.some(Z9),top:T.some(j9),"top-right":T.some(AB),right:T.some(q9),"bottom-right":T.some(OB),bottom:T.some(DB),"bottom-left":T.some(wC),left:T.some(X9)};var wz=Object.freeze({__proto__:null,setValueFrom:YB,setToMin:hz,setToMax:XB,getValueFromEvent:pz,setPositionFromValue:bz,onLeft:vz,onRight:jE,onUp:yz,onDown:Cz,edgeActions:Sz});const xz=[de("stepSize",1),de("speedMultiplier",10),de("onChange",Y),de("onChoose",Y),de("onInit",Y),de("onDragStart",Y),de("onDragEnd",Y),de("snapToGrid",!1),de("rounded",!0),Yn("snapStart"),Va("model",ya("mode",{x:[de("minX",0),de("maxX",100),Ca("value",n=>pt(n.mode.minX)),Be("getInitialValue"),Zn("manager",GB)],y:[de("minY",0),de("maxY",100),Ca("value",n=>pt(n.mode.minY)),Be("getInitialValue"),Zn("manager",fz)],xy:[de("minX",0),de("maxX",100),de("minY",0),de("maxY",100),Ca("value",n=>pt({x:n.mode.minX,y:n.mode.minY})),Be("getInitialValue"),Zn("manager",wz)]})),Rr("sliderBehaviours",[wt,it]),Ca("mouseIsDown",()=>pt(!1))],Fu=wc({name:"Slider",configFields:xz,partFields:wA,factory:(n,s,a,i)=>{const d=be=>Dl(be,n,"thumb"),g=be=>Dl(be,n,"spectrum"),h=be=>fo(be,n,"left-edge"),C=be=>fo(be,n,"right-edge"),S=be=>fo(be,n,"top-edge"),x=be=>fo(be,n,"bottom-edge"),_=n.model,D=_.manager,P=(be,Ke)=>{D.setPositionFromValue(be,Ke,n,{getLeftEdge:h,getRightEdge:C,getTopEdge:S,getBottomEdge:x,getSpectrum:g})},F=(be,Ke)=>{_.value.set(Ke);const Re=d(be);P(be,Re)},z=(be,Ke)=>{F(be,Ke);const Re=d(be);return n.onChange(be,Re,Ke),T.some(!0)},G=be=>{D.setToMin(be,n)},J=be=>{D.setToMax(be,n)},W=be=>{const Ke=()=>{fo(be,n,"thumb").each($e=>{const Ne=_.value.get();n.onChoose(be,$e,Ne)})},Re=n.mouseIsDown.get();n.mouseIsDown.set(!1),Re&&Ke()},ee=(be,Ke)=>{Ke.stop(),n.mouseIsDown.set(!0),n.onDragStart(be,d(be))},re=(be,Ke)=>{Ke.stop(),n.onDragEnd(be,d(be)),W(be)},fe=be=>{fo(be,n,"spectrum").map(wt.focusIn)};return{uid:n.uid,dom:n.dom,components:s,behaviours:la(n.sliderBehaviours,[wt.config({mode:"special",focusIn:fe}),it.config({store:{mode:"manual",getValue:be=>_.value.get(),setValue:F}}),Oa.config({channels:{[Cd()]:{onReceive:W}}})]),events:Io([Te(SC(),(be,Ke)=>{z(be,Ke.event.value)}),Eo((be,Ke)=>{const Re=_.getInitialValue();_.value.set(Re);const $e=d(be);P(be,$e);const Ne=g(be);n.onInit(be,$e,Ne,_.value.get())}),Te(bc(),ee),Te(hm(),re),Te(Wa(),(be,Ke)=>{fe(be),ee(be,Ke)}),Te(g0(),re)]),apis:{resetToMin:G,resetToMax:J,setValue:F,refresh:P},domModification:{styles:{position:"relative"}}}},apis:{setValue:(n,s,a)=>{n.setValue(s,a)},resetToMin:(n,s)=>{n.resetToMin(s)},resetToMax:(n,s)=>{n.resetToMax(s)},refresh:(n,s)=>{n.refresh(s)}}}),JB="container",Ez=[Rr("slotBehaviours",[])],QB=n=>"<alloy.field."+n+">",Tz=n=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),I2(JB,QB(C),S)),record:ie(g)}})(),a=n(s),i=s.record(),d=De(i,g=>ca({name:g,pname:QB(g)}));return s_(JB,Ez,d,kz,a)},kz=(n,s)=>{const a=G=>Uc(n),i=(G,J)=>fo(G,n,J),d=(G,J)=>(W,ee)=>fo(W,n,ee).map(re=>G(re,ee)).getOr(J),g=G=>(J,W)=>{et(W,ee=>G(J,ee))},h=(G,J)=>tr(G.element,"aria-hidden")!=="true",C=(G,J)=>{if(!h(G)){const W=G.element;Cn(W,"display"),No(W,"aria-hidden"),xt(G,A2(),{name:J,visible:!0})}},S=(G,J)=>{if(h(G)){const W=G.element;Ft(W,"display","none"),Nt(W,"aria-hidden","true"),xt(G,A2(),{name:J,visible:!1})}},x=d(h,!1),_=d(S),D=g(_),P=G=>D(G,a()),F=d(C),z={getSlotNames:a,getSlot:i,isShowing:x,hideSlot:_,hideAllSlots:P,showSlot:F};return{uid:n.uid,dom:n.dom,components:s,behaviours:oC(n.slotBehaviours),apis:z}},Xr={...ns({getSlotNames:(n,s)=>n.getSlotNames(s),getSlot:(n,s,a)=>n.getSlot(s,a),isShowing:(n,s,a)=>n.isShowing(s,a),hideSlot:(n,s,a)=>n.hideSlot(s,a),hideAllSlots:(n,s)=>n.hideAllSlots(s),showSlot:(n,s,a)=>n.showSlot(s,a)},n=>Vp(n)),sketch:Tz},_z=(n,s)=>po(n,(d,g)=>s(g,d.len).fold(ie(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,FA=(n,s,a)=>({within:n,extra:s,withinWidth:a}),eN=(n,s,a)=>{const i=_z(n,(C,S)=>{const x=a(C);return T.some({element:C,start:S,finish:S+x,width:x})}),d=no(i,C=>C.finish<=s),g=ts(d,(C,S)=>C+S.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},AC=n=>De(n,s=>s.element),Az=(n,s,a)=>{const i=AC(n.concat(s));return FA(i,[],a)},Oz=(n,s,a,i)=>{const d=AC(n).concat([a]);return FA(d,AC(s),i)},Dz=(n,s,a)=>FA(AC(n),[],a),Rz=(n,s,a)=>{const i=eN(s,n,a);return i.extra.length===0?T.some(i):T.none()},Mz=(n,s,a,i)=>{const d=Rz(n,s,a).getOrThunk(()=>eN(s,n-a(i),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(i)?Az(g,h,C):h.length>=1?Oz(g,h,i,C):Dz(g,h,C)},tN=(n,s)=>{const a=De(s,i=>p(i));Md.setGroups(n,a)},HA=n=>ta(n,s=>zs(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),nN=(n,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Dl(n,s,"primary"),g=Gt.getCoupled(n,"overflowGroup");Ft(d.element,"visibility","hidden");const h=i.concat([g]),C=HA(h);a([]),tN(d,h);const S=ra(d.element),x=Mz(S,s.builtGroups.get(),_=>Math.ceil(_.element.dom.getBoundingClientRect().width),g);x.extra.length===0?(jt.remove(d,g),a([])):(tN(d,x.within),a(x.extra)),Cn(d.element,"visibility"),Pi(d.element),C.each(Ut.focus)},oN=ie([Rr("splitToolbarBehaviours",[Gt]),Ca("builtGroups",()=>pt([]))]),Bz=ie([Tn(["overflowToggledClass"]),Hi("getOverflowBounds"),Be("lazySink"),Ca("overflowGroups",()=>pt([])),Dn("onOpened"),Dn("onClosed")].concat(oN())),Nz=ie([ca({factory:Md,schema:zb(),name:"primary"}),vi({schema:zb(),name:"overflow"}),vi({name:"overflow-button"}),vi({name:"overflow-group"})]),Pz=ie([Be("items"),Tn(["itemSelector"]),Rr("tgroupBehaviours",[wt])]),$z=ie([R0({name:"items",unit:"item"})]),Iz=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,behaviours:la(n.tgroupBehaviours,[wt.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),GE=wc({name:"ToolbarGroup",configFields:Pz(),partFields:$z(),factory:Iz}),sN=n=>De(n,s=>p(s)),rN=(n,s,a)=>{nN(n,a,i=>{a.overflowGroups.set(i),s.getOpt(n).each(d=>{qf.setGroups(d,sN(i))})})},Lz=(n,s,a,i)=>{const d=Ln(qf.sketch({fetch:()=>Wo.nu(g=>{g(sN(n.overflowGroups.get()))}),layouts:{onLtr:()=>[Rs,Ws],onRtl:()=>[Ws,Rs],onBottomLtr:()=>[dr,Dr],onBottomRtl:()=>[Dr,dr]},getBounds:a.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>n[h?"onOpened":"onClosed"](g)}));return{uid:n.uid,dom:n.dom,components:s,behaviours:la(n.splitToolbarBehaviours,[Gt.config({others:{overflowGroup:()=>GE.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{n.builtGroups.set(De(h,g.getSystem().build)),rN(g,d,n)},refresh:g=>rN(g,d,n),toggle:g=>{d.getOpt(g).each(h=>{qf.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(qf.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(qf.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{qf.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(qf.getToolbar)},domModification:{attributes:{role:"group"}}}},aN=wc({name:"SplitFloatingToolbar",configFields:Bz(),partFields:Nz(),factory:Lz,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s),getOverflow:(n,s)=>n.getOverflow(s)}}),Fz=ie([Tn(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Dn("onOpened"),Dn("onClosed")].concat(oN())),Hz=ie([ca({factory:Md,schema:zb(),name:"primary"}),ca({factory:Md,schema:zb(),name:"overflow",overrides:n=>({toolbarBehaviours:Ve([Ka.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:s=>{fo(s,n,"overflow-button").each(a=>{Sn.off(a)}),n.onClosed(s)},onGrown:s=>{n.onOpened(s)},onStartGrow:s=>{fo(s,n,"overflow-button").each(Sn.on)}}),wt.config({mode:"acyclic",onEscape:s=>(fo(s,n,"overflow-button").each(Ut.focus),T.some(!0))})])})}),vi({name:"overflow-button",overrides:n=>({buttonBehaviours:Ve([Sn.config({toggleClass:n.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),vi({name:"overflow-group"})]),zz=(n,s)=>fo(n,s,"overflow").map(Ka.hasGrown).getOr(!1),OC=(n,s,a)=>{fo(n,s,"overflow-button").each(i=>{fo(n,s,"overflow").each(d=>{if(zA(n,s),Ka.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||wt.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||Ut.focus(i),g(h),s.onClosed=g}}Ka.toggleGrow(d)})})},zA=(n,s)=>{fo(n,s,"overflow").each(a=>{nN(n,s,i=>{const d=De(i,g=>p(g));Md.setGroups(a,d)}),fo(n,s,"overflow-button").each(i=>{Ka.hasGrown(a)&&Sn.on(i)}),Ka.refresh(a)})},Vz=(n,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const S=De(C,h.getSystem().build);n.builtGroups.set(S)};return{uid:n.uid,dom:n.dom,components:s,behaviours:la(n.splitToolbarBehaviours,[Gt.config({others:{overflowGroup:h=>GE.sketch({...i["overflow-group"](),items:[ar.sketch({...i["overflow-button"](),action:C=>{fn(h,d)}})]})}}),Vt("toolbar-toggle-events",[Te(d,h=>{OC(h,n,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),zA(h,n)},refresh:h=>zA(h,n),toggle:h=>{OC(h,n,!1)},toggleWithoutFocusing:h=>{OC(h,n,!0)},isOpen:h=>zz(h,n)},domModification:{attributes:{role:"group"}}}},VA=wc({name:"SplitSlidingToolbar",configFields:Fz(),partFields:Hz(),factory:Vz,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},toggle:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s)}}),DC=(n,s)=>({uid:n.uid,dom:n.dom,components:n.components,events:Y_(n.action),behaviours:la(n.tabButtonBehaviours,[Ut.config({}),wt.config({mode:"execution",useSpace:!0,useEnter:!0}),it.config({store:{mode:"memory",initialValue:n.value}})]),domModification:n.domModification}),cN=Yi({name:"TabButton",configFields:[de("uid",void 0),Be("value"),sr("dom","dom",ud(()=>({attributes:{role:"tab",id:st("aria"),"aria-selected":"false"}})),fi()),Yn("action"),de("domModification",{}),Rr("tabButtonBehaviours",[Ut,wt,it]),Be("view")],factory:DC}),Uz=ie([Be("tabs"),Be("dom"),de("clickToDismiss",!1),Rr("tabbarBehaviours",[$n,wt]),Tn(["tabClass","selectedClass"])]),Zz=R0({factory:cN,name:"tabs",unit:"tab",overrides:n=>{const s=(i,d)=>{$n.dehighlight(i,d),xt(i,S0(),{tabbar:i,button:d})},a=(i,d)=>{$n.highlight(i,d),xt(i,O2(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(n.uid).getOrDie(),g=$n.isHighlighted(d,i);(g&&n.clickToDismiss?s:g?Y:a)(d,i)},domModification:{classes:[n.markers.tabClass]}}}}),iN=ie([Zz]),Wz=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:la(n.tabbarBehaviours,[$n.config({highlightClass:n.markers.selectedClass,itemClass:n.markers.tabClass,onHighlight:(d,g)=>{Nt(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Nt(g.element,"aria-selected","false")}}),wt.config({mode:"flow",getInitial:d=>$n.getHighlighted(d).map(g=>g.element),selector:"."+n.markers.tabClass,executeOnMove:!0})])}),lN=wc({name:"Tabbar",configFields:Uz(),partFields:iN(),factory:Wz}),jz=(n,s)=>({uid:n.uid,dom:n.dom,behaviours:la(n.tabviewBehaviours,[jt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Gz=Yi({name:"Tabview",configFields:[Rr("tabviewBehaviours",[jt])],factory:jz}),qz=ie([de("selectFirst",!0),Dn("onChangeTab"),Dn("onDismissTab"),de("tabs",[]),Rr("tabSectionBehaviours",[])]),Kz=ca({factory:lN,schema:[Be("dom"),bu("markers",[Be("tabClass"),Be("selectedClass")])],name:"tabbar",defaults:n=>({tabs:n.tabs})}),Yz=ca({factory:Gz,name:"tabview"}),Xz=ie([Kz,Yz]),uN=(n,s,a,i)=>{const d=h=>{const C=it.getValue(h);fo(h,n,"tabview").each(S=>{vt(n.tabs,_=>_.value===C).each(_=>{const D=_.view();xr(h.element,"id").each(P=>{Nt(S.element,"aria-labelledby",P)}),jt.set(S,D),n.onChangeTab(S,h,D)})})},g=(h,C)=>{fo(h,n,"tabbar").each(S=>{C(S).each(Xg)})};return{uid:n.uid,dom:n.dom,components:s,behaviours:oC(n.tabSectionBehaviours),events:Io(Rt([n.selectFirst?[Eo((h,C)=>{g(h,$n.getFirst)})]:[],[Te(O2(),(h,C)=>{const S=C.event.button;d(S)}),Te(S0(),(h,C)=>{const S=C.event.button;n.onDismissTab(h,S)})]])),apis:{getViewItems:h=>fo(h,n,"tabview").map(C=>jt.contents(C)).getOr([]),showTab:(h,C)=>{g(h,x=>{const _=$n.getCandidates(x);return vt(_,P=>it.getValue(P)===C).filter(P=>!$n.isHighlighted(x,P))})}}}},c1=wc({name:"TabSection",configFields:qz(),partFields:Xz(),factory:uN,apis:{getViewItems:(n,s)=>n.getViewItems(s),showTab:(n,s,a)=>{n.showTab(s,a)}}}),qE=(n,s,a)=>{const i=it.getValue(a);it.setValue(s,i),ZA(s)},UA=(n,s)=>{const a=n.element,i=Fc(a),d=a.dom;tr(a,"type")!=="number"&&s(d,i)},ZA=n=>{UA(n,(s,a)=>s.setSelectionRange(a.length,a.length))},dN=(n,s)=>{UA(n,(a,i)=>a.setSelectionRange(s,i.length))},mN=(n,s,a)=>{if(n.selectsOver){const i=it.getValue(s),d=n.getDisplayText(i),g=it.getValue(a);return n.getDisplayText(g).indexOf(d)===0?T.some(()=>{qE(n,s,a),dN(s,d.length)}):T.none()}else return T.none()},WA=ie("alloy.typeahead.itemexecute"),Jz=(n,s,a,i)=>{const d=(D,P,F)=>{n.previewing.set(!1);const z=Gt.getCoupled(D,"sandbox");if(Bn.isOpen(z))Le.getCurrent(z).each(G=>{$n.getHighlighted(G).fold(()=>{F(G)},()=>{Y2(z,G.element,"keydown",P)})});else{const G=J=>{Le.getCurrent(J).each(F)};AE(n,h(D),D,z,i,G,jr.HighlightMenuAndItem).get(Y)}},g=SB(n),h=D=>P=>P.map(F=>{const z=ac(F.menus),G=le(z,W=>no(W.items,ee=>ee.type==="item"));return it.getState(D).update(De(G,W=>W.data)),F}),C=D=>Le.getCurrent(D),S="typeaheadevents",x=[Ut.config({}),it.config({onSetValue:n.onSetValue,store:{mode:"dataset",getDataKey:D=>Fc(D.element),getFallbackEntry:D=>({value:D,meta:{}}),setValue:(D,P)=>{cm(D.element,n.model.getDisplayText(P))},...n.initialData.map(D=>gm("initialValue",D)).getOr({})}}),Fb.config({stream:{mode:"throttle",delay:n.responseTime,stopEvent:!1},onStream:(D,P)=>{const F=Gt.getCoupled(D,"sandbox");if(Ut.isFocused(D)&&Fc(D.element).length>=n.minChars){const G=C(F).bind(W=>$n.getHighlighted(W).map(it.getValue));n.previewing.set(!0);const J=W=>{C(F).each(ee=>{G.fold(()=>{n.model.selectsOver&&$n.highlightFirst(ee)},re=>{$n.highlightBy(ee,fe=>it.getValue(fe).value===re.value),$n.getHighlighted(ee).orThunk(()=>($n.highlightFirst(ee),T.none()))})})};AE(n,h(D),D,F,i,J,jr.HighlightJustMenu).get(Y)}},cancelEvent:y0()}),wt.config({mode:"special",onDown:(D,P)=>(d(D,P,$n.highlightFirst),T.some(!0)),onEscape:D=>{const P=Gt.getCoupled(D,"sandbox");return Bn.isOpen(P)?(Bn.close(P),T.some(!0)):T.none()},onUp:(D,P)=>(d(D,P,$n.highlightLast),T.some(!0)),onEnter:D=>{const P=Gt.getCoupled(D,"sandbox"),F=Bn.isOpen(P);if(F&&!n.previewing.get())return C(P).bind(z=>$n.getHighlighted(z)).map(z=>(xt(D,WA(),{item:z}),!0));{const z=it.getValue(D);return fn(D,y0()),n.onExecute(P,D,z),F&&Bn.close(P),T.some(!0)}}}),Sn.config({toggleClass:n.markers.openClass,aria:{mode:"expanded"}}),Gt.config({others:{sandbox:D=>mB(n,D,{onOpen:()=>Sn.on(D),onClose:()=>{n.lazyTypeaheadComp.get().each(P=>No(P.element,"aria-activedescendant")),Sn.off(D)}})}}),Vt(S,[Eo(D=>{n.lazyTypeaheadComp.set(T.some(D))}),ji(D=>{n.lazyTypeaheadComp.set(T.none())}),Tm(D=>{const P=Y;OE(n,h(D),D,i,P,jr.HighlightMenuAndItem).get(Y)}),Te(WA(),(D,P)=>{const F=Gt.getCoupled(D,"sandbox");qE(n.model,D,P.event.item),fn(D,y0()),n.onItemExecute(D,F,P.event.item,it.getValue(D)),Bn.close(F),ZA(D)})].concat(n.dismissOnBlur?[Te(Lg(),D=>{const P=Gt.getCoupled(D,"sandbox");zs(P.element).isNone()&&Bn.close(P)})]:[]))],_={[bi()]:[it.name(),Fb.name(),S],...n.eventOrder};return{uid:n.uid,dom:vA(ro(n,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...la(n.typeaheadBehaviours,x)},eventOrder:_}},Qz=ie([Yn("lazySink"),Be("fetch"),de("minChars",5),de("responseTime",1e3),Dn("onOpen"),de("getHotspot",T.some),de("getAnchorOverrides",ie({})),de("layouts",T.none()),de("eventOrder",{}),fm("model",{},[de("getDisplayText",n=>n.meta!==void 0&&n.meta.text!==void 0?n.meta.text:n.value),de("selectsOver",!0),de("populateFromBrowse",!0)]),Dn("onSetValue"),vc("onExecute"),Dn("onItemExecute"),de("inputClasses",[]),de("inputAttributes",{}),de("inputStyles",{}),de("matchWidth",!0),de("useMinWidth",!1),de("dismissOnBlur",!0),Tn(["openClass"]),Yn("initialData"),Yn("listRole"),Rr("typeaheadBehaviours",[Ut,it,Fb,wt,Sn,Gt]),Ca("lazyTypeaheadComp",()=>pt(T.none)),Ca("previewing",()=>pt(!0))].concat(bA()).concat(mA())),eV=ie([vi({schema:[yw()],name:"menu",overrides:n=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{n.previewing.get()?n.lazyTypeaheadComp.get().each(d=>{mN(n.model,d,i).fold(()=>{n.model.selectsOver?($n.dehighlight(a,i),n.previewing.set(!0)):n.previewing.set(!1)},g=>{g(),n.previewing.set(!1)})}):n.lazyTypeaheadComp.get().each(d=>{n.model.populateFromBrowse&&qE(n.model,d,i),xr(i.element,"id").each(g=>Nt(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>n.lazyTypeaheadComp.get().map(i=>(xt(i,WA(),{item:a}),!0)),onHover:(s,a)=>{n.previewing.set(!1),n.lazyTypeaheadComp.get().each(i=>{n.model.populateFromBrowse&&qE(n.model,i,a)})}})})]),jA=wc({name:"Typeahead",configFields:Qz(),partFields:eV(),factory:Jz});var fN=tinymce.util.Tools.resolve("tinymce.ThemeManager"),KE=tinymce.util.Tools.resolve("tinymce.util.Delay"),Wb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tV=tinymce.util.Tools.resolve("tinymce.EditorManager"),jb=tinymce.util.Tools.resolve("tinymce.Env"),el;(function(n){n.default="wrap",n.floating="floating",n.sliding="sliding",n.scrolling="scrolling"})(el||(el={}));var Gb;(function(n){n.auto="auto",n.top="top",n.bottom="bottom"})(Gb||(Gb={}));const lo=n=>s=>s.options.get(n),qb=n=>s=>T.from(n(s)),gN=n=>{const s=jb.deviceType.isPhone(),a=jb.deviceType.isTablet()||s,i=n.options.register,d=h=>on(h)||h===!1,g=h=>on(h)||Pa(h);i("skin",{processor:h=>on(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(n.getElement().offsetHeight,400)}),i("width",{processor:g,default:Wb.DOM.getStyle(n.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>on(h)||br(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>br(h)||on(h)||Qr(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Ro(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Gb.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:n.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||br(h),default:!jb.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:n.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},hN=lo("readonly"),YE=lo("disabled"),GA=lo("height"),qA=lo("width"),KA=qb(lo("min_width")),YA=qb(lo("min_height")),XE=qb(lo("max_width")),XA=qb(lo("max_height")),pN=qb(lo("style_formats")),bN=lo("style_formats_merge"),JA=lo("style_formats_autohide"),vN=lo("content_langs"),yN=lo("removed_menuitems"),i1=lo("toolbar_mode"),CN=lo("toolbar_groups"),QA=lo("toolbar_location"),JE=lo("fixed_toolbar_container"),SN=lo("fixed_toolbar_container_target"),wN=lo("toolbar_persist"),xN=lo("toolbar_sticky_offset"),EN=lo("menubar"),QE=lo("toolbar"),TN=lo("file_picker_callback"),kN=lo("file_picker_validator_handler"),e4=lo("font_size_input_default_unit"),eO=lo("file_picker_types"),tO=lo("typeahead_urls"),_N=lo("anchor_top"),nO=lo("anchor_bottom"),AN=lo("draggable_modal"),ON=lo("statusbar"),DN=lo("elementpath"),oO=lo("branding"),RN=lo("resize"),MN=lo("paste_as_text"),BN=lo("sidebar_show"),NN=lo("promotion"),PN=lo("help_accessibility"),$N=lo("default_font_stack"),RC=lo("skin"),MC=n=>n.options.get("skin")===!1,Kb=n=>n.options.get("menubar")!==!1,sO=n=>{const s=n.options.get("skin_url");if(MC(n))return s;if(s)return n.documentBaseURI.toAbsolute(s);{const a=n.options.get("skin");return tV.baseURL+"/skins/ui/"+a}},nV=n=>T.from(n.options.get("skin_url")),IN=n=>n.options.get("line_height_formats").split(" "),Yb=n=>{const s=QE(n),a=on(s),i=Qr(s)&&s.length>0;return!wh(n)&&(i||a||s===!0)},BC=n=>{const s=Ro(9,i=>n.options.get("toolbar"+(i+1))),a=no(s,on);return fa(a.length>0,a)},wh=n=>BC(n).fold(()=>{const s=QE(n);return sc(s,on)&&s.length>0},Ot),t4=n=>QA(n)===Gb.bottom,LN=n=>{if(!n.inline)return T.none();const s=JE(n)??"";if(s.length>0)return oo(Lc(),s);const a=SN(n);return Jn(a)?T.some(We.fromDom(a)):T.none()},Xb=n=>n.inline&&LN(n).isSome(),rO=n=>LN(n).getOrThunk(()=>vl(Hs(We.fromDom(n.getElement())))),aO=n=>n.inline&&!Kb(n)&&!Yb(n)&&!wh(n),Jb=n=>(n.options.get("toolbar_sticky")||n.inline)&&!Xb(n)&&!aO(n),xh=n=>!Xb(n)&&n.options.get("ui_mode")==="split",FN=n=>{const s=n.options.get("menu");return ns(s,a=>({...a,items:a.items}))};var oV=Object.freeze({__proto__:null,get ToolbarMode(){return el},get ToolbarLocation(){return Gb},register:gN,getSkinUrl:sO,getSkinUrlOption:nV,isReadOnly:hN,isDisabled:YE,getSkin:RC,isSkinDisabled:MC,getHeightOption:GA,getWidthOption:qA,getMinWidthOption:KA,getMinHeightOption:YA,getMaxWidthOption:XE,getMaxHeightOption:XA,getUserStyleFormats:pN,shouldMergeStyleFormats:bN,shouldAutoHideStyleFormats:JA,getLineHeightFormats:IN,getContentLanguages:vN,getRemovedMenuItems:yN,isMenubarEnabled:Kb,isMultipleToolbars:wh,isToolbarEnabled:Yb,isToolbarPersist:wN,getMultipleToolbarsOption:BC,getUiContainer:rO,useFixedContainer:Xb,isSplitUiMode:xh,getToolbarMode:i1,isDraggableModal:AN,isDistractionFree:aO,isStickyToolbar:Jb,getStickyToolbarOffset:xN,getToolbarLocation:QA,isToolbarLocationBottom:t4,getToolbarGroups:CN,getMenus:FN,getMenubar:EN,getToolbar:QE,getFilePickerCallback:TN,getFilePickerTypes:eO,useTypeaheadUrls:tO,getAnchorTop:_N,getAnchorBottom:nO,getFilePickerValidatorHandler:kN,getFontSizeInputDefaultUnit:e4,useStatusBar:ON,useElementPath:DN,promotionEnabled:NN,useBranding:oO,getResize:RN,getPasteAsText:MN,getSidebarShow:BN,useHelpAccessibility:PN,getDefaultFontStack:$N});const sV=["visible","hidden","clip"],HN=n=>ot(n).length>0&&!to(sV,n),zN=n=>{if(q(n)){const s=Po(n,"overflow-x"),a=Po(n,"overflow-y");return HN(s)||HN(a)}else return!1},VN=n=>n.plugins.fullscreen&&n.plugins.fullscreen.isFullscreen(),rV=(n,s)=>{const a=or(s,zN),i=a.length===0?ds(s).map(qn).map(d=>or(d,zN)).getOr([]):a;return Qn(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>VN(n)}))},Kf=(n,s)=>xh(n)?rV(n,s):T.none(),l1=n=>{const s=[...De(n.others,Ds),Ur()];return n.isFullscreen()?Ur():l2(Ds(n.element),s)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:UN,setPrototypeOf:$d,isFrozen:aV,getPrototypeOf:cV,getOwnPropertyDescriptor:cO}=Object;let{freeze:ko,seal:Hu,create:ZN}=Object,{apply:iO,construct:lO}=typeof Reflect<"u"&&Reflect;ko||(ko=function(s){return s}),Hu||(Hu=function(s){return s}),iO||(iO=function(s,a,i){return s.apply(a,i)}),lO||(lO=function(s,a){return new s(...a)});const n4=xi(Array.prototype.forEach),iV=xi(Array.prototype.lastIndexOf),WN=xi(Array.prototype.pop),NC=xi(Array.prototype.push),lV=xi(Array.prototype.splice),o4=xi(String.prototype.toLowerCase),uO=xi(String.prototype.toString),jN=xi(String.prototype.match),PC=xi(String.prototype.replace),uV=xi(String.prototype.indexOf),dV=xi(String.prototype.trim),Id=xi(Object.prototype.hasOwnProperty),wi=xi(RegExp.prototype.test),$C=mV(TypeError);function xi(n){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return iO(n,s,i)}}function mV(n){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return lO(n,a)}}function _o(n,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o4;$d&&$d(n,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=a(d);g!==d&&(aV(s)||(s[i]=g),d=g)}n[d]=!0}return n}function fV(n){for(let s=0;s<n.length;s++)Id(n,s)||(n[s]=null);return n}function Yf(n){const s=ZN(null);for(const[a,i]of UN(n))Id(n,a)&&(Array.isArray(i)?s[a]=fV(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=Yf(i):s[a]=i);return s}function IC(n,s){for(;n!==null;){const i=cO(n,s);if(i){if(i.get)return xi(i.get);if(typeof i.value=="function")return xi(i.value)}n=cV(n)}function a(){return null}return a}const GN=ko(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),s4=ko(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),dO=ko(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qN=ko(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mO=ko(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),KN=ko(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),YN=ko(["#text"]),fO=ko(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),gO=ko(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),XN=ko(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),r4=ko(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gV=Hu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hV=Hu(/<%[\w\W]*|[\w\W]*%>/gm),pV=Hu(/\$\{[\w\W]*/gm),bV=Hu(/^data-[\-\w.\u00B7-\uFFFF]+$/),vV=Hu(/^aria-[\-\w]+$/),JN=Hu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),yV=Hu(/^(?:\w+script|data):/i),CV=Hu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QN=Hu(/^html$/i),SV=Hu(/^[a-z][.\w]*(-[.\w]+)+$/i);var hO=Object.freeze({__proto__:null,ARIA_ATTR:vV,ATTR_WHITESPACE:CV,CUSTOM_ELEMENT:SV,DATA_ATTR:bV,DOCTYPE_NAME:QN,ERB_EXPR:hV,IS_ALLOWED_URI:JN,IS_SCRIPT_OR_DATA:yV,MUSTACHE_EXPR:gV,TMPLIT_EXPR:pV});const LC={element:1,text:3,progressingInstruction:7,comment:8,document:9},wV=function(){return typeof window>"u"?null:window},xV=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},eP=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function tP(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wV();const s=bn=>tP(bn);if(s.version="3.2.6",s.removed=[],!n||!n.document||n.document.nodeType!==LC.document||!n.Element)return s.isSupported=!1,s;let{document:a}=n;const i=a,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:S,NodeFilter:x,NamedNodeMap:_=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:D,DOMParser:P,trustedTypes:F}=n,z=S.prototype,G=IC(z,"cloneNode"),J=IC(z,"remove"),W=IC(z,"nextSibling"),ee=IC(z,"childNodes"),re=IC(z,"parentNode");if(typeof h=="function"){const bn=a.createElement("template");bn.content&&bn.content.ownerDocument&&(a=bn.content.ownerDocument)}let fe,be="";const{implementation:Ke,createNodeIterator:Re,createDocumentFragment:$e,getElementsByTagName:Ne}=a,{importNode:Et}=i;let gt=eP();s.isSupported=typeof UN=="function"&&typeof re=="function"&&Ke&&Ke.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:sn,ERB_EXPR:kt,TMPLIT_EXPR:Yt,DATA_ATTR:ht,ARIA_ATTR:Ae,IS_SCRIPT_OR_DATA:Ze,ATTR_WHITESPACE:Pt,CUSTOM_ELEMENT:Xt}=hO;let{IS_ALLOWED_URI:Ct}=hO,qt=null;const eo=_o({},[...GN,...s4,...dO,...mO,...YN]);let Rn=null;const Ja=_o({},[...fO,...gO,...XN,...r4]);let zo=Object.seal(ZN(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Kc=null,Nr=null,Ra=!0,Yc=!0,Yl=!1,Ph=!0,Km=!1,M1=!0,ag=!1,RS=!1,k5=!1,$h=!1,Ov=!1,FT=!1,_5=!0,UL=!1;const sY="user-content-";let HT=!0,MS=!1,Wu={},B1=null;const ZL=_o({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let BS=null;const N1=_o({},["audio","video","img","source","image","track"]);let Dv=null;const A5=_o({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),P1="http://www.w3.org/1998/Math/MathML",Ma="http://www.w3.org/2000/svg",ju="http://www.w3.org/1999/xhtml";let $1=ju,zT=!1,O5=null;const rY=_o({},[P1,Ma,ju],uO);let Zd=_o({},["mi","mo","mn","ms","mtext"]),D5=_o({},["annotation-xml"]);const aY=_o({},["title","style","font","a","script"]);let Rv=null;const Mv=["application/xhtml+xml","text/html"],VT="text/html";let Ba=null,Bv=null;const cY=a.createElement("form"),WL=function(e){return e instanceof RegExp||e instanceof Function},R5=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Bv&&Bv===e)){if((!e||typeof e!="object")&&(e={}),e=Yf(e),Rv=Mv.indexOf(e.PARSER_MEDIA_TYPE)===-1?VT:e.PARSER_MEDIA_TYPE,Ba=Rv==="application/xhtml+xml"?uO:o4,qt=Id(e,"ALLOWED_TAGS")?_o({},e.ALLOWED_TAGS,Ba):eo,Rn=Id(e,"ALLOWED_ATTR")?_o({},e.ALLOWED_ATTR,Ba):Ja,O5=Id(e,"ALLOWED_NAMESPACES")?_o({},e.ALLOWED_NAMESPACES,uO):rY,Dv=Id(e,"ADD_URI_SAFE_ATTR")?_o(Yf(A5),e.ADD_URI_SAFE_ATTR,Ba):A5,BS=Id(e,"ADD_DATA_URI_TAGS")?_o(Yf(N1),e.ADD_DATA_URI_TAGS,Ba):N1,B1=Id(e,"FORBID_CONTENTS")?_o({},e.FORBID_CONTENTS,Ba):ZL,Kc=Id(e,"FORBID_TAGS")?_o({},e.FORBID_TAGS,Ba):Yf({}),Nr=Id(e,"FORBID_ATTR")?_o({},e.FORBID_ATTR,Ba):Yf({}),Wu=Id(e,"USE_PROFILES")?e.USE_PROFILES:!1,Ra=e.ALLOW_ARIA_ATTR!==!1,Yc=e.ALLOW_DATA_ATTR!==!1,Yl=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ph=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Km=e.SAFE_FOR_TEMPLATES||!1,M1=e.SAFE_FOR_XML!==!1,ag=e.WHOLE_DOCUMENT||!1,$h=e.RETURN_DOM||!1,Ov=e.RETURN_DOM_FRAGMENT||!1,FT=e.RETURN_TRUSTED_TYPE||!1,k5=e.FORCE_BODY||!1,_5=e.SANITIZE_DOM!==!1,UL=e.SANITIZE_NAMED_PROPS||!1,HT=e.KEEP_CONTENT!==!1,MS=e.IN_PLACE||!1,Ct=e.ALLOWED_URI_REGEXP||JN,$1=e.NAMESPACE||ju,Zd=e.MATHML_TEXT_INTEGRATION_POINTS||Zd,D5=e.HTML_INTEGRATION_POINTS||D5,zo=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&WL(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(zo.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&WL(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(zo.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(zo.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Km&&(Yc=!1),Ov&&($h=!0),Wu&&(qt=_o({},YN),Rn=[],Wu.html===!0&&(_o(qt,GN),_o(Rn,fO)),Wu.svg===!0&&(_o(qt,s4),_o(Rn,gO),_o(Rn,r4)),Wu.svgFilters===!0&&(_o(qt,dO),_o(Rn,gO),_o(Rn,r4)),Wu.mathMl===!0&&(_o(qt,mO),_o(Rn,XN),_o(Rn,r4))),e.ADD_TAGS&&(qt===eo&&(qt=Yf(qt)),_o(qt,e.ADD_TAGS,Ba)),e.ADD_ATTR&&(Rn===Ja&&(Rn=Yf(Rn)),_o(Rn,e.ADD_ATTR,Ba)),e.ADD_URI_SAFE_ATTR&&_o(Dv,e.ADD_URI_SAFE_ATTR,Ba),e.FORBID_CONTENTS&&(B1===ZL&&(B1=Yf(B1)),_o(B1,e.FORBID_CONTENTS,Ba)),HT&&(qt["#text"]=!0),ag&&_o(qt,["html","head","body"]),qt.table&&(_o(qt,["tbody"]),delete Kc.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw $C('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw $C('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');fe=e.TRUSTED_TYPES_POLICY,be=fe.createHTML("")}else fe===void 0&&(fe=xV(F,d)),fe!==null&&typeof be=="string"&&(be=fe.createHTML(""));ko&&ko(e),Bv=e}},I1=_o({},[...s4,...dO,...qN]),iY=_o({},[...mO,...KN]),lY=function(e){let t=re(e);(!t||!t.tagName)&&(t={namespaceURI:$1,tagName:"template"});const o=o4(e.tagName),r=o4(t.tagName);return O5[e.namespaceURI]?e.namespaceURI===Ma?t.namespaceURI===ju?o==="svg":t.namespaceURI===P1?o==="svg"&&(r==="annotation-xml"||Zd[r]):!!I1[o]:e.namespaceURI===P1?t.namespaceURI===ju?o==="math":t.namespaceURI===Ma?o==="math"&&D5[r]:!!iY[o]:e.namespaceURI===ju?t.namespaceURI===Ma&&!D5[r]||t.namespaceURI===P1&&!Zd[r]?!1:!iY[o]&&(aY[o]||!I1[o]):!!(Rv==="application/xhtml+xml"&&O5[e.namespaceURI]):!1},Ym=function(e){NC(s.removed,{element:e});try{re(e).removeChild(e)}catch{J(e)}},NS=function(e,t){try{NC(s.removed,{attribute:t.getAttributeNode(e),from:t})}catch{NC(s.removed,{attribute:null,from:t})}if(t.removeAttribute(e),e==="is")if($h||Ov)try{Ym(t)}catch{}else try{t.setAttribute(e,"")}catch{}},jL=function(e){let t=null,o=null;if(k5)e="<remove></remove>"+e;else{const u=jN(e,/^[\r\n\t ]+/);o=u&&u[0]}Rv==="application/xhtml+xml"&&$1===ju&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=fe?fe.createHTML(e):e;if($1===ju)try{t=new P().parseFromString(r,Rv)}catch{}if(!t||!t.documentElement){t=Ke.createDocument($1,"template",null);try{t.documentElement.innerHTML=zT?be:r}catch{}}const c=t.body||t.documentElement;return e&&o&&c.insertBefore(a.createTextNode(o),c.childNodes[0]||null),$1===ju?Ne.call(t,ag?"html":"body")[0]:ag?t.documentElement:c},GL=function(e){return Re.call(e.ownerDocument||e,e,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT|x.SHOW_PROCESSING_INSTRUCTION|x.SHOW_CDATA_SECTION,null)},L1=function(e){return e instanceof D&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof _)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},qL=function(e){return typeof C=="function"&&e instanceof C};function cg(bn,e,t){n4(bn,o=>{o.call(s,e,t,Bv)})}const M5=function(e){let t=null;if(cg(gt.beforeSanitizeElements,e,null),L1(e))return Ym(e),!0;const o=Ba(e.nodeName);if(cg(gt.uponSanitizeElement,e,{tagName:o,allowedTags:qt}),M1&&e.hasChildNodes()&&!qL(e.firstElementChild)&&wi(/<[/\w!]/g,e.innerHTML)&&wi(/<[/\w!]/g,e.textContent)||e.nodeType===LC.progressingInstruction||M1&&e.nodeType===LC.comment&&wi(/<[/\w]/g,e.data))return Ym(e),!0;if(!qt[o]||Kc[o]){if(!Kc[o]&&uY(o)&&(zo.tagNameCheck instanceof RegExp&&wi(zo.tagNameCheck,o)||zo.tagNameCheck instanceof Function&&zo.tagNameCheck(o)))return!1;if(HT&&!B1[o]){const r=re(e)||e.parentNode,c=ee(e)||e.childNodes;if(c&&r){const u=c.length;for(let f=u-1;f>=0;--f){const b=G(c[f],!0);b.__removalCount=(e.__removalCount||0)+1,r.insertBefore(b,W(e))}}}return Ym(e),!0}return e instanceof S&&!lY(e)||(o==="noscript"||o==="noembed"||o==="noframes")&&wi(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ym(e),!0):(Km&&e.nodeType===LC.text&&(t=e.textContent,n4([sn,kt,Yt],r=>{t=PC(t,r," ")}),e.textContent!==t&&(NC(s.removed,{element:e.cloneNode()}),e.textContent=t)),cg(gt.afterSanitizeElements,e,null),!1)},KL=function(e,t,o){if(_5&&(t==="id"||t==="name")&&(o in a||o in cY))return!1;if(!(Yc&&!Nr[t]&&wi(ht,t))){if(!(Ra&&wi(Ae,t))){if(!Rn[t]||Nr[t]){if(!(uY(e)&&(zo.tagNameCheck instanceof RegExp&&wi(zo.tagNameCheck,e)||zo.tagNameCheck instanceof Function&&zo.tagNameCheck(e))&&(zo.attributeNameCheck instanceof RegExp&&wi(zo.attributeNameCheck,t)||zo.attributeNameCheck instanceof Function&&zo.attributeNameCheck(t))||t==="is"&&zo.allowCustomizedBuiltInElements&&(zo.tagNameCheck instanceof RegExp&&wi(zo.tagNameCheck,o)||zo.tagNameCheck instanceof Function&&zo.tagNameCheck(o))))return!1}else if(!Dv[t]){if(!wi(Ct,PC(o,Pt,""))){if(!((t==="src"||t==="xlink:href"||t==="href")&&e!=="script"&&uV(o,"data:")===0&&BS[e])){if(!(Yl&&!wi(Ze,PC(o,Pt,"")))){if(o)return!1}}}}}}return!0},uY=function(e){return e!=="annotation-xml"&&jN(e,Xt)},Xl=function(e){cg(gt.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||L1(e))return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Rn,forceKeepAttr:void 0};let r=t.length;for(;r--;){const c=t[r],{name:u,namespaceURI:f,value:b}=c,v=Ba(u),w=b;let k=u==="value"?w:dV(w);if(o.attrName=v,o.attrValue=k,o.keepAttr=!0,o.forceKeepAttr=void 0,cg(gt.uponSanitizeAttribute,e,o),k=o.attrValue,UL&&(v==="id"||v==="name")&&(NS(u,e),k=sY+k),M1&&wi(/((--!?|])>)|<\/(style|title)/i,k)){NS(u,e);continue}if(o.forceKeepAttr)continue;if(!o.keepAttr){NS(u,e);continue}if(!Ph&&wi(/\/>/i,k)){NS(u,e);continue}Km&&n4([sn,kt,Yt],R=>{k=PC(k,R," ")});const O=Ba(e.nodeName);if(!KL(O,v,k)){NS(u,e);continue}if(fe&&typeof F=="object"&&typeof F.getAttributeType=="function"&&!f)switch(F.getAttributeType(O,v)){case"TrustedHTML":{k=fe.createHTML(k);break}case"TrustedScriptURL":{k=fe.createScriptURL(k);break}}if(k!==w)try{f?e.setAttributeNS(f,u,k):e.setAttribute(u,k),L1(e)?Ym(e):WN(s.removed)}catch{NS(u,e)}}cg(gt.afterSanitizeAttributes,e,null)},UT=function bn(e){let t=null;const o=GL(e);for(cg(gt.beforeSanitizeShadowDOM,e,null);t=o.nextNode();)cg(gt.uponSanitizeShadowNode,t,null),M5(t),Xl(t),t.content instanceof g&&bn(t.content);cg(gt.afterSanitizeShadowDOM,e,null)};return s.sanitize=function(bn){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=null,o=null,r=null,c=null;if(zT=!bn,zT&&(bn="<!-->"),typeof bn!="string"&&!qL(bn))if(typeof bn.toString=="function"){if(bn=bn.toString(),typeof bn!="string")throw $C("dirty is not a string, aborting")}else throw $C("toString is not a function");if(!s.isSupported)return bn;if(RS||R5(e),s.removed=[],typeof bn=="string"&&(MS=!1),MS){if(bn.nodeName){const b=Ba(bn.nodeName);if(!qt[b]||Kc[b])throw $C("root node is forbidden and cannot be sanitized in-place")}}else if(bn instanceof C)t=jL("<!---->"),o=t.ownerDocument.importNode(bn,!0),o.nodeType===LC.element&&o.nodeName==="BODY"||o.nodeName==="HTML"?t=o:t.appendChild(o);else{if(!$h&&!Km&&!ag&&bn.indexOf("<")===-1)return fe&&FT?fe.createHTML(bn):bn;if(t=jL(bn),!t)return $h?null:FT?be:""}t&&k5&&Ym(t.firstChild);const u=GL(MS?bn:t);for(;r=u.nextNode();)M5(r),Xl(r),r.content instanceof g&&UT(r.content);if(MS)return bn;if($h){if(Ov)for(c=$e.call(t.ownerDocument);t.firstChild;)c.appendChild(t.firstChild);else c=t;return(Rn.shadowroot||Rn.shadowrootmode)&&(c=Et.call(i,c,!0)),c}let f=ag?t.outerHTML:t.innerHTML;return ag&&qt["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&wi(QN,t.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+t.ownerDocument.doctype.name+`>
`+f),Km&&n4([sn,kt,Yt],b=>{f=PC(f,b," ")}),fe&&FT?fe.createHTML(f):f},s.setConfig=function(){let bn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};R5(bn),RS=!0},s.clearConfig=function(){Bv=null,RS=!1},s.isValidAttribute=function(bn,e,t){Bv||R5({});const o=Ba(bn),r=Ba(e);return KL(o,r,t)},s.addHook=function(bn,e){typeof e=="function"&&NC(gt[bn],e)},s.removeHook=function(bn,e){if(e!==void 0){const t=iV(gt[bn],e);return t===-1?void 0:lV(gt[bn],t,1)[0]}return WN(gt[bn])},s.removeHooks=function(bn){gt[bn]=[]},s.removeAllHooks=function(){gt=eP()},s}var pO=tP();const FC=n=>pO().sanitize(n);var Da=tinymce.util.Tools.resolve("tinymce.util.I18n");const a4={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},nP="temporary-placeholder",bO=n=>()=>bt(n,nP).getOr("!not found!"),vO=(n,s)=>{const a=n.toLowerCase();if(Da.isRtl()){const i=Xd(a,"-rtl");return Mn(s,i)?i:a}else return a},oP=(n,s)=>bt(s,vO(n,s)),EV=(n,s)=>{const a=s();return oP(n,a).getOrThunk(bO(a))},c4=(n,s,a)=>{const i=s();return oP(n,i).or(a).getOrThunk(bO(i))},Qb=n=>Da.isRtl()?Mn(a4,n):!1,yO=()=>Vt("add-focusable",[Eo(n=>{rm(n.element,"svg").each(s=>Nt(s,"focusable","false"))})]),CO=(n,s,a,i)=>{const d=Qb(s)?["tox-icon--flip"]:[],g=bt(a,vO(s,a)).or(i).getOrThunk(bO(a));return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes.concat(d),innerHtml:g},behaviours:Ve([...n.behaviours??[],yO()]),eventOrder:n.eventOrder??{}}},tl=(n,s,a,i=T.none())=>CO(s,n,a(),i),TV=(n,s,a)=>{const i=a(),d=vt(n,g=>Mn(i,vO(g,i)));return CO(s,d.getOr(nP),i,T.none())},kV={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},SO=Yi({name:"Notification",factory:n=>{const s=st("notification-text"),a=Ln({dom:Rd(`<p id=${s}>${FC(n.backstageProvider.translate(n.text))}</p>`),behaviours:Ve([jt.config({})])}),i=z=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${z}%`}}}),d=z=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${z}%`}}),g=Ln({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:Ve([jt.config({})])}),S={updateProgress:(z,G)=>{z.getSystem().isConnected()&&g.getOpt(z).each(J=>{jt.set(J,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(G)]},d(G)])})},updateText:(z,G)=>{if(z.getSystem().isConnected()){const J=a.get(z);jt.set(J,[Do(G)])}}},x=Rt([n.icon.toArray(),[n.level],T.from(kV[n.level]).toArray()]),_=Ln(ar.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":n.backstageProvider.translate("Close")}},components:[tl("close",{tag:"span",classes:["tox-icon"]},n.iconProvider)],buttonBehaviours:Ve([So.config({}),To.config({...n.backstageProvider.tooltips.getConfig({tooltipText:n.backstageProvider.translate("Close")})})]),action:z=>{n.onAction(z)}})),D=TV(x,{tag:"div",classes:["tox-notification__icon"]},n.iconProvider),P={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Ve([jt.config({})])},F=[D,P];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},behaviours:Ve([So.config({}),Ut.config({}),wt.config({mode:"special",onEscape:z=>(n.onAction(z),T.some(!0))})]),components:F.concat(n.progress?[g.asSpec()]:[]).concat([_.asSpec()]),apis:S}},configFields:[Sa("level","info",["success","error","warning","warn","info"]),Be("progress"),Yn("icon"),Be("onAction"),Be("text"),Be("iconProvider"),Be("backstageProvider")],apis:{updateProgress:(n,s,a)=>{n.updateProgress(s,a)},updateText:(n,s,a)=>{n.updateText(s,a)}}});var _V=(n,s,a,i)=>{const d=s.backstage.shared,g=()=>We.fromDom(n.queryCommandValue("ToggleView")===""?n.getContentAreaContainer():n.getContainer()),h=()=>{const D=Ds(g());return T.some(D)},C=D=>{h().each(P=>{et(D,F=>{Cn(F.element,"width"),ra(F.element)>P.width&&Ft(F.element,"width",P.width+"px")})})};return{open:(D,P,F)=>{const z=()=>{const re=Re=>{jt.remove(Re,J),W()},fe=(Re,$e)=>{bl(Re.element).length===0?be(Re,$e):Ke(Re,$e)},be=(Re,$e)=>{Qo.hide(Re),i.clear(),$e&&n.focus()},Ke=(Re,$e)=>{$e&&wt.focusIn(Re)};i.on(Re=>{P();const $e=F();re(Re),fe(Re,$e)})},G=()=>!Jb(n)||!d.header.isPositionedAtTop(),J=m(SO.sketch({text:D.text,level:to(["success","error","warning","warn","info"],D.type)?D.type:void 0,progress:D.progressBar===!0,icon:D.icon,onAction:z,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const re=p(J);i.on(fe=>{jt.append(fe,re),Qo.reposition(fe),J.hasConfigured(Ho)&&Ho.refresh(fe),C(fe.components())})}else{const re=m(Qo.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ve([wt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),jt.config({}),...G()?[Ho.config({contextual:{lazyContext:()=>T.some(Ds(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Re=>Kf(n,Re.element).map(Ne=>({bounds:l1(Ne),optScrollEnv:T.some({currentScrollTop:Ne.element.dom.scrollTop,scrollElmTop:mc(Ne.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:T.none()}))})]:[]])})),fe=p(J),be={maxHeightFunction:Df()},Ke={...d.anchors.banner(),overrides:be};i.set(re),a.add(re),Qo.showWithinBounds(re,fe,{anchor:Ke},h)}Pa(D.timeout)&&D.timeout>0&&KE.setEditorTimeout(n,()=>{z()},D.timeout);const W=()=>{i.on(re=>{Qo.reposition(re),re.hasConfigured(Ho)&&Ho.refresh(re),C(re.components())})};return{close:z,reposition:W,text:re=>{SO.updateText(J,re)},settings:D,getEl:()=>J.element.dom,progressBar:{value:re=>{SO.updateProgress(J,re)}}}},close:D=>{D.close()},getArgs:D=>D.settings}};const AV={setup:(n,s)=>{const a=(d,g)=>{xt(d,rr(),{raw:g})},i=()=>n.getMenu().bind($n.getHighlighted);s.on("keydown",d=>{const g=d.which;n.isActive()&&(n.isMenuOpen()?g===13?(i().each(Xg),d.preventDefault()):g===40?(i().fold(()=>{n.getMenu().each($n.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&n.cancelIfNecessary())}),s.on("NodeChange",()=>{n.isActive()&&!n.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&n.cancelIfNecessary()})}};var wO;(function(n){n[n.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",n[n.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(wO||(wO={}));var zu=wO;const xO="tox-menu-nav__js",HC="tox-collection__item",Eh="tox-swatch",u1={normal:xO,color:Eh},EO="tox-collection__item--enabled",sP="tox-collection__group-heading",TO="tox-collection__item-icon",i4="tox-collection__item-image",OV="tox-collection__item-image-selector",Xf="tox-collection__item-label",d1="tox-collection__item-accessory",rP="tox-collection__item-caret",DV="tox-collection__item-checkmark",m1="tox-collection__item--active",aP="tox-collection__item-container",RV="tox-collection__item-container--column",cP="tox-collection__item-container--row",MV="tox-collection__item-container--align-right",BV="tox-collection__item-container--align-left",l4="tox-collection__item-container--valign-top",iP="tox-collection__item-container--valign-middle",NV="tox-collection__item-container--valign-bottom",kO=n=>bt(u1,n).getOr(xO),PV=n=>n==="color"?"tox-swatches":"tox-menu",_O=n=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:PV(n),tieredMenu:"tox-tiered-menu"}),Hm=n=>{const s=_O(n);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:kO(n)}},zY=(n,s,a)=>{const i=_O(a);return{tag:"div",classes:Rt([[i.menu,`tox-menu-${s}-column`],n?[i.hasIcons]:[]])}},AO=[Gf.parts.items({})],zC=(n,s,a)=>{const i=_O(a);return{dom:{tag:"div",classes:Rt([[i.tieredMenu]])},markers:Hm(a)}},lP=st("refetch-trigger-event"),uP=st("redirect-menu-item-interaction"),dP="tox-menu__searcher",VC=n=>oo(n.element,`.${dP}`).bind(s=>n.getSystem().getByDom(s).toOptional()),mP=VC,$V=(n,s)=>{it.setValue(n,s.fetchPattern),n.element.dom.selectionStart=s.selectionStart,n.element.dom.selectionEnd=s.selectionEnd},OO=n=>{const s=it.getValue(n),a=n.element.dom.selectionStart,i=n.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},fP=(n,s)=>{xr(s.element,"id").each(a=>Nt(n.element,"aria-activedescendant",a))},IV=n=>{const s=(d,g)=>(g.cut(),T.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return xt(d,uP,h),T.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[HC]},components:[Fm.sketch({inputClasses:[dP,"tox-textfield"],inputAttributes:{...n.placeholder.map(d=>({placeholder:n.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Ve([Vt(i,[Te(_l(),d=>{fn(d,lP)}),Te(rr(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),wt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,wt.name()]}})]}},u4="tox-collection--results__js",UC=n=>n.dom?{...n,dom:{...n.dom,attributes:{...n.dom.attributes??{},id:st("aria-item-search-result-id"),"aria-selected":"false"}}}:n,DO="Use arrow keys to navigate.",RO=(n,s)=>a=>{const i=ls(a,s);return De(i,d=>({dom:n,components:d}))},MO=n=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":Da.translate(DO)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Gf.parts.items({preprocess:n!=="auto"?RO({tag:"div",classes:["tox-swatches__row"]},n):an})]}]}),LV=n=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Gf.parts.items({preprocess:n!=="auto"?RO({tag:"div",classes:["tox-image-selector__row"]},n):an})]}]}),BO=n=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Gf.parts.items({preprocess:RO({tag:"div",classes:["tox-collection__group"]},n)})]}),gP=(n,s)=>{const a=[];let i=[];return et(n,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(Mn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),De(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},NO=(n,s,a)=>Gf.parts.items({preprocess:i=>{const d=De(i,a);return n!=="auto"&&n>1?RO({tag:"div",classes:["tox-collection__group"]},n)(d):gP(d,(g,h)=>s[h].type==="separator")}}),hP=n=>js(n,s=>s.type==="widget"),PO=(n,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...hP(s)?{"aria-label":Da.translate(DO)}:{}}},components:[NO(n,s,an)]}),pP=(n,s,a=!0)=>{const i=st("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",u4].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[NO(n,s,UC)]}},Jf=(n,s,a)=>{const i=st("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"])},components:[IV({i18n:Da.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...n===1?["tox-collection--list"]:["tox-collection--grid"],u4],attributes:{id:i}},components:[NO(n,s,UC)]}]}},f1=(n,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Gf.parts.items({preprocess:a=>gP(a,(i,d)=>n[d].type==="separator")})]}),ZC=n=>js(n,s=>"icon"in s&&s.icon!==void 0),Ld=n=>(console.error(Mg(n)),console.log(n),T.none()),bP=(n,s,a,i,d)=>{const g=f1(a);return{value:n,dom:g.dom,components:g.components,items:a}},$O=(n,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?PO(i,a):d.searchMode.searchMode==="search-with-field"?Jf(i,a,d.searchMode):pP(i,a);if(d.menuType==="color"){const h=MO(i);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="imageselector"&&i!=="auto"){const h=LV(i);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=PO(i,a);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=BO(i);return{value:n,dom:h.dom,components:h.components,items:a}}else return{value:n,dom:zY(s,i,d.menuType),components:AO,items:a}},hs=as("type"),IO=as("name"),d4=as("label"),Qf=as("text"),vP=as("title"),LO=as("icon"),FV=as("url"),ev=as("value"),HV=pc("fetch"),zV=pc("getSubmenuItems"),Th=pc("onAction"),VV=pc("onItemAction"),g1=yo("onSetup",()=>Y),UV=cs("name"),eg=cs("text"),ZV=cs("role"),Ul=cs("icon"),h1=cs("tooltip"),yP=cs("chevronTooltip"),WC=cs("label"),FO=cs("shortcut"),WV=Hi("select"),tv=Ys("active",!1),jV=Ys("borderless",!1),Zl=Ys("enabled",!0),jC=Ys("primary",!1),CP=n=>de("columns",n),HO=de("meta",{}),zO=yo("onAction",Y),p1=n=>Jo("type",n),VO=n=>sr("name","name",ep(()=>st(`${n}-name`)),Ks),SP=n=>sr("value","value",ep(()=>st(`${n}-value`)),fi()),nv=[hs,Qf,Fi("level",["info","warn","error","success"]),LO,de("url","")],GV=Tt(nv),qV=n=>[hs,n],KV=[hs,Qf,Zl,VO("button"),Ul,jV,C2("buttonType",["primary","secondary","toolbar"]),jC,Jo("context","mode:design")],m4=Tt(KV),Xa=[hs,IO],Wl=Xa.concat([WC]),wP=Xa.concat([d4,Zl,Jo("context","mode:design")]),YV=Tt(wP),XV=rn,JV=Wl.concat([CP("auto"),Jo("context","mode:design")]),QV=Tt(JV),xP=Rg([ev,Qf,LO]),EP=Wl.concat([Jo("storageKey","default"),Jo("context","mode:design")]),eU=Tt(EP),tU=Ks,oU=Tt(Wl),TP=Ks,kP=Xa.concat([Jo("tag","textarea"),as("scriptId"),as("scriptUrl"),Hi("onFocus"),uw("settings",void 0)]),_P=Xa.concat([Jo("tag","textarea"),pc("init")]),sU=pu(n=>qo("customeditor.old",hc(_P),n).orThunk(()=>qo("customeditor.new",hc(kP),n))),rU=Ks,kh=[Zl,eg,ZV,FO,SP("menuitem"),HO,Jo("context","mode:design")],aU=Tt([hs,IO].concat(kh)),cU=rn,ov=[VO("button"),Ul,Sa("align","end",["start","end"]),jC,Zl,C2("buttonType",["primary","secondary"]),Jo("context","mode:design")],Fd=[...ov,Qf],f4=[Fi("type",["submit","cancel","custom"]),...Fd],jl=[Fi("type",["menu"]),eg,h1,Ul,Ua("items",aU),...ov],iU=[...ov,Fi("type",["togglebutton"]),h1,Ul,eg,Ys("active",!1)],g4=ya("type",{submit:f4,cancel:f4,custom:f4,menu:jl,togglebutton:iU}),lU=Wl.concat([Jo("context","mode:design"),cs("dropAreaLabel"),cs("buttonLabel"),cs("allowedFileTypes"),f0("allowedFileExtensions",Ks)]),b1=Tt(lU),uU=cw(),UO=n=>[hs,rp("columns"),n],ZO=[hs,as("html"),Sa("presets","presentation",["presentation","document"]),yo("onInit",Y),Ys("stretched",!1)],dU=Tt(ZO),mU=Wl.concat([Ys("border",!1),Ys("sandboxed",!0),Ys("streamContent",!1),Ys("transparent",!0)]),v1=Tt(mU),AP=Ks,OP=Tt(Xa.concat([cs("height")])),fU=Tt([as("url"),Bg("zoom"),Bg("cachedWidth"),Bg("cachedHeight")]),WO=Wl.concat([cs("inputMode"),cs("placeholder"),Ys("maximized",!1),Zl,Jo("context","mode:design")]),DP=Tt(WO),jO=Ks,RP=n=>[hs,d4,n,Sa("align","start",["start","center","end"]),cs("for")],MP=[Qf,ev],GC=[Qf,Ua("items",pf("items",()=>BP))],BP=Dg([Tt(MP),Tt(GC)]),gU=Wl.concat([Ua("items",BP),Zl,Jo("context","mode:design")]),hU=Tt(gU),pU=Ks,GO=Wl.concat([lw("items",[Qf,ev]),ap("size",1),Zl,Jo("context","mode:design")]),bU=Tt(GO),qO=Ks,vU=Wl.concat([Ys("constrain",!0),Zl,Jo("context","mode:design")]),qC=Tt(vU),NP=Tt([as("width"),as("height")]),PP=Xa.concat([d4,ap("min",0),ap("max",0)]),yU=Tt(PP),CU=f2,SU=[hs,Ua("header",Ks),Ua("cells",gs(Ks))],wU=Tt(SU),h4=Wl.concat([cs("placeholder"),Ys("maximized",!1),Zl,Jo("context","mode:design"),S2("spellcheck")]),$P=Tt(h4),xU=Ks,KO=[Jo("buttonType","default"),cs("text"),cs("tooltip"),cs("icon"),zc("search",!1,Dg([rn,Tt([cs("placeholder")])],n=>br(n)?n?T.some({placeholder:T.none()}):T.none():T.some(n))),pc("fetch"),yo("onSetup",()=>Y),Jo("context","mode:design")],_h=Tt([hs,...KO]),YO=n=>qo("menubutton",_h,n),sv=[Fi("type",["directory","leaf"]),vP,as("id"),kl("menu",_h),cs("customStateIcon"),cs("customStateIconTooltip")],XO=Tt(sv),EU=sv.concat([Ua("children",pf("children",()=>hf("type",{directory:IP,leaf:XO})))]),IP=Tt(EU),y1=hf("type",{directory:IP,leaf:XO}),LP=[hs,Ua("items",y1),Hi("onLeafAction"),Hi("onToggleExpand"),mm("defaultExpandedIds",[],Ks),cs("defaultSelectedId")],TU=Tt(LP),FP=Wl.concat([Sa("filetype","file",["image","media","file"]),Zl,cs("picker_text"),Jo("context","mode:design")]),kU=Tt(FP),_U=Tt([ev,HO]),JO=n=>sr("items","items",gi(),gs(pu(s=>qo(`Checking item of ${n}`,p4,s).fold(a=>Bt.error(Mg(a)),a=>Bt.value(a))))),p4=sp(()=>hf("type",{alertbanner:GV,bar:Tt(qV(JO("bar"))),button:m4,checkbox:YV,colorinput:eU,colorpicker:oU,dropzone:b1,grid:Tt(UO(JO("grid"))),iframe:v1,input:DP,listbox:hU,selectbox:bU,sizeinput:qC,slider:yU,textarea:$P,urlinput:kU,customeditor:sU,htmlpanel:dU,imagepreview:OP,collection:QV,label:Tt(RP(JO("label"))),table:wU,tree:TU,panel:HP})),AU=[hs,de("classes",[]),Ua("items",p4)],HP=Tt(AU),OU=[VO("tab"),vP,Ua("items",p4)],DU=[hs,lw("tabs",OU)],RU=Tt(DU),MU=Fd,BU=g4,NU=Tt([as("title"),Va("body",hf("type",{panel:HP,tabpanel:RU})),Jo("size","normal"),mm("buttons",[],BU),de("initialData",{}),yo("onAction",Y),yo("onChange",Y),yo("onSubmit",Y),yo("onClose",Y),yo("onCancel",Y),yo("onTabChange",Y)]),zP=n=>qo("dialog",NU,n),PU=Tt([Fi("type",["cancel","custom"]),...MU]),$U=Tt([as("title"),as("url"),Bg("height"),Bg("width"),f0("buttons",PU),yo("onAction",Y),yo("onCancel",Y),yo("onClose",Y),yo("onMessage",Y)]),IU=n=>qo("dialog",$U,n),QO=n=>bo(n)?[n].concat(le(ac(n),QO)):Qr(n)?le(n,QO):[],LU=n=>on(n.type)&&on(n.name),FU={checkbox:XV,colorinput:tU,colorpicker:TP,dropzone:uU,input:jO,iframe:AP,imagepreview:fU,selectbox:qO,sizeinput:NP,slider:CU,listbox:pU,size:NP,textarea:xU,urlinput:_U,customeditor:rU,collection:xP,togglemenuitem:cU},VP=n=>T.from(FU[n.type]),UP=n=>no(QO(n),LU),HU=n=>{const s=UP(n),a=le(s,i=>VP(i).fold(()=>[],d=>[Va(i.name,d)]));return Tt(a)},KC=n=>{const s=pi(zP(n)),a=HU(n),i=n.initialData??{};return{internalDialog:s,dataValidator:a,initialData:i}},C1={open:(n,s)=>{const a=KC(s);return n(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(n,s)=>{const a=pi(IU(s));return n(a)},redial:n=>KC(n)},ZP=Tt([hs,eg]),zU=n=>qo("separatormenuitem",ZP,n),VU=Tt([p1("autocompleteitem"),tv,Zl,HO,ev,eg,Ul]),UU=n=>qo("Autocompleter.Separator",ZP,n),ZU=n=>qo("Autocompleter.Item",VU,n),rv=[Zl,h1,Ul,eg,g1,Jo("context","mode:design")],WU=Tt([hs,Th,FO].concat(rv)),zm=n=>qo("toolbarbutton",WU,n),eD=[tv].concat(rv),jU=Tt(eD.concat([hs,Th,FO])),tD=n=>qo("ToggleButton",jU,n),b4=[yo("predicate",In),Sa("scope","node",["node","editor"]),Sa("position","selection",["node","selection","line"])],GU=rv.concat([p1("contextformbutton"),Jo("align","end"),jC,Th,Ca("original",an)]),qU=eD.concat([p1("contextformbutton"),Jo("align","end"),jC,Th,Ca("original",an)]),KU=rv.concat([p1("contextformbutton")]),nD=eD.concat([p1("contextformtogglebutton")]),WP=ya("type",{contextformbutton:GU,contextformtogglebutton:qU}),YC=[WC,Ua("commands",WP),kl("launch",ya("type",{contextformbutton:KU,contextformtogglebutton:nD})),yo("onInput",Y),yo("onSetup",Y)],v4=[...b4,...YC,Fi("type",["contextform"]),yo("initValue",ie("")),cs("placeholder")],av=[...b4,...YC,Fi("type",["contextsliderform"]),yo("initValue",ie(0)),yo("min",ie(0)),yo("max",ie(100))],YU=[...b4,...YC,Fi("type",["contextsizeinputform"]),yo("initValue",ie({width:"",height:""}))],jP=ya("type",{contextform:v4,contextsliderform:av,contextsizeinputform:YU}),XU=n=>qo("ContextForm",jP,n),cv=rv.concat([p1("contexttoolbarbutton")]),JU=Tt([p1("contexttoolbar"),Za("launch",cv),Va("items",Dg([Ks,Rg([cs("name"),cs("label"),Ua("items",Ks)])]))].concat(b4)),y4=n=>({name:n.name.getOrUndefined(),label:n.label.getOrUndefined(),items:n.items}),oD=n=>({...n,launch:n.launch.getOrUndefined(),items:on(n.items)?n.items:De(n.items,y4)}),QU=n=>qo("ContextToolbar",JU,n),eZ=[hs,as("src"),cs("alt"),mm("classes",[],Ks)],tZ=Tt(eZ),sD=[hs,Qf,UV,mm("classes",["tox-collection__item-label"],Ks)],nZ=Tt(sD),GP=sp(()=>hf("type",{cardimage:tZ,cardtext:nZ,cardcontainer:oZ})),oZ=Tt([hs,Jo("direction","horizontal"),Jo("align","left"),Jo("valign","middle"),Ua("items",GP)]),qP=Tt([hs,WC,Ua("items",GP),g1,zO].concat(kh)),rD=n=>qo("cardmenuitem",qP,n),sZ=Tt([hs,tv,Ul,WC].concat(kh)),rZ=n=>qo("choicemenuitem",sZ,n),aD=[hs,as("fancytype"),zO],KP=[de("initData",{})].concat(aD),aZ=[Hi("select"),fm("initData",{},[Ys("allowCustomColors",!0),Jo("storageKey","default"),f0("colors",fi())])].concat(aD),cD=[Hi("select"),bu("initData",[rp("columns"),mm("items",[],fi())])].concat(aD),YP=ya("fancytype",{inserttable:KP,colorswatch:aZ,imageselect:cD}),XP=n=>qo("fancymenuitem",YP,n),cZ=Tt([hs,tv,FV,WC,h1].concat(kh)),iZ=Tt([hs,tv,LO,d4,h1,ev].concat(kh)),JP=n=>qo("imagemenuitem",cZ,n),iD=n=>qo("resetimageitem",iZ,n),lZ=Tt([hs,g1,zO,Ul].concat(kh)),uZ=n=>qo("menuitem",lZ,n),dZ=Tt([hs,zV,g1,Ul].concat(kh)),mZ=n=>qo("nestedmenuitem",dZ,n),fZ=Tt([hs,Ul,tv,g1,Th].concat(kh)),gZ=n=>qo("togglemenuitem",fZ,n),hZ=Tt([Ul,h1,yo("onShow",Y),yo("onHide",Y),g1]),lD=n=>qo("sidebar",hZ,n),pZ=Tt([hs,Va("items",Dg([Rg([IO,Ua("items",Ks)]),Ks]))].concat(rv)),uD=n=>qo("GroupToolbarButton",pZ,n),bZ=Tt([hs,h1,yP,Ul,eg,WV,HV,g1,Sa("presets","normal",["normal","color","listpreview"]),CP(1),Th,VV,Jo("context","mode:design")]),vZ=n=>qo("SplitButton",bZ,n),C4=[eg,Ul,cs("tooltip"),Sa("buttonType","secondary",["primary","secondary"]),Ys("borderless",!1),pc("onAction"),Jo("context","mode:design")],yZ=[...C4,Qf,Fi("type",["button"])],CZ=[...C4,Ys("active",!1),Fi("type",["togglebutton"])],dD={button:yZ,togglebutton:CZ},SZ=[Fi("type",["group"]),mm("buttons",[],ya("type",dD))],wZ=ya("type",{...dD,group:SZ}),xZ=Tt([mm("buttons",[],wZ),pc("onShow"),pc("onHide")]),EZ=n=>qo("view",xZ,n),mD=(n,s,a)=>{const i=kr(n.element,"."+a);if(i.length>0){const d=zn(i,g=>{const h=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(i.length);return T.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return T.none()},QP=(n,s)=>Ve([Vt(n,s)]),iv={namedEvents:QP,unnamedEvents:n=>QP(st("unnamed-events"),n)},Hd={item:n=>ft.config({disabled:n,disableClass:"tox-collection__item--state-disabled"}),button:n=>ft.config({disabled:n}),splitButton:n=>ft.config({disabled:n,disableClass:"tox-tbtn--disabled"}),toolbarButton:n=>ft.config({disabled:n,disableClass:"tox-tbtn--disabled",useNative:!1})},XC=(n,s)=>{const a=n.getApi(s);return i=>{i(a)}},zd=(n,s)=>Eo(a=>{Dt(n.onBeforeSetup)&&n.onBeforeSetup(a),XC(n,a)(d=>{const g=n.onSetup(d);Dt(g)&&s.set(g)})}),Ah=(n,s)=>ji(a=>XC(n,a)(s.get())),S4=(n,s,a)=>ji(i=>(a.set(it.getValue(i)),XC(n,i)(s.get()))),fD="silver.uistate",S1="setDisabled",kZ="setEnabled",gD="init",_Z=["switchmode",gD],JC=(n,s)=>{const a=n.mainUi.outerContainer,i=[n.mainUi.mothership,...n.uiMotherships];s===S1&&et(i,d=>{d.broadcastOn([xu()],{target:a.element})}),et(i,d=>{d.broadcastOn([fD],s)})},e8=(n,s)=>{n.on("init SwitchMode",a=>{JC(s,a.type)}),n.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const i=a.state?S1:gD;JC(s,i),a.state||n.nodeChanged()}}),n.on("NodeChange",a=>{const i=n.ui.isEnabled()?a.type:S1;JC(s,i)}),hN(n)&&n.mode.set("readonly")},Es=n=>Oa.config({channels:{[fD]:{onReceive:(s,a)=>{if(a===S1||a===kZ){ft.set(s,a===S1);return}const{contextType:i,shouldDisable:d}=n();i==="mode"&&!to(_Z,a)||ft.set(s,d)}}}}),tg=(n,s)=>Tm((a,i)=>{XC(n,a)(n.onAction),!n.triggersSubmenu&&s===zu.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&fn(a,v0()),i.stop())}),AZ={[Ar()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Vm=Ai,w1=(n,s,a,i)=>{const d=pt(Y);return{type:"item",dom:s.dom,components:Vm(s.optComponents),data:n.data,eventOrder:AZ,hasSubmenu:n.triggersSubmenu,itemBehaviours:Ve([Vt("item-events",[tg(n,a),zd(n,d),Ah(n,d)]),Hd.item(()=>!n.enabled||i.checkUiComponentContext(n.context).shouldDisable),Es(()=>i.checkUiComponentContext(n.context)),jt.config({})].concat(n.itemBehaviours))}},ng=n=>({value:n.value,meta:{text:n.text.getOr(""),...n.meta}}),OZ=(n,s)=>{const a=We.fromTag("div");mo(a,"tox-image-selector-loading-spinner");const i=g=>{mo(g,"tox-image-selector-loading-spinner-wrapper"),wr(g,a)},d=g=>{Yo(g,"tox-image-selector-loading-spinner-wrapper"),Bi(a)};return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...n.checkMark.toArray()],behaviours:Ve([...n.behaviours??[],Vt("render-image-events",[Eo(g=>{i(g.element),oo(g.element,"img").each(h=>{xl(h).catch(C=>{console.error(C)}).finally(()=>{d(g.element)})})})])])}},DZ=(n,s)=>OZ(s,n),hD=n=>{const s=jb.os.isMacOS()||jb.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=n.split("+"),h=De(g,C=>{const S=C.toLowerCase().trim();return Mn(d,S)?d[S]:C});return s?h.join(""):h.join("+")},w4=(n,s,a=[TO])=>tl(n,{tag:"div",classes:a},s),t8=n=>({dom:{tag:"div",classes:[Xf]},components:[Do(Da.translate(n))]}),x4=(n,s)=>({dom:{tag:"div",classes:s,innerHtml:n}}),pD=(n,s)=>({dom:{tag:"div",classes:[Xf]},components:[{dom:{tag:n.tag,styles:n.styles},components:[Do(Da.translate(s))]}]}),bD=n=>({dom:{tag:"div",classes:[d1]},components:[Do(hD(n))]}),vD=n=>w4("checkmark",n,[DV]),nl=n=>w4("chevron-right",n,[rP]),RZ=n=>w4("chevron-down",n,[rP]),MZ=(n,s)=>{const a=n.direction==="vertical"?RV:cP,i=n.align==="left"?BV:MV;return{dom:{tag:"div",classes:[aP,a,i,(()=>{switch(n.valign){case"top":return l4;case"middle":return iP;case"bottom":return NV}})()]},components:s}},n8=(n,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:n,alt:a.getOr("")}}}),o8=(n,s,a)=>{const i="custom",d="remove",g=n.value,h=n.iconContent.map(x=>c4(x,s.icons,a)),C=n.ariaLabel.map(x=>({"aria-label":s.translate(x),"data-mce-name":x})).getOr({});return{dom:(()=>{const x=Eh,_=h.getOr(""),D={tag:"div",attributes:C,classes:[x]};return g===i?{...D,tag:"button",classes:[...D.classes,"tox-swatches__picker-btn"],innerHtml:_}:g===d?{...D,classes:[...D.classes,"tox-swatch--remove"],innerHtml:_}:Jn(g)?{...D,attributes:{...D.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:_}:D})(),optComponents:[]}},yD=(n,s)=>{const a=n.map(i=>({attributes:{id:st("menu-item"),"aria-label":Da.translate(i)}})).getOr({});return{tag:"div",classes:[xO,HC].concat(s),...a}},s8=n=>({dom:{tag:"label"},components:[Do(n)]}),BZ=(n,s,a,i)=>{const d={tag:"div",classes:[TO]},g=P=>tl(P,d,s.icons,i),h=()=>T.some({dom:d}),C=a?n.iconContent.map(g).orThunk(h):T.none(),S=n.checkMark,x=T.from(n.meta).fold(()=>t8,P=>Mn(P,"style")?gn(pD,P.style):t8),_=n.htmlContent.fold(()=>n.textContent.map(x),P=>T.some(x4(P,[Xf])));return{dom:yD(n.ariaLabel,[]),optComponents:[C,_,n.shortcutContent.map(bD),S,n.caret,n.labelContent.map(s8)]}},NZ=n=>({dom:yD(n.ariaLabel,[OV]),optComponents:[T.some(DZ(n.iconContent.getOrDie(),{tag:"div",classes:[i4],checkMark:n.checkMark})),n.labelContent.map(s8)]}),lv=(n,s,a,i=T.none())=>n.presets==="color"?o8(n,s,i):n.presets==="img"?NZ(n):BZ(n,s,a,i),r8=(n,s,a)=>bt(n,"tooltipWorker").map(i=>[To.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Df}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{To.setComponents(d,[Wc({element:We.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[To.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),PZ=n=>Wb.DOM.encode(n),CD=(n,s)=>{const a=Da.translate(n),i=PZ(a);if(s.length>0){const d=new RegExp(z1(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},$Z=(n,s,a,i,d,g,h,C=!0)=>{const S=lv({presets:i,textContent:T.none(),htmlContent:a?n.text.map(_=>CD(_,s)):T.none(),ariaLabel:n.text,labelContent:T.none(),iconContent:n.icon,shortcutContent:T.none(),checkMark:T.none(),caret:T.none(),value:n.value},h.providers,C,n.icon),x=n.text.filter(_=>!a&&_!=="");return w1({context:"mode:design",data:ng(n),enabled:n.enabled,getApi:ie({}),onAction:_=>d(n.value,n.meta),onSetup:ie(Y),triggersSubmenu:!1,itemBehaviours:r8(n,h,x)},S,g,h.providers)},a8=(n,s)=>De(n,a=>{switch(a.type){case"cardcontainer":return MZ(a,a8(a.items,s));case"cardimage":return n8(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>to(s.cardText.highlightOn,g))?T.from(s.cardText.matchText).getOr(""):"";return x4(CD(a.text,d),a.classes)}}),IZ=(n,s,a,i)=>{const d=h=>({isEnabled:()=>!ft.isDisabled(h),setEnabled:C=>{ft.set(h,!C),et(kr(h.element,"*"),S=>{h.getSystem().getByDom(S).each(x=>{x.hasConfigured(ft)&&ft.set(x,!C)})})}}),g={dom:yD(n.label,[]),optComponents:[T.some({dom:{tag:"div",classes:[aP,cP]},components:a8(n.items,i)})]};return w1({context:"mode:design",data:ng({text:T.none(),...n}),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:T.from(i.itemBehaviours).getOr([])},g,s,a.providers)},SD=(n,s,a,i,d,g,h,C=!0)=>{const S=D=>({setActive:P=>{Sn.set(D,P)},isActive:()=>Sn.isOn(D),isEnabled:()=>!ft.isDisabled(D),setEnabled:P=>ft.set(D,!P)}),x=lv({presets:a,textContent:s?n.text:T.none(),htmlContent:T.none(),labelContent:n.label,ariaLabel:n.text,iconContent:n.icon,shortcutContent:s?n.shortcut:T.none(),checkMark:s?T.some(vD(h.icons)):T.none(),caret:T.none(),value:n.value},h,C),_=n.text.filter(ie(!s)).map(D=>To.config(h.tooltips.getConfig({tooltipText:h.translate(D)})));return ro(w1({context:n.context,data:ng(n),enabled:n.enabled,getApi:S,onAction:D=>i(n.value),onSetup:D=>(D.setActive(d),Y),triggersSubmenu:!1,itemBehaviours:[..._.toArray()]},x,g,h),{toggling:{toggleClass:EO,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},E4=n=>({value:x1(n)}),T4=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,c8=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,k4=n=>T4.test(n)||c8.test(n),x1=n=>nf(n,"#").toUpperCase(),i8=n=>k4(n)?T.some({value:x1(n)}):T.none(),l8=n=>({value:n.value.replace(T4,(a,i,d,g)=>i+i+d+d+g+g)}),u8=n=>{const s=l8(n),a=c8.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},wD=n=>{const s=n.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},QC=n=>{const s=wD(n.red)+wD(n.green)+wD(n.blue);return E4(s)},Oh=(n,s,a)=>({hue:n,saturation:s,value:a}),xD=n=>{let s=0,a=0,i=0;const d=n.red/255,g=n.green/255,h=n.blue/255,C=Math.min(d,Math.min(g,h)),S=Math.max(d,Math.max(g,h));if(C===S)return i=C,Oh(0,0,i*100);const x=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-x/(S-C)),a=(S-C)/S,i=S,Oh(Math.round(s),Math.round(a*100),Math.round(i*100))},d8=Math.min,ED=Math.max,eS=Math.round,TD=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,m8=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,hr=(n,s,a,i)=>({red:n,green:s,blue:a,alpha:i}),_4=n=>{const s=parseInt(n,10);return s.toString()===n&&s>=0&&s<=255},f8=n=>{let s,a,i;const d=(n.hue||0)%360;let g=n.saturation/100,h=n.value/100;if(g=ED(0,d8(g,1)),h=ED(0,d8(h,1)),g===0)return s=a=i=eS(255*h),hr(s,a,i,1);const C=d/60,S=h*g,x=S*(1-Math.abs(C%2-1)),_=h-S;switch(Math.floor(C)){case 0:s=S,a=x,i=0;break;case 1:s=x,a=S,i=0;break;case 2:s=0,a=S,i=x;break;case 3:s=0,a=x,i=S;break;case 4:s=x,a=0,i=S;break;case 5:s=S,a=0,i=x;break;default:s=a=i=0}return s=eS(255*(s+_)),a=eS(255*(a+_)),i=eS(255*(i+_)),hr(s,a,i,1)},tS=n=>{const s=u8(n),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return hr(a,i,d,1)},kD=(n,s,a,i)=>{const d=parseInt(n,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(i);return hr(d,g,h,C)},_D=n=>{const s=TD.exec(n);if(s!==null)return T.some(kD(s[1],s[2],s[3],"1"));const a=m8.exec(n);return a!==null?T.some(kD(a[1],a[2],a[3],a[4])):T.none()},g8=n=>`rgba(${n.red},${n.green},${n.blue},${n.alpha})`,h8=hr(255,0,0,1),p8=n=>xD(tS(n)),Vd=n=>QC(f8(n)),AD=n=>i8(n).orThunk(()=>_D(n).map(QC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=n,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],C=i[3];return QC(hr(d,g,h,C))}),b8=n=>{n.dispatch("SkinLoaded")},A4=(n,s)=>{n.dispatch("SkinLoadError",s)},OD=n=>{n.dispatch("ResizeEditor")},DD=(n,s)=>{n.dispatch("ResizeContent",s)},LZ=(n,s)=>{n.dispatch("ScrollContent",s)},v8=(n,s)=>{n.dispatch("TextColorChange",s)},FZ=(n,s)=>{n.dispatch("AfterProgressState",{state:s})},HZ=(n,s)=>n.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),zZ=(n,s)=>{n.dispatch("ToggleToolbarDrawer",{state:s})},VZ=(n,s)=>{n.dispatch("StylesTextUpdate",s)},y8=(n,s)=>{n.dispatch("AlignTextUpdate",s)},UZ=(n,s)=>{n.dispatch("FontSizeTextUpdate",s)},Um=(n,s)=>{n.dispatch("FontSizeInputTextUpdate",s)},O4=(n,s)=>{n.dispatch("BlocksTextUpdate",s)},ZZ=(n,s)=>{n.dispatch("FontFamilyTextUpdate",s)},WZ=n=>{n.dispatch("ToggleSidebar")},C8=n=>{n.dispatch("ToggleView")},RD=n=>{n.dispatch("ContextToolbarClose")},MD=n=>{n.dispatch("ContextFormSlideBack")},E1=(n,s)=>()=>{n(),s()},Br=(n,s=Ot)=>Dh(n,"NodeChange",a=>{a.setEnabled(n.selection.isEditable()&&s())}),nS=(n,s)=>a=>{const i=ps(),d=()=>{a.setActive(n.formatter.match(s));const g=n.formatter.formatChanged(s,a.setActive);i.set(g)};return n.initialized?d():n.once("init",d),()=>{n.off("init",d),i.clear()}},oS=(n,s)=>a=>{const i=Br(n)(a),d=nS(n,s)(a);return()=>{i(),d()}},Dh=(n,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),n.on(s,d)};return n.initialized?g():n.once("init",g),()=>{n.off("init",g),n.off(s,d)}},D4=n=>s=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("mceToggleFormat",!1,s.format)})},xc=(n,s)=>()=>n.execCommand(s);var T1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const S8={},w8=(n,s=10)=>{const a=T1.getItem(n),i=on(a)?JSON.parse(a):[],g=(x=>s-x.length<0?x.slice(0,s):x)(i),h=x=>{Me(g,x).each(C),g.unshift(x),g.length>s&&g.pop(),T1.setItem(n,JSON.stringify(g))},C=x=>{g.splice(x,1)};return{add:h,state:()=>g.slice(0)}},BD=n=>bt(S8,n).getOrThunk(()=>{const s=`tinymce-custom-colors-${n}`,a=T1.getItem(s);if(oc(a)){const d=T1.getItem("tinymce-custom-colors");T1.setItem(s,Jn(d)?d:"[]")}const i=w8(s,10);return S8[n]=i,i}),jZ=n=>De(BD(n).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),ND=(n,s)=>{BD(n).add(s)},R4="forecolor",PD="hilitecolor",x8=5,GZ=n=>$D(n.map((s,a)=>a%2===0?"#"+AD(s).value:s)),$D=n=>{const s=[];for(let a=0;a<n.length;a+=2)s.push({text:n[a+1],value:n[a],icon:"checkmark",type:"choiceitem"});return s},Ec=n=>s=>s.options.get(n),ID="#000000",E8=n=>{const s=n.options.register,a=g=>sc(g,on)?{value:GZ(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>sc(g,on)?{value:$D(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>Pa(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:LD(n)}),s("color_cols_foreground",{processor:d,default:T8(n,R4)}),s("color_cols_background",{processor:d,default:T8(n,PD)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:ID}),s("color_default_background",{processor:"string",default:ID})},M4=(n,s)=>s===R4&&n.options.isSet("color_map_foreground")?Ec("color_map_foreground")(n):s===PD&&n.options.isSet("color_map_background")?Ec("color_map_background")(n):n.options.isSet("color_map_raw")?Ec("color_map_raw")(n):Ec("color_map")(n),LD=(n,s="default")=>Math.max(x8,Math.ceil(Math.sqrt(M4(n,s).length))),T8=(n,s)=>{const a=Ec("color_cols")(n),i=LD(n,s);return a===LD(n)?i:a},k8=(n,s="default")=>Math.round(s===R4?Ec("color_cols_foreground")(n):s===PD?Ec("color_cols_background")(n):Ec("color_cols")(n)),FD=Ec("custom_colors"),qZ=Ec("color_default_foreground"),_8=Ec("color_default_background"),HD="rgba(0, 0, 0, 0)",Zm=n=>_D(n).exists(s=>s.alpha!==0),zD=n=>Ii(n,s=>{if(uc(s)){const a=Po(s,"background-color");return fa(Zm(a),a)}else return T.none()}).getOr(HD),VD=(n,s)=>{const a=We.fromDom(n.selection.getStart()),i=s==="hilitecolor"?zD(a):Po(a,"color");return _D(i).map(d=>"#"+QC(d).value)},A8=(n,s,a)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.apply(s,{value:a}),n.nodeChanged()})},O8=(n,s)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.remove(s,{value:null},void 0,!0),n.nodeChanged()})},D8=n=>{n.addCommand("mceApplyTextcolor",(s,a)=>{A8(n,s,a)}),n.addCommand("mceRemoveTextcolor",s=>{O8(n,s)})},B4=n=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return n?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},N4=(n,s,a,i)=>{a==="custom"?WD(n)(g=>{g.each(h=>{ND(s,h),n.execCommand("mceApplyTextcolor",s,h),i(h)})},VD(n,s).getOr(ID)):a==="remove"?(i(""),n.execCommand("mceRemoveTextcolor",s)):(i(a),n.execCommand("mceApplyTextcolor",s,a))},uv=(n,s,a)=>n.concat(jZ(s).concat(B4(a))),UD=(n,s,a)=>i=>{i(uv(n,s,a))},P4=(n,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";n.setIconFill(i,a)},R8=(n,s)=>{n.setTooltip(s)},M8=(n,s)=>a=>{const i=VD(n,s);return ic(i,a.toUpperCase())},ZD=(n,s,a)=>{if(ga(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=uv(M4(n,s),s,!1),g=vt(d,h=>h.value===a).getOr({text:""}).text;return n.translate([i,n.translate(g)])},B8=(n,s,a,i)=>{n.ui.registry.addSplitButton(s,{tooltip:ZD(n,a,i.get()),chevronTooltip:s==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:M8(n,a),columns:k8(n,a),fetch:UD(M4(n,a),a,FD(n)),onAction:d=>{N4(n,a,i.get(),Y)},onItemAction:(d,g)=>{N4(n,a,g,h=>{i.set(h),v8(n,{name:s,color:h})})},onSetup:d=>{P4(d,s,i.get());const g=h=>{h.name===s&&(P4(d,h.name,h.color),R8(d,ZD(n,a,h.color)))};return n.on("TextColorChange",g),E1(Br(n)(d),()=>{n.off("TextColorChange",g)})}})},N8=(n,s,a,i,d)=>{n.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(R8(g,ZD(n,a,d.get())),P4(g,s,d.get()),Br(n)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:M8(n,a),initData:{storageKey:a},onAction:g=>{N4(n,a,g.value,h=>{d.set(h),v8(n,{name:s,color:h})})}}]})},WD=n=>(s,a)=>{let i=!1;const d=C=>{const x=C.getData().colorpicker;i?(s(T.from(x)),C.close()):n.windowManager.alert(n.translate(["Invalid hex color code: {0}",x]))},g=(C,S)=>{S.name==="hex-valid"&&(i=S.value)},h={colorpicker:a};n.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:Y,onCancel:()=>{s(T.none())}})},P8=n=>{D8(n);const s=qZ(n),a=_8(n),i=pt(s),d=pt(a);B8(n,"forecolor","forecolor",i),B8(n,"backcolor","hilitecolor",d),N8(n,"forecolor","forecolor","Text color",i),N8(n,"backcolor","hilitecolor","Background color",d)},KZ=(n,s,a,i,d)=>{const g=S=>({setActive:x=>{Sn.set(S,x)},isActive:()=>Sn.isOn(S),isEnabled:()=>!ft.isDisabled(S),setEnabled:x=>ft.set(S,!x)}),h=lv({presets:"img",textContent:T.none(),htmlContent:T.none(),ariaLabel:n.tooltip,iconContent:T.some(n.url),labelContent:n.label,shortcutContent:T.none(),checkMark:T.some(vD(d.icons)),caret:T.none(),value:n.value},d,!0),C=n.tooltip.map(S=>To.config(d.tooltips.getConfig({tooltipText:d.translate(S)})));return ro(w1({context:n.context,data:ng(n),enabled:n.enabled,getApi:g,onAction:S=>{s(n.value),S.setActive(!0)},onSetup:S=>(S.setActive(a),Y),triggersSubmenu:!1,itemBehaviours:[...C.toArray()]},h,i,d),{toggling:{toggleClass:EO,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},$4=(n,s,a,i,d,g,h,C)=>{const S=ZC(s),_=YZ(s,a,i,d!=="color"?"normal":"color",g,h,C);return $O(n,S,_,i,{menuType:d})},YZ=(n,s,a,i,d,g,h)=>Ai(De(n,C=>C.type==="choiceitem"?rZ(C).fold(Ld,S=>T.some(SD(S,a===1,i,s,g(S.value),d,h,ZC(n)))):C.type==="imageitem"?JP(C).fold(Ld,S=>T.some(KZ(S,s,g(S.value),d,h))):C.type==="resetimage"?iD(C).fold(Ld,S=>T.some(SD({...S,text:S.tooltip,icon:T.some(S.icon),label:T.some(S.label)},a===1,i,s,g(S.value),d,h,ZC(n)))):T.none())),Rh=(n,s)=>{const a=Hm(s);return n===1?{mode:"menu",moveOnTab:!0}:n==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?oo(d.element,"[aria-checked=true]"):T.none()}},XZ=(n,s)=>n===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:n==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${Eh}`:`.${HC}`}},JZ=(n,s)=>{const a=$8(n,s),i=s.colorinput.getColorCols(n.initData.storageKey),d="color",h={...$4(st("menu-value"),a,C=>{n.onAction({value:C})},i,d,zu.CLOSE_ON_EXECUTE,n.select.getOr(In),s.shared.providers),markers:Hm(d),movement:Rh(i,d),showMenuRole:!1};return{type:"widget",data:{value:st("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[yA.widget(Gf.sketch(h))]}},$8=(n,s)=>{const a=n.initData.allowCustomColors&&s.colorinput.hasCustomColors();return n.initData.colors.fold(()=>uv(s.colorinput.getColors(n.initData.storageKey),n.initData.storageKey,a),i=>i.concat(B4(a)))},I8=(n,s)=>{const a="imageselector",i=n.initData.columns,g={...$4(st("menu-value"),n.initData.items,h=>{n.onAction({value:h})},i,a,zu.CLOSE_ON_EXECUTE,n.select.getOr(In),s.shared.providers),markers:Hm(a),movement:Rh(i,a),showMenuRole:!1};return{type:"widget",data:{value:st("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[yA.widget(Gf.sketch(g))]}},L8=st("cell-over"),F8=st("cell-execute"),jD=n=>(s,a)=>n.shared.providers.translate(["{0} columns, {1} rows",a,s]),QZ=(n,s,a)=>{const i=h=>xt(h,L8,{row:n,col:s}),d=h=>xt(h,F8,{row:n,col:s}),g=(h,C)=>{C.stop(),d(h)};return m({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Ve([Vt("insert-table-picker-cell",[Te(Vc(),Ut.focus),Te(Ar(),d),Te(vf(),g),Te(Fg(),g)]),Sn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ut.config({onFocus:i})])})},H8=(n,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=n(d+1,h+1);g.push(QZ(d,h,C))}i.push(g)}return i},eW=(n,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)Sn.set(n[g][h],g<=s&&h<=a)},tW=n=>le(n,s=>De(s,p)),z8=(n,s)=>Do(`${s}x${n}`),GD={inserttable:(n,s)=>{const d=jD(s),g=H8(d,10,10),h=z8(0,0),C=Ln({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:Ve([jt.config({})])});return{type:"widget",data:{value:st("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[yA.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:tW(g).concat(C.asSpec()),behaviours:Ve([Vt("insert-table-picker",[Eo(S=>{jt.set(C.get(S),[h])}),Qg(L8,(S,x,_)=>{const{row:D,col:P}=_.event;eW(g,D,P,10,10),jt.set(C.get(S),[z8(D+1,P+1)])}),Qg(F8,(S,x,_)=>{const{row:D,col:P}=_.event;fn(S,v0()),n.onAction({numRows:D+1,numColumns:P+1})})]),wt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:JZ,imageselect:I8},oW=(n,s)=>bt(GD,n.fancytype).map(a=>a(n,s)),sW=(n,s,a,i=!0,d=!1)=>{const g=d?RZ(a.icons):nl(a.icons),h=S=>({isEnabled:()=>!ft.isDisabled(S),setEnabled:x=>ft.set(S,!x),setIconFill:(x,_)=>{oo(S.element,`svg path[class="${x}"], rect[class="${x}"]`).each(D=>{Nt(D,"fill",_)})},setTooltip:x=>{const _=a.translate(x);Nt(S.element,"aria-label",_)}}),C=lv({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:T.none(),ariaLabel:n.text,labelContent:T.none(),caret:T.some(g),checkMark:T.none(),shortcutContent:n.shortcut},a,i);return w1({context:n.context,data:ng(n),getApi:h,enabled:n.enabled,onAction:Y,onSetup:n.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},rW=(n,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!ft.isDisabled(h),setEnabled:C=>ft.set(h,!C)}),g=lv({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:T.none(),labelContent:T.none(),ariaLabel:n.text,caret:T.none(),checkMark:T.none(),shortcutContent:n.shortcut},a,i);return w1({context:n.context,data:ng(n),getApi:d,enabled:n.enabled,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},aW=n=>({type:"separator",dom:{tag:"div",classes:[HC,sP]},components:n.text.map(Do).toArray()}),V8=(n,s,a,i=!0)=>{const d=h=>({setActive:C=>{Sn.set(h,C)},isActive:()=>Sn.isOn(h),isEnabled:()=>!ft.isDisabled(h),setEnabled:C=>ft.set(h,!C)}),g=lv({iconContent:n.icon,textContent:n.text,htmlContent:T.none(),labelContent:T.none(),ariaLabel:n.text,checkMark:T.some(vD(a.icons)),caret:T.none(),shortcutContent:n.shortcut,presets:"normal",meta:n.meta},a,i);return ro(w1({context:n.context,data:ng(n),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:EO,toggleOnExecute:!1,selected:n.active},role:n.role.getOrUndefined()})},U8=$Z,qD=aW,cW=rW,iW=sW,lW=V8,uW=oW,dW=IZ,mW=n=>{switch(n.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:n}}},fW=n=>{const s=it.getValue(n),a=VC(n).map(OO);qc.refetch(s).get(()=>{const i=Gt.getCoupled(s,"sandbox");a.each(d=>VC(i).each(g=>$V(g,d)))})},gW=(n,s)=>{hW(n).each(a=>{Q3(n,a.element,s.event.eventType,s.event.interactionEvent)})},hW=n=>Bn.getState(n).bind($n.getHighlighted).bind($n.getHighlighted),KD=n=>Os(n.element,u4)?T.some(n.element):oo(n.element,"."+u4),Z8=(n,s,a)=>{mP(n).each(i=>{fP(i,a),KD(s).each(g=>{xr(g,"id").each(h=>Nt(i.element,"aria-controls",h))})}),Nt(a.element,"aria-selected","true")},pW=(n,s,a)=>{Nt(a.element,"aria-selected","false")},bW=n=>{mP(n).each(s=>Ut.focus(s))},sS=n=>Gt.getExistingCoupled(n,"sandbox").bind(VC).map(OO).map(a=>a.fetchPattern).getOr("");var dv;(function(n){n[n.ContentFocus=0]="ContentFocus",n[n.UiFocus=1]="UiFocus"})(dv||(dv={}));const vW=(n,s,a,i,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:T.none(),icon:C.text.isSome()?T.none():C.icon}:C;switch(n.type){case"menuitem":return uZ(n).fold(Ld,C=>T.some(cW(h(C),s,g,i)));case"nestedmenuitem":return mZ(n).fold(Ld,C=>T.some(iW(h(C),s,g,i,d)));case"togglemenuitem":return gZ(n).fold(Ld,C=>T.some(lW(h(C),s,g,i)));case"separator":return zU(n).fold(Ld,C=>T.some(qD(C)));case"fancymenuitem":return XP(n).fold(Ld,C=>uW(C,a));default:return console.error("Unknown item in general menu",n),T.none()}},yW=(n,s,a,i,d,g,h)=>{const C=i===1,S=!C||ZC(n);return Ai(De(n,x=>{switch(x.type){case"separator":return UU(x).fold(Ld,_=>T.some(qD(_)));case"cardmenuitem":return rD(x).fold(Ld,_=>T.some(dW({..._,onAction:D=>{_.onAction(D),a(_.value,_.meta)}},d,g,{itemBehaviours:r8(_.meta,g,T.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return ZU(x).fold(Ld,_=>T.some(U8(_,s,C,"normal",a,d,g,S)))}}))},I4=(n,s,a,i,d,g)=>{const h=ZC(s),C=Ai(De(s,_=>{const D=F=>d?!Mn(F,"text"):h,P=F=>vW(F,a,i,D(F),d);return _.type==="nestedmenuitem"&&_.getSubmenuItems().length<=0?P({..._,enabled:!1}):P(_)})),S=mW(g);return(d?bP:$O)(n,h,C,1,S)},YD=n=>s1.singleData(n.value,n),XD=(n,s,a,i)=>{const d=Rh(s,i),g=Hm(i);return{data:YD({...n,movement:d,menuBehaviours:iv.unnamedEvents(s!=="auto"?[]:[Eo((h,C)=>{mD(h,4,g.item).each(({numColumns:S,numRows:x})=>{wt.setGridSize(h,x,S)})})])}),menu:{markers:Hm(i),fakeFocus:a===dv.ContentFocus}}},W8=n=>ff.create(We.fromDom(n.startContainer),n.startOffset,We.fromDom(n.endContainer),n.endOffset),CW={register:(n,s)=>{const a=st("autocompleter"),i=pt(!1),d=pt(!1),g=Zt(),h=m(Qo.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ve([Vt("dismissAutocompleter",[Te(gd(),()=>D()),Te(w0(),(W,ee)=>{xr(ee.event.target,"id").each(re=>Nt(We.fromDom(n.getBody()),"aria-activedescendant",re))})])]),lazySink:s.getSink})),C=()=>Qo.isOpen(h),S=d.get,x=()=>{if(C()){Qo.hide(h),n.dom.remove(a,!1);const W=We.fromDom(n.getBody());xr(W,"aria-owns").filter(ee=>ee===a).each(()=>{No(W,"aria-owns"),No(W,"aria-activedescendant")})}},_=()=>Qo.getContent(h).bind(W=>Ls(W.components(),0)),D=()=>n.execCommand("mceAutocompleterClose"),P=W=>{const ee=ta(W,re=>T.from(re.columns)).getOr(1);return le(W,re=>{const fe=re.items;return yW(fe,re.matchText,(be,Ke)=>{const Re={hide:()=>D(),reload:$e=>{x(),n.execCommand("mceAutocompleterReload",!1,{fetchOptions:$e})}};n.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each($e=>{i.set(!0),re.onAction(Re,$e,be,Ke),i.set(!1)})},ee,zu.BUBBLE_TO_SANDBOX,s,re.highlightOn)})},F=(W,ee)=>{const re=ta(W,fe=>T.from(fe.columns)).getOr(1);Qo.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(W8),root:We.fromDom(n.getBody())}},XD($O("autocompleter-value",!0,ee,re,{menuType:"normal"}),re,dv.ContentFocus,"normal")),_().each($n.highlightFirst)},z=W=>{const ee=P(W);ee.length>0?(F(W,ee),Nt(We.fromDom(n.getBody()),"aria-owns",a),n.inline||G()):x()},G=()=>{n.dom.get(a)&&n.dom.remove(a,!1);const W=n.getDoc().documentElement,ee=n.selection.getNode(),re=G1(h.element);rs(re,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ee.offsetTop}px`,left:`${ee.offsetLeft}px`}),n.dom.add(W,re.dom),oo(re,'[role="menu"]').each(fe=>{Cn(fe,"position"),Cn(fe,"max-height")})};n.on("AutocompleterStart",({lookupData:W})=>{d.set(!0),i.set(!1),z(W)}),n.on("AutocompleterUpdate",({lookupData:W})=>z(W)),n.on("AutocompleterUpdateActiveRange",({range:W})=>g.set(W)),n.on("AutocompleterEnd",()=>{x(),d.set(!1),i.set(!1),g.clear()});const J={cancelIfNecessary:D,isMenuOpen:C,isActive:S,isProcessingAction:i.get,getMenu:_};AV.setup(J,n)}},j8=(n,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:De(n.items,s.interpreter)});var SW=tinymce.util.Tools.resolve("tinymce.html.Entities");const mv=(n,s,a,i)=>{const d=G8(n,s,a,i);return pn.sketch(d)},wW=(n,s)=>mv(n,s,[],[]),G8=(n,s,a,i)=>({dom:K8(a),components:n.toArray().concat([s]),fieldBehaviours:Ve(i)}),q8=()=>K8([]),K8=n=>({tag:"div",classes:["tox-form__group"].concat(n)}),og=(n,s)=>pn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Do(s.translate(n))]}),Tc=st("form-component-change"),Y8=st("form-component-input"),k1=st("form-close"),sg=st("form-cancel"),Vu=st("form-action"),rS=st("form-submit"),JD=st("form-block"),L4=st("form-unblock"),X8=st("form-tabchange"),QD=st("form-resize"),xW=(n,s,a)=>{const i=n.label.map(F=>og(F,s)),d=s.icons(),g=F=>d[F]??F,h=F=>(z,G)=>{aa(G.event.target,"[data-collection-item-value]").each(J=>{F(z,G,J,tr(J,"data-collection-item-value"))})},C=(F,z)=>{const J=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",W=De(z,fe=>{const be=Da.translate(fe.text),Ke=n.columns===1?`<div class="tox-collection__item-label">${be}</div>`:"",Re=`<div class="tox-collection__item-icon">${g(fe.icon)}</div>`,$e={_:" "," - ":" ","-":" "},Ne=be.replace(/\_| \- |\-/g,Et=>$e[Et]);return`<div data-mce-tooltip="${Ne}" class="tox-collection__item${J}" tabindex="-1" data-collection-item-value="${SW.encodeAllRaw(fe.value)}" aria-label="${Ne}">${Re}${Ke}</div>`}),ee=n.columns!=="auto"&&n.columns>1?ls(W,n.columns):[W],re=De(ee,fe=>`<div class="tox-collection__group">${fe.join("")}</div>`);wl(F.element,re.join(""))},S=h((F,z,G,J)=>{z.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||xt(F,Vu,{name:n.name,value:J})}),x=[Te(Vc(),h((F,z,G)=>{ur(G,!0)})),Te(vf(),S),Te(Fg(),S),Te(zi(),h((F,z,G)=>{oo(F.element,"."+m1).each(J=>{Yo(J,m1)}),mo(G,m1)})),Te(T2(),h(F=>{oo(F.element,"."+m1).each(z=>{Yo(z,m1),ms(z)})})),Tm(h((F,z,G,J)=>{xt(F,Vu,{name:n.name,value:J})}))],_=(F,z)=>De(kr(F.element,".tox-collection__item"),z),D=pn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(n.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:an},behaviours:Ve([ft.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable,onDisabled:F=>{_(F,z=>{mo(z,"tox-collection__item--state-disabled"),Nt(z,"aria-disabled",!0)})},onEnabled:F=>{_(F,z=>{Yo(z,"tox-collection__item--state-disabled"),No(z,"aria-disabled")})}}),Es(()=>s.checkUiComponentContext(n.context)),jt.config({}),To.config({...s.tooltips.getConfig({tooltipText:"",onShow:F=>{oo(F.element,"."+m1+"[data-mce-tooltip]").each(z=>{xr(z,"data-mce-tooltip").each(G=>{To.setComponents(F,s.tooltips.getComponents({tooltipText:G}))})})}}),mode:"children-keyboard-focus",anchor:F=>({type:"node",node:oo(F.element,"."+m1).orThunk(()=>ZS(".tox-collection__item")),root:F.element,layouts:{onLtr:ie([Ms,Fo,Ws,Dr,Rs,dr]),onRtl:ie([Ms,Fo,Ws,Dr,Rs,dr])},bubble:Cc(0,-2,{})})}),it.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(F,z)=>{C(F,z),n.columns==="auto"&&mD(F,5,"tox-collection__item").each(({numRows:G,numColumns:J})=>{wt.setGridSize(F,G,J)}),fn(F,QD)}}),So.config({}),wt.config(XZ(n.columns,"normal")),Vt("collection-events",x)]),eventOrder:{[Ar()]:["disabling","alloy.base.behaviour","collection-events"],[zi()]:["collection-events","tooltipping"]}});return mv(i,D,["tox-form__group--collection"],[])},EW=(n,s)=>qc.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:Ve([Hd.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable),Es(()=>s.providers.checkUiComponentContext(n.context)),Dd.config({}),So.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Wo.nu(i=>n.fetch(i)).map(i=>T.from(YD(ro($4(st("menu-value"),i,d=>{n.onItemAction(a,d)},n.columns,n.presets,zu.CLOSE_ON_EXECUTE,In,s.providers),{movement:Rh(n.columns,n.presets)})))),parts:{menu:zC(!1,1,n.presets)}}),F4=st("color-input-change"),J8=st("color-swatch-change"),Q8=st("color-picker-cancel"),TW=(n,s,a,i)=>{const d=pn.parts.field({factory:Fm,inputClasses:["tox-textfield"],data:i,onSetValue:x=>Xi.run(x).get(Y),inputBehaviours:Ve([ft.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable}),Es(()=>s.providers.checkUiComponentContext(n.context)),So.config({}),Xi.config({invalidClass:"tox-textbox-field-invalid",getRoot:x=>iu(x.element),notify:{onValid:x=>{const _=it.getValue(x);xt(x,F4,{color:_})}},validator:{validateOnLoad:!1,validate:x=>{const _=it.getValue(x);if(_.length===0)return Wo.pure(Bt.value(!0));{const D=We.fromTag("span");Ft(D,"background-color",_);const P=Go(D,"background-color").fold(()=>Bt.error("blah"),F=>Bt.value(_));return Wo.pure(P)}}}})]),selectOnFocus:!1}),g=n.label.map(x=>og(x,s.providers)),h=(x,_)=>{xt(x,J8,{value:_})},C=(x,_)=>{S.getOpt(x).each(D=>{_==="custom"?a.colorPicker(P=>{P.fold(()=>fn(D,Q8),F=>{h(D,F),ND(n.storageKey,F)})},"#ffffff"):_==="remove"?h(D,""):h(D,_)})},S=Ln(EW({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Rs,Ws,Ms],onLtr:()=>[Ws,Rs,Ms]},components:[],fetch:UD(a.getColors(n.storageKey),n.storageKey,a.hasCustomColors()),columns:a.getColorCols(n.storageKey),presets:"color",onItemAction:C,context:n.context},s));return pn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:Ve([Vt("form-field-events",[Te(F4,(x,_)=>{S.getOpt(x).each(D=>{Ft(D.element,"background-color",_.event.color)}),xt(x,Tc,{name:n.name})}),Te(J8,(x,_)=>{pn.getField(x).each(D=>{it.setValue(D,_.event.value),Le.getCurrent(x).each(Ut.focus)})}),Te(Q8,(x,_)=>{pn.getField(x).each(D=>{Le.getCurrent(x).each(Ut.focus)})})])])})},Uu={self:()=>Le.config({find:T.some}),memento:n=>Le.config({find:n.getOpt}),childAt:n=>Le.config({find:s=>om(s.element,n).bind(a=>s.getSystem().getByDom(a).toOptional())})},t$=Tt([de("preprocess",an),de("postprocess",an)]),_W=(n,s)=>{const a=va("RepresentingConfigs.memento processors",t$,s);return it.config({store:{mode:"manual",getValue:i=>{const d=n.get(i),g=it.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=n.get(i);it.setValue(h,g)}}})},_1=(n,s,a)=>it.config({store:{mode:"manual",...n.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),n$=(n,s,a)=>_1(n,i=>s(i.element),(i,d)=>a(i.element,d)),AW=n=>n$(n,od,wl),H4=n=>it.config({store:{mode:"memory",initialValue:n}}),z4=st("rgb-hex-update"),o$=st("slider-update"),s$=st("palette-update"),r$=(n,s)=>{const a=Fu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Fu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Fu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ie(0)},components:[a,i],sliderBehaviours:Ve([Ut.config({})]),onChange:(d,g,h)=>{Nt(d.element,"aria-valuenow",Math.floor(360-h*3.6)),xt(d,o$,{value:h})}})},a$=st("valid-input"),c$=st("invalid-input"),i$=st("validating-input"),V4="colorcustom.rgb.",OW={isEnabled:Ot,setEnabled:Y,immediatelyShow:Y,immediatelyHide:Y},DW=(n,s,a,i,d,g)=>{const h=(G,J)=>{const W=J.get();G!==W.isEnabled()&&(W.setEnabled(G),G?W.immediatelyShow():W.immediatelyHide())},C=(G,J,W)=>Xi.config({invalidClass:s("invalid"),notify:{onValidate:ee=>{xt(ee,i$,{type:G})},onValid:ee=>{h(!1,W),xt(ee,a$,{type:G,value:it.getValue(ee)})},onInvalid:ee=>{h(!0,W),xt(ee,c$,{type:G,value:it.getValue(ee)})}},validator:{validate:ee=>{const re=it.getValue(ee),fe=J(re)?Bt.value(!0):Bt.error(n("aria.input.invalid"));return Wo.pure(fe)},validateOnLoad:!1}}),S=(G,J,W,ee,re)=>{const fe=pt(OW),be=n(V4+"range"),Ke=pn.parts.label({dom:{tag:"label"},components:[Do(W)]}),Re=pn.parts.field({data:re,factory:Fm,inputAttributes:{type:"text","aria-label":ee,...J==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Ve([C(J,G,fe),So.config({}),To.config({...d({tooltipText:"",onSetup:Yt=>{fe.set({isEnabled:()=>To.isEnabled(Yt),setEnabled:ht=>To.setEnabled(Yt,ht),immediatelyShow:()=>To.immediateOpenClose(Yt,!0),immediatelyHide:()=>To.immediateOpenClose(Yt,!1)}),To.setEnabled(Yt,!1)},onShow:(Yt,ht)=>{To.setComponents(Yt,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Do(n(J==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:Yt=>{Xi.isInvalid(Yt)&&Xi.run(Yt).get(Y)}}),$e=st("aria-invalid"),Ne=Ln(g("invalid",T.some($e),"warning")),Et=Ln({dom:{tag:"div",classes:[s("invalid-icon")]},components:[Ne.asSpec()]}),gt=[Ke,Re,Et.asSpec()],sn=J!=="hex"?[pn.parts["aria-descriptor"]({text:be})]:[],kt=gt.concat(sn);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:kt}},x=(G,J)=>{const W=QC(J);return vh.getField(G,"hex").each(ee=>{Ut.isFocused(ee)||it.setValue(G,{hex:W.value})}),W},_=(G,J)=>{const W=J.red,ee=J.green,re=J.blue;it.setValue(G,{red:W,green:ee,blue:re})},D=Ln({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),P=(G,J)=>{D.getOpt(G).each(W=>{Ft(W.element,"background-color","#"+J.value)})};return Yi({factory:()=>{const G={red:pt(T.some(255)),green:pt(T.some(255)),blue:pt(T.some(255)),hex:pt(T.some("ffffff"))},J=(ht,Ae)=>{const Ze=tS(Ae);_(ht,Ze),fe(Ze)},W=ht=>G[ht].get(),ee=(ht,Ae)=>{G[ht].set(Ae)},re=()=>W("red").bind(ht=>W("green").bind(Ae=>W("blue").map(Ze=>hr(ht,Ae,Ze,1)))),fe=ht=>{const Ae=ht.red,Ze=ht.green,Pt=ht.blue;ee("red",T.some(Ae)),ee("green",T.some(Ze)),ee("blue",T.some(Pt))},be=(ht,Ae)=>{const Ze=Ae.event;Ze.type!=="hex"?ee(Ze.type,T.none()):i(ht)},Ke=(ht,Ae)=>{a(ht);const Ze=E4(Ae);ee("hex",T.some(Ze.value));const Pt=tS(Ze);_(ht,Pt),fe(Pt),xt(ht,z4,{hex:Ze}),P(ht,Ze)},Re=(ht,Ae,Ze)=>{const Pt=parseInt(Ze,10);ee(Ae,T.some(Pt)),re().each(Xt=>{const Ct=x(ht,Xt);xt(ht,z4,{hex:Ct}),P(ht,Ct)})},$e=ht=>ht.type==="hex",Ne=(ht,Ae)=>{const Ze=Ae.event;$e(Ze)?Ke(ht,Ze.value):Re(ht,Ze.type,Ze.value)},Et=ht=>({label:n(V4+ht+".label"),description:n(V4+ht+".description")}),gt=Et("red"),sn=Et("green"),kt=Et("blue"),Yt=Et("hex");return ro(vh.sketch(ht=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":n("aria.color.picker")}},components:[ht.field("red",pn.sketch(S(_4,"red",gt.label,gt.description,255))),ht.field("green",pn.sketch(S(_4,"green",sn.label,sn.description,255))),ht.field("blue",pn.sketch(S(_4,"blue",kt.label,kt.description,255))),ht.field("hex",pn.sketch(S(k4,"hex",Yt.label,Yt.description,"ffffff"))),D.asSpec()],formBehaviours:Ve([Xi.config({invalidClass:s("form-invalid")}),Vt("rgb-form-events",[Te(a$,Ne),Te(c$,be),Te(i$,be)])])})),{apis:{updateHex:(ht,Ae)=>{it.setValue(ht,{hex:Ae.value}),J(ht,Ae),P(ht,Ae)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(G,J,W)=>{G.updateHex(J,W)}},extraApis:{}})},RW=(n,s)=>{const a=Fu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Fu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(x,_)=>{const{width:D,height:P}=x,F=x.getContext("2d");if(F===null)return;F.fillStyle=_,F.fillRect(0,0,D,P);const z=F.createLinearGradient(0,0,D,0);z.addColorStop(0,"rgba(255,255,255,1)"),z.addColorStop(1,"rgba(255,255,255,0)"),F.fillStyle=z,F.fillRect(0,0,D,P);const G=F.createLinearGradient(0,0,0,P);G.addColorStop(0,"rgba(0,0,0,0)"),G.addColorStop(1,"rgba(0,0,0,1)"),F.fillStyle=G,F.fillRect(0,0,D,P)},g=(x,_)=>{const D=x.components()[0].element.dom,P=Oh(_,100,100),F=f8(P);d(D,g8(F))},h=(x,_)=>{const D=xD(tS(_));Fu.setValue(x,{x:D.saturation,y:100-D.value}),Nt(x.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",D.saturation,D.value]))};return Yi({factory:x=>{const _=ie({x:0,y:0}),D=(z,G,J)=>{Pa(J)||Nt(z.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",Math.floor(J.x),Math.floor(100-J.y)])),xt(z,s$,{value:J})},P=(z,G,J,W)=>{d(J.element.dom,g8(h8))},F=Ve([Le.config({find:T.some}),Ut.config({})]);return Fu.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":n(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:_},rounded:!1,components:[a,i],onChange:D,onInit:P,sliderBehaviours:F})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(x,_,D)=>{g(_,D)},setThumb:(x,_,D)=>{h(_,D)}},extraApis:{}})},l$=(n,s,a,i)=>{const d=h=>{const C=DW(n,s,h.onValidHex,h.onInvalidHex,a,i),S=RW(n,s),x=$e=>(100-$e)/100*360,_=$e=>100-$e/360*100,D={paletteRgba:pt(h8),paletteHue:pt(0)},P=Ln(r$(n,s)),F=Ln(S.sketch({})),z=Ln(C.sketch({})),G=($e,Ne,Et)=>{F.getOpt($e).each(gt=>{S.setHue(gt,Et)})},J=($e,Ne)=>{z.getOpt($e).each(Et=>{C.updateHex(Et,Ne)})},W=($e,Ne,Et)=>{P.getOpt($e).each(gt=>{Fu.setValue(gt,_(Et))})},ee=($e,Ne)=>{F.getOpt($e).each(Et=>{S.setThumb(Et,Ne)})},re=($e,Ne)=>{const Et=tS($e);D.paletteRgba.set(Et),D.paletteHue.set(Ne)},fe=($e,Ne,Et,gt)=>{re(Ne,Et),et(gt,sn=>{sn($e,Ne,Et)})},be=()=>{const $e=[J];return(Ne,Et)=>{const gt=Et.event.value,sn=D.paletteHue.get(),kt=Oh(sn,gt.x,100-gt.y),Yt=Vd(kt);fe(Ne,Yt,sn,$e)}},Ke=()=>{const $e=[G,J];return(Ne,Et)=>{const gt=x(Et.event.value),sn=D.paletteRgba.get(),kt=xD(sn),Yt=Oh(gt,kt.saturation,kt.value),ht=Vd(Yt);fe(Ne,ht,gt,$e)}},Re=()=>{const $e=[G,W,ee];return(Ne,Et)=>{const gt=Et.event.hex,sn=p8(gt);fe(Ne,gt,sn.hue,$e)}};return{uid:h.uid,dom:h.dom,components:[F.asSpec(),P.asSpec(),z.asSpec()],behaviours:Ve([Vt("colour-picker-events",[Te(z4,Re()),Te(s$,be()),Te(o$,Ke())]),Le.config({find:$e=>z.getOpt($e)}),wt.config({mode:"acyclic"})])}};return Yi({name:"ColourPicker",configFields:[Be("dom"),de("onValidHex",Y),de("onInvalidHex",Y)],factory:d})},u$={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},d$=n=>s=>on(s)?n.translate(u$[s]):n.translate(s),U4=(n,s,a)=>{const i=x=>"tox-"+x,d=(x,_,D=x,P=x)=>tl(D,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+x],attributes:{title:s.translate(P),"aria-live":"polite",..._.fold(()=>({}),F=>({id:F}))}},s.icons),g=l$(d$(s),i,s.tooltips.getConfig,d),h=x=>{xt(x,Vu,{name:"hex-valid",value:!0})},C=x=>{xt(x,Vu,{name:"hex-valid",value:!1})},S=Ln(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:Ve([_1(a,x=>{const _=S.get(x);return Le.getCurrent(_).bind(F=>it.getValue(F).hex).map(F=>"#"+nf(F,"#")).getOr("")},(x,_)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,P=T.from(D.exec(_)).bind(G=>Ls(G,1)),F=S.get(x);Le.getCurrent(F).fold(()=>{console.log("Can not find form")},G=>{it.setValue(G,{hex:P.getOr("")}),vh.getField(G,"hex").each(J=>{fn(J,_l())})})}),Uu.self()])}};var m$=tinymce.util.Tools.resolve("tinymce.Resource");const f$=n=>Mn(n,"init"),MW=n=>{const s=Zt(),a=Ln({dom:{tag:n.tag}}),i=Zt(),d=!f$(n)&&n.onFocus.isSome()?[Ut.config({onFocus:g=>{n.onFocus.each(h=>{h(g.element.dom)})}}),So.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ve([Vt("custom-editor-events",[Eo(g=>{a.getOpt(g).each(h=>{(f$(n)?n.init(h.element.dom):m$.load(n.scriptId,n.scriptUrl).then(C=>C(h.element.dom,n.settings))).then(C=>{i.on(S=>{C.setValue(S)}),i.clear(),s.set(C)})})})]),_1(T.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),C=>C.setValue(h))}),Uu.self()].concat(d)),components:[a.asSpec()]}};var Wm=tinymce.util.Tools.resolve("tinymce.util.Tools");const eR=st("browse.files.event"),BW=(n,s,a)=>{const i=Wm.explode(s.getOption("images_file_types")),d=g=>a.fold(()=>js(i,h=>ni(g.name.toLowerCase(),`.${h.toLowerCase()}`)),h=>js(h,C=>ni(g.name.toLowerCase(),`.${C.toLowerCase()}`)));return no(Lh(n),d)},NW=(n,s,a)=>{const i=(P,F)=>{F.stop()},d=P=>(F,z)=>{et(P,G=>{G(F,z)})},g=(P,F)=>{var z;if(!ft.isDisabled(P)){const G=F.event.raw;xt(P,eR,{files:(z=G.dataTransfer)==null?void 0:z.files})}},h=(P,F)=>{const z=F.event.raw.target;xt(P,eR,{files:z.files})},C=(P,F)=>{F&&(it.setValue(P,BW(F,s,n.allowedFileExtensions)),xt(P,Tc,{name:n.name}))},S=Ln({dom:{tag:"input",attributes:{type:"file",accept:n.allowedFileTypes.getOr("image/*")},styles:{display:"none"}},behaviours:Ve([Vt("input-file-events",[Mf(vf()),Mf(Fg())])])}),x=n.label.map(P=>og(P,s)),_=pn.parts.field({factory:ar,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Do(s.translate(n.buttonLabel.getOr("Browse for an image"))),S.asSpec()],action:P=>{S.get(P).element.dom.click()},buttonBehaviours:Ve([Uu.self(),H4(a.getOr([])),So.config({}),Hd.button(()=>s.checkUiComponentContext(n.context).shouldDisable),Es(()=>s.checkUiComponentContext(n.context))])}),D={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ve([ft.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable}),Es(()=>s.checkUiComponentContext(n.context)),Sn.config({toggleClass:"dragenter",toggleOnExecute:!1}),Vt("dropzone-events",[Te("dragenter",d([i,Sn.toggle])),Te("dragleave",d([i,Sn.toggle])),Te("dragover",i),Te("drop",d([i,g])),Te(bf(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Do(s.translate(n.dropAreaLabel.getOr("Drop an image here")))]},_]}]};return mv(x,D,["tox-form__group--stretched"],[Vt("handle-files",[Te(eR,(P,F)=>{pn.getField(P).each(z=>{C(z,F.event.files)})})])])},PW=(n,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${n.columns}col`]},components:De(n.items,s.interpreter)}),Z4=st("alloy-fake-before-tabstop"),tR=st("alloy-fake-after-tabstop"),g$=n=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:n},behaviours:Ve([Ut.config({ignore:!0}),So.config({})])}),h$=(n,s)=>({dom:{tag:"div",classes:["tox-navobj",...n.getOr([])]},components:[g$([Z4]),s,g$([tR])],behaviours:Ve([Uu.childAt(1)])}),nR=(n,s)=>{xt(n,rr(),{raw:{which:9,shiftKey:s}})},p$=(n,s)=>{const a=s.element;Os(a,Z4)?nR(n,!0):Os(a,tR)&&nR(n,!1)},aS=n=>Xh(n,["."+Z4,"."+tR].join(","),In),W4=st("update-dialog"),oR=st("update-title"),b$=st("update-body"),v$=st("update-footer"),Ht=st("body-send-message"),Mh=st("dialog-focus-shifted"),j4=Hr().browser,fv=j4.isSafari(),y$=j4.isFirefox(),sR=fv||y$,$W=j4.isChromium(),C$=({scrollTop:n,scrollHeight:s,clientHeight:a})=>Math.ceil(n)+a>=s,S$=(n,s)=>n.scrollTo(0,s==="bottom"?99999999:s),IW=(n,s)=>{const a=n.body;return T.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!$W&&!fv||Jn(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:n.documentElement)},w$=(n,s,a)=>{const i=n.dom;T.from(i.contentDocument).fold(a,d=>{let g=0;const h=IW(d,s).map(S=>(g=S.scrollTop,S)).forall(C$),C=()=>{const S=i.contentWindow;Jn(S)&&(h?S$(S,"bottom"):!h&&sR&&g!==0&&S$(S,g))};fv&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),fv||C()})},x$=fa(sR,fv?500:200).map(n=>ss(w$,n)),YY=(n,s)=>{const a=pt(n.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>Nt(g,"srcdoc",d);s?x$.fold(ie(w$),C=>C.throttle)(g,d,h):h()}a.set(d)}}},cS=(n,s,a)=>{const i="tox-dialog__iframe",d=n.transparent?[]:[`${i}--opaque`],g=n.border?["tox-navobj-bordered"]:[],h={...n.label.map(D=>({title:D})).getOr({}),...a.map(D=>({srcdoc:D})).getOr({}),...n.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=YY(a,n.streamContent),S=n.label.map(D=>og(D,s)),x=D=>h$(T.from(g),{uid:D.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:Ve([So.config({}),Ut.config({}),_1(a,C.getValue,C.setValue),Oa.config({channels:{[Mh]:{onReceive:(P,F)=>{F.newFocus.each(z=>{iu(P.element).each(G=>{(un(P.element,z)?mo:Yo)(G,"tox-navobj-bordered-focus")})})}}}})])}),_=pn.parts.field({factory:{sketch:x}});return mv(S,_,["tox-form__group--stretched"],[])},rR=(n,s,a,i,d)=>{const g=a*d,h=i*d,C=Math.max(0,n/2-g/2),S=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},E$=(n,s,a)=>{const i=ra(n),d=nr(n);return Math.min(i/s,d/a,1)},FW=(n,s)=>{const a=pt(s.getOr({url:""})),i=Ln({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=Ln({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(S,x)=>{const _={url:x.url};x.zoom.each(P=>_.zoom=P),x.cachedWidth.each(P=>_.cachedWidth=P),x.cachedHeight.each(P=>_.cachedHeight=P),a.set(_);const D=()=>{const{cachedWidth:P,cachedHeight:F,zoom:z}=_;if(!Is(P)&&!Is(F)){if(Is(z)){const J=E$(S.element,P,F);_.zoom=J}const G=rR(ra(S.element),nr(S.element),P,F,_.zoom);d.getOpt(S).each(J=>{rs(J.element,G)})}};i.getOpt(S).each(P=>{const F=P.element;x.url!==tr(F,"src")&&(Nt(F,"src",x.url),Yo(S.element,"tox-imagepreview__loaded")),D(),xl(F).then(z=>{S.getSystem().isConnected()&&(mo(S.element,"tox-imagepreview__loaded"),_.cachedWidth=z.dom.naturalWidth,_.cachedHeight=z.dom.naturalHeight,D())})})},h={};n.height.each(S=>h.height=S);const C=s.map(S=>({url:S.url,zoom:T.from(S.zoom),cachedWidth:T.from(S.cachedWidth),cachedHeight:T.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Ve([Uu.self(),_1(C,()=>a.get(),g)])}},HW=(n,s,a)=>{const i="tox-label",d=n.align==="center"?[`${i}--center`]:[],g=n.align==="end"?[`${i}--end`]:[],h=Ln({dom:{tag:"label",classes:[i,...d,...g]},components:[Do(s.providers.translate(n.label))]}),C=De(n.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:Ve([Uu.self(),jt.config({}),AW(T.none()),wt.config({mode:"acyclic"}),Vt("label",[Eo(S=>{n.for.each(x=>{a(x).each(_=>{h.getOpt(S).each(D=>{const P=tr(_.element,"id")??st("form-field");Nt(_.element,"id",P),Nt(D.element,"for",P)})})})})])])}},aR=st("toolbar.button.execute"),zW=n=>Tm((s,a)=>{XC(n,s)(i=>{xt(s,aR,{buttonApi:i}),n.onAction(i)})}),jm=st("common-button-display-events"),cR={[Ar()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Al()]:["toolbar-button-events",jm],[bi()]:["toolbar-button-events","dropdown-events","tooltipping"],[Wa()]:["focusing","alloy.base.behaviour",jm]},G4=n=>Ft(n.element,"width",Po(n.element,"width")),T$=(n,s,a)=>tl(n,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),iR=(n,s)=>T$(n,s,[]),Bh=(n,s)=>T$(n,s,[jt.config({})]),lR=(n,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Do(a.translate(n))],behaviours:Ve([jt.config({})])}),Gl=st("update-menu-text"),A1=st("update-menu-icon"),q4=st("update-tooltip-text"),uR=(n,s,a,i)=>{const d=pt(Y),g=pt(n.tooltip),h=n.text.map(J=>Ln(lR(J,s,a.providers))),C=n.icon.map(J=>Ln(Bh(J,a.providers.icons))),S=(J,W)=>{const ee=it.getValue(J);return Ut.focus(ee),xt(ee,"keydown",{raw:W.event.raw}),qc.close(ee),T.some(!0)},x=n.role.fold(()=>({}),J=>({role:J})),_=T.from(n.listRole).map(J=>({listRole:J})).getOr({}),D=n.ariaLabel.fold(()=>({}),J=>({"aria-label":a.providers.translate(J)})),P=tl("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),F=st("common-button-display-events"),z="dropdown-events";return Ln(qc.sketch({...n.uid?{uid:n.uid}:{},...x,..._,dom:{tag:"button",classes:[s,`${s}--select`].concat(De(n.classes,J=>`${s}--${J}`)),attributes:{...D,...Jn(i)?{"data-mce-name":i}:{}}},components:Vm([C.map(J=>J.asSpec()),h.map(J=>J.asSpec()),T.some(P)]),matchWidth:!0,useMinWidth:!0,onOpen:(J,W,ee)=>{n.searchable&&bW(ee)},dropdownBehaviours:Ve([...n.dropdownBehaviours,Hd.button(()=>n.disabled||a.providers.checkUiComponentContext(n.context).shouldDisable),Es(()=>a.providers.checkUiComponentContext(n.context)),Dd.config({}),jt.config({}),...n.tooltip.map(J=>To.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(J),onShow:W=>{if(lc(g.get(),n.tooltip,(ee,re)=>re!==ee).getOr(!1)){const ee=a.providers.translate(g.get().getOr(""));To.setComponents(W,a.providers.tooltips.getComponents({tooltipText:ee}))}}}))).toArray(),Vt(z,[zd(n,d),Ah(n,d)]),Vt(F,[Eo((J,W)=>{n.listRole!=="listbox"&&G4(J)})]),Vt("update-dropdown-width-variable",[Te(Hg(),(J,W)=>qc.close(J))]),Vt("menubutton-update-display-text",[Te(Gl,(J,W)=>{h.bind(ee=>ee.getOpt(J)).each(ee=>{jt.set(ee,[Do(a.providers.translate(W.event.text))])})}),Te(A1,(J,W)=>{C.bind(ee=>ee.getOpt(J)).each(ee=>{jt.set(ee,[Bh(W.event.icon,a.providers.icons)])})}),Te(q4,(J,W)=>{const ee=a.providers.translate(W.event.text);Nt(J.element,"aria-label",ee),g.set(T.some(W.event.text))})])]),eventOrder:ro(cR,{[Wa()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Al()]:["toolbar-button-events",To.name(),z,F]}),sandboxBehaviours:Ve([wt.config({mode:"special",onLeft:S,onRight:S}),Vt("dropdown-sandbox-events",[Te(lP,(J,W)=>{fW(J),W.stop()}),Te(uP,(J,W)=>{gW(J,W),W.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...zC(!1,n.columns,n.presets),fakeFocus:n.searchable,...n.listRole==="listbox"?{}:{onHighlightItem:Z8,onCollapseMenu:(J,W,ee)=>{$n.getHighlighted(ee).each(re=>{Z8(J,ee,re)})},onDehighlightItem:pW}}},getAnchorOverrides:()=>({maxHeightFunction:(J,W)=>{K2()(J,W-10)}}),fetch:J=>Wo.nu(gn(n.fetch,J))})).asSpec()},K4=n=>on(n),k$=n=>n.type==="separator",_$=n=>Mn(n,"getSubmenuItems"),VW={type:"separator"},UW=(n,s)=>{const a=po(n,(i,d)=>K4(d)?d===""?i:d==="|"?i.length>0&&!k$(i[i.length-1])?i.concat([VW]):i:Mn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&k$(a[a.length-1])&&a.pop(),a},XY=(n,s)=>{const a=n.getSubmenuItems(),i=A$(a,s),d=ro(i.menus,{[n.value]:i.items}),g=ro(i.expansions,{[n.value]:n.value});return{item:n,menus:d,expansions:g}},ZW=n=>{const s=bt(n,"value").getOrThunk(()=>st("generated-menu-item"));return ro({value:s},n)},A$=(n,s)=>{const a=UW(on(n)?n.split(" "):n,s);return ts(a,(i,d)=>{if(_$(d)){const g=ZW(d),h=XY(g,s);return{menus:ro(i.menus,h.menus),items:[h.item,...i.items],expansions:ro(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},dR=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),WW=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),rg=(n,s,a,i)=>{const d=st("primary-menu"),g=A$(n,a.shared.providers.menuItems());if(g.items.length===0)return T.none();const h=dR(i),C=I4(d,g.items,s,a,i.isHorizontalMenu,h),S=WW(i),x=ns(g.menus,(D,P)=>I4(P,D,s,a,!1,S)),_=ro(x,gm(d,C));return T.from(s1.tieredData(d,_,g.expansions))},iS=n=>!Mn(n,"items"),mR="data-value",Y4=(n,s,a,i,d)=>De(a,g=>iS(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{it.setValue(n,g.value),xt(n,Tc,{name:s}),Ut.focus(n)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>Y4(n,s,g.items,i,d)}),fR=(n,s)=>ta(n,a=>iS(a)?fa(a.value===s,a):fR(a.items,s)),O$=(n,s,a)=>{const i=js(n.items,x=>!iS(x)),d=s.shared.providers,g=a.bind(x=>fR(n.items,x)).orThunk(()=>Qn(n.items).filter(iS)),h=n.label.map(x=>og(x,d)),C=pn.parts.field({dom:{},factory:{sketch:x=>uR({context:n.context,uid:x.uid,text:g.map(_=>_.text),icon:T.none(),tooltip:T.none(),role:fa(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:n.label,fetch:(_,D)=>{const P=Y4(_,n.name,n.items,it.getValue(_),i);D(rg(P,zu.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:T.none()}))},onSetup:ie(Y),getApi:ie({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[So.config({}),_1(g.map(_=>_.value),_=>tr(_.element,mR),(_,D)=>{fR(n.items,D).each(P=>{Nt(_.element,mR,P.value),xt(_,Gl,{text:P.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return pn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rt([h.toArray(),[S]]),fieldBehaviours:Ve([ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:x=>{pn.getField(x).each(ft.disable)},onEnabled:x=>{pn.getField(x).each(ft.enable)}})])})},gv=(n,s)=>({dom:{tag:"div",classes:n.classes},components:De(n.items,s.shared.interpreter)}),D$=(n,s,a)=>{const i=De(n.items,S=>({text:s.translate(S.text),value:S.value})),d=n.label.map(S=>og(S,s)),g=pn.parts.field({dom:{},...a.map(S=>({data:S})).getOr({}),selectAttributes:{size:n.size},options:i,factory:pA,selectBehaviours:Ve([ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),So.config({}),Vt("selectbox-change",[Te(bf(),(S,x)=>{xt(S,Tc,{name:n.name})})])])}),h=n.size>1?T.none():T.some(tl("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:Rt([[g],h.toArray()])};return pn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rt([d.toArray(),[C]]),fieldBehaviours:Ve([ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:S=>{pn.getField(S).each(ft.disable)},onEnabled:S=>{pn.getField(S).each(ft.enable)}}),Es(()=>s.checkUiComponentContext(n.context))])})},R$=n=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=n.value.toFixed(a(n.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+n.unit},X4=n=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(n);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Bt.value({value:i,unit:d})}else return Bt.error(n)},M$=(n,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Mn(a,d);return n.unit===s?T.some(n.value):i(n.unit)&&i(s)?a[n.unit]===a[s]?T.some(n.value):T.some(n.value/a[n.unit]*a[s]):T.none()},hv=n=>T.none(),jW=(n,s)=>a=>M$(a,s).map(i=>({value:i*n,unit:s})),B$=(n,s)=>{const a=X4(n).toOptional(),i=X4(s).toOptional();return lc(a,i,(d,g)=>M$(d,g.unit).map(h=>g.value/h).map(h=>jW(h,g.unit)).getOr(hv)).getOr(hv)},N$=(n,s)=>{let a=hv;const i=st("ratio-event"),d=G=>tl(G,{tag:"span",classes:["tox-icon","tox-lock-icon__"+G]},s.icons),g=()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,h=Es(()=>s.checkUiComponentContext(n.context)),C=n.label.getOr("Constrain proportions"),S=s.translate(C),x=xs.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":S,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:Ve([ft.config({disabled:g}),h,So.config({}),To.config(s.tooltips.getConfig({tooltipText:S}))])}),_=G=>({dom:{tag:"div",classes:["tox-form__group"]},components:G}),D=G=>pn.parts.field({factory:Fm,inputClasses:["tox-textfield"],inputBehaviours:Ve([ft.config({disabled:g}),h,So.config({}),Vt("size-input-events",[Te(zi(),(J,W)=>{xt(J,i,{isField1:G})}),Te(bf(),(J,W)=>{xt(J,Tc,{name:n.name})})])]),selectOnFocus:!1}),P=G=>({dom:{tag:"label",classes:["tox-label"]},components:[Do(s.translate(G))]}),F=xs.parts.field1(_([pn.parts.label(P("Width")),D(!0)])),z=xs.parts.field2(_([pn.parts.label(P("Height")),D(!1)]));return xs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[F,z,_([P(hg),x])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(G,J,W)=>{X4(it.getValue(G)).each(ee=>{a(ee).each(re=>{it.setValue(J,R$(re))})})},coupledFieldBehaviours:Ve([ft.config({disabled:g,onDisabled:G=>{xs.getField1(G).bind(pn.getField).each(ft.disable),xs.getField2(G).bind(pn.getField).each(ft.disable),xs.getLock(G).each(ft.disable)},onEnabled:G=>{xs.getField1(G).bind(pn.getField).each(ft.enable),xs.getField2(G).bind(pn.getField).each(ft.enable),xs.getLock(G).each(ft.enable)}}),Es(()=>s.checkUiComponentContext("mode:design")),Vt("size-input-events2",[Te(i,(G,J)=>{const W=J.event.isField1,ee=W?xs.getField1(G):xs.getField2(G),re=W?xs.getField2(G):xs.getField1(G),fe=ee.map(it.getValue).getOr(""),be=re.map(it.getValue).getOr("");a=B$(fe,be)})])])})},GW=(n,s,a)=>{const i=Fu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Do(s.translate(n.label))]}),d=Fu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Fu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Fu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n.min,maxX:n.max,getInitialValue:ie(a.getOrThunk(()=>(Math.abs(n.max)-Math.abs(n.min))/2))},components:[i,d,g],sliderBehaviours:Ve([Uu.self(),Ut.config({})]),onChoose:(h,C,S)=>{xt(h,Tc,{name:n.name,value:S})},onChange:(h,C,S)=>{xt(h,Tc,{name:n.name,value:S})}})},qW=(n,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:De(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:De(C,d)}),h=C=>({dom:{tag:"tbody"},components:De(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(n.header),h(n.cells)],behaviours:Ve([So.config({}),Ut.config({})])}},P$=(n,s)=>{const a=n.label.map(z=>og(z,s)),i=[ft.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable}),Es(()=>s.checkUiComponentContext(n.context)),wt.config({mode:"execution",useEnter:n.multiline!==!0,useControlEnter:n.multiline===!0,execute:z=>(fn(z,rS),T.some(!0))}),Vt("textfield-change",[Te(_l(),(z,G)=>{xt(z,Tc,{name:n.name})}),Te(p0(),(z,G)=>{xt(z,Tc,{name:n.name})})]),So.config({})],d=n.validation.map(z=>Xi.config({getRoot:G=>iu(G.element),invalidClass:"tox-invalid",validator:{validate:G=>{const J=it.getValue(G),W=z.validator(J);return Wo.pure(W===!0?Bt.value(J):Bt.error(W))},validateOnLoad:z.validateOnLoad}})).toArray(),g=n.placeholder.fold(ie({}),z=>({placeholder:s.translate(z)})),h=n.inputMode.fold(ie({}),z=>({inputmode:z})),S={...n.spellcheck.fold(ie({}),z=>({spellcheck:z})),...g,...h,"data-mce-name":n.name},x=pn.parts.field({tag:n.multiline===!0?"textarea":"input",...n.data.map(z=>({data:z})).getOr({}),inputAttributes:S,inputClasses:[n.classname],inputBehaviours:Ve(Rt([i,d])),selectOnFocus:!1,factory:Fm}),_=n.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,P=(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),F=[ft.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:z=>{pn.getField(z).each(ft.disable)},onEnabled:z=>{pn.getField(z).each(ft.enable)}}),Es(()=>s.checkUiComponentContext(n.context))];return mv(a,_,P,F)},$$=(n,s,a)=>P$({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:!n.enabled,classname:"tox-textfield",validation:T.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:T.none()},s),KW=(n,s,a)=>P$({name:n.name,multiline:!0,label:n.label,inputMode:T.none(),placeholder:n.placeholder,flex:!0,disabled:!n.enabled,classname:"tox-textarea",validation:T.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:n.spellcheck},s),I$=n=>({isEnabled:()=>!ft.isDisabled(n),setEnabled:s=>ft.set(n,!s),setActive:s=>{const a=n.element;s?(mo(a,"tox-tbtn--enabled"),Nt(a,"aria-pressed",!0)):(Yo(a,"tox-tbtn--enabled"),No(a,"aria-pressed"))},isActive:()=>Os(n.element,"tox-tbtn--enabled"),setTooltip:s=>{xt(n,q4,{text:s})},setText:s=>{xt(n,Gl,{text:s})},setIcon:s=>xt(n,A1,{icon:s})}),lS=(n,s,a,i,d=!0,g)=>{const h=n.buttonType==="bordered"?["bordered"]:[];return uR({text:n.text,icon:n.icon,tooltip:n.tooltip,ariaLabel:n.tooltip,searchable:n.search.isSome(),role:i,fetch:(C,S)=>{const x={pattern:n.search.isSome()?sS(C):""};n.fetch(_=>{S(rg(_,zu.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:n.search}))},x,I$(C))},onSetup:n.onSetup,getApi:C=>I$(C),columns:1,presets:"normal",classes:h,dropdownBehaviours:[...d?[So.config({})]:[]],context:n.context},s,a.shared,g)},YW=(n,s,a)=>{const i=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(S=>{s().getOpt(S).each(x=>{ur(x.element),xt(x,Vu,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(De(n,h=>{const C=h.text.fold(()=>({}),S=>({text:S}));return{type:h.type,active:!1,...C,context:h.context,onAction:i(h),onSetup:d(h)}}))}},L$=n=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":n}},components:[Do(n)]}),F$=(n,s,a)=>{n.customStateIcon.each(i=>s.push(z$(i,a.shared.providers.icons,n.customStateIconTooltip.fold(()=>[],d=>[To.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},H$=st("leaf-label-event-id"),gR=({leaf:n,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=n.menu.map(S=>lS(S,"tox-mbtn",g,T.none(),a)),C=[L$(n.title)];return F$(n,C,g),h.each(S=>C.push(S)),ar.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(n.id),S.getSystem().broadcastOn([`update-active-item-${i}`],{value:n.id})},eventOrder:{[rr()]:[H$,"keying"]},buttonBehaviours:Ve([...a?[So.config({})]:[],Sn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Oa.config({channels:{[`update-active-item-${i}`]:{onReceive:(S,x)=>{(x.value===n.id?Sn.on:Sn.off)(S)}}}}),Vt(H$,[Eo((S,x)=>{d.each(_=>{(_===n.id?Sn.on:Sn.off)(S)})}),Te(rr(),(S,x)=>{const _=x.event.raw.code==="ArrowLeft",D=x.event.raw.code==="ArrowRight";_?($i(S.element,".tox-tree--directory").each(P=>{S.getSystem().getByDom(P).each(F=>{rm(P,".tox-tree--directory__label").each(z=>{F.getSystem().getByDom(z).each(Ut.focus)})})}),x.stop()):D&&x.stop()})])])})},z$=(n,s,a,i,d)=>tl(n,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:d},s),XW=(n,s)=>z$(n,s,[]),V$=st("directory-label-event-id"),U$=({directory:n,visible:s,noChildren:a,backstage:i})=>{const d=n.menu.map(C=>lS(C,"tox-mbtn",i,T.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[XW("chevron-right",i.shared.providers.icons)]},L$(n.title)];F$(n,g,i),d.each(C=>{g.push(C)});const h=C=>{$i(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(x=>{const _=!Sn.isOn(x);Sn.toggle(x),xt(C,"expand-tree-node",{expanded:_,node:n.id})})})};return ar.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[rr()]:[V$,"keying"]},buttonBehaviours:Ve([...s?[So.config({})]:[],Vt(V$,[Te(rr(),(C,S)=>{const x=S.event.raw.code==="ArrowRight",_=S.event.raw.code==="ArrowLeft";x&&a&&S.stop(),(x||_)&&$i(C.element,".tox-tree--directory").each(D=>{C.getSystem().getByDom(D).each(P=>{!Sn.isOn(P)&&x||Sn.isOn(P)&&_?(h(C),S.stop()):_&&!Sn.isOn(P)&&($i(P.element,".tox-tree--directory").each(F=>{rm(F,".tox-tree--directory__label").each(z=>{P.getSystem().getByDom(z).each(Ut.focus)})}),S.stop())})})})])])})},JW=({children:n,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:n.map(C=>C.type==="leaf"?gR({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):hR({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:Ve([Ka.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),jt.config({})])}),QW=st("directory-event-id"),hR=({directory:n,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=n,S=pt(g),x=D=>C.map(P=>P.type==="leaf"?gR({leaf:P,selectedId:h,onLeafAction:s,visible:D,treeId:i,backstage:d}):hR({directory:P,expandedIds:S.get(),selectedId:h,onLeafAction:s,labelTabstopping:D,treeId:i,backstage:d})),_=g.includes(n.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[U$({directory:n,visible:a,noChildren:n.children.length===0,backstage:d}),JW({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:_,treeId:i,backstage:d})],behaviours:Ve([Vt(QW,[Eo((D,P)=>{Sn.set(D,_)}),Te("expand-tree-node",(D,P)=>{const{expanded:F,node:z}=P.event;S.set(F?[...S.get(),z]:S.get().filter(G=>G!==z))})]),Sn.config({...n.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(D,P)=>{const F=D.components()[1],z=x(P);P?Ka.grow(F):Ka.shrink(F),jt.set(F,z)}})])}},ej=st("tree-event-id"),tj=(n,s)=>{const a=n.onLeafAction.getOr(Y),i=n.onToggleExpand.getOr(Y),d=n.defaultExpandedIds,g=pt(d),h=pt(n.defaultSelectedId),C=st("tree-id"),S=(x,_)=>n.items.map(D=>D.type==="leaf"?gR({leaf:D,selectedId:x,onLeafAction:a,visible:!0,treeId:C,backstage:s}):hR({directory:D,selectedId:x,onLeafAction:a,expandedIds:_,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(h.get(),g.get()),behaviours:Ve([wt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Vt(ej,[Te("expand-tree-node",(x,_)=>{const{expanded:D,node:P}=_.event;g.set(D?[...g.get(),P]:g.get().filter(F=>F!==P)),i(g.get(),{expanded:D,node:P})})]),Oa.config({channels:{[`update-active-item-${C}`]:{onReceive:(x,_)=>{h.set(T.some(_.value)),jt.set(x,S(T.some(_.value),g.get()))}}}}),jt.config({})])}},J4=(n,s,a=[],i,d,g,h)=>{const C=s.fold(()=>({}),_=>({action:_})),S={buttonBehaviours:Ve([Hd.item(()=>!n.enabled||h.checkUiComponentContext(n.context).shouldDisable),Es(()=>h.checkUiComponentContext(n.context)),So.config({}),...g.map(_=>To.config(h.tooltips.getConfig({tooltipText:h.translate(_)}))).toArray(),Vt("button press",[X2("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},x=ro(S,{dom:i});return ro(x,{components:d})},Z$=(n,s,a,i=[],d)=>{const g=n.tooltip.map(x=>({"aria-label":a.translate(x)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=n.icon.map(x=>iR(x,a.icons)),S=Vm([C]);return J4(n,s,i,h,S,n.tooltip,a)},pR=n=>{switch(n){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},bR=(n,s,a,i=[],d=[])=>{const g=a.translate(n.text),h=n.icon.map(F=>iR(F,a.icons)),C=[h.getOrThunk(()=>Do(g))],S=n.buttonType.getOr(!n.primary&&!n.borderless?"secondary":"primary"),D={tag:"button",classes:[...pR(S),...h.isSome()?["tox-button--icon"]:[],...n.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":n.text}},P=n.icon.map(ie(g));return J4(n,s,i,D,C,P,a)},W$=(n,s,a,i=[],d=[])=>{const g=bR(n,T.some(s),a,i,d);return ar.sketch(g)},vR=(n,s)=>a=>{s==="custom"?xt(a,Vu,{name:n,value:{}}):s==="submit"?fn(a,rS):s==="cancel"?fn(a,sg):console.error("Unknown button type: ",s)},j$=(n,s)=>s==="menu",yR=(n,s)=>s==="custom"||s==="cancel"||s==="submit",nj=(n,s)=>s==="togglebutton",oj=(n,s,a)=>{const i=n.icon.map(W=>Bh(W,s.icons)).map(Ln),d=W=>{xt(W,Vu,{name:n.name,value:{setIcon:ee=>{i.map(re=>re.getOpt(W).each(fe=>{jt.set(fe,[Bh(ee,s.icons)])}))}}})},g=n.buttonType.getOr(n.primary?"primary":"secondary"),h={...n,name:n.name??"",tooltip:n.tooltip,enabled:n.enabled??!1},C=h.tooltip.or(n.text).map(W=>({"aria-label":s.translate(W)})).getOr({}),S=pR(g??"secondary"),x=n.icon.isSome()&&n.text.isSome(),_={tag:"button",classes:[...S.concat(n.icon.isSome()?["tox-button--icon"]:[]),...n.active?["tox-button--enabled"]:[],...x?["tox-button--icon-and-text"]:[]],attributes:{...C,...Jn(a)?{"data-mce-name":a}:{}}},D=[],P=s.translate(n.text.getOr("")),F=Do(P),G=[...Vm([i.map(W=>W.asSpec())]),...n.text.isSome()?[F]:[]],J=J4(h,T.some(d),D,_,G,n.tooltip,s);return ar.sketch(J)},uS=(n,s,a)=>{if(j$(n,s)){const i=()=>h,d=n,g={...n,buttonType:"default",type:"menubutton",search:T.none(),onSetup:C=>(C.setEnabled(n.enabled),Y),fetch:YW(d.items,i,a)},h=Ln(lS(g,"tox-tbtn",a,T.none(),!0,n.text.or(n.tooltip).getOrUndefined()));return h.asSpec()}else if(yR(n,s)){const i=vR(n.name,s),d={...n,context:s==="cancel"?"any":n.context,borderless:!1};return W$(d,i,a.shared.providers,[])}else{if(nj(n,s))return oj(n,a.shared.providers,n.text.or(n.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},sj=(n,s)=>{const a=vR(n.name,"custom");return wW(T.none(),pn.parts.field({factory:ar,...bR(n,T.some(a),s,[H4(""),Uu.self()])}))},G$={type:"separator"},rj=n=>({type:"menuitem",value:n.url,text:n.title,meta:{attach:n.attach},onAction:Y}),pv=(n,s)=>({type:"menuitem",value:s,text:n,meta:{attach:void 0},onAction:Y}),aj=n=>De(n,rj),q$=(n,s)=>no(s,a=>a.type===n),K$=(n,s)=>aj(q$(n,s)),cj=n=>K$("header",n.targets),Ud=n=>K$("anchor",n.targets),Q4=n=>T.from(n.anchorTop).map(s=>pv("<top>",s)).toArray(),eT=n=>T.from(n.anchorBottom).map(s=>pv("<bottom>",s)).toArray(),ij=n=>De(n,s=>pv(s,s)),CR=n=>po(n,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(G$,a),[]),SR=(n,s)=>{const a=n.toLowerCase();return no(s,i=>{const d=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,g=i.value??"";return jo(d.toLowerCase(),a)||jo(g.toLowerCase(),a)})},wR=(n,s,a)=>{var h;const i=it.getValue(s),d=((h=i==null?void 0:i.meta)==null?void 0:h.text)??i.value;return a.getLinkInformation().fold(()=>[],C=>{const S=SR(d,ij(a.getHistory(n)));return n==="file"?CR([S,SR(d,cj(C)),SR(d,Rt([Q4(C),Ud(C),eT(C)]))]):S})},xR=st("aria-invalid"),ER=(n,s,a,i)=>{const d=s.shared.providers,g=ee=>{const re=it.getValue(ee);a.addToHistory(re.value,n.filetype)},h={...i.map(ee=>({initialData:ee})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:ee=>{const re=wR(n.filetype,ee,a),fe=rg(re,zu.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:T.none()});return Wo.pure(fe)},getHotspot:ee=>z.getOpt(ee),onSetValue:(ee,re)=>{ee.hasConfigured(Xi)&&Xi.run(ee).get(Y)},typeaheadBehaviours:Ve([...a.getValidationHandler().map(ee=>Xi.config({getRoot:re=>iu(re.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(re,fe)=>{_.getOpt(re).each(be=>{Nt(be.element,"title",d.translate(fe))})}},validator:{validate:re=>{const fe=it.getValue(re);return jd.nu(be=>{ee({type:n.filetype,url:fe.value},Ke=>{if(Ke.status==="invalid"){Nt(re.element,"aria-errormessage",xR);const Re=Bt.error(Ke.message);be(Re)}else{No(re.element,"aria-errormessage");const Re=Bt.value(Ke.message);be(Re)}})})},validateOnLoad:!1}})).toArray(),ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable}),So.config({}),Vt("urlinput-events",[Te(_l(),ee=>{const re=Fc(ee.element),fe=re.trim();fe!==re&&cm(ee.element,fe),n.filetype==="file"&&xt(ee,Tc,{name:n.name})}),Te(bf(),ee=>{xt(ee,Tc,{name:n.name}),g(ee)}),Te(p0(),ee=>{xt(ee,Tc,{name:n.name}),g(ee)})])]),eventOrder:{[_l()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ee=>ee.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:zC(!1,1,"normal")},onExecute:(ee,re,fe)=>{xt(re,rS,{})},onItemExecute:(ee,re,fe,be)=>{g(ee),xt(ee,Tc,{name:n.name})}},C=pn.parts.field({...h,factory:jA}),S=n.label.map(ee=>og(ee,d)),_=Ln(((ee,re,fe=ee,be=ee)=>tl(fe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ee],attributes:{title:d.translate(be),"aria-live":"polite",...re.fold(()=>({}),Ke=>({id:Ke}))}},d.icons))("invalid",T.some(xR),"warning")),D=Ln({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[_.asSpec()]}),P=a.getUrlPicker(n.filetype),F=st("browser.url.event"),z=Ln({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,D.asSpec()],behaviours:Ve([ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable})])}),G=Ln(W$({context:n.context,name:n.name,icon:T.some("browse"),text:n.picker_text.or(n.label).getOr(""),enabled:n.enabled,primary:!1,buttonType:T.none(),borderless:!0},ee=>fn(ee,F),d,[],["tox-browse-url"])),J=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Rt([[z.asSpec()],P.map(()=>G.asSpec()).toArray()])}),W=ee=>{Le.getCurrent(ee).each(re=>{const fe=it.getValue(re),be={fieldname:n.name,...fe};P.each(Ke=>{Ke(be).get(Re=>{it.setValue(re,Re),xt(ee,Tc,{name:n.name})})})})};return pn.sketch({dom:q8(),components:S.toArray().concat([J()]),fieldBehaviours:Ve([ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:ee=>{pn.getField(ee).each(ft.disable),G.getOpt(ee).each(ft.disable)},onEnabled:ee=>{pn.getField(ee).each(ft.enable),G.getOpt(ee).each(ft.enable)}}),Es(()=>d.checkUiComponentContext(n.context)),Vt("url-input-events",[Te(F,W)])])})},lj=(n,s)=>{const a=EV(n.icon,s.icons);return Ad.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:n.url?void 0:a},components:n.url?[ar.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(n.iconTooltip)}},action:i=>xt(i,Vu,{name:"alert-banner",value:n.url}),buttonBehaviours:Ve([yO()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(n.text)}}]})},uj=(n,s,a)=>{const i=S=>(S.element.dom.click(),T.some(!0)),d=pn.parts.field({factory:{sketch:an},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ve([Uu.self(),ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:S=>{iu(S.element).each(x=>mo(x,"tox-checkbox--disabled"))},onEnabled:S=>{iu(S.element).each(x=>Yo(x,"tox-checkbox--disabled"))}}),So.config({}),Ut.config({}),n$(a,n2,mu),wt.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Vt("checkbox-events",[Te(bf(),(S,x)=>{xt(S,Tc,{name:n.name})})])])}),g=pn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Do(s.translate(n.label))],behaviours:Ve([Dd.config({})])}),h=S=>tl(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=Ln({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return pn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Ve([ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),Es(()=>s.checkUiComponentContext(n.context))])})},Y$=(n,s)=>{const a=["tox-form__group",...n.stretched?["tox-form__group--stretched"]:[]],i=Vt("htmlpanel",[Eo(d=>{n.onInit(d.element.dom)})]);return n.presets==="presentation"?Ad.sketch({dom:{tag:"div",classes:a,innerHtml:n.html},containerBehaviours:Ve([To.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{oo(d.element,"[data-mce-tooltip]:hover").orThunk(()=>zs(d.element)).each(g=>{xr(g,"data-mce-tooltip").each(h=>{To.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:oo(d.element,"[data-mce-tooltip]:hover").orThunk(()=>zs(d.element).filter(g=>xr(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:ie([Ms,Fo,Ws,Dr,Rs,dr]),onRtl:ie([Ms,Fo,Ws,Dr,Rs,dr])},bubble:Cc(0,-2,{})})}),i])}):Ad.sketch({dom:{tag:"div",classes:a,innerHtml:n.html,attributes:{role:"document"}},containerBehaviours:Ve([So.config({}),Ut.config({}),i])})},ir=n=>(s,a,i,d,g)=>bt(a,"name").fold(()=>n(a,d,T.none(),g),h=>s.field(h,n(a,d,bt(i,h),g))),dj=n=>(s,a,i,d,g)=>{const h=ro(a,{source:"dynamic"});return ir(n)(s,h,i,d,g)},TR={bar:ir((n,s)=>j8(n,s.shared)),collection:ir((n,s,a)=>xW(n,s.shared.providers,a)),alertbanner:ir((n,s)=>lj(n,s.shared.providers)),input:ir((n,s,a)=>$$(n,s.shared.providers,a)),textarea:ir((n,s,a)=>KW(n,s.shared.providers,a)),label:ir((n,s,a,i)=>HW(n,s.shared,i)),iframe:dj((n,s,a)=>cS(n,s.shared.providers,a)),button:ir((n,s)=>sj(n,s.shared.providers)),checkbox:ir((n,s,a)=>uj(n,s.shared.providers,a)),colorinput:ir((n,s,a)=>TW(n,s.shared,s.colorinput,a)),colorpicker:ir((n,s,a)=>U4(n,s.shared.providers,a)),dropzone:ir((n,s,a)=>NW(n,s.shared.providers,a)),grid:ir((n,s)=>PW(n,s.shared)),listbox:ir((n,s,a)=>O$(n,s,a)),selectbox:ir((n,s,a)=>D$(n,s.shared.providers,a)),sizeinput:ir((n,s)=>N$(n,s.shared.providers)),slider:ir((n,s,a)=>GW(n,s.shared.providers,a)),urlinput:ir((n,s,a)=>ER(n,s,s.urlinput,a)),customeditor:ir(MW),htmlpanel:ir((n,s)=>Y$(n,s.shared.providers)),imagepreview:ir((n,s,a)=>FW(n,a)),table:ir((n,s)=>qW(n,s.shared.providers)),tree:ir((n,s)=>tj(n,s)),panel:ir((n,s)=>gv(n,s))},mj={field:(n,s)=>s,record:ie([])},X$=(n,s,a,i,d)=>{const g=ro(i,{shared:{interpreter:h=>tT(n,h,a,g,d)}});return tT(n,s,a,g,d)},tT=(n,s,a,i,d)=>bt(TR,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(n,s,a,i,d)),kR=(n,s,a,i)=>tT(mj,n,s,a,i),dS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},fj=(n,s,a)=>{const d={maxHeightFunction:Df()},g=()=>({type:"node",root:vl(Hs(n())),node:T.from(n()),bubble:Cc(12,12,dS),layouts:{onRtl:()=>[Ea],onLtr:()=>[Of]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Cc(-12,12,dS),layouts:{onRtl:()=>[Ws,Rs,Ms],onLtr:()=>[Rs,Ws,Ms]},overrides:d});return()=>a()?g():h()},gj=(n,s,a,i)=>{const g={maxHeightFunction:Df()},h=()=>({type:"node",root:vl(Hs(s())),node:T.from(s()),bubble:Cc(12,12,dS),layouts:{onRtl:()=>[Wr],onLtr:()=>[Wr]},overrides:g}),C=()=>n?{type:"node",root:vl(Hs(s())),node:T.from(s()),bubble:Cc(0,-sa(s()),dS),layouts:{onRtl:()=>[Fo],onLtr:()=>[Fo]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:Cc(0,0,dS),layouts:{onRtl:()=>[Fo],onLtr:()=>[Fo]},overrides:g};return()=>i()?h():C()},hj=(n,s,a)=>{const i=()=>({type:"node",root:vl(Hs(n())),node:T.from(n()),layouts:{onRtl:()=>[Wr],onLtr:()=>[Wr]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Ms],onLtr:()=>[Ms]}});return()=>a()?i():d()},J$=(n,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=n.selection.getRng(),i=n.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:We.fromDom(d),lastCell:We.fromDom(g)};return T.some(h)}return T.some(Eg.range(We.fromDom(a.startContainer),a.startOffset,We.fromDom(a.endContainer),a.endOffset))}}),pj=n=>s=>({type:"node",root:n(),node:s}),bj=(n,s,a,i)=>{const d=Xb(n),g=()=>We.fromDom(n.getBody()),h=()=>We.fromDom(n.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:fj(h,s,C),inlineBottomDialog:gj(n.inline,h,a,C),banner:hj(h,s,C),cursor:J$(n,g),node:pj(g)}},vj=n=>(s,a)=>{WD(n)(s,a)},yj=n=>()=>FD(n),Cj=n=>s=>M4(n,s),Sj=n=>s=>k8(n,s),wj=n=>({colorPicker:vj(n),hasCustomColors:yj(n),getColors:Cj(n),getColorCols:Sj(n)}),xj=n=>()=>AN(n),Ej=n=>({isDraggableModal:xj(n)}),Tj=n=>{const s=pt(t4(n)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},kj=n=>hn(n,"items"),Q$=n=>hn(n,"format"),_R=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],e7=n=>Mn(n,"items"),nT=n=>Mn(n,"block"),t7=n=>Mn(n,"inline"),_j=n=>Mn(n,"selector"),n7=n=>po(n,(s,a)=>{if(e7(a)){const i=n7(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(t7(a)||nT(a)||_j(a)){const d=`custom-${on(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),Aj=(n,s)=>{const a=n7(s),i=d=>{et(d,g=>{n.formatter.has(g.name)||n.formatter.register(g.name,g.format)})};return n.formatter?i(a.customFormats):n.on("init",()=>{i(a.customFormats)}),a.formats},o7=n=>pN(n).map(s=>{const a=Aj(n,s);return bN(n)?_R.concat(a):a}).getOr(_R),Oj=n=>{const s=Vn(n);return s.length===1&&to(s,"title")},s7=(n,s,a)=>({...n,type:"formatter",isSelected:s(n.format),getStylePreview:a(n.format)}),r7=(n,s,a,i)=>{const d=S=>s7(S,a,i),g=S=>{const x=C(S.items);return{...S,type:"submenu",getStyleItems:ie(x)}},h=S=>{const x=on(S.name)?S.name:st(S.title),_=`custom-${x}`,D={...S,type:"formatter",format:_,isSelected:a(_),getStylePreview:i(_)};return n.formatter.register(x,D),D},C=S=>De(S,x=>kj(x)?g(x):Q$(x)?d(x):Oj(x)?{...x,type:"separator"}:h(x));return C(s)},a7=n=>{const s=C=>()=>n.formatter.match(C),a=C=>()=>{const S=n.formatter.get(C);return S!==void 0?T.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(C))}):T.none()},i=pt([]),d=pt([]),g=pt(!1);return n.on("PreInit",C=>{const S=o7(n),x=r7(n,S,s,a);i.set(x)}),n.on("addStyleModifications",C=>{const S=r7(n,C.items,s,a);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),S=d.get();return C.concat(S)}}},c7=n=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Do(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:ie(300),exclusive:!0,lazySink:n,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(S,x)=>{i++,C.onShow&&C.onShow(S,x)},onHide:(S,x)=>{i--,C.onHide&&C.onHide(S,x)},onSetup:C.onSetup}),getComponents:g}},Dj=n=>Jn(n)&&n.nodeType===1,i7=Wm.trim,l7=n=>s=>!!(Dj(s)&&(s.contentEditable===n||s.getAttribute("data-mce-contenteditable")===n)),Rj=l7("true"),Mj=l7("false"),Nh=(n,s,a,i,d)=>({type:n,title:s,url:a,level:i,attach:d}),u7=n=>{let s=n;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return Rj(s)}return!1},mS=(n,s)=>De(kr(We.fromDom(s),n),a=>a.dom),fS=n=>n.innerText||n.textContent,d7=n=>n.id?n.id:st("h"),m7=n=>n&&n.nodeName==="A"&&(n.id||n.name)!==void 0,f7=n=>m7(n)&&g7(n),Bj=n=>n&&/^(H[1-6])$/.test(n.nodeName),g7=n=>u7(n)&&!Mj(n),Nj=n=>Bj(n)&&g7(n),Pj=n=>Bj(n)?parseInt(n.nodeName.substr(1),10):0,$j=n=>{const s=d7(n),a=()=>{n.id=s};return Nh("header",fS(n)??"","#"+s,Pj(n),a)},Ij=n=>{const s=n.id||n.name,a=fS(n);return Nh("anchor",a||"#"+s,"#"+s,0,Y)},Lj=n=>De(no(n,Nj),$j),bv=n=>De(no(n,f7),Ij),gS=n=>mS("h1,h2,h3,h4,h5,h6,a:not([href])",n),AR=n=>i7(n.title).length>0,Fj={find:n=>{const s=gS(n);return no(Lj(s).concat(bv(s)),AR)}},vv="tinymce-url-history",h7=5,yv=n=>on(n)&&/^https?/.test(n),p7=n=>Qr(n)&&n.length<=h7&&ks(n,yv),b7=n=>bo(n)&&rc(n,s=>!p7(s)).isNone(),v7=()=>{const n=T1.getItem(vv);if(n===null)return{};let s;try{s=JSON.parse(n)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+vv+" was not valid JSON",a),{};throw a}return b7(s)?s:(console.log("Local storage "+vv+" was not valid format",s),{})},Hj=n=>{if(!b7(n))throw new Error(`Bad format for history:
`+JSON.stringify(n));T1.setItem(vv,JSON.stringify(n))},zj=n=>{const s=v7();return bt(s,n).getOr([])},Vj=(n,s)=>{if(!yv(n))return;const a=v7(),i=bt(a,s).getOr([]),d=no(i,g=>g!==n);a[s]=[n].concat(d).slice(0,h7),Hj(a)},y7=n=>!!n,C7=n=>ns(Wm.makeMap(n,/[, ]/),y7),oT=n=>T.from(TN(n)),OR=n=>{const s=T.from(eO(n)).filter(y7).map(C7);return oT(n).fold(In,a=>s.fold(Ot,i=>Vn(i).length>0?i:!1))},Uj=(n,s)=>{const a=OR(n);return br(a)?a?oT(n):T.none():a[s]?oT(n):T.none()},sT=(n,s)=>Uj(n,s).map(a=>i=>Wo.nu(d=>{const g=(C,S)=>{if(!on(C))throw new Error("Expected value to be string");if(S!==void 0&&!bo(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},h={filetype:s,fieldname:i.fieldname,...T.from(i.meta).getOr({})};a.call(n,g,i.value,h)})),hS=n=>T.from(n).filter(on).getOrUndefined(),S7=n=>tO(n)?T.some({targets:Fj.find(n.getBody()),anchorTop:hS(_N(n)),anchorBottom:hS(nO(n))}):T.none(),Zj=n=>T.from(kN(n)),Wj=n=>({getHistory:zj,addToHistory:Vj,getLinkInformation:()=>S7(n),getValidationHandler:()=>Zj(n),getUrlPicker:s=>sT(n,s)}),jj=(n,s,a,i)=>{const d=pt(!1),g=Tj(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Da.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:c7(n.dialog),checkUiComponentContext:W=>{if(YE(s))return{contextType:"disabled",shouldDisable:!0};const[ee,re=""]=W.split(":"),fe=s.ui.registry.getAll().contexts,be=bt(fe,ee).fold(()=>bt(fe,"mode").map(Ke=>Ke("design")).getOr(!1),Ke=>re.charAt(0)==="!"?!Ke(re.slice(1)):Ke(re));return{contextType:ee,shouldDisable:!be}}},C=Wj(s),S=a7(s),x=wj(s),_=Ej(s),D=()=>d.get(),P=W=>d.set(W),F={shared:{providers:h,anchors:bj(s,a,i,g.isPositionedAtTop),header:g},urlinput:C,styles:S,colorinput:x,dialog:_,isContextMenuOpen:D,setContextMenuState:P},z=W=>T.none(),G={...F,shared:{...F.shared,interpreter:W=>kR(W,{},G,z),getSink:n.popup}},J={...F,shared:{...F.shared,interpreter:W=>kR(W,{},J,z),getSink:n.dialog}};return{popup:G,dialog:J}},DR={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},Gj=n=>{console.warn(DR[n],new Error().stack)},RR=(n,s,a)=>{const i=(Ne,Et)=>{et([s,...a],gt=>{gt.broadcastEvent(Ne,Et)})},d=(Ne,Et)=>{et([s,...a],gt=>{gt.broadcastOn([Ne],Et)})},g=Ne=>d(xu(),{target:Ne.target}),h=Ne=>{d(oh(),{closedTooltip:()=>{Ne.preventDefault()}})},C=oa(),S=Kn(C,"touchstart",g),x=Kn(C,"touchmove",Ne=>i(fw(),Ne)),_=Kn(C,"touchend",Ne=>i(k2(),Ne)),D=Kn(C,"mousedown",g),P=Kn(C,"mouseup",Ne=>{Ne.raw.button===0&&d(Cd(),{target:Ne.target})}),F=Ne=>d(xu(),{target:We.fromDom(Ne.target)}),z=Ne=>{Ne.button===0&&d(Cd(),{target:We.fromDom(Ne.target)})},G=()=>{et(n.editorManager.get(),Ne=>{n!==Ne&&Ne.dispatch("DismissPopups",{relatedTarget:n})})},J=Ne=>i(_2(),uu(Ne)),W=Ne=>{d(Bs(),{}),i(Hg(),uu(Ne))},ee=Hs(We.fromDom(n.getElement())),re=ii(ee,"scroll",Ne=>{requestAnimationFrame(()=>{const Et=n.getContainer();if(Et!=null){const sn=Kf(n,s.element).map(kt=>[kt.element,...kt.others]).getOr([]);js(sn,kt=>un(kt,Ne.target))&&(n.dispatch("ElementScroll",{target:Ne.target.dom}),i(hw(),Ne))}})}),fe=()=>d(Bs(),{}),be=Ne=>{Ne.state&&d(xu(),{target:We.fromDom(n.getContainer())})},Ke=Ne=>{d(xu(),{target:We.fromDom(Ne.relatedTarget.getContainer())})},Re=Ne=>n.dispatch("focusin",Ne),$e=Ne=>n.dispatch("focusout",Ne);n.on("PostRender",()=>{n.on("click",F),n.on("tap",F),n.on("mouseup",z),n.on("mousedown",G),n.on("ScrollWindow",J),n.on("ResizeWindow",W),n.on("ResizeEditor",fe),n.on("AfterProgressState",be),n.on("DismissPopups",Ke),n.on("CloseActiveTooltips",h),et([s,...a],Ne=>{Ne.element.dom.addEventListener("focusin",Re),Ne.element.dom.addEventListener("focusout",$e)})}),n.on("remove",()=>{n.off("click",F),n.off("tap",F),n.off("mouseup",z),n.off("mousedown",G),n.off("ScrollWindow",J),n.off("ResizeWindow",W),n.off("ResizeEditor",fe),n.off("AfterProgressState",be),n.off("DismissPopups",Ke),n.off("CloseActiveTooltips",h),et([s,...a],Ne=>{Ne.element.dom.removeEventListener("focusin",Re),Ne.element.dom.removeEventListener("focusout",$e)}),D.unbind(),S.unbind(),x.unbind(),_.unbind(),P.unbind(),re.unbind()}),n.on("detach",()=>{et([s,...a],Dx),et([s,...a],Ne=>Ne.destroy())})},qj=Y,MR=In,w7=ie([]);var Kj=Object.freeze({__proto__:null,setup:qj,isDocked:MR,getBehaviours:w7});const BR=ie(st("toolbar-height-change")),Gm={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},x7="tox-tinymce--toolbar-sticky-on",Yj="tox-tinymce--toolbar-sticky-off",eX=(n,s)=>{const a=dc(s),d=Uh(s).dom.innerHeight,g=vs(a),h=We.fromDom(n.elm),C=lm(h),S=nr(h),x=C.y,_=x+S,D=mc(s),P=nr(s),F=D.top,z=F+P,G=Math.abs(F-g.top)<2,J=Math.abs(z-(g.top+d))<2;if(G&&x<z)sm(g.left,x-P,a);else if(J&&_>F){const W=x-d+S+P;sm(g.left,W,a)}},pS=(n,s)=>to(Ho.getModes(n),s),NR=n=>{const s=i=>sa(i)+(parseInt(Po(i,"margin-top"),10)||0)+(parseInt(Po(i,"margin-bottom"),10)||0),a=n.element;iu(a).each(i=>{const d="padding-"+Ho.getModes(n)[0];if(Ho.isDocked(n)){const g=ra(i);Ft(a,"width",g+"px"),Ft(i,d,s(a)+"px")}else Cn(a,"width"),Cn(i,d)})},PR=(n,s)=>{s?(Yo(n,Gm.fadeOutClass),hu(n,[Gm.transitionClass,Gm.fadeInClass])):(Yo(n,Gm.fadeInClass),hu(n,[Gm.fadeOutClass,Gm.transitionClass]))},E7=(n,s)=>{const a=We.fromDom(n.getContainer());s?(mo(a,x7),Yo(a,Yj)):(mo(a,Yj),Yo(a,x7))},Xj=(n,s)=>{const a=dc(s);Sr(a).filter(i=>!un(s,i)).filter(i=>un(i,We.fromDom(a.dom.body))||$(n,i)).each(()=>ur(s))},Jj=(n,s)=>zs(n).orThunk(()=>s().toOptional().bind(a=>zs(a.element))),Qj=(n,s,a)=>{n.inline||(s.header.isPositionedAtTop()||n.on("ResizeEditor",()=>{a().each(Ho.reset)}),n.on("ResizeWindow ResizeEditor",()=>{a().each(NR)}),n.on("SkinLoaded",()=>{a().each(i=>{Ho.isDocked(i)?Ho.reset(i):Ho.refresh(i)})}),n.on("FullscreenStateChanged",()=>{a().each(Ho.reset)})),n.on("AfterScrollIntoView",i=>{a().each(d=>{Ho.refresh(d);const g=d.element;jh(g)&&eX(i,g)})}),n.on("PostRender",()=>{E7(n,!1)})},eG=n=>n().map(Ho.isDocked).getOr(!1),T7=()=>[Oa.config({channels:{[BR()]:{onReceive:NR}}})],k7=(n,s)=>{const a=Zt(),i=s.getSink,d=C=>{i().each(S=>C(S.element))},g=C=>{n.inline||NR(C),E7(n,Ho.isDocked(C)),C.getSystem().broadcastOn([Bs()],{}),i().each(S=>S.getSystem().broadcastOn([Bs()],{}))},h=n.inline?[]:T7();return[Ut.config({}),Ho.config({contextual:{lazyContext:C=>{const S=sa(C.element),x=n.inline?n.getContentAreaContainer():n.getContainer();return T.from(x).map(_=>{const D=Ds(We.fromDom(_));return Kf(n,C.element).fold(()=>{const F=D.height-S,z=D.y+(pS(C,"top")?0:S);return Us(D.x,z,D.width,F)},F=>{const z=id(D,l1(F)),G=pS(C,"top")?z.y:z.y+S;return Us(z.x,G,z.width,z.height-S)})})},onShow:()=>{d(C=>PR(C,!0))},onShown:C=>{d(S=>Vr(S,[Gm.transitionClass,Gm.fadeInClass])),a.get().each(S=>{Xj(C.element,S),a.clear()})},onHide:C=>{Jj(C.element,i).fold(a.clear,a.set),d(S=>PR(S,!1))},onHidden:()=>{d(C=>Vr(C,[Gm.transitionClass]))},...Gm},lazyViewport:C=>Kf(n,C.element).fold(()=>{const x=Ur(),_=xN(n),D=x.y+(pS(C,"top")&&!VN(n)?_:0),P=x.height-(pS(C,"bottom")?_:0);return{bounds:Us(x.x,D,x.width,P),optScrollEnv:T.none()}},x=>({bounds:l1(x),optScrollEnv:T.some({currentScrollTop:x.element.dom.scrollTop,scrollElmTop:mc(x.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var tG=Object.freeze({__proto__:null,setup:Qj,isDocked:eG,getBehaviours:k7});const nG=n=>{const s=n.editor,a=n.sticky?k7:w7;return{uid:n.uid,dom:n.dom,components:n.components,behaviours:Ve(a(s,n.sharedBackstage))}};var _7=Yi({factory:(n,s)=>{const a=(d,g)=>{const h=De(g,C=>{const S={type:"menubutton",text:C.text,fetch:_=>{_(C.getItems())},context:"any"},x=YO(S).mapError(_=>Mg(_)).getOrDie();return lS(x,"tox-mbtn",s.backstage,T.some("menuitem"))});jt.set(d,h)},i={focus:wt.focusIn,setMenus:a};return{uid:n.uid,dom:n.dom,components:[],behaviours:Ve([jt.config({}),Vt("menubar-events",[Eo(d=>{n.onSetup(d)}),Te(Vc(),(d,g)=>{oo(d.element,".tox-mbtn--active").each(h=>{aa(g.event.target,".tox-mbtn").each(C=>{un(h,C)||d.getSystem().getByDom(h).each(S=>{d.getSystem().getByDom(C).each(x=>{qc.expand(x),qc.close(S),Ut.focus(x)})})})})}),Te(C0(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{qc.isOpen(h)&&(qc.expand(C),qc.close(h))})})})]),wt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(n.onEscape(d),T.some(!0))}),So.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Be("dom"),Be("uid"),Be("onEscape"),Be("backstage"),de("onSetup",Y)],apis:{focus:(n,s)=>{n.focus(s)},setMenus:(n,s,a)=>{n.setMenus(s,a)}}});const A7="💝 Get all features",O7="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",oG=n=>{const s=n.promotionLink?[{dom:{tag:"a",attributes:{href:O7,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:A7}}]:[];return{uid:n.uid,dom:n.dom,components:s}},sG=n=>{const{sidebars:s}=n.ui.registry.getAll();et(Vn(s),a=>{const i=s[a],d=()=>ic(T.from(n.queryCommandValue("ToggleSidebar")),a);n.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{n.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return n.on("ToggleSidebar",h),()=>{n.off("ToggleSidebar",h)}},context:"any"})})},ol=n=>({element:()=>n.element.dom}),rG=(n,s)=>{const a=De(Vn(s),i=>{const d=s[i],g=pi(lD(d));return{name:i,getApi:ol,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return De(a,i=>{const d=pt(Y);return n.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:iv.unnamedEvents([zd(i,d),Ah(i,d),Te(A2(),(g,h)=>{const C=h.event;vt(a,x=>x.name===C.name).each(x=>{(C.visible?x.onShow:x.onHide)(x.getApi(g))})})])})})},D7=n=>Xr.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:rG(s,n),slotBehaviours:iv.unnamedEvents([Eo(a=>Xr.hideAllSlots(a))])})),R7=(n,s,a)=>{Le.getCurrent(n).each(d=>{jt.set(d,[D7(s)]);const g=a==null?void 0:a.toLowerCase();on(g)&&Mn(s,g)&&Le.getCurrent(d).each(h=>{Xr.showSlot(h,g),Ka.immediateGrow(d),Cn(d.element,"width"),rT(n.element,"region")})})},rT=(n,s)=>{Nt(n,"role",s)},bS=(n,s)=>{Le.getCurrent(n).each(i=>{Le.getCurrent(i).each(g=>{Ka.hasGrown(i)?Xr.isShowing(g,s)?(Ka.shrink(i),rT(n.element,"presentation")):(Xr.hideAllSlots(g),Xr.showSlot(g,s),rT(n.element,"region")):(Xr.hideAllSlots(g),Xr.showSlot(g,s),Ka.grow(i),rT(n.element,"region"))})})},aG=n=>Le.getCurrent(n).bind(a=>Ka.isGrowing(a)||Ka.hasGrown(a)?Le.getCurrent(a).bind(g=>vt(Xr.getSlotNames(g),h=>Xr.isShowing(g,h))):T.none()),Cv=st("FixSizeEvent"),$R=st("AutoSizeEvent"),aT=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ve([So.config({}),Ut.config({}),Ka.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Le.getCurrent(s).each(Xr.hideAllSlots),fn(s,$R)},onGrown:s=>{fn(s,$R)},onStartGrow:s=>{xt(s,Cv,{width:Go(s.element,"width").getOr("")})},onStartShrink:s=>{xt(s,Cv,{width:ra(s.element)+"px"})}}),jt.config({}),Le.config({find:s=>{const a=jt.contents(s);return Qn(a)}})])}],behaviours:Ve([Uu.childAt(0),Vt("sidebar-sliding-events",[Te(Cv,(s,a)=>{Ft(s.element,"width",a.event.width)}),Te($R,(s,a)=>{Cn(s.element,"width")})])])}),cG=n=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":n.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Rd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),M7=n=>Le.getCurrent(n).each(s=>ur(s.element,!0)),ql=(n,s)=>{const a="tabindex",i=`data-mce-${a}`;T.from(n.iframeElement).map(We.fromDom).each(d=>{s?(xr(d,a).each(g=>Nt(d,i,g)),Nt(d,a,-1)):(No(d,a),xr(d,i).each(g=>{Nt(d,a,g),No(d,i)}))})},iG=(n,s,a,i)=>{const d=s.element;if(ql(n,a),a)ce.block(s,cG(i)),Cn(d,"display"),No(d,"aria-hidden"),n.hasFocus()&&M7(s);else{const g=Le.getCurrent(s).exists(h=>Mi(h.element));ce.unblock(s),Ft(d,"display","none"),Nt(d,"aria-hidden","true"),g&&n.focus()}},cT=n=>({uid:n.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ve([jt.config({}),ce.config({focus:!1}),Le.config({find:s=>Qn(s.components())})]),components:[]}),B7=n=>n.type==="focusin",N7=n=>B7(n)?(n.composed?Qn(n.composedPath()):T.from(n.target)).map(We.fromDom).filter(uc).exists(a=>Os(a,"mce-pastebin")):!1,lG=(n,s,a)=>{const i=pt(!1),d=Zt(),g=C=>{i.get()&&!N7(C)&&(C.preventDefault(),M7(s()),n.editorManager.setActive(n))};n.inline||n.on("PreInit",()=>{n.dom.bind(n.getWin(),"focusin",g),n.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==i.get()&&(i.set(C),iG(n,s(),C,a.providers),FZ(n,C))};n.on("ProgressState",C=>{if(d.on(clearTimeout),Pa(C.time)){const S=KE.setEditorTimeout(n,()=>h(C.state),C.time);d.set(S)}else h(C.state),d.clear()})},IR=n=>{const s=n.label.isNone()?n.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):n.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(n.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...n.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Do(a)]})).toArray(),GE.parts.items({})],items:n.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Ve([So.config({}),Ut.config({ignore:!0})])}},iT=n=>GE.sketch(IR(n)),P7=(n,s)=>{const a=Eo(i=>{const d=De(n.initGroups,iT);Md.setGroups(i,d)});return Ve([Hd.toolbarButton(()=>n.providers.checkUiComponentContext("any").shouldDisable),Es(()=>n.providers.checkUiComponentContext("any")),wt.config({mode:s,onEscape:n.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),Vt("toolbar-events",[a])])},$7=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return{uid:n.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":IR({title:T.none(),label:T.none(),items:[]}),"overflow-button":Z$({context:"any",icon:T.some("more-drawer"),enabled:!0,tooltip:T.some("Reveal or hide additional toolbar items")},T.none(),n.providers,[],"overflow-button")},splitToolbarBehaviours:P7(n,s)}},uG=n=>{const s=$7(n),a=4,i=aN.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return aN.sketch({...s,lazySink:n.getSink,getOverflowBounds:()=>{const d=n.moreDrawerData.lazyHeader().element,g=lm(d),h=jv(d),C=lm(h),S=Math.max(h.dom.scrollHeight,C.height);return Us(g.x+a,C.y,g.width-a*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>n.onToggled(d,!0),onClosed:d=>n.onToggled(d,!1)})},dG=n=>{const s=VA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=VA.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=$7(n);return VA.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([BR()],{type:"opened"}),n.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([BR()],{type:"closed"}),n.onToggled(d,!1)}})},lT=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return Md.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(n.type===el.scrolling?["tox-toolbar--scrolling"]:[])},components:[Md.parts.groups({})],toolbarBehaviours:P7(n,s)})},mG=(n,s)=>{const a=n.type==="togglebutton",i=n.icon.map(W=>Bh(W,s.icons)).map(Ln),g=W=>{const ee=Ke=>{i.map(Re=>Re.getOpt(W).each($e=>{jt.set($e,[Bh(Ke,s.icons)])}))},re=Ke=>{const Re=W.element;Ke?(mo(Re,"tox-button--enabled"),Nt(Re,"aria-pressed",!0)):(Yo(Re,"tox-button--enabled"),No(Re,"aria-pressed"))},fe=()=>Os(W.element,"tox-button--enabled"),be=()=>ur(W.element);if(a)return n.onAction({setIcon:ee,setActive:re,isActive:fe,focus:be});if(n.type==="button")return n.onAction({setIcon:ee})},h={...n,name:a?n.text.getOr(n.icon.getOr("")):n.text??n.icon.getOr(""),primary:n.buttonType==="primary",buttonType:T.from(n.buttonType),tooltip:n.tooltip,icon:n.icon,enabled:!0,borderless:n.borderless},C=pR(n.buttonType??"secondary"),S=a?n.text.map(s.translate):T.some(s.translate(n.text)),x=S.map(Do),_=h.tooltip.or(S).map(W=>({"aria-label":s.translate(W)})).getOr({}),D=i.map(W=>W.asSpec()),P=Vm([D,x]),F=n.icon.isSome()&&x.isSome(),z={tag:"button",classes:C.concat(...n.icon.isSome()&&!F?["tox-button--icon"]:[]).concat(...F?["tox-button--icon-and-text"]:[]).concat(...n.borderless?["tox-button--naked"]:[]).concat(...n.type==="togglebutton"&&n.active?["tox-button--enabled"]:[]),attributes:_},G=[],J=J4(h,T.some(g),G,z,P,n.tooltip,s);return ar.sketch(J)},LR=(n,s)=>mG(n,s),I7=(n,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:De(n.buttons,a=>LR(a,s))}),FR=Hr().deviceType,fG=FR.isPhone(),L7=FR.isTablet(),gG=n=>{let s=!1;const a=De(n.buttons,i=>i.type==="group"?(s=!0,I7(i,n.providers)):LR(i,n.providers));return{uid:n.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...fG||L7?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Ve([Ut.config({}),wt.config({mode:"flow",selector:"button, .tox-button",focusInside:xf.OnEnterOrSpaceMode})]),components:s?a:[Ad.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Ad.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},hG=n=>({uid:n.uid,behaviours:Ve([Ut.config({}),So.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),F7=(n,s,a,i)=>{const d={getPane:g=>gr.getPart(g,n,"pane"),getOnShow:g=>n.viewConfig.onShow,getOnHide:g=>n.viewConfig.onHide};return{uid:n.uid,dom:n.dom,components:s,behaviours:Ve([Ut.config({}),wt.config({mode:"cyclic",focusInside:xf.OnEnterOrSpaceMode})]),apis:d}};var O1=wc({name:"silver.View",configFields:[Be("viewConfig")],partFields:[xa({factory:{sketch:gG},schema:[Be("buttons"),Be("providers")],name:"header"}),xa({factory:{sketch:hG},schema:[],name:"pane"})],factory:F7,apis:{getPane:(n,s)=>n.getPane(s),getOnShow:(n,s)=>n.getOnShow(s),getOnHide:(n,s)=>n.getOnHide(s)}});const H7=(n,s,a)=>Bo(s,(i,d)=>{const g=pi(EZ(i));return n.slot(d,O1.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[O1.parts.header({buttons:g.buttons,providers:a})]:[],O1.parts.pane({})]}))}),pG=(n,s)=>Xr.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:H7(a,n,s),slotBehaviours:iv.unnamedEvents([Eo(i=>Xr.hideAllSlots(i))])})),z7=n=>vt(Xr.getSlotNames(n),s=>Xr.isShowing(n,s)),bG=n=>{const s=n.element;Ft(s,"display","none"),Nt(s,"aria-hidden","true")},V7=n=>{const s=n.element;Cn(s,"display"),No(s,"aria-hidden")},vG=n=>({getContainer:ie(n)}),U7=(n,s,a)=>{Xr.getSlot(n,s).each(i=>{O1.getPane(i).each(d=>{a(i)(vG(d.element.dom))})})},yG=(n,s)=>U7(n,s,O1.getOnShow),CG=(n,s)=>U7(n,s,O1.getOnHide);var uT=Yi({factory:(n,s)=>{const g={setViews:(h,C)=>{jt.set(h,[pG(C,s.backstage.shared.providers)])},whichView:h=>Le.getCurrent(h).bind(z7),toggleView:(h,C,S,x)=>Le.getCurrent(h).exists(_=>{const D=z7(_),P=D.exists(z=>x===z),F=Xr.getSlot(_,x).isSome();return F&&(Xr.hideAllSlots(_),P?(bG(h),C()):(S(),V7(h),Xr.showSlot(_,x),yG(_,x)),D.each(z=>CG(_,z))),F})};return{uid:n.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Ve([jt.config({}),Le.config({find:h=>{const C=jt.contents(h);return Qn(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Be("backstage")],apis:{setViews:(n,s,a)=>n.setViews(s,a),toggleView:(n,s,a,i,d)=>n.toggleView(s,a,i,d),whichView:(n,s)=>n.whichView(s)}});const SG=(n,s,a)=>{let i=!1;const d=h=>{m3(h,".tox-statusbar").each(C=>{Po(C,"display")==="none"&&tr(C,"aria-hidden")==="true"?(Cn(C,"display"),No(C,"aria-hidden")):(Ft(C,"display","none"),Nt(C,"aria-hidden","true"))})},g={getSocket:h=>gr.getPart(h,n,"socket"),setSidebar:(h,C,S)=>{gr.getPart(h,n,"sidebar").each(x=>R7(x,C,S))},toggleSidebar:(h,C)=>{gr.getPart(h,n,"sidebar").each(S=>bS(S,C))},whichSidebar:h=>gr.getPart(h,n,"sidebar").bind(aG).getOrNull(),getHeader:h=>gr.getPart(h,n,"header"),getToolbar:h=>gr.getPart(h,n,"toolbar"),setToolbar:(h,C)=>{gr.getPart(h,n,"toolbar").each(S=>{const x=De(C,iT);S.getApis().setGroups(S,x)})},setToolbars:(h,C)=>{gr.getPart(h,n,"multiple-toolbar").each(S=>{const x=De(C,_=>De(_,iT));I6.setItems(S,x)})},refreshToolbar:h=>{gr.getPart(h,n,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{gr.getPart(h,n,"toolbar").each(C=>{ti(C.getApis().toggle,S=>S(C))})},toggleToolbarDrawerWithoutFocusing:h=>{gr.getPart(h,n,"toolbar").each(C=>{ti(C.getApis().toggleWithoutFocusing,S=>S(C))})},isToolbarDrawerToggled:h=>gr.getPart(h,n,"toolbar").bind(C=>T.from(C.getApis().isOpen).map(S=>S(C))).getOr(!1),getThrobber:h=>gr.getPart(h,n,"throbber"),focusToolbar:h=>{gr.getPart(h,n,"toolbar").orThunk(()=>gr.getPart(h,n,"multiple-toolbar")).each(S=>{wt.focusIn(S)})},setMenubar:(h,C)=>{gr.getPart(h,n,"menubar").each(S=>{_7.setMenus(S,C)})},focusMenubar:h=>{gr.getPart(h,n,"menubar").each(C=>{_7.focus(C)})},setViews:(h,C)=>{gr.getPart(h,n,"viewWrapper").each(S=>{uT.setViews(S,C)})},toggleView:(h,C)=>gr.getPart(h,n,"viewWrapper").exists(S=>uT.toggleView(S,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>gr.getPart(h,n,"viewWrapper").bind(uT.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),gr.getPart(h,n,"editorContainer").each(C=>{const S=C.element;d(S),Ft(S,"display","none"),Nt(S,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),gr.getPart(h,n,"editorContainer").each(C=>{const S=C.element;d(S),Cn(S,"display"),No(S,"aria-hidden")})}};return{uid:n.uid,dom:n.dom,components:s,apis:g,behaviours:n.behaviours}},wG=Ji.optional({factory:_7,name:"menubar",schema:[Be("backstage")]}),xG=n=>n.type===el.sliding?dG:n.type===el.floating?uG:lT,EG=Ji.optional({factory:{sketch:n=>I6.sketch({uid:n.uid,dom:n.dom,listBehaviours:Ve([wt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>lT({type:n.type,uid:st("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:n.providers,onEscape:()=>(n.onEscape(),T.some(!0))}),setupItem:(s,a,i,d)=>{Md.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[Be("dom"),Be("onEscape")]}),HR=Ji.optional({factory:{sketch:n=>{const s=xG(n),a={type:n.type,uid:n.uid,onEscape:()=>(n.onEscape(),T.some(!0)),onToggled:(i,d)=>n.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:n.getSink,providers:n.providers,moreDrawerData:{lazyToolbar:n.lazyToolbar,lazyMoreButton:n.lazyMoreButton,lazyHeader:n.lazyHeader},attributes:n.attributes};return s(a)}},name:"toolbar",schema:[Be("dom"),Be("onEscape"),Be("getSink")]}),TG=Ji.optional({factory:{sketch:nG},name:"header",schema:[Be("dom")]}),kG=Ji.optional({factory:{sketch:oG},name:"promotion",schema:[Be("dom"),Be("promotionLink")]}),Z7=Ji.optional({name:"socket",schema:[Be("dom")]}),W7=Ji.optional({factory:{sketch:aT},name:"sidebar",schema:[Be("dom")]}),_G=Ji.optional({factory:{sketch:cT},name:"throbber",schema:[Be("dom")]}),AG=Ji.optional({factory:uT,name:"viewWrapper",schema:[Be("backstage")]}),OG=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:n.components}),DG=Ji.optional({factory:{sketch:OG},name:"editorContainer",schema:[]});var go=wc({name:"OuterContainer",factory:SG,configFields:[Be("dom"),Be("behaviours")],partFields:[TG,wG,HR,EG,Z7,W7,kG,_G,AG,DG],apis:{getSocket:(n,s)=>n.getSocket(s),setSidebar:(n,s,a,i)=>{n.setSidebar(s,a,i)},toggleSidebar:(n,s,a)=>{n.toggleSidebar(s,a)},whichSidebar:(n,s)=>n.whichSidebar(s),getHeader:(n,s)=>n.getHeader(s),getToolbar:(n,s)=>n.getToolbar(s),setToolbar:(n,s,a)=>{n.setToolbar(s,a)},setToolbars:(n,s,a)=>{n.setToolbars(s,a)},refreshToolbar:(n,s)=>n.refreshToolbar(s),toggleToolbarDrawer:(n,s)=>{n.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(n,s)=>{n.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(n,s)=>n.isToolbarDrawerToggled(s),getThrobber:(n,s)=>n.getThrobber(s),setMenubar:(n,s,a)=>{n.setMenubar(s,a)},focusMenubar:(n,s)=>{n.focusMenubar(s)},focusToolbar:(n,s)=>{n.focusToolbar(s)},setViews:(n,s,a)=>{n.setViews(s,a)},toggleView:(n,s,a)=>n.toggleView(s,a),whichView:(n,s)=>n.whichView(s)}});const RG="file edit view insert format tools table help",zR={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image video link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},dT=(n,s,a)=>{const i=yN(a).split(/[ ,]/);return{text:n.title,getItems:()=>le(n.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:js(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},vS=n=>n.split(" "),j7=(n,s)=>{const a={...zR,...s.menus},i=Vn(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?vS(RG):vS(s.menubar===!1?"":s.menubar),g=no(d,C=>{const S=Mn(zR,C);return i?S||bt(s.menus,C).exists(x=>Mn(x,"items")):S}),h=De(g,C=>{const S=a[C];return dT({title:S.title,items:vS(S.items)},s,n)});return no(h,C=>{const S=x=>on(x)||x.type!=="separator";return C.getItems().length>0&&js(C.getItems(),S)})},MG=n=>{const s=()=>{n._skinLoaded=!0,b8(n)};return()=>{n.initialized?s():n.on("init",s)}},G7=(n,s)=>()=>A4(n,{message:s}),BG=n=>{const s=RC(n);return s?T.from(s):T.none()},q7=(n,s,a)=>(n.on("remove",()=>a.unload(s)),a.load(s)),mT=(n,s,a,i)=>(n.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),K7=(n,s)=>"ui/"+n+"/"+s,NG=n=>T.from(tinymce.Resource.get(n)).filter(on),VR=(n,s,a="")=>{const i=BG(n).map(g=>K7(g,`${s}.css`)),d=i.bind(NG);return lc(i,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=n.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${g}.css`}})},UR=(n,s)=>{const a=n.ui.styleSheetLoader,i=VR(n,"skin",s);switch(i._kind){case"load-raw":const{key:d,css:g}=i;return mT(n,d,g,a),Promise.resolve();case"load-stylesheet":const{url:h}=i;return q7(n,h,a);default:return Promise.resolve()}},PG=(n,s)=>{if(yl(We.fromDom(n.getElement()))){const i=Wb.DOM.styleSheetLoader,d=VR(n,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return mT(n,g,h,i),Promise.resolve();case"load-stylesheet":const{url:C}=d;return q7(n,C,i);default:return Promise.resolve()}}else return Promise.resolve()},$G=(n,s,a)=>{const d=VR(n,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?mT(n,g,h,n.ui.styleSheetLoader):n.on("PostRender",()=>{mT(n,g,h,n.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return a&&n.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},Y7=async(n,s)=>{const a=sO(s);if(await $G(s,n,a),!MC(s)&&on(a))return Promise.all([UR(s,a),PG(s,a)]).then()},X7=(n,s)=>Y7(n,s).then(MG(s),G7(s,"Skin could not be loaded")),J7=gn(X7,!1),IG=gn(X7,!0),ZR=n=>({isEnabled:()=>!ft.isDisabled(n),setEnabled:s=>ft.set(n,!s),setText:s=>xt(n,Gl,{text:s}),setIcon:s=>xt(n,A1,{icon:s})}),LG=n=>({setActive:s=>{Sn.set(n,s)},isActive:()=>Sn.isOn(n),isEnabled:()=>!ft.isDisabled(n),setEnabled:s=>ft.set(n,!s),setText:s=>xt(n,Gl,{text:s}),setIcon:s=>xt(n,A1,{icon:s})}),FG=(n,s)=>n.map(a=>({"aria-label":s.translate(a)})).getOr({}),HG=st("focus-button"),fT=(n,s,a,i,d,g,h)=>{const C=s.map(x=>Ln(lR(x,"tox-tbtn",d))),S=n.map(x=>Ln(Bh(x,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...FG(a,d),...Jn(h)?{"data-mce-name":h}:{}}},components:Vm([S.map(x=>x.asSpec()),C.map(x=>x.asSpec())]),eventOrder:{[Wa()]:["focusing","alloy.base.behaviour",jm],[Al()]:[jm,"toolbar-group-button-events"],[bi()]:[jm,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:Ve([Hd.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),Es(()=>d.checkUiComponentContext(g)),Vt(jm,[Eo((x,_)=>G4(x)),Te(Gl,(x,_)=>{C.bind(D=>D.getOpt(x)).each(D=>{jt.set(D,[Do(d.translate(_.event.text))])})}),Te(A1,(x,_)=>{S.bind(D=>D.getOpt(x)).each(D=>{jt.set(D,[Bh(_.event.icon,d.icons)])})}),Te(Wa(),(x,_)=>{_.event.prevent(),fn(x,HG)})])].concat(i.getOr([])))}},zG=(n,s,a,i,d)=>{const g=s.shared,h=pt(Y),C={toolbarButtonBehaviours:[],getApi:ZR,onSetup:n.onSetup},S=[Vt("toolbar-group-button-events",[zd(C,h),Ah(C,h)]),...n.tooltip.map(x=>To.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(x)}))).toArray()];return qf.sketch({lazySink:g.getSink,fetch:()=>Wo.nu(x=>{x(De(a(n.items),iT))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:fT(n.icon,n.text,n.tooltip,T.some(S),g.providers,n.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},Q7=(n,s,a,i)=>{var h;const d=pt(Y),g=fT(n.icon,n.text,n.tooltip,T.none(),a,n.context,i);return ar.sketch({dom:g.dom,components:g.components,eventOrder:cR,buttonBehaviours:{...Ve([Vt("toolbar-button-events",[zW({onAction:n.onAction,getApi:s.getApi}),zd(s,d),Ah(s,d)]),...n.tooltip.map(C=>To.config(a.tooltips.getConfig({tooltipText:a.translate(C)+n.shortcut.map(S=>` (${hD(S)})`).getOr("")}))).toArray(),Hd.toolbarButton(()=>!n.enabled||a.checkUiComponentContext(n.context).shouldDisable),Es(()=>a.checkUiComponentContext(n.context))].concat(s.toolbarButtonBehaviours)),[jm]:(h=g.buttonBehaviours)==null?void 0:h[jm]}})},VG=(n,s,a)=>yS(n,s,[],a),yS=(n,s,a,i)=>Q7(n,{toolbarButtonBehaviours:a.length>0?[Vt("toolbarButtonWith",a)]:[],getApi:ZR,onSetup:n.onSetup},s,i),WR=(n,s,a)=>eI(n,s,[],a),eI=(n,s,a,i)=>Q7(n,{toolbarButtonBehaviours:[jt.config({}),Sn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Vt("toolbarToggleButtonWith",a)]:[]),getApi:LG,onSetup:n.onSetup},s,i),UG=(n,s,a)=>i=>Wo.nu(d=>s.fetch(d)).map(d=>T.from(YD(ro($4(st("menu-value"),d,g=>{s.onItemAction(n(i),g)},s.columns,s.presets,zu.CLOSE_ON_EXECUTE,s.select.getOr(In),a),{movement:Rh(s.columns,s.presets),menuBehaviours:iv.unnamedEvents(s.columns!=="auto"?[]:[Eo((g,h)=>{mD(g,4,kO(s.presets)).each(({numRows:C,numColumns:S})=>{wt.setGridSize(g,C,S)})})])})))),ZG=(n,s,a)=>i=>{const d=i.getSystem(),g=i.element,h=()=>{const S=Os(g,"tox-split-button__chevron"),x=S?$c(g).bind(D=>d.getByDom(D).toOptional()):T.some(i),_=S?T.some(i):Kv(g).bind(D=>d.getByDom(D).toOptional().filter(P=>Os(P.element,"tox-split-button__chevron")));return{mainOpt:x,chevronOpt:_}},C=S=>{const{mainOpt:x,chevronOpt:_}=h();x.each(S),_.each(S)};return{isEnabled:()=>{const{mainOpt:S}=h();return S.exists(x=>!ft.isDisabled(x))},setEnabled:S=>C(x=>ft.set(x,!S)),setText:S=>{const{mainOpt:x}=h();x.each(_=>xt(_,Gl,{text:S}))},setIcon:S=>{const{mainOpt:x}=h();x.each(_=>xt(_,A1,{icon:S}))},setIconFill:(S,x)=>C(_=>{oo(_.element,`svg path[class="${S}"], rect[class="${S}"]`).each(D=>{Nt(D,"fill",x)})}),isActive:()=>{const{mainOpt:S}=h();return S.exists(x=>Sn.isOn(x))},setActive:S=>{const{mainOpt:x}=h();x.each(_=>Sn.set(_,S))},setTooltip:S=>{n.set(S);const{mainOpt:x,chevronOpt:_}=h();x.each(P=>Nt(P.element,"aria-label",s.providers.translate(S)));const D=a.chevronTooltip.map(P=>s.providers.translate(P)).getOr(s.providers.translate(S));_.each(P=>Nt(P.element,"aria-label",D))}}},WG=(n,s,a)=>{const i=pt(Y),d=pt(n.tooltip.getOr("")),g=ZG(d,s,n),h=st("tox-split-menu"),C=pt(!1),S=()=>({"aria-haspopup":"menu","aria-expanded":String(C.get()),"aria-controls":h}),x=()=>n.tooltip.map(G=>s.providers.translate(G)).getOr(s.providers.translate("Text color")),_=()=>n.chevronTooltip.map(G=>s.providers.translate(G)).getOrThunk(()=>{const G=x();return s.providers.translate(["{0} menu",G])}),D=(G,J)=>{C.set(G),Nt(J.element,"aria-expanded",String(G))},P=qc.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:EV("chevron-down",s.providers.icons),attributes:{"aria-label":_(),...Jn(a)?{"data-mce-name":a+"-chevron"}:{},...S()}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:Ve([Vt("split-dropdown-events",[Eo((G,J)=>G4(G)),zd({getApi:g,onSetup:n.onSetup},i),Te("alloy-dropdown-open",G=>D(!0,G)),Te("alloy-dropdown-close",G=>D(!1,G))]),Hd.toolbarButton(()=>s.providers.checkUiComponentContext(n.context).shouldDisable),Es(()=>s.providers.checkUiComponentContext(n.context)),Dd.config({}),To.config(s.providers.tooltips.getConfig({tooltipText:_(),onShow:G=>{if(d.get()!==n.tooltip.getOr("")){const J=n.chevronTooltip.map(W=>s.providers.translate(W)).getOr(`${s.providers.translate(d.get())} menu`);To.setComponents(G,s.providers.tooltips.getComponents({tooltipText:J}))}}}))]),lazySink:s.getSink,fetch:UG(g,n,s.providers),getHotspot:G=>$c(G.element).bind(J=>G.getSystem().getByDom(J).toOptional()),onOpen:(G,J,W)=>{$n.highlightBy(W,ee=>Os(ee.element,"tox-collection__item--active")),$n.getHighlighted(W).each(wt.focusIn)},parts:{menu:{...zC(!1,n.columns,n.presets),dom:{...zC(!1,n.columns,n.presets).dom,tag:"div",attributes:{id:h}}}}}),F=fT(n.icon,n.text,T.none(),T.some([Sn.config({toggleClass:"tox-tbtn--enabled",aria:n.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),...n.tooltip.isSome()?[To.config(s.providers.tooltips.getConfig({tooltipText:s.providers.translate(n.tooltip.getOr("")),onShow:G=>{if(d.get()!==n.tooltip.getOr("")){const J=s.providers.translate(d.get());To.setComponents(G,s.providers.tooltips.getComponents({tooltipText:J}))}}}))]:[]]),s.providers,n.context,a);return[ar.sketch({dom:{...F.dom,classes:["tox-tbtn","tox-split-button__main"].concat(n.text.isSome()?["tox-tbtn--select"]:[]),attributes:{"aria-label":x(),...Jn(a)?{"data-mce-name":a}:{}}},components:F.components,eventOrder:F.eventOrder,buttonBehaviours:F.buttonBehaviours,action:G=>{if(n.onAction){const J=g(G);J.isEnabled()&&n.onAction(J)}}}),P]},jG=".tox-toolbar-slider__input,.tox-toolbar-textfield",tI=n=>{Qo.getContent(n).each(s=>{oo(s.element,jG).fold(()=>wt.focusIn(s),ur)})},GG=n=>zs(n.element).each(s=>{$i(s,'[tabindex="-1"]').each(a=>{ur(a)})}),nI=st("forward-slide"),gT=st("backward-slide"),hT=st("change-slide-event"),Sv="tox-pop--resizing",jR=n=>{const s=pt([]);return{sketch:Qo.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:i=>{s.set([]),Qo.getContent(i).each(d=>{Cn(d.element,"visibility")}),Yo(i.element,Sv),Cn(i.element,"width")},onHide:()=>{s.set([]),n.onHide()},inlineBehaviours:Ve([Vt("context-toolbar-events",[eh(h0(),(i,d)=>{d.event.raw.propertyName==="width"&&(Yo(i.element,Sv),Cn(i.element,"width"))}),Te(hT,(i,d)=>{const g=i.element;Cn(g,"width");const h=ra(g),C=zs(i.element).isSome();Cn(g,"left"),Cn(g,"right"),Cn(g,"max-width"),Qo.setContent(i,d.event.contents),mo(g,Sv);const S=ra(g);Ft(g,"transition","none"),Qo.reposition(i),Cn(g,"transition"),Ft(g,"width",h+"px"),d.event.focus.fold(()=>{C&&tI(i)},x=>{Sr(Hs(i.element)).fold(()=>ur(x),_=>{un(_,x)||n.focusElement(x)})}),setTimeout(()=>{Ft(i.element,"width",S+"px")},0)}),Te(nI,(i,d)=>{Qo.getContent(i).each(g=>{s.set(s.get().concat([{bar:g,focus:Sr(Hs(i.element))}]))}),xt(i,hT,{contents:d.event.forwardContents,focus:T.none()})}),Te(gT,(i,d)=>{n.onBack(),cl(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),xt(i,hT,{contents:p(g.bar),focus:g.focus})})})]),wt.config({mode:"special",onEscape:i=>cl(s.get()).fold(()=>n.onEscape(),d=>(fn(i,gT),T.some(!0)))})]),lazySink:()=>Bt.value(n.sink)}),inSubtoolbar:()=>s.get().length>0}},oI=(n,s)=>{const a=pi(zm({type:"button",icon:"chevron-left",tooltip:"Back",onAction:Y}));return yS(a,s.shared.providers,[Te(aR,i=>{fn(i,gT)})])},Kl=(n,s,a)=>ga(a)?n.translate(s):n.translate([s,n.translate(a)]),sI=(n,s)=>{const a=(h,C,S,x)=>{const _=n.shared.providers.translate(h.title);if(h.type==="separator")return T.some({type:"separator",text:_});if(h.type==="submenu"){const D=le(h.getStyleItems(),P=>i(P,C,x));return C===0&&D.length<=0?T.none():T.some({type:"nestedmenuitem",text:_,enabled:D.length>0,getSubmenuItems:()=>le(h.getStyleItems(),P=>i(P,C,x))})}else return T.some({type:"togglemenuitem",text:_,icon:h.icon,active:h.isSelected(x),enabled:!S,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),D=>({meta:{style:D}}))})},i=(h,C,S)=>{const x=h.type==="formatter"&&s.isInvalid(h);return C===0?x?[]:a(h,C,!1,S).toArray():a(h,C,x,S).toArray()},d=h=>{const C=s.getCurrentValue(),S=s.shouldHide?0:1;return le(h,x=>i(x,S,C))};return{validateItems:d,getFetch:(h,C)=>(S,x)=>{const _=C(),D=d(_),P=rg(D,zu.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:T.none()});x(P)}}},wv=(n,s)=>{const a=s.dataset,i=a.type==="basic"?()=>De(a.data,d=>s7(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:sI(n,s),getStyleItems:i}},CS=(n,s,a,i,d,g)=>{const{items:h,getStyleItems:C}=wv(s,a),S=pt(a.tooltip),x=D=>({getComponent:ie(D),setTooltip:P=>{const F=s.shared.providers.translate(P);Nt(D.element,"aria-label",F),S.set(P)}}),_=D=>{const P=F=>D.setTooltip(Kl(n,i(F.value),F.value));return n.on(d,P),E1(Dh(n,"NodeChange",F=>{const z=F.getComponent();a.updateText(z),ft.set(F.getComponent(),!n.selection.isEditable()||C().length===0)})(D),()=>n.off(d,P))};return uR({context:"mode:design",text:a.icon.isSome()?T.none():a.text,icon:a.icon,ariaLabel:T.some(a.tooltip),tooltip:T.none(),role:T.none(),fetch:h.getFetch(s,C),onSetup:_,getApi:x,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[To.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:D=>{if(a.tooltip!==S.get()){const P=s.shared.providers.translate(S.get());To.setComponents(D,s.shared.providers.tooltips.getComponents({tooltipText:P}))}}})})]},"tox-tbtn",s.shared,g)},qG=n=>De(n,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),KG=n=>({type:"basic",data:n});var xv;(function(n){n[n.SemiColon=0]="SemiColon",n[n.Space=1]="Space"})(xv||(xv={}));const YG=(n,s)=>s===xv.SemiColon?n.replace(/;$/,"").split(";"):n.split(" "),GR=(n,s,a)=>{const i=n.options.get(s);return{type:"basic",data:qG(YG(i,a))}},rI="Align",aI=ie("Alignment {0}"),cI="left",SS=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],iI=n=>{const s=()=>vt(SS,C=>n.formatter.match(C.format)),a=C=>()=>n.formatter.match(C),i=C=>T.none,d=C=>{const x=s().fold(ie(cI),_=>_.title.toLowerCase());xt(C,A1,{icon:`align-${x}`}),y8(n,{value:x})},g=KG(SS),h=C=>()=>vt(SS,S=>S.format===C.format).each(S=>n.execCommand(S.command));return{tooltip:Kl(n,aI(),cI),text:T.none(),icon:T.some("align-left"),isSelectedFor:a,getCurrentValue:T.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!n.formatter.canApply(C.format)}},XG=(n,s)=>CS(n,s,iI(n),aI,"AlignTextUpdate","align"),JG=(n,s)=>{const a=wv(s,iI(n));n.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(rI),onSetup:Br(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},lI=(n,s)=>{const a=s(),i=De(a,d=>d.format);return T.from(n.formatter.closest(i)).bind(d=>vt(a,g=>g.format===d))},QG="Blocks",uI=ie("Block {0}"),pT="Paragraph",qR=n=>{const s=g=>()=>n.formatter.match(g),a=g=>()=>{const h=n.formatter.get(g);return h?T.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(g))}):T.none()},i=g=>{const C=lI(n,()=>d.data).fold(ie(pT),S=>S.title);xt(g,Gl,{text:C}),O4(n,{value:C})},d=GR(n,"block_formats",xv.SemiColon);return{tooltip:Kl(n,uI(),pT),text:T.some(pT),icon:T.none(),isSelectedFor:s,getCurrentValue:T.none,getPreviewFor:a,onAction:D4(n),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!n.formatter.canApply(g.format)}},dI=(n,s)=>CS(n,s,qR(n),uI,"BlocksTextUpdate","blocks"),eq=(n,s)=>{const a=wv(s,qR(n));n.ui.registry.addNestedMenuItem("blocks",{text:QG,onSetup:Br(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},mI="Fonts",fI=ie("Font {0}"),KR="System Font",tq=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],YR=n=>{const s=n.split(/\s*,\s*/);return De(s,a=>a.replace(/^['"]+|['"]+$/g,""))},gI=(n,s)=>s.length>0&&ks(s,a=>n.indexOf(a.toLowerCase())>-1),hI=(n,s)=>{if(n.indexOf("-apple-system")===0||s.length>0){const a=YR(n.toLowerCase());return gI(a,tq)||gI(a,s)}else return!1},pI=n=>{const s=()=>{const S=z=>z?YR(z)[0]:"",x=n.queryCommandValue("FontName"),_=C.data,D=x?x.toLowerCase():"",P=$N(n);return{matchOpt:vt(_,z=>{const G=z.format;return G.toLowerCase()===D||S(G).toLowerCase()===S(D).toLowerCase()}).orThunk(()=>fa(hI(D,P),{title:KR,format:D})),font:x}},a=S=>x=>x.exists(_=>_.format===S),i=()=>{const{matchOpt:S}=s();return S},d=S=>()=>T.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontName",!1,S.format)})},h=S=>{const{matchOpt:x,font:_}=s(),D=x.fold(ie(_),P=>P.title);xt(S,Gl,{text:D}),ZZ(n,{value:D})},C=GR(n,"font_family_formats",xv.SemiColon);return{tooltip:Kl(n,fI(),KR),text:T.some(KR),icon:T.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:In}},nq=(n,s)=>CS(n,s,pI(n),fI,"FontFamilyTextUpdate","fontfamily"),oq=(n,s)=>{const a=wv(s,pI(n));n.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(mI),onSetup:Br(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var bT=tinymce.util.Tools.resolve("tinymce.util.VK");const sq=(n,s,a,i)=>{let d=T.none();const g=re=>re.map(fe=>it.getValue(fe)).getOr(""),h=Dh(n,"NodeChange SwitchMode DisabledStateChange",re=>{const fe=re.getComponent();d=T.some(fe),a.updateInputValue(fe),ft.set(fe,!n.selection.isEditable()||YE(n))}),C=re=>({getComponent:ie(re)}),S=pt(Y),x=st("custom-number-input-events"),_=(re,fe,be)=>{const Ke=g(d),Re=a.getNewValue(Ke,re),$e=Ke.length-`${Re}`.length,Ne=d.map(gt=>gt.element.dom.selectionStart-$e),Et=d.map(gt=>gt.element.dom.selectionEnd-$e);a.onAction(Re,be),d.each(gt=>{it.setValue(gt,Re),fe&&(Ne.each(sn=>gt.element.dom.selectionStart=sn),Et.each(sn=>gt.element.dom.selectionEnd=sn))})},D=(re,fe)=>_((be,Ke)=>be-Ke,re,fe),P=(re,fe)=>_((be,Ke)=>be+Ke,re,fe),F=re=>iu(re.element).fold(T.none,fe=>(ur(fe),T.some(!0))),z=re=>Mi(re.element)?(xn(re.element).each(fe=>ur(fe)),T.some(!0)):T.none(),G=(re,fe,be,Ke)=>{const Re=pt(Y),$e=s.shared.providers.translate(be),Ne=st("altExecuting"),Et=Dh(n,"NodeChange SwitchMode DisabledStateChange",sn=>{ft.set(sn.getComponent(),!n.selection.isEditable()||YE(n))}),gt=sn=>{ft.isDisabled(sn)||re(!0)};return ar.sketch({dom:{tag:"button",attributes:{"aria-label":$e,"data-mce-name":fe},classes:Ke.concat(fe)},components:[iR(fe,s.shared.providers.icons)],buttonBehaviours:Ve([ft.config({}),To.config(s.shared.providers.tooltips.getConfig({tooltipText:$e})),Vt(Ne,[zd({onSetup:Et,getApi:C},Re),Ah({getApi:C},Re),Te(rr(),(sn,kt)=>{(kt.event.raw.keyCode===bT.SPACEBAR||kt.event.raw.keyCode===bT.ENTER)&&(ft.isDisabled(sn)||re(!1))}),Te(vf(),gt),Te(hm(),gt)])]),eventOrder:{[rr()]:[Ne,"keying"],[vf()]:[Ne,"alloy.base.behaviour"],[hm()]:[Ne,"alloy.base.behaviour"],[Al()]:["alloy.base.behaviour",Ne,"tooltipping"],[bi()]:[Ne,"tooltipping"]}})},J=Ln(G(re=>D(!1,re),"minus","Decrease font size",[])),W=Ln(G(re=>P(!1,re),"plus","Increase font size",[])),ee=Ln({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Fm.sketch({inputBehaviours:Ve([ft.config({}),Vt(x,[zd({onSetup:h,getApi:C},S),Ah({getApi:C},S)]),Vt("input-update-display-text",[Te(Gl,(re,fe)=>{it.setValue(re,fe.event.text)}),Te(T2(),re=>{a.onAction(it.getValue(re))}),Te(bf(),re=>{a.onAction(it.getValue(re))})]),wt.config({mode:"special",onEnter:re=>(_(an,!0,!0),T.some(!0)),onEscape:F,onUp:re=>(P(!0,!1),T.some(!0)),onDown:re=>(D(!0,!1),T.some(!0)),onLeft:(re,fe)=>(fe.cut(),T.none()),onRight:(re,fe)=>(fe.cut(),T.none())})])})],behaviours:Ve([Ut.config({}),wt.config({mode:"special",onEnter:z,onSpace:z,onEscape:F}),Vt("input-wrapper-events",[Te(Vc(),re=>{et([J,W],fe=>{const be=We.fromDom(fe.get(re).element.dom);Mi(be)&&ms(be)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Jn(i)?{"data-mce-name":i}:{}}},components:[J.asSpec(),ee.asSpec(),W.asSpec()],behaviours:Ve([Ut.config({}),wt.config({mode:"flow",focusInside:xf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:re=>Mi(re.element)?T.none():(ur(re.element),T.some(!0))})])}},rq="Font sizes",bI=ie("Font size {0}"),XR="12pt",aq={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},cq={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},iq=(n,s)=>{const a=Math.pow(10,s);return Math.round(n*a)/a},lq=(n,s)=>/[0-9.]+px$/.test(n)?iq(parseInt(n,10)*72/96,s||0)+"pt":bt(cq,n).getOr(n),uq=n=>bt(aq,n).getOr(""),vI=n=>{const s=()=>{let S=T.none();const x=C.data,_=n.queryCommandValue("FontSize");if(_)for(let D=3;S.isNone()&&D>=0;D--){const P=lq(_,D),F=uq(P);S=vt(x,z=>z.format===_||z.format===P||z.format===F)}return{matchOpt:S,size:_}},a=S=>x=>x.exists(_=>_.format===S),i=()=>{const{matchOpt:S}=s();return S},d=ie(T.none),g=S=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontSize",!1,S.format)})},h=S=>{const{matchOpt:x,size:_}=s(),D=x.fold(ie(_),P=>P.title);xt(S,Gl,{text:D}),UZ(n,{value:D})},C=GR(n,"font_size_formats",xv.Space);return{tooltip:Kl(n,bI(),XR),text:T.some(XR),icon:T.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:In}},dq=(n,s)=>CS(n,s,vI(n),bI,"FontSizeTextUpdate","fontsize"),yI=n=>{const s={step:1};return{em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[n]??s},mq=16,fq=n=>n>=0,CI=n=>{const s=()=>n.queryCommandValue("FontSize");return{updateInputValue:i=>xt(i,Gl,{text:s()}),onAction:(i,d)=>n.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{s0(i,["unsupportedLength","empty"]);const g=s(),h=s0(i,["unsupportedLength","empty"]).or(s0(g,["unsupportedLength","empty"])),C=h.map(P=>P.value).getOr(mq),S=e4(n),x=h.map(P=>P.unit).filter(P=>P!=="").getOr(S),_=d(C,yI(x).step),D=`${fq(_)?_:C}${x}`;return D!==g&&Um(n,{value:D}),D}}},gq=(n,s)=>sq(n,s,CI(n),"fontsizeinput"),SI=(n,s)=>{const a=wv(s,vI(n));n.ui.registry.addNestedMenuItem("fontsize",{text:rq,onSetup:Br(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},wI="Formats",xI=n=>ga(n)?"Formats":"Format {0}",EI=(n,s)=>{const a="Formats",i=h=>()=>n.formatter.match(h),d=h=>()=>{const C=n.formatter.get(h);return C!==void 0?T.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(h))}):T.none()},g=h=>{const C=D=>kj(D)?le(D.items,C):Q$(D)?[{title:D.title,format:D.format}]:[],S=le(o7(n),C),_=lI(n,ie(S)).fold(ie({title:a,tooltipLabel:""}),D=>({title:D.title,tooltipLabel:D.title}));xt(h,Gl,{text:_.title}),VZ(n,{value:_.tooltipLabel})};return{tooltip:Kl(n,xI(""),""),text:T.some(a),icon:T.none(),isSelectedFor:i,getCurrentValue:T.none,getPreviewFor:d,onAction:D4(n),updateText:g,shouldHide:JA(n),isInvalid:h=>!n.formatter.canApply(h.format),dataset:s}},hq=(n,s)=>{const a={type:"advanced",...s.styles};return CS(n,s,EI(n,a),xI,"StylesTextUpdate","styles")},Ev=(n,s)=>{const a={type:"advanced",...s.styles},i=wv(s,EI(n,a));n.ui.registry.addNestedMenuItem("styles",{text:wI,onSetup:Br(n,()=>i.getStyleItems().length>0),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},pq=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],wS=(n,s)=>(a,i,d,g)=>{const h=n(a).mapError(C=>Mg(C)).getOrDie();return s(h,i,d,g)},bq={button:wS(zm,(n,s,a,i)=>VG(n,s.shared.providers,i)),togglebutton:wS(tD,(n,s,a,i)=>WR(n,s.shared.providers,i)),menubutton:wS(YO,(n,s,a,i)=>lS(n,"tox-tbtn",s,T.none(),!1,i)),splitbutton:wS(vZ,(n,s,a,i)=>WG(n,s.shared,i)),grouptoolbarbutton:wS(uD,(n,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=C=>vT(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,T.none()),h={[Z0]:s.shared.header.isPositionedAtTop()?vd.TopToBottom:vd.BottomToTop};switch(i1(a)){case el.floating:return zG(n,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},vq=(n,s,a,i)=>bt(bq,n.type).fold(()=>(console.error("skipping button defined by",n),T.none()),d=>T.some(d(n,s,a,i))),TI={styles:hq,fontsize:dq,fontsizeinput:gq,fontfamily:nq,blocks:dI,align:XG,navigateback:oI},yq=n=>{const s=De(pq,a=>{const i=no(a.items,d=>Mn(n,d)||Mn(TI,d));return{name:a.name,items:i}});return no(s,a=>a.items.length>0)},Cq=n=>{const s=n.split("|");return De(s,a=>({items:a.trim().split(" ")}))},Sq=n=>sc(n,s=>(Mn(s,"name")||Mn(s,"label"))&&Mn(s,"items")),JR=n=>{const s=n.toolbar,a=n.buttons;return s===!1?[]:s===void 0||s===!0?yq(a):on(s)?Cq(s):Sq(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},wq=(n,s,a,i,d,g)=>bt(s,a.toLowerCase()).orThunk(()=>g.bind(h=>ta(h,C=>bt(s,C+a.toLowerCase())))).fold(()=>bt(TI,a.toLowerCase()).map(h=>h(n,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),T.none()):vq(h,d,n,a.toLowerCase())),vT=(n,s,a,i)=>{const d=JR(s),g=De(d,h=>{const C=le(h.items,S=>S.trim().length===0?[]:wq(n,s.buttons,S,s.allowToolbarGroups,a,i).map(x=>Array.isArray(x)?x:[x]).getOr([]));return{title:T.from(n.translate(h.name)),label:fa(h.label!==void 0,n.translate(h.label)),items:C}});return no(g,h=>h.items.length>0)},QR=(n,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(sc(g,on)){const C=g.map(S=>{const x={toolbar:S,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return vT(n,x,i,T.none())});go.setToolbars(d,C)}else go.setToolbar(d,vT(n,a,i,T.none()))},e5=Hr(),xq=e5.os.isiOS()&&e5.os.version.major<=12,Eq=(n,s)=>{const{uiMotherships:a}=s,i=n.dom;let d=n.getWin();const g=n.getDoc().documentElement,h=pt(co(d.innerWidth,d.innerHeight)),C=pt(co(g.offsetWidth,g.offsetHeight)),S=()=>{const P=h.get();(P.left!==d.innerWidth||P.top!==d.innerHeight)&&(h.set(co(d.innerWidth,d.innerHeight)),DD(n))},x=()=>{const P=n.getDoc().documentElement,F=C.get();(F.left!==P.offsetWidth||F.top!==P.offsetHeight)&&(C.set(co(P.offsetWidth,P.offsetHeight)),DD(n))},_=P=>{LZ(n,P)};i.bind(d,"resize",S),i.bind(d,"scroll",_);const D=ii(We.fromDom(n.getBody()),"load",x);n.on("hide",()=>{et(a,P=>{Ft(P.element,"display","none")})}),n.on("show",()=>{et(a,P=>{Cn(P.element,"display")})}),n.on("NodeChange",x),n.on("remove",()=>{D.unbind(),i.unbind(d,"resize",S),i.unbind(d,"scroll",_),d=null})},Tq=(n,s,a)=>{xh(n)&&Ki(a.mainUi.mothership.element,a.popupUi.mothership),Zp(s,a.dialogUi.mothership)};var kq=Object.freeze({__proto__:null,render:(n,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,C=pt(0),S=g.outerContainer;J7(n);const x=We.fromDom(d.targetNode),_=vl(Hs(x));Ki(x,g.mothership),Tq(n,_,s),n.on("PostRender",()=>{go.setSidebar(S,a.sidebar,BN(n)),go.setViews(S,a.views)}),n.on("SkinLoaded",()=>{QR(n,s,a,i),C.set(n.getWin().innerWidth),go.setMenubar(S,j7(n,a)),Eq(n,s)});const D=go.getSocket(S).getOrDie("Could not find expected socket element");if(xq){rs(D.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const G=zh(()=>{n.dispatch("ScrollContent")},20),J=Kn(D.element,"scroll",G.throttle);n.on("remove",J.unbind)}e8(n,s),n.addCommand("ToggleSidebar",(G,J)=>{go.toggleSidebar(S,J),WZ(n)}),n.addQueryValueHandler("ToggleSidebar",()=>go.whichSidebar(S)??""),n.addCommand("ToggleView",(G,J)=>{if(go.toggleView(S,J)){const W=S.element;g.mothership.broadcastOn([xu()],{target:W}),et(h,ee=>{ee.broadcastOn([xu()],{target:W})}),nc(go.whichView(S))&&(n.focus(),n.nodeChanged(),go.refreshToolbar(S)),C8(n)}}),n.addQueryValueHandler("ToggleView",()=>go.whichView(S)??"");const P=i1(n),F=()=>{go.refreshToolbar(s.mainUi.outerContainer)};(P===el.sliding||P===el.floating)&&n.on("ResizeWindow ResizeEditor ResizeContent",()=>{const G=n.getWin().innerWidth;G!==C.get()&&(F(),C.set(G))});const z={setEnabled:G=>{JC(s,G?"setEnabled":"setDisabled")},isEnabled:()=>!ft.isDisabled(S)};return{iframeContainer:D.element.dom,editorContainer:S.element.dom,api:z}}});const _q=n=>/^[0-9\.]+(|px)$/i.test(""+n)?T.some(parseInt(""+n,10)):T.none(),yT=n=>Pa(n)?n+"px":n,CT=(n,s,a)=>{const i=s.filter(g=>n<g),d=a.filter(g=>n>g);return i.or(d).getOr(n)},Aq=(n,s)=>{if(typeof s=="number")return T.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const i=a[2],d=Number.parseFloat(a[1]);if(Number.isNaN(d)||d<0)return T.none();if(i==="em")return T.from(d*Number.parseFloat(window.getComputedStyle(n.dom).fontSize));if(i==="pt")return T.from(d*(72/96));if(i==="px")return T.from(d)}return T.none()},Oq=n=>{const s=Aq(We.fromDom(n.targetElm),GA(n)),a=YA(n),i=XA(n);return s.map(d=>CT(d,a,i))},Dq=n=>Oq(n).getOr(GA(n)),xS=n=>{const s=qA(n),a=KA(n),i=XE(n);return _q(s).map(d=>CT(d,a,i))},Rq=n=>xS(n).getOr(qA(n)),{ToolbarLocation:Tv,ToolbarMode:ES}=oV,kI=40,Mq=(n,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,C=Wb.DOM,S=Xb(n),x=Jb(n),_=XE(n).or(xS(n)),D=i.shared.header,P=D.isPositionedAtTop,F=150,z=i1(n),G=z===ES.sliding||z===ES.floating,J=pt(!1),W=()=>J.get()&&!n.removed,ee=ht=>G?ht.fold(ie(0),Ae=>Ae.components().length>1?nr(Ae.components()[1].element):0):0,re=ht=>{switch(QA(n)){case Tv.auto:const Ae=go.getToolbar(g.outerContainer),Ze=ee(Ae),Pt=nr(ht.element)-Ze,Xt=Ds(s);if(Xt.y>Pt)return"top";{const qt=jv(s),eo=Math.max(qt.dom.scrollHeight,nr(qt));return Xt.bottom<eo-Pt||Ur().bottom<Xt.bottom-Pt?"bottom":"top"}case Tv.bottom:return"bottom";case Tv.top:default:return"top"}},fe=ht=>{d.on(Ae=>{Ho.setModes(Ae,[ht]),D.setDockingMode(ht);const Ze=P()?vd.TopToBottom:vd.BottomToTop;Nt(Ae.element,Z0,Ze)})},be=()=>{d.on(ht=>{const Ae=_.getOrThunk(()=>r0().width-di(s).left-10);Ft(ht.element,"max-width",Ae+"px")})},Ke=(ht,Ae)=>{d.on(Ze=>{const Pt=go.getToolbar(g.outerContainer),Xt=ee(Pt),Ct=Ds(s),qt=Re(n,g.outerContainer.element),eo=()=>qt.fold(()=>Ct.x,Nr=>{const Ra=Ds(Nr);return un(Nr,Lc())?Ct.x:Ct.x-Ra.x}),Rn=()=>qt.fold(()=>P()?Math.max(Ct.y-nr(Ze.element)+Xt,0):Ct.bottom,Nr=>{const Ra=Ds(Nr),Yc=Nr.dom.scrollTop??0,Ph=un(Nr,Lc())?Math.max(Ct.y-nr(Ze.element)+Xt,0):Ct.y-Ra.y+Yc-nr(Ze.element)+Xt;return P()?Ph:Ct.bottom}),Ja=eo(),zo=fa(ht,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Nr=>Nr>F).map(Nr=>{const Ra=Ae.getOr(vs()),Yc=window.innerWidth-(Ja-Ra.left),Yl=Math.max(Math.min(Nr,Yc),F);return Yc<Nr&&Ft(g.outerContainer.element,"width",Yl+"px"),{width:Yl+"px"}}).getOr({width:"max-content"}),Kc={position:"absolute",left:Math.round(Ja)+"px",top:Rn()+"px"};rs(g.outerContainer.element,{...Kc,...zo})})},Re=(ht,Ae)=>xh(ht)?um(Ae):T.none(),$e=()=>{et(h,ht=>{ht.broadcastOn([Bs()],{})})},Ne=()=>!S&&(mc(g.outerContainer.element).left+sd(g.outerContainer.element)>=window.innerWidth-kI||Go(g.outerContainer.element,"width").isSome())?(Ft(g.outerContainer.element,"position","absolute"),Ft(g.outerContainer.element,"left","0px"),Cn(g.outerContainer.element,"width"),!0):!1,Et=ht=>{if(!W())return;S||be();const Ae=vs(),Ze=S?!1:Ne();if(G&&go.refreshToolbar(g.outerContainer),!S){const Pt=vs(),Xt=fa(Ae.left!==Pt.left,Ae);Ke(Ze,Xt),Xt.each(Ct=>{sm(Ct.left,Pt.top)})}x&&d.on(ht),$e()},gt=()=>S||!x||!W()?!1:d.get().exists(ht=>{const Ae=D.getDockingMode(),Ze=re(ht);return Ze!==Ae?(fe(Ze),!0):!1});return{isVisible:W,isPositionedAtTop:P,show:()=>{J.set(!0),Ft(g.outerContainer.element,"display","flex"),C.addClass(n.getBody(),"mce-edit-focus"),et(h,ht=>{Cn(ht.element,"display")}),gt(),xh(n)?Et(ht=>Ho.isDocked(ht)?Ho.reset(ht):Ho.refresh(ht)):Et(Ho.refresh)},hide:()=>{J.set(!1),Ft(g.outerContainer.element,"display","none"),C.removeClass(n.getBody(),"mce-edit-focus"),et(h,ht=>{Ft(ht.element,"display","none")})},update:Et,updateMode:()=>{gt()&&Et(Ho.reset)},repositionPopups:$e}},_I=(n,s)=>{const a=Ds(n);return{pos:s?a.y:a.bottom,bounds:a}},Bq=(n,s,a,i)=>{const d=pt(_I(s,a.isPositionedAtTop())),g=x=>{const{pos:_,bounds:D}=_I(s,a.isPositionedAtTop()),{pos:P,bounds:F}=d.get(),z=D.height!==F.height||D.width!==F.width;d.set({pos:_,bounds:D}),z&&DD(n,x),a.isVisible()&&(P!==_?a.update(Ho.reset):z&&(a.updateMode(),a.repositionPopups()))};i||(n.on("activate",a.show),n.on("deactivate",a.hide)),n.on("SkinLoaded ResizeWindow",()=>a.update(Ho.reset)),n.on("NodeChange keydown",x=>{requestAnimationFrame(()=>g(x))});let h=0;const C=oi(()=>a.update(Ho.refresh),33);n.on("ScrollWindow",()=>{const x=vs().left;x!==h&&(h=x,C.throttle()),a.updateMode()}),xh(n)&&n.on("ElementScroll",x=>{a.update(Ho.refresh)});const S=ps();S.set(ii(We.fromDom(n.getBody()),"load",x=>g(x.raw))),n.on("remove",()=>{S.clear()})};var Nq=Object.freeze({__proto__:null,render:(n,s,a,i,d)=>{const{mainUi:g}=s,h=Zt(),C=We.fromDom(d.targetNode),S=Mq(n,C,s,i,h),x=wN(n);IG(n);const _=()=>{if(h.isSet()){S.show();return}h.set(go.getHeader(g.outerContainer).getOrDie());const P=rO(n);xh(n)?(Ki(C,g.mothership),Ki(C,s.popupUi.mothership)):Zp(P,g.mothership),Zp(P,s.dialogUi.mothership);const F=()=>{QR(n,s,a,i),go.setMenubar(g.outerContainer,j7(n,a)),S.show(),Bq(n,C,S,x),n.nodeChanged()};x?n.once("SkinLoaded",F):F()};n.on("show",_),n.on("hide",S.hide),x||(n.on("focus",_),n.on("blur",S.hide)),n.on("init",()=>{(n.hasFocus()||x)&&_()}),e8(n,s);const D={show:_,hide:S.hide,setEnabled:P=>{JC(s,P?"setEnabled":"setDisabled")},isEnabled:()=>!ft.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:D}}});const ST=()=>{const n=Zt(),s=Zt(),a=Zt();return{dialogUi:n,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=n.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],S=>un(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},AI="contexttoolbar-show",t5="contexttoolbar-hide",wT=(n,s,a)=>({setInputEnabled:i=>{!i&&a&&ur(a),ft.set(n,!i)},isInputEnabled:()=>!ft.isDisabled(n),hide:()=>{fn(n,v0())},back:()=>{fn(n,gT)},getValue:()=>s.get().getOrThunk(()=>it.getValue(n)),setValue:i=>{n.getSystem().isConnected()?it.setValue(n,i):s.set(i)}}),TS=(n,s,a)=>{const d=Fa(n.element).bind(g=>n.getSystem().getByDom(g).toOptional());return wT(d.getOr(n),s,a)},OI=(n,s,a)=>Te(aR,(i,d)=>{const g=n.get(i),h=wT(g,a,i.element);s.onAction(h,d.event.buttonApi)}),DI=(n,s,a,i)=>{const{primary:d,...g}=s.original,h=pi(zm({...g,type:"button",onAction:Y}));return yS(h,a,[OI(n,s,i)])},Pq=(n,s,a,i)=>{const{primary:d,...g}=s.original,h=pi(tD({...g,type:"togglebutton",onAction:Y}));return eI(h,a,[OI(n,s,i)])},$q=n=>n.type==="contextformtogglebutton",Iq=(n,s,a,i)=>$q(s)?Pq(n,s,a,i):DI(n,s,a,i),RI=(n,s,a,i)=>{const d=De(s,C=>Ln(Iq(n,C,a,i)));return{asSpecs:()=>De(d,C=>C.asSpec()),findPrimary:C=>ta(s,(S,x)=>S.primary?T.from(d[x]).bind(_=>_.getOpt(C)).filter(ve(ft.isDisabled)):T.none())}},Lq=(n,s,a,i)=>{const{width:d,height:g}=n.initValue();let h=hv;const C=st("ratio-event"),S=Re=>wT(Re,i),x=Re=>tl(Re,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Re]},s.icons),_=()=>!1,D=n.label.getOr("Constrain proportions"),P=s.translate(D),F=xs.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":P,"data-mce-name":D}},components:[x("lock"),x("unlock")],buttonBehaviours:Ve([ft.config({disabled:_}),So.config({}),To.config(s.tooltips.getConfig({tooltipText:P}))])}),z=Re=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Re}),G=Re=>$i(Re.element,"div.tox-focusable-wrapper").fold(T.none,Ne=>(ur(Ne),T.some(!0))),J=Re=>pn.parts.field({factory:Fm,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Re?d:g,inputBehaviours:Ve([ft.config({disabled:_}),So.config({}),Vt("size-input-toolbar-events",[Te(zi(),($e,Ne)=>{xt($e,C,{isField1:Re})})]),wt.config({mode:"special",onEnter:a,onEscape:G})]),selectOnFocus:!1}),W=Re=>({dom:{tag:"label",classes:["tox-label"]},components:[Do(s.translate(Re))]}),ee=Re=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Re],behaviours:Ve([So.config({}),Ut.config({}),wt.config({mode:"special",onEnter:$e=>oo($e.element,"input").fold(T.none,Et=>(ur(Et),T.some(!0)))})])}),re=ee(xs.parts.field1(z([pn.parts.label(W("Width:")),J(!0)]))),fe=ee(xs.parts.field2(z([pn.parts.label(W("Height:")),J(!1)]))),be=pt(Y),Ke=[zd({onBeforeSetup:Re=>oo(Re.element,"input").each(ur),onSetup:n.onSetup,getApi:S},be),S4({getApi:S},be,i)];return xs.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[re,z([F]),fe],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Re,$e,Ne)=>{X4(it.getValue(Re)).each(Et=>{h(Et).each(gt=>{it.setValue($e,R$(gt))})})},onInput:Re=>fn(Re,Y8),coupledFieldBehaviours:Ve([Ut.config({}),wt.config({mode:"flow",focusInside:xf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),ft.config({disabled:_,onDisabled:Re=>{xs.getField1(Re).bind(pn.getField).each(ft.disable),xs.getField2(Re).bind(pn.getField).each(ft.disable),xs.getLock(Re).each(ft.disable)},onEnabled:Re=>{xs.getField1(Re).bind(pn.getField).each(ft.enable),xs.getField2(Re).bind(pn.getField).each(ft.enable),xs.getLock(Re).each(ft.enable)}}),Es(()=>s.checkUiComponentContext("mode:design")),Vt("size-input-toolbar-events2",[Te(C,(Re,$e)=>{const Ne=$e.event.isField1,Et=Ne?xs.getField1(Re):xs.getField2(Re),gt=Ne?xs.getField2(Re):xs.getField1(Re),sn=Et.map(it.getValue).getOr(""),kt=gt.map(it.getValue).getOr("");h=B$(sn,kt)}),Te(Y8,Re=>n.onInput(S(Re))),...Ke])])})},kv=(n,s,a)=>pn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...n.toArray(),s],fieldBehaviours:Ve([ft.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{GG(i),pn.getField(i).each(ft.disable)},onEnabled:i=>{pn.getField(i).each(ft.enable)}})])}),Fq=(n,s,a,i)=>{const d=pt(Y),g=S=>TS(S,i),h=n.label.map(S=>pn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Do(s.translate(S))]})),C=pn.parts.field({factory:Fm,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(n.min()),max:String(n.max())},data:n.initValue().toString(),fromInputValue:S=>Ju(S).getOr(n.min()),toInputValue:S=>String(S),inputBehaviours:Ve([ft.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Es(()=>s.checkUiComponentContext("mode:design")),wt.config({mode:"special",onEnter:a,onLeft:(S,x)=>(x.cut(),T.none()),onRight:(S,x)=>(x.cut(),T.none())}),Vt("slider-events",[zd({onSetup:n.onSetup,getApi:g,onBeforeSetup:wt.focusIn},d),S4({getApi:g},d,i),Te(_l(),S=>{n.onInput(g(S))})])])});return kv(h,C,s)},Hq=(n,s,a,i)=>{const d=pt(Y),g=_=>TS(_,i),h=n.label.map(_=>pn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Do(s.translate(_))]})),S={...n.placeholder.map(_=>({placeholder:s.translate(_)})).getOr({})},x=pn.parts.field({factory:Fm,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:S,data:n.initValue(),selectOnFocus:!0,inputBehaviours:Ve([ft.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Es(()=>s.checkUiComponentContext("mode:design")),wt.config({mode:"special",onEnter:a,onLeft:(_,D)=>(D.cut(),T.none()),onRight:(_,D)=>(D.cut(),T.none())}),Vt("input-events",[zd({onSetup:n.onSetup,getApi:_=>$i(_.element,".tox-toolbar").bind(P=>oo(P,"button:enabled")).fold(()=>TS(_,i),P=>TS(_,i,P)),onBeforeSetup:wt.focusIn},d),S4({getApi:g},d,i),Te(_l(),_=>{n.onInput(g(_))})])])});return kv(h,x,s)},n5=(n,s,a)=>{const i=Zt(),g=Ln(n(a,x=>C.findPrimary(x).orThunk(()=>S.findPrimary(x)).map(_=>(Xg(_),!0)),i)),h=Dc(s.commands,x=>x.align==="start"),C=RI(g,h.pass,a,i),S=RI(g,h.fail,a,i);return no([{title:T.none(),label:T.none(),items:C.asSpecs()},{title:T.none(),label:T.none(),items:[g.asSpec()]},{title:T.none(),label:T.none(),items:S.asSpecs()}],x=>x.items.length>0)},o5=(n,s)=>{switch(n.type){case"contextform":return n5(gn(Hq,n),n,s);case"contextsliderform":return n5(gn(Fq,n),n,s);case"contextsizeinputform":return n5(gn(Lq,n),n,s)}},MI={renderContextForm:(n,s,a)=>lT({type:n,uid:st("context-toolbar"),initGroups:o5(s,a),onEscape:T.none,cyclicKeying:!0,providers:a}),buildInitGroups:o5},BI=(n,s,a)=>s.bottom-n.y>=a&&n.bottom-s.y>=a,zq=n=>{const s=n.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=W1(We.fromDom(n.startContainer),n.startOffset).element;return(nm(a)?Fa(a):T.some(a)).filter(uc).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},s5=n=>{const s=n.selection.getRng(),a=zq(s);if(n.inline){const i=vs();return Us(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=lm(We.fromDom(n.getBody()));return Us(i.x+a.left,i.y+a.top,a.width,a.height)}},Vq=(n,s)=>s.filter(a=>Pn(a)&&q(a)).map(lm).getOrThunk(()=>s5(n)),Uq=(n,s,a)=>{const i=Math.max(n.x+a,s.x),d=Math.min(n.right-a,s.right);return{x:i,width:d-i}},kS=(n,s,a,i,d,g)=>{const h=We.fromDom(n.getContainer()),C=oo(h,".tox-editor-header").getOr(h),S=Ds(C),x=S.y>=s.bottom,_=i&&!x;if(n.inline&&_)return{y:Math.max(S.bottom+g,a.y),bottom:a.bottom};if(n.inline&&!_)return{y:a.y,bottom:Math.min(S.y-g,a.bottom)};const D=d==="line"?Ds(h):s;return _?{y:Math.max(S.bottom+g,a.y),bottom:Math.min(D.bottom-g,a.bottom)}:{y:Math.max(D.y+g,a.y),bottom:Math.min(S.y-g,a.bottom)}},r5=(n,s,a,i=0)=>{const d=r0(window),g=Ds(We.fromDom(n.getContentAreaContainer())),h=Kb(n)||Yb(n)||wh(n),{x:C,width:S}=Uq(g,d,i);if(n.inline&&!h)return Us(C,d.y,S,d.height);{const x=s.header.isPositionedAtTop(),{y:_,bottom:D}=kS(n,g,d,x,a,i);return Us(C,_,S,D-_)}},xT=12,NI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},a5={maxHeightFunction:Df(),maxWidthFunction:_p()},c5=(n,s)=>{const a=n.selection.getRng(),i=W1(We.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&un(i.element,s)},PI=(n,s,a)=>{const i=Go(n,"position");Ft(n,"position",s);const d=a(n);return i.each(g=>Ft(n,"position",g)),d},i5=n=>n==="node",Zq=(n,s,a,i,d)=>{const g=s5(n),h=i.lastElement().exists(C=>un(a,C));if(c5(n,a))return h?Ta:Wr;if(h)return PI(s,i.getMode(),()=>BI(g,Ds(s),-20)&&!i.isReposition()?Bl:Ta);{const C=i.getMode()==="fixed"?d.y+vs().top:d.y,S=nr(s)+xT;return C+S<=g.y?Wr:qg}},_v=(n,s,a,i)=>{const d=S=>(x,_,D,P,F)=>{const z=Zq(n,P,S,a,F),G={...x,y:F.y,height:F.height};return{...z(G,_,D,P,F),alwaysFit:!0}},g=S=>i5(i)?[d(S)]:[];return s?{onLtr:S=>[Ms,Ws,Rs,Dr,dr,Fo].concat(g(S)),onRtl:S=>[Ms,Rs,Ws,dr,Dr,Fo].concat(g(S))}:{onLtr:S=>[Fo,Ms,Dr,Ws,dr,Rs].concat(g(S)),onRtl:S=>[Fo,Ms,dr,Rs,Dr,Ws].concat(g(S))}},ET=(n,s,a,i)=>s==="line"?{bubble:Cc(xT,0,NI),layouts:{onLtr:()=>[Wg],onRtl:()=>[U2]},overrides:a5}:{bubble:Cc(0,xT,NI,1/xT),layouts:_v(n,a,i,s),overrides:a5},Av=(n,s)=>{const a=no(s,g=>g.predicate(n.dom)),{pass:i,fail:d}=Dc(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},l5=n=>{if(n.length<=1)return n;{const s=g=>js(n,h=>h.position===g),a=g=>no(n,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=De(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},u5=n=>{if(n.length<=1)return n;{const s=i=>vt(n,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>no(n,d=>d.position===i))}},$I=(n,s,a)=>{const i=Av(n,s);if(i.contextForms.length>0)return T.some({elem:n,toolbars:[i.contextForms[0]]});{const d=Av(n,a);if(d.contextForms.length>0)return T.some({elem:n,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=l5(i.contextToolbars.concat(d.contextToolbars));return T.some({elem:n,toolbars:g})}else return T.none()}},TT=(n,s,a)=>n(s)?T.none():KS(s,i=>{if(uc(i)){const{contextToolbars:d,contextForms:g}=Av(i,a.inNodeScope),h=g.length>0?g:u5(d);return h.length>0?T.some({elem:i,toolbars:h}):T.none()}else return T.none()},n),II=(n,s)=>{const a=We.fromDom(s.getBody()),i=h=>un(h,a),d=h=>!i(h)&&!$(a,h),g=We.fromDom(s.selection.getNode());return d(g)?T.none():$I(g,n.inNodeScope,n.inEditorScope).orThunk(()=>TT(i,g,n))},LI=(n,s)=>{const a={},i=[],d=[],g={},h={},C=(_,D)=>{const P=pi(XU(D));a[_]=P,P.launch.map(F=>{g["form:"+_]={...D.launch,type:F.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(P)}}}),P.scope==="editor"?d.push(P):i.push(P),h[_]=P},S=(_,D)=>{QU(D).each(P=>{P.launch.isSome()&&(g["toolbar:"+_]={...D.launch,type:"button",onAction:()=>{s(P)}}),D.scope==="editor"?d.push(P):i.push(P),h[_]=P})},x=Vn(n);return et(x,_=>{const D=n[_];D.type==="contextform"||D.type==="contextsliderform"||D.type==="contextsizeinputform"?C(_,D):D.type==="contexttoolbar"&&S(_,D)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},_S="tox-pop--transition",Wq=n=>n===bT.ENTER||n===bT.SPACEBAR,FI=(n,s,a,i)=>{const d=i.backstage,g=d.shared,h=Hr().deviceType.isTouch,C=Zt(),S=Zt(),x=Zt(),_=jR({sink:a,onEscape:()=>(n.focus(),RD(n),T.some(!0)),onHide:()=>{RD(n)},onBack:()=>{MD(n)},focusElement:kt=>{n.getBody().contains(kt.dom)?n.focus():ur(kt)}}),D=m(_.sketch),P=()=>{const kt=x.get().getOr("node"),Yt=i5(kt)?1:0;return r5(n,g,kt,Yt)},F=()=>!n.removed&&!(h()&&d.isContextMenuOpen()),z=kt=>ic(lc(kt,C.get(),un),!0),G=()=>{if(F()){const kt=P(),Yt=ic(x.get(),"node")?Vq(n,C.get()):s5(n);return kt.height<=0||!BI(Yt,kt,.01)}else return!0},J=()=>{C.clear(),S.clear(),x.clear(),Qo.hide(D)},W=()=>{if(Qo.isOpen(D)){const kt=D.element;Cn(kt,"display"),G()?Ft(kt,"display","none"):(S.set(0),Qo.reposition(D))}},ee=kt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[kt],behaviours:Ve([wt.config({mode:"acyclic"}),Vt("pop-dialog-wrap-events",[Eo(Yt=>{n.shortcuts.add("ctrl+F9","focus statusbar",()=>wt.focusIn(Yt))}),ji(Yt=>{n.shortcuts.remove("ctrl+F9")})])])}),re=kt=>{const Yt=Re([kt]);xt(D,nI,{forwardContents:ee(Yt)})},fe=Bc(()=>LI(s,re)),be=(kt,Yt)=>vT(n,{buttons:kt,toolbar:Yt.items,allowToolbarGroups:!1},i.backstage,T.some(["form:","toolbar:"])),Ke=(kt,Yt)=>MI.buildInitGroups(kt,Yt),Re=kt=>{const{buttons:Yt}=n.ui.registry.getAll(),ht=fe(),Ae={...Yt,...ht.formNavigators},Ze=i1(n)===el.scrolling?el.scrolling:el.default,Pt=Rt(De(kt,Xt=>Xt.type==="contexttoolbar"?be(Ae,oD(Xt)):Ke(Xt,g.providers)));return lT({type:Ze,uid:st("context-toolbar"),initGroups:Pt,onEscape:T.none,cyclicKeying:!0,providers:g.providers})},$e=(kt,Yt)=>{const ht=kt==="node"?g.anchors.node(Yt):g.anchors.cursor(),Ae=ET(n,kt,h(),{lastElement:C.get,isReposition:()=>ic(S.get(),0),getMode:()=>Aa.getMode(a)});return ro(ht,Ae)},Ne=(kt,Yt)=>{if(sn.cancel(),!F())return;const ht=Re(kt),Ae=kt[0].position,Ze=$e(Ae,Yt);x.set(Ae),S.set(1);const Pt=D.element;Cn(Pt,"display"),z(Yt)||(Yo(Pt,_S),Aa.reset(a,D)),Qo.showWithinBounds(D,ee(ht),{anchor:Ze,transition:{classes:[_S],mode:"placement"}},()=>T.some(P())),Yt.fold(C.clear,C.set),G()&&Ft(Pt,"display","none")},Et=()=>{Ft(D.element,"transition","none"),W(),Cn(D.element,"transition")};let gt=!1;const sn=oi(()=>{if(!(!n.hasFocus()||n.removed||gt))if(Os(D.element,_S))sn.throttle();else{const kt=fe();II(kt,n).fold(J,Yt=>{Ne(Yt.toolbars,T.some(Yt.elem))})}},17);n.on("init",()=>{n.on("remove",J),n.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",W),n.on("click focus SetContent",sn.throttle),n.on("keyup",kt=>{(!Wq(kt.keyCode)||!_.inSubtoolbar())&&sn.throttle()}),n.on(t5,J),n.on(AI,kt=>{const Yt=fe();bt(Yt.lookupTable,kt.toolbarKey).each(ht=>{Ne([ht],fa(kt.target!==n,kt.target)),tI(D)})}),n.on("focusout",kt=>{KE.setEditorTimeout(n,()=>{zs(a.element).isNone()&&zs(D.element).isNone()&&!n.hasFocus()&&J()},0)}),n.on("SwitchMode",()=>{n.mode.isReadOnly()&&J()}),n.on("DisabledStateChange",kt=>{kt.state&&J()}),n.on("ExecCommand",({command:kt})=>{kt.toLowerCase()==="toggleview"&&J()}),n.on("AfterProgressState",kt=>{kt.state?J():n.hasFocus()&&sn.throttle()}),n.on("dragstart",()=>{gt=!0}),n.on("dragend drop",()=>{gt=!1}),n.on("NodeChange",kt=>{_.inSubtoolbar()?Et():zs(D.element).fold(sn.throttle,Y)})})},jq=n=>{et([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{n.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:xc(n,a.cmd),onSetup:oS(n,a.name)})}),n.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Br(n),onAction:xc(n,"JustifyNone")})},HI=(n,s)=>{const a=()=>{const i=s.getOptions(n),d=s.getCurrent(n).map(s.hash),g=Zt();return De(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const S=_=>{_&&(g.on(D=>D.setActive(!1)),g.set(C)),C.setActive(_)};S(ic(d,s.hash(h)));const x=s.watcher(n,h,S);return()=>{g.clear(),x()}},onAction:()=>s.setCurrent(n,h)}))};n.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),n.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},kT=n=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:IN,hash:s=>x3(s,["fixed","relative","empty"]).getOr(s),display:an,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>T.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Br(n),onMenuSetup:Br(n)}),zI=n=>T.from(vN(n)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ie(a),hash:i=>Is(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:d.customCode??null}).unbind,getCurrent:i=>{const d=We.fromDom(i.selection.getNode());return Ii(d,g=>T.some(g).filter(uc).bind(h=>xr(h,"lang").map(S=>{const x=xr(h,"data-mce-lang").getOrUndefined();return{code:S,customCode:x,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=ps();return i.setActive(n.formatter.match("lang",{},void 0,!0)),d.set(n.formatter.formatChanged("lang",i.setActive,!0)),E1(d.clear,Br(n)(i))},onMenuSetup:Br(n)})),Gq=n=>{HI(n,kT(n)),zI(n).each(s=>HI(n,s))},qq=(n,s)=>{JG(n,s),oq(n,s),Ev(n,s),eq(n,s),SI(n,s)},Kq=n=>{n.ui.registry.addContext("editable",()=>n.selection.isEditable()),n.ui.registry.addContext("mode",s=>n.mode.get()===s),n.ui.registry.addContext("any",Ot),n.ui.registry.addContext("formatting",s=>n.formatter.canApply(s)),n.ui.registry.addContext("insert",s=>n.schema.isValidChild(n.selection.getNode().tagName,s))},Yq=n=>Dh(n,"NodeChange",s=>{s.setEnabled(n.queryCommandState("outdent")&&n.selection.isEditable())}),Xq=n=>{n.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Yq(n),onAction:xc(n,"outdent")}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Br(n,()=>n.queryCommandState("indent")),onAction:xc(n,"indent")})},VI=n=>{Xq(n)},d5=(n,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return n.on("PastePlainTextToggle",i),E1(()=>n.off("PastePlainTextToggle",i),Br(n)(a))},UI=n=>{const s=pt(MN(n)),a=()=>n.execCommand("mceTogglePlainTextPaste");n.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:d5(n,s)}),n.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:d5(n,s)})},_T=(n,s)=>()=>{n.execCommand("mceToggleFormat",!1,s)},Jq=n=>{Wm.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:oS(n,s.name),onAction:_T(n,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;n.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:oS(n,a),onAction:_T(n,a),shortcut:i})}},ZI=n=>{Wm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:xc(n,s.action),shortcut:s.shortcut,context:s.context})}),Wm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Br(n),onAction:xc(n,s.action)})})},WI=n=>{Wm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:xc(n,s.action),onSetup:oS(n,s.name)})})},Qq=n=>{Jq(n),ZI(n),WI(n)},rX=n=>{Wm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:xc(n,s.action),context:s.context})}),Wm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Br(n),onAction:xc(n,s.action)})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Br(n),onAction:_T(n,"code")})},eK=n=>{Qq(n),rX(n)},AT=(n,s)=>Dh(n,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!n.mode.isReadOnly()&&n.undoManager[s]())}),tK=n=>{n.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:AT(n,"hasUndo"),onAction:xc(n,"undo")}),n.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:AT(n,"hasRedo"),onAction:xc(n,"redo")})},nK=n=>{n.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:AT(n,"hasUndo"),onAction:xc(n,"undo"),shortcut:"Meta+Z"}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:AT(n,"hasRedo"),onAction:xc(n,"redo"),shortcut:"Meta+Y"})},oK=n=>{tK(n),nK(n)},sK=n=>Dh(n,"VisualAid",s=>{s.setActive(n.hasVisual)}),rK=n=>{n.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:sK(n),onAction:xc(n,"mceToggleVisualAid"),context:"any"})},aK=n=>{n.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:xc(n,"mceToggleVisualAid"),context:"any"})},cK=n=>{aK(n),rK(n)},iK=(n,s)=>{jq(n),eK(n),qq(n,s),oK(n),P8(n),cK(n),VI(n),Gq(n),UI(n),Kq(n)},lK=n=>on(n)?n.split(/[ ,]/):n,jI=n=>s=>s.options.get(n),uK=n=>{const s=n.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:on(a)||sc(a,on)?{value:lK(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},m5=jI("contextmenu_never_use_native"),dK=jI("contextmenu_avoid_overlap"),mK=n=>GI(n).length===0,GI=n=>{const s=n.ui.registry.getAll().contextMenus,a=n.options.get("contextmenu");return n.options.isSet("contextmenu")?a:no(a,i=>Mn(s,i))},AS=(n,s)=>({type:"makeshift",x:n,y:s}),fK=(n,s,a)=>AS(n.x+s,n.y+a),f5=n=>n.type==="longpress"||n.type.indexOf("touch")===0,g5=n=>{if(f5(n)){const s=n.touches[0];return AS(s.pageX,s.pageY)}else return AS(n.pageX,n.pageY)},gK=n=>{if(f5(n)){const s=n.touches[0];return AS(s.clientX,s.clientY)}else return AS(n.clientX,n.clientY)},qI=(n,s)=>{const a=Wb.DOM.getPos(n);return fK(s,a.x,a.y)},hK=(n,s)=>s.type==="contextmenu"||s.type==="longpress"?n.inline?g5(s):qI(n.getContentAreaContainer(),gK(s)):KI(n),KI=n=>({type:"selection",root:We.fromDom(n.selection.getNode())}),pK=n=>({type:"node",node:T.some(We.fromDom(n.selection.getNode())),root:We.fromDom(n.getBody())}),YI=(n,s,a)=>{switch(a){case"node":return pK(n);case"point":return hK(n,s);case"selection":return KI(n)}},bK=(n,s,a,i,d,g)=>{const h=a(),C=YI(n,s,g);rg(h,zu.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:T.none()}).map(S=>{s.preventDefault(),Qo.showMenuAt(d,{anchor:C},{menu:{markers:Hm("normal")},data:S})})},h5={onLtr:()=>[Ms,Ws,Rs,Dr,dr,Fo,Wr,qg,Ea,U0,Of,Tp],onRtl:()=>[Ms,Rs,Ws,dr,Dr,Fo,Wr,qg,Of,Tp,Ea,U0]},vK=12,yK={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},p5=(n,s)=>{const a=n.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return c2(n.getWin(),Eg.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},XI=n=>{const s=n.selection.getRng(),a=()=>{KE.setEditorTimeout(n,()=>{n.selection.setRng(s)},10),g()};n.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};n.on("mousedown",i,!0);const d=()=>g();n.once("longpresscancel",d);const g=()=>{n.off("touchend",a),n.off("longpresscancel",d),n.off("mousedown",i)}},JI=(n,s,a)=>{const i=YI(n,s,a);return{bubble:Cc(0,a==="point"?vK:0,yK),layouts:h5,overrides:{maxWidthFunction:_p(),maxHeightFunction:Df()},...i}},CK=(n,s,a,i,d,g,h)=>{const C=JI(n,s,g);rg(a,zu.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:T.none()}).map(S=>{s.preventDefault();const x=h?jr.HighlightMenuAndItem:jr.HighlightNone;Qo.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Hm("normal"),highlightOnOpen:x},data:S,type:"horizontal"},()=>T.some(r5(n,i.shared,g==="node"?"node":"selection"))),n.dispatch(t5)})},SK=(n,s,a,i,d,g)=>{const h=Hr(),C=h.os.isiOS(),S=h.os.isMacOS(),x=h.os.isAndroid(),_=h.deviceType.isTouch(),D=()=>!(x||C||S&&_),P=()=>{const F=a();CK(n,s,F,i,d,g,D())};if((S||C)&&g!=="node"){const F=()=>{XI(n),P()};p5(n,s)?F():(n.once("selectionchange",F),n.once("touchend",()=>n.off("selectionchange",F)))}else P()},QI=n=>on(n)?n==="|":n.type==="separator",b5={type:"separator"},eL=n=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(on(n))return n;switch(n.type){case"separator":return b5;case"submenu":return{type:"nestedmenuitem",...s(n),getSubmenuItems:()=>{const i=n.getSubmenuItems();return on(i)?i:De(i,eL)}};default:const a=n;return{type:"menuitem",...s(a),onAction:en(a.onAction)}}},OT=(n,s)=>{if(s.length===0)return n;const i=cl(n).filter(d=>!QI(d)).fold(()=>[],d=>[b5]);return n.concat(i).concat(s).concat([b5])},wK=(n,s,a)=>{const i=po(s,(d,g)=>bt(n,g.toLowerCase()).map(h=>{const C=h.update(a);if(on(C)&&ou(ot(C)))return OT(d,C.split(" "));if(Qr(C)&&C.length>0){const S=De(C,eL);return OT(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&QI(i[i.length-1])&&i.pop(),i},tL=(n,s)=>s.ctrlKey&&!m5(n),xK=n=>n.type==="longpress"||Mn(n,"touches"),nL=(n,s)=>!xK(s)&&(s.button!==2||s.target===n.getBody()&&s.pointerType===""),DT=(n,s)=>nL(n,s)?n.selection.getStart(!0):s.target,EK=(n,s)=>{const a=dK(n),i=nL(n,s)?"selection":"point";if(ou(a)){const d=DT(n,s);return Xh(We.fromDom(d),a)?"node":i}else return i},oL=(n,s,a)=>{const d=Hr().deviceType.isTouch,g=m(Qo.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>n.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Ve([Vt("dismissContextMenu",[Te(gd(),(S,x)=>{Bn.close(S),n.focus()})])])})),h=()=>Qo.hide(g),C=S=>{if(m5(n)&&S.preventDefault(),tL(n,S)||mK(n))return;const x=EK(n,S),_=()=>{const P=DT(n,S),F=n.ui.registry.getAll(),z=GI(n);return wK(F.contextMenus,z,P)};(d()?SK:bK)(n,S,_,a,g,x)};n.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");n.on(S,h),n.on("longpress contextmenu",C)})},OS=40,RT=OS/2,sL=(n,s,a,i,d,g)=>n.fold(()=>Zf.snap({sensor:Du(a-RT,i-RT),range:co(d,g),output:Du(T.some(a),T.some(i)),extra:{td:s}}),h=>{const C=a-RT,S=i-RT,x=OS,_=OS,D=h.element.dom.getBoundingClientRect();return Zf.snap({sensor:Du(C,S),range:co(x,_),output:Du(T.some(a-D.width/2),T.some(i-D.height/2)),extra:{td:s}})}),rL=(n,s,a)=>{const i=(d,g)=>d.exists(h=>un(h,g));return{getSnapPoints:n,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},aL=n=>Ln(ar.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ve([Zf.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:n}),Dd.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),TK=(n,s)=>{const a=pt([]),i=pt([]),d=pt(!1),g=Zt(),h=Zt(),C=Re=>{const $e=lm(Re);return sL(F.getOpt(s),Re,$e.x,$e.y,$e.width,$e.height)},S=()=>De(a.get(),Re=>C(Re)),x=Re=>{const $e=lm(Re);return sL(z.getOpt(s),Re,$e.right,$e.bottom,$e.width,$e.height)},_=()=>De(i.get(),Re=>x(Re)),D=rL(S,g,Re=>{h.get().each($e=>{n.dispatch("TableSelectorChange",{start:Re,finish:$e})})}),P=rL(_,h,Re=>{g.get().each($e=>{n.dispatch("TableSelectorChange",{start:$e,finish:Re})})}),F=aL(D),z=aL(P),G=m(F.asSpec()),J=m(z.asSpec()),W=(Re,$e,Ne,Et)=>{const gt=$e.dom.getBoundingClientRect();Cn(Re.element,"display");const sn=Uh(We.fromDom(n.getBody())).dom.innerHeight,kt=Ne(gt),Yt=Et(gt,sn);(kt||Yt)&&Ft(Re.element,"display","none")},ee=(Re,$e,Ne,Et)=>{const gt=Ne($e);Zf.snapTo(Re,gt),W(Re,$e,Yt=>Yt[Et]<0,(Yt,ht)=>Yt[Et]>ht)},re=Re=>ee(G,Re,C,"top"),fe=()=>g.get().each(re),be=Re=>ee(J,Re,x,"bottom"),Ke=()=>h.get().each(be);if(Hr().deviceType.isTouch()){const Re=$e=>De($e,We.fromDom);n.on("TableSelectionChange",$e=>{d.get()||(wd(s,G),wd(s,J),d.set(!0));const Ne=We.fromDom($e.start),Et=We.fromDom($e.finish);g.set(Ne),h.set(Et),T.from($e.otherCells).each(gt=>{a.set(Re(gt.upOrLeftCells)),i.set(Re(gt.downOrRightCells)),re(Ne),be(Et)})}),n.on("ResizeEditor ResizeWindow ScrollContent",()=>{fe(),Ke()}),n.on("TableSelectionClear",()=>{d.get()&&(Ed(G),Ed(J),d.set(!1)),g.clear(),h.clear()})}};var cL=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const kK=n=>n.nodeName==="BR"||!!n.getAttribute("data-mce-bogus")||n.getAttribute("data-mce-type")==="bookmark",_K=(n,s,a)=>{const i=s.delimiter??"›",d=(S,x,_)=>ar.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":_}},components:[Do(S)],action:D=>{n.focus(),n.selection.select(x),n.nodeChanged()},buttonBehaviours:Ve([To.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",x.nodeName.toLowerCase()]),onShow:(D,P)=>{Hc(D.element,P.element)},onHide:D=>{d2(D.element)}})}),Hd.button(a.isDisabled),Es(()=>a.checkUiComponentContext("any"))])}),g=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Do(` ${i} `)]}),h=S=>po(S,(x,_,D)=>{const P=d(_.name,_.element,D);return D===0?x.concat([P]):x.concat([g(),P])},[]),C=S=>{const x=[];let _=S.length;for(;_-- >0;){const D=S[_];if(D.nodeType===1&&!kK(D)){const P=HZ(n,D);if(P.isDefaultPrevented()||x.push({name:P.name,element:D}),P.isPropagationStopped())break}}return x};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ve([wt.config({mode:"flow",selector:"div[role=button]"}),ft.config({disabled:a.isDisabled}),Es(()=>a.checkUiComponentContext("any")),So.config({}),jt.config({}),Vt("elementPathEvents",[Eo((S,x)=>{n.shortcuts.add("alt+F11","focus statusbar elementpath",()=>wt.focusIn(S)),n.on("NodeChange",_=>{const D=C(_.parents),P=D.length>0?h(D):[];jt.set(S,P)})})])]),components:[]}};var qm;(function(n){n[n.None=0]="None",n[n.Both=1]="Both",n[n.Vertical=2]="Vertical"})(qm||(qm={}));const iL=n=>{const s=We.fromDom(n.getContainer()),a=nr(s),i=ra(s);return{height:a,width:i}},AK=(n,s,a,i)=>{const d=CT(i.height+s.top,YA(n),XA(n));return a===qm.Both?{height:d,width:CT(i.width+s.left,KA(n),XE(n))}:{height:d}},lL=(n,s,a)=>{const i=We.fromDom(n.getContainer()),d=iL(n),g=AK(n,s,a,d);return Mo(g,(h,C)=>{Pa(h)&&Ft(i,C,yT(h))}),OD(n),g},OK=n=>{const s=RN(n);return s===!1?qm.None:s==="both"?qm.Both:qm.Vertical},DK=(n,s)=>s===qm.Both?Da.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",n.height,n.width]):Da.translate(["Editor's height: {0} pixels",n.height]),v5=(n,s,a)=>{Nt(n.element,"aria-valuetext",DK(s,a))},MT=(n,s,a,i,d)=>{const h=co(i*20,d*20),C=lL(n,h,a);return v5(s,C,a),T.some(!0)},uL=(n,s)=>{const a=OK(n);if(a===qm.None)return T.none();const i=a===qm.Both?Da.translate("Press the arrow keys to resize the editor."):Da.translate("Press the Up and Down arrow keys to resize the editor."),d=a===qm.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return T.some(tl("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",d],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle",role:"separator"},behaviours:[Zf.config({mode:"mouse",repositionTarget:!1,onDrag:(g,h,C)=>{const S=lL(n,C,a);v5(g,S,a)},blockerClass:"tox-blocker"}),wt.config({mode:"special",onLeft:g=>MT(n,g,a,-1,0),onRight:g=>MT(n,g,a,1,0),onUp:g=>MT(n,g,a,0,-1),onDown:g=>MT(n,g,a,0,1)}),So.config({}),Ut.config({}),To.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")})),Vt("set-aria-valuetext",[Eo(g=>{const h=()=>{v5(g,iL(n),a)};n._skinLoaded?h():n.once("SkinLoaded",h)})])],eventOrder:{[Al()]:["add-focusable","set-aria-valuetext"]}},s.icons))},RK=(n,s)=>{const a=(i,d,g)=>jt.set(i,[Do(s.translate(["{0} "+g,d[g]]))]);return ar.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ve([Hd.button(s.isDisabled),Es(()=>s.checkUiComponentContext("any")),So.config({}),jt.config({}),it.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Vt("wordcount-events",[Tm(i=>{const d=it.getValue(i),g=d.mode==="words"?"characters":"words";it.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Eo(i=>{n.on("wordCountUpdate",d=>{const{mode:g}=it.getValue(i);it.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[Ar()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},dL=(n,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":n.translate(["Build with {0}","TinyMCE"])},innerHtml:n.translate(["Build with {0}",cL.trim()])},behaviours:Ve([Ut.config({})])}]}),i=()=>{const C=hD("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Do(Da.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return n.hasPlugin("wordcount")&&C.push(RK(n,s)),oO(n)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],S=PN(n),x=DN(n),_=oO(n)||n.hasPlugin("wordcount"),D=()=>{const P="tox-statusbar__text-container--flex-start",F="tox-statusbar__text-container--flex-end",z="tox-statusbar__text-container--space-around";if(S){const G="tox-statusbar__text-container-3-cols";return!_&&!x?[G,z]:_&&!x?[G,F]:[G,P]}return[_&&!x?F:P]};return x&&C.push(_K(n,{},s)),S&&C.push(i()),_&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...D()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),S=uL(n,s);return C.concat(S.toArray())})()}},mL=(n,s)=>s.get().getOrDie(`UI for ${n} has not been rendered`),MK=(n,s)=>{const a=n.inline,i=a?Nq:kq,d=Jb(n)?tG:Kj,g=ST(),h=Zt(),C=Zt(),S=Zt(),P=Hr().deviceType.isTouch()?["tox-platform-touch"]:[],F=t4(n),z=i1(n),G=Ln({dom:{tag:"div",classes:["tox-anchorbar"]}}),J=Ln({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),W=()=>g.mainUi.get().map(Ct=>Ct.outerContainer).bind(go.getHeader),ee=()=>Bt.fromOption(g.dialogUi.get().map(Ct=>Ct.sink),"UI has not been rendered"),re=()=>Bt.fromOption(g.popupUi.get().map(Ct=>Ct.sink),"(popup) UI has not been rendered"),fe=g.lazyGetInOuterOrDie("anchor bar",G.getOpt),be=g.lazyGetInOuterOrDie("bottom anchor bar",J.getOpt),Ke=g.lazyGetInOuterOrDie("toolbar",go.getToolbar),Re=g.lazyGetInOuterOrDie("throbber",go.getThrobber),$e=jj({popup:re,dialog:ee},n,fe,be),Ne=()=>{const Ct={attributes:{[Z0]:F?vd.BottomToTop:vd.TopToBottom}},qt=go.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:$e.popup,onEscape:()=>{n.focus()}}),eo=go.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:$e.popup.shared.getSink,providers:$e.popup.shared.providers,onEscape:()=>{n.focus()},onToolbarToggled:Km=>{zZ(n,Km)},type:z,lazyToolbar:Ke,lazyHeader:()=>W().getOrDie("Could not find header element"),...Ct}),Rn=go.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:$e.popup.shared.providers,onEscape:()=>{n.focus()},type:z}),Ja=wh(n),zo=Yb(n),Kc=Kb(n),Nr=NN(n),Ra=Et(Nr),Yc=Ja||zo||Kc,Yl=()=>Ja?[Rn]:zo?[eo]:[],Ph=[Ra,qt];return go.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Yc?[]:["tox-editor-header--empty"]),...Ct},components:Rt([Kc?Ph:[],Yl(),Xb(n)?[]:[G.asSpec()]]),sticky:Jb(n),editor:n,sharedBackstage:$e.popup.shared})},Et=Ct=>go.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:Ct}),gt=()=>{const Ct=go.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),qt=go.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Ct,qt]}},sn=()=>{const Ct=rO(n),qt=un(Lc(),Ct)&&Po(Ct,"display")==="grid",eo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(P),attributes:{...Da.isRtl()?{dir:"rtl"}:{}}},behaviours:Ve([Aa.config({useFixed:()=>d.isDocked(W)})])},Rn={dom:{styles:{width:document.body.clientWidth+"px"}},events:Io([Te(Hg(),Kc=>{Ft(Kc.element,"width",document.body.clientWidth+"px")})])},Ja=m(ro(eo,qt?Rn:{})),zo=K_(Ja);return C.set(zo),{sink:Ja,mothership:zo}},kt=()=>{const Ct={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(P),attributes:{...Da.isRtl()?{dir:"rtl"}:{}}},behaviours:Ve([Aa.config({useFixed:()=>d.isDocked(W),getBounds:()=>s.getPopupSinkBounds()})])},qt=m(Ct),eo=K_(qt);return S.set(eo),{sink:qt,mothership:eo}},Yt=()=>{const Ct=Ne(),qt=gt(),eo=go.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:$e.popup}),Rn=go.parts.viewWrapper({backstage:$e.popup}),Ja=ON(n)&&!a?T.some(dL(n,$e.popup.shared.providers)):T.none(),zo=Rt([F?[]:[Ct],a?[]:[qt],F?[Ct]:[]]),Kc=go.parts.editorContainer({components:Rt([zo,a?[]:[J.asSpec()]])}),Nr=aO(n),Ra={role:"application",...Da.isRtl()?{dir:"rtl"}:{},...Nr?{"aria-hidden":"true"}:{}},Yc=m(go.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(F?["tox-tinymce--toolbar-bottom"]:[]).concat(P),styles:{visibility:"hidden",...Nr?{opacity:"0",border:"0"}:{}},attributes:Ra},components:[Kc,...a?[]:[Rn,...Ja.toArray()],eo],behaviours:Ve([Es(()=>$e.popup.shared.providers.checkUiComponentContext("any")),ft.config({disableClass:"tox-tinymce--disabled"}),wt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Yl=K_(Yc);return h.set(Yl),{mothership:Yl,outerContainer:Yc}},ht=Ct=>{const qt=yT(Dq(n)),eo=yT(Rq(n));return n.inline||(yg("div","width",eo)&&Ft(Ct.element,"width",eo),yg("div","height",qt)?Ft(Ct.element,"height",qt):Ft(Ct.element,"height","400px")),qt},Ae=Ct=>{n.addShortcut("alt+F9","focus menubar",()=>{go.focusMenubar(Ct)}),n.addShortcut("alt+F10","focus toolbar",()=>{go.focusToolbar(Ct)}),n.addCommand("ToggleToolbarDrawer",(qt,eo,Rn)=>{eo!=null&&eo.skipFocus?(Gj("skipFocus"),go.toggleToolbarDrawerWithoutFocusing(Ct)):Rn!=null&&Rn.skip_focus?go.toggleToolbarDrawerWithoutFocusing(Ct):go.toggleToolbarDrawer(Ct)}),n.addQueryStateHandler("ToggleToolbarDrawer",()=>go.isToolbarDrawerToggled(Ct)),n.on("blur",()=>{i1(n)===el.floating&&go.isToolbarDrawerToggled(Ct)&&go.toggleToolbarDrawerWithoutFocusing(Ct)})},Ze=Ct=>{const{mainUi:qt,popupUi:eo,uiMotherships:Rn}=Ct;ns(CN(n),(ag,RS)=>{n.ui.registry.addGroupToolbarButton(RS,ag)});const{buttons:Ja,menuItems:zo,contextToolbars:Kc,sidebars:Nr,views:Ra}=n.ui.registry.getAll(),Yc=BC(n),Yl={menuItems:zo,menus:FN(n),menubar:EN(n),toolbar:Yc.getOrThunk(()=>QE(n)),allowToolbarGroups:z===el.floating,buttons:Ja,sidebar:Nr,views:Ra};Ae(qt.outerContainer),RR(n,qt.mothership,Rn),d.setup(n,$e.popup.shared,W),iK(n,$e.popup),oL(n,$e.popup.shared.getSink,$e.popup),sG(n),lG(n,Re,$e.popup.shared),FI(n,Kc,eo.sink,{backstage:$e.popup}),TK(n,eo.sink);const Ph=n.getElement(),Km=ht(qt.outerContainer),M1={targetNode:Ph,height:Km};return i.render(n,Ct,Yl,$e.popup,M1)},Pt=Ct=>(S.set(Ct.mothership),Ct),Xt=()=>{const Ct=Yt(),qt=sn(),eo=xh(n)?kt():Pt(qt);g.dialogUi.set(qt),g.popupUi.set(eo),g.mainUi.set(Ct);const Rn={popupUi:eo,dialogUi:qt,mainUi:Ct,uiMotherships:g.getUiMotherships()};return Ze(Rn)};return{popups:{backstage:$e.popup,getMothership:()=>mL("popups",S)},dialogs:{backstage:$e.dialog,getMothership:()=>mL("dialogs",C)},renderUI:Xt}},fL=n=>{const s=[],a={};return Mo(n,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Bt.error(s):Bt.value(a)},D1=(n,s,a,i)=>{const d=Ln(vh.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:De(n.items,h=>X$(g,h,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:Ve([wt.config({mode:"acyclic",useTabstopAt:ve(aS)}),Uu.memento(d),_W(d,{postprocess:g=>fL(g).fold(h=>(console.error(h),{}),an)}),Vt("dialog-body-panel",[Te(zi(),(g,h)=>{g.getSystem().broadcastOn([Mh],{newFocus:T.some(h.event.target)})})])])}},gL=(n,s,a)=>De(n,(i,d)=>{jt.set(a,n[d].view());const g=s.dom.getBoundingClientRect();return jt.set(a,[]),g.height}),BK=n=>Qn(cn(n,(s,a)=>s>a?-1:s<a?1:0)),NK=(n,s,a)=>{const i=jv(n).dom,d=$i(n,".tox-dialog-wrap").getOr(n),g=Po(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const C=nr(s),x=s.dom.offsetLeft>=a.dom.offsetLeft+ra(a)?Math.max(nr(a),C):C,_=parseInt(Po(n,"margin-top"),10)||0,D=parseInt(Po(n,"margin-bottom"),10)||0,F=nr(n)+_+D-x;return h-F},PK=(n,s)=>{Qn(n).each(a=>c1.showTab(s,a.value))},hL=(n,s)=>{Ft(n,"height",s+"px"),Ft(n,"flex-basis",s+"px")},BT=(n,s,a)=>{$i(n,'[role="dialog"]').each(i=>{oo(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Ft(s,"height","0"),Ft(s,"flex-basis","0"),Math.min(g,NK(i,s,d)))).each(g=>{hL(s,g)})})})},NT=n=>oo(n,'[role="tabpanel"]'),$K=n=>{const s=Zt();return{extraEvents:[Eo(d=>{const g=d.element;NT(g).each(h=>{Ft(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const S=gL(n,h,C);BK(S).fold(s.clear,s.set)}),BT(g,h,s),Cn(h,"visibility"),PK(n,d),requestAnimationFrame(()=>{BT(g,h,s)})})}),Te(Hg(),d=>{const g=d.element;NT(g).each(h=>{BT(g,h,s)})}),Te(QD,(d,g)=>{const h=d.element;NT(h).each(C=>{const S=Sr(Hs(C));Ft(C,"visibility","hidden");const x=Go(C,"height").map(P=>parseInt(P,10));Cn(C,"height"),Cn(C,"flex-basis");const _=C.dom.getBoundingClientRect().height;x.forall(P=>_>P)?(s.set(_),BT(h,C,s)):x.each(P=>{hL(C,P)}),Cn(C,"visibility"),S.each(ur)})})],selectFirst:!1}},pL="send-data-to-section",bL="send-data-to-view",IK=(n,s,a,i)=>{const d=pt({}),g=_=>{const D=it.getValue(_),P=fL(D).getOr({}),F=d.get(),z=ro(F,P);d.set(z)},h=_=>{const D=d.get();it.setValue(_,D)},C=pt(null),S=De(n.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Do(a.shared.providers.translate(_.title))],view:()=>[vh.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:De(_.items,P=>X$(D,P,s,a,i)),formBehaviours:Ve([wt.config({mode:"acyclic",useTabstopAt:ve(aS)}),Vt("TabView.form.events",[Eo(h),ji(g)]),Oa.config({channels:Pg([{key:pL,value:{onReceive:g}},{key:bL,value:{onReceive:h}}])})])}))]})),x=$K(S);return c1.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,D,P)=>{const F=it.getValue(D);xt(_,X8,{name:F,oldName:C.get()}),C.set(F)},tabs:S,components:[c1.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[lN.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ve([So.config({})])}),c1.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:Ve([Vt("tabpanel",x.extraEvents),wt.config({mode:"acyclic"}),Le.config({find:_=>Qn(c1.getViewItems(_))}),_1(T.none(),_=>(_.getSystem().broadcastOn([pL],{}),d.get()),(_,D)=>{d.set(D),_.getSystem().broadcastOn([bL],{})})])})},vL=(n,s,a,i,d,g)=>{const h=x=>{const _=x.body;switch(_.type){case"tabpanel":return[IK(_,x.initialData,i,g)];default:return[D1(_,x.initialData,i,g)]}},C=(x,_)=>T.some({isTabPanel:()=>_.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(x=>({id:x})).getOr({}),...d?S:{}}},components:[],behaviours:Ve([Uu.childAt(0),Gc.config({channel:`${b$}-${s}`,updateState:C,renderComponents:h,initialData:n})])}},LK=(n,s,a,i,d,g)=>vL(n,s,T.some(a),i,d,g),FK=(n,s,a,i)=>{const d=vL(n,s,T.none(),a,!1,i);return cr.parts.body(d)},yL=n=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[h$(T.none(),{dom:{tag:"iframe",attributes:{src:n.url}},behaviours:Ve([So.config({}),Ut.config({})])})]}],behaviours:Ve([wt.config({mode:"acyclic",useTabstopAt:ve(aS)})])};return cr.parts.body(s)},HK=jb.deviceType.isTouch(),CL=(n,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[n,s]}),SL=(n,s)=>cr.parts.close(ar.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:n,buttonBehaviours:Ve([So.config({})])})),wL=()=>cr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),xL=(n,s)=>cr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Rd(`<p>${FC(s.translate(n))}</p>`)}]}]}),PT=n=>cr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:n}),EL=(n,s)=>[Ad.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:n}),Ad.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],y5=n=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return cr.sketch({lazySink:n.lazySink,onEscape:g=>(n.onEscape(g),T.some(!0)),useTabstopAt:g=>!aS(g),firstTabstop:n.firstTabstop,dom:{tag:"div",classes:[s].concat(n.extraClasses),styles:{position:"relative",...n.extraStyles}},components:[n.header,n.body,...n.footer.toArray()],parts:{blocker:{dom:Rd(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:HK?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Ve([Ut.config({}),Vt("dialog-events",n.dialogEvents.concat([eh(zi(),(g,h)=>{ce.isBlocked(g)?Y():wt.focusIn(g)}),Te(C0(),(g,h)=>{g.getSystem().broadcastOn([Mh],{newFocus:h.event.newFocus})})])),Vt("scroll-lock",[Eo(()=>{mo(Lc(),d)}),ji(()=>{Yo(Lc(),d)})]),...n.extraBehaviours]),eventOrder:{[Ar()]:["dialog-events"],[Al()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[bi()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...n.eventOrder}})},TL=n=>ar.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:Ve([So.config({}),To.config(n.tooltips.getConfig({tooltipText:n.translate("Close")}))]),components:[tl("close",{tag:"span",classes:["tox-icon"]},n.icons)],action:s=>{fn(s,sg)}}),kL=(n,s,a,i)=>{const d=g=>[Do(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:Ve([Gc.config({channel:`${oR}-${s}`,initialData:n,renderComponents:d})])}},_L=()=>({dom:Rd('<div class="tox-dialog__draghandle"></div>')}),zK=(n,s,a,i)=>Ad.sketch({dom:Rd('<div class="tox-dialog__header"></div>'),components:[kL(n,s,T.some(a),i),_L(),TL(i)],containerBehaviours:Ve([Zf.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>aa(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([Bs()],{target:g})}})])}),VK=(n,s,a)=>{const i=cr.parts.title(kL(n,s,T.none(),a)),d=cr.parts.draghandle(_L()),g=cr.parts.close(TL(a)),h=[i].concat(n.draggable?[d]:[]).concat([g]);return Ad.sketch({dom:Rd('<div class="tox-dialog__header"></div>'),components:h})},AL=(n,s,a)=>VK({title:a.shared.providers.translate(n),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),C5=(n,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(n)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Rd('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),S5=(n,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=oo(n().element,".tox-dialog__header").map(g=>nr(g));cr.setBusy(n(),(g,h)=>C5(i.message,h,s,d))},onUnblock:()=>{cr.setIdle(n())}}),OL="tox-dialog--fullscreen",R1="tox-dialog--width-lg",w5="tox-dialog--width-md",$T=n=>{switch(n){case"large":return T.some(R1);case"medium":return T.some(w5);default:return T.none()}},IT=(n,s)=>{const a=We.fromDom(s.element.dom);Os(a,OL)||(Vr(a,[R1,w5]),$T(n).each(i=>mo(a,i)))},DL=(n,s)=>{const a=We.fromDom(n.element.dom),i=s2(a),d=vt(i,g=>g===R1||g===w5).or($T(s));rd(a,[OL,...d.toArray()])},RL=(n,s,a)=>m(y5({...n,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[H4({}),...n.extraBehaviours],onEscape:i=>{fn(i,sg)},dialogEvents:s,eventOrder:{[fd()]:[Gc.name(),Oa.name()],[Al()]:["scroll-lock",Gc.name(),"messages","dialog-events","alloy.base.behaviour"],[bi()]:["alloy.base.behaviour","dialog-events","messages",Gc.name(),"scroll-lock"]}})),x5=(n,s={})=>{const a=i=>{const d=De(i.items,g=>{const h=bt(s,g.name).getOr(pt(!1));return{...g,storage:h}});return{...i,items:d}};return De(n,i=>i.type==="menu"?a(i):i)},ML=n=>po(n,(s,a)=>a.type==="menu"?po(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),BL=(n,s)=>[Qg(zi(),p$),n(k1,(a,i,d,g)=>{Mi(g.element)&&Sr(Hs(g.element)).each(ms),s.onClose(),i.onClose()}),n(sg,(a,i,d,g)=>{i.onCancel(a),fn(g,k1)}),Te(L4,(a,i)=>s.onUnblock()),Te(JD,(a,i)=>s.onBlock(i.event))],UK=(n,s)=>{const a=(d,g)=>Te(d,(h,C)=>{i(h,(S,x)=>{g(n(),S,C.event,h)})}),i=(d,g)=>{Gc.getState(d).get().each(h=>{g(h,d)})};return[...BL(a,s),a(Vu,(d,g,h)=>{g.onAction(d,{name:h.name})})]},NL=(n,s,a)=>{const i=(g,h)=>Te(g,(C,S)=>{d(C,(x,_)=>{h(n(),x,S.event,C)})}),d=(g,h)=>{Gc.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...BL(i,s),i(rS,(g,h)=>h.onSubmit(g)),i(Tc,(g,h,C)=>{h.onChange(g,{name:C.name})}),i(Vu,(g,h,C,S)=>{const x=()=>S.getSystem().isConnected()?wt.focusIn(S):void 0,_=F=>Er(F,"disabled")||xr(F,"aria-disabled").exists(z=>z==="true"),D=Hs(S.element),P=Sr(D);h.onAction(g,{name:C.name,value:C.value}),Sr(D).fold(x,F=>{_(F)||P.exists(z=>$(F,z)&&_(z))?x():a().toOptional().filter(z=>!$(z.element,F)).each(x)})}),i(X8,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),ji(g=>{const h=n();it.setValue(g,h.getData())})]},ZK=(n,s)=>uS(n,n.type,s),WK=(n,s,a)=>vt(s,i=>i.name===a).bind(i=>i.memento.getOpt(n)),jK=(n,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=Dc(a,C=>C.align==="start"),d=(C,S)=>Ad.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:De(S,x=>x.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},PL=(n,s,a)=>{const i=(d,g)=>{const h=De(g.buttons,S=>{const x=Ln(ZK(S,a));return{name:S.name,align:S.align,memento:x}}),C=S=>WK(d,h,S);return T.some({lookupByName:C,footerButtons:h})};return{dom:Rd('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ve([Gc.config({channel:`${v$}-${s}`,initialData:n,updateState:i,renderComponents:jK})])}},GK=(n,s,a)=>PL(n,s,a),$L=(n,s,a)=>cr.parts.footer(PL(n,s,a)),LT=(n,s)=>{if(n.getRoot().getSystem().isConnected()){const i=Le.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return vh.getField(i,s).orThunk(()=>n.getFooter().bind(h=>Gc.getState(h).get()).bind(h=>h.lookupByName(s)))}else return T.none()},qK=(n,s)=>{const a=n.getRoot();return Gc.getState(a).get().map(i=>pi(qo("data",i.dataValidator,s))).getOr(s)},IL=(n,s,a)=>{const i=z=>{const G=n.getRoot();G.getSystem().isConnected()&&z(G)},F={getData:()=>{const z=n.getRoot(),G=z.getSystem().isConnected()?n.getFormWrapper():z,J=it.getValue(G),W=ns(a,ee=>ee.get());return{...J,...W}},setData:z=>{i(G=>{const J=F.getData(),W=ro(J,z),ee=qK(n,W),re=n.getFormWrapper();it.setValue(re,ee),Mo(a,(fe,be)=>{Mn(W,be)&&fe.set(W[be])})})},setEnabled:(z,G)=>{LT(n,z).each(G?ft.enable:ft.disable)},focus:z=>{LT(n,z).each(Ut.focus)},block:z=>{if(!on(z))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(G=>{xt(G,JD,{message:z})})},unblock:()=>{i(z=>{fn(z,L4)})},showTab:z=>{i(G=>{const J=n.getBody();Gc.getState(J).get().exists(ee=>ee.isTabPanel())&&Le.getCurrent(J).each(ee=>{c1.showTab(ee,z)})})},redial:z=>{i(G=>{const J=n.getId(),W=s(z),ee=x5(W.internalDialog.buttons,a);G.getSystem().broadcastOn([`${W4}-${J}`],W),G.getSystem().broadcastOn([`${oR}-${J}`],W.internalDialog),G.getSystem().broadcastOn([`${b$}-${J}`],W.internalDialog),G.getSystem().broadcastOn([`${v$}-${J}`],{...W.internalDialog,buttons:ee}),F.setData(W.initialData)})},close:()=>{i(z=>{fn(z,k1)})},toggleFullscreen:n.toggleFullscreen};return F},KK=(n,s,a)=>{const i=st("dialog"),d=n.internalDialog,g=AL(d.title,i,a),h=pt(d.size),C=re=>LT(W,re),S=$T(h.get()).toArray(),x=(re,fe)=>(h.set(fe.internalDialog.size),IT(fe.internalDialog.size,re),T.some(fe)),_=FK({body:d.body,initialData:d.initialData},i,a,C),D=x5(d.buttons),P=ML(D),F=fa(D.length!==0,$L({buttons:D},i,a)),z=NL(()=>ee,S5(()=>J,a.shared.providers,s),a.shared.getSink),G={id:i,header:g,body:_,footer:F,extraClasses:S,extraBehaviours:[Gc.config({channel:`${W4}-${i}`,updateState:x,initialData:n})],extraStyles:{}},J=RL(G,z,a),W=(()=>{const re=()=>{const be=cr.getBody(J);return Le.getCurrent(be).getOr(be)},fe=()=>{DL(J,h.get())};return{getId:ie(i),getRoot:ie(J),getBody:()=>cr.getBody(J),getFooter:()=>cr.getFooter(J),getFormWrapper:re,toggleFullscreen:fe}})(),ee=IL(W,s.redial,P);return{dialog:J,instanceApi:ee}},DS=(n,s,a,i=!1,d)=>{const g=st("dialog"),h=st("dialog-label"),C=st("dialog-content"),S=n.internalDialog,x=Ne=>LT(Re,Ne),_=pt(S.size),D=$T(_.get()).toArray(),P=(Ne,Et)=>(_.set(Et.internalDialog.size),IT(Et.internalDialog.size,Ne),d(),T.some(Et)),F=Ln(zK({title:S.title,draggable:!0},g,h,a.shared.providers)),z=Ln(LK({body:S.body,initialData:S.initialData},g,C,a,i,x)),G=x5(S.buttons),J=ML(G),W=fa(G.length!==0,Ln(GK({buttons:G},g,a))),ee=NL(()=>$e,{onBlock:Ne=>{ce.block(be,(Et,gt)=>{const sn=F.getOpt(be).map(kt=>nr(kt.element));return C5(Ne.message,gt,a.shared.providers,sn)})},onUnblock:()=>{ce.unblock(be)},onClose:()=>s.closeWindow()},a.shared.getSink),re="tox-dialog-inline",fe=Hr().os,be=m({dom:{tag:"div",classes:["tox-dialog",re,...D],attributes:{role:"dialog",...fe.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":h}}},eventOrder:{[fd()]:[Gc.name(),Oa.name()],[Ar()]:["execute-on-form"],[Al()]:["reflecting","execute-on-form"]},behaviours:Ve([wt.config({mode:"cyclic",onEscape:Ne=>(fn(Ne,k1),T.some(!0)),useTabstopAt:Ne=>!aS(Ne)&&(Oi(Ne)!=="button"||tr(Ne,"disabled")!=="disabled"),firstTabstop:1}),Gc.config({channel:`${W4}-${g}`,updateState:P,initialData:n}),Ut.config({}),Vt("execute-on-form",ee.concat([eh(zi(),(Ne,Et)=>{wt.focusIn(Ne)}),Te(C0(),(Ne,Et)=>{Ne.getSystem().broadcastOn([Mh],{newFocus:Et.event.newFocus})})])),ce.config({getRoot:()=>T.some(be)}),jt.config({}),H4({})]),components:[F.asSpec(),z.asSpec(),...W.map(Ne=>Ne.asSpec()).toArray()]}),Ke=()=>{DL(be,_.get())},Re={getId:ie(g),getRoot:ie(be),getFooter:()=>W.map(Ne=>Ne.get(be)),getBody:()=>z.get(be),getFormWrapper:()=>{const Ne=z.get(be);return Le.getCurrent(Ne).getOr(Ne)},toggleFullscreen:Ke},$e=IL(Re,s.redial,J);return{dialog:be,instanceApi:$e}};var E5=tinymce.util.Tools.resolve("tinymce.util.URI");const YK=n=>{const s=h=>{n.getSystem().isConnected()&&h(n)};return{block:h=>{if(!on(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{xt(C,JD,{message:h})})},unblock:()=>{s(h=>{fn(h,L4)})},close:()=>{s(h=>{fn(h,k1)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([Ht],h)})}}},XK=["insertContent","setContent","execCommand","close","block","unblock"],LL=n=>bo(n)&&XK.indexOf(n.mceAction)!==-1,JK=n=>!LL(n)&&bo(n)&&Mn(n,"mceAction"),QK=(n,s,a)=>{switch(a.mceAction){case"insertContent":n.insertContent(a.content);break;case"setContent":n.setContent(a.content);break;case"execCommand":const i=br(a.ui)?a.ui:!1;n.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},FL=(n,s,a,i)=>{const d=st("dialog"),g=AL(n.title,d,i),h=yL(n),C=n.buttons.bind(re=>re.length===0?T.none():T.some($L({buttons:re},d,i))),S=UK(()=>ee,S5(()=>W,i.shared.providers,s)),x={...n.height.fold(()=>({}),re=>({height:re+"px","max-height":re+"px"})),...n.width.fold(()=>({}),re=>({width:re+"px","max-width":re+"px"}))},_=n.width.isNone()&&n.height.isNone()?["tox-dialog--width-lg"]:[],D=new E5(n.url,{base_uri:new E5(window.location.href)}),P=`${D.protocol}://${D.host}${D.port?":"+D.port:""}`,F=ps(),z=(re,fe)=>T.some(fe),G=[Gc.config({channel:`${W4}-${d}`,updateState:z,initialData:n}),Vt("messages",[Eo(()=>{const re=Kn(We.fromDom(window),"message",fe=>{if(D.isSameOrigin(new E5(fe.raw.origin))){const be=fe.raw.data;LL(be)?QK(a,ee,be):JK(be)&&n.onMessage(ee,be)}});F.set(re)}),ji(F.clear)]),Oa.config({channels:{[Ht]:{onReceive:(re,fe)=>{oo(re.element,"iframe").each(be=>{const Ke=be.dom.contentWindow;Jn(Ke)&&Ke.postMessage(fe,P)})}}}})],W=RL({id:d,header:g,body:h,footer:C,extraClasses:_,extraBehaviours:G,extraStyles:x},S,i),ee=YK(W);return{dialog:W,instanceApi:ee}},eY=n=>{const s=n.shared;return{open:(i,d)=>{const g=()=>{cr.hide(x),d()},h=Ln(uS({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:T.some("primary"),align:"end",enabled:!0,icon:T.none()},"cancel",n)),C=wL(),S=SL(g,s.providers),x=m(y5({lazySink:()=>s.getSink(),header:CL(C,S),body:xL(i,s.providers),footer:T.some(PT(EL([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Te(sg,g)],eventOrder:{}}));cr.show(x);const _=h.get(x);Ut.focus(_)}}},tY=n=>{const s=n.shared;return{open:(i,d)=>{const g=P=>{cr.hide(_),d(P)},h=Ln(uS({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:T.some("primary"),align:"end",enabled:!0,icon:T.none()},"submit",n)),C=uS({context:"any",name:"no",text:"No",primary:!1,buttonType:T.some("secondary"),align:"end",enabled:!0,icon:T.none()},"cancel",n),S=wL(),x=SL(()=>g(!1),s.providers),_=m(y5({lazySink:()=>s.getSink(),header:CL(S,x),body:xL(i,s.providers),footer:T.some(PT(EL([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Te(sg,()=>g(!1)),Te(rS,()=>g(!0))],eventOrder:{}}));cr.show(_);const D=h.get(_);Ut.focus(D)}}},HL=(n,s)=>pi(qo("data",s,n)),zL=n=>Xh(n,".tox-alert-dialog")||Xh(n,".tox-confirm-dialog"),nY=(n,s,a,i)=>s&&a?[]:[Ho.config({contextual:{lazyContext:()=>T.some(Ds(We.fromDom(n.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:i},modes:["top"],lazyViewport:d=>Kf(n,d.element).map(h=>({bounds:l1(h),optScrollEnv:T.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:mc(h.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:T.none()}))})],T5=n=>{const s=n.editor,a=Jb(s),i=eY(n.backstages.dialog),d=tY(n.backstages.dialog),g=(z,G,J)=>{if(!Is(G)){if(G.inline==="toolbar")return x(z,n.backstages.popup.shared.anchors.inlineDialog(),J,G);if(G.inline==="bottom")return _(z,n.backstages.popup.shared.anchors.inlineBottomDialog(),J,G);if(G.inline==="cursor")return x(z,n.backstages.popup.shared.anchors.cursor(),J,G)}return S(z,J)},h=(z,G)=>C(z,G),C=(z,G)=>{const J=W=>{const ee=FL(W,{closeWindow:()=>{cr.hide(ee.dialog),G(ee.instanceApi)}},s,n.backstages.dialog);return cr.show(ee.dialog),ee.instanceApi};return C1.openUrl(J,z)},S=(z,G)=>{const J=(W,ee,re)=>{const fe=ee,Ke=KK({dataValidator:re,initialData:fe,internalDialog:W},{redial:C1.redial,closeWindow:()=>{cr.hide(Ke.dialog),G(Ke.instanceApi)}},n.backstages.dialog);return cr.show(Ke.dialog),Ke.instanceApi.setData(fe),Ke.instanceApi};return C1.open(J,z)},x=(z,G,J,W)=>{const ee=(re,fe,be)=>{const Ke=HL(fe,be),Re=Zt(),$e=n.backstages.popup.shared.header.isPositionedAtTop(),Ne={dataValidator:be,initialData:Ke,internalDialog:re},Et=()=>Re.on(Ae=>{Qo.reposition(Ae),(!a||!$e)&&Ho.refresh(Ae)}),gt=DS(Ne,{redial:C1.redial,closeWindow:()=>{Re.on(Qo.hide),s.off("ResizeEditor",Et),s.off("ScrollWindow",sn),Re.clear(),J(gt.instanceApi)}},n.backstages.popup,W.ariaAttrs,Et),sn=()=>gt.dialog.getSystem().broadcastOn([Bs()],{target:gt.dialog.element}),kt=()=>gt.dialog.getSystem().broadcastOn([xu()],{target:gt.dialog.element}),Yt=m(Qo.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:W.persistent?{event:"doNotDismissYet"}:{},...$e?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ve([Vt("window-manager-inline-events",[Te(gd(),(Ae,Ze)=>{fn(gt.dialog,sg)})]),...nY(s,a,$e,kt)]),isExtraPart:(Ae,Ze)=>zL(Ze)}));Re.set(Yt);const ht=()=>{const Ae=s.inline?Lc():We.fromDom(s.getContainer()),Ze=Ds(Ae);return T.some(Ze)};return Qo.showWithinBounds(Yt,p(gt.dialog),{anchor:G},ht),(!a||!$e)&&(Ho.refresh(Yt),s.on("ResizeEditor",Et)),s.on("ScrollWindow",sn),gt.instanceApi.setData(Ke),wt.focusIn(gt.dialog),gt.instanceApi};return C1.open(ee,z)},_=(z,G,J,W)=>{const ee=(re,fe,be)=>{const Ke=HL(fe,be),Re=Zt(),$e=n.backstages.popup.shared.header.isPositionedAtTop(),Ne={dataValidator:be,initialData:Ke,internalDialog:re},Et=()=>Re.on(Yt=>{Qo.reposition(Yt),Ho.refresh(Yt)}),gt=DS(Ne,{redial:C1.redial,closeWindow:()=>{Re.on(Qo.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Et),Re.clear(),J(gt.instanceApi)}},n.backstages.popup,W.ariaAttrs,Et),sn=m(Qo.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:W.persistent?{event:"doNotDismissYet"}:{},...$e?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Ve([Vt("window-manager-inline-events",[Te(gd(),(Yt,ht)=>{fn(gt.dialog,sg)})]),Ho.config({contextual:{lazyContext:()=>T.some(Ds(We.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Yt=>Kf(s,Yt.element).map(Ae=>({bounds:l1(Ae),optScrollEnv:T.some({currentScrollTop:Ae.element.dom.scrollTop,scrollElmTop:mc(Ae.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:T.none()}))})]),isExtraPart:(Yt,ht)=>zL(ht)}));Re.set(sn);const kt=()=>n.backstages.popup.shared.getSink().toOptional().bind(Yt=>{const ht=Kf(s,Yt.element),Ae=15,Ze=ht.map(Ct=>l1(Ct)).getOr(Ur()),Pt=Ds(We.fromDom(s.getContentAreaContainer())),Xt=id(Pt,Ze);return T.some(Us(Xt.x,Xt.y,Xt.width,Xt.height-Ae))});return Qo.showWithinBounds(sn,p(gt.dialog),{anchor:G},kt),Ho.refresh(sn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Et),gt.instanceApi.setData(Ke),wt.focusIn(gt.dialog),gt.instanceApi};return C1.open(ee,z)};return{open:g,openUrl:h,alert:(z,G)=>{i.open(z,G)},close:z=>{z.close()},confirm:(z,G)=>{d.open(z,G)}}},VL=n=>{gN(n),E8(n),uK(n)};var oY=()=>{fN.add("silver",n=>{VL(n);let s=()=>Ur();const{dialogs:a,popups:i,renderUI:d}=MK(n,{getPopupSinkBounds:()=>s()}),g=()=>{const _=d();return Kf(n,i.getMothership().element).each(P=>{s=()=>l1(P)}),_};CW.register(n,i.backstage.shared);const h=T5({editor:n,backstages:{popup:i.backstage,dialog:a.backstage}}),C=Zt(),S=()=>_V(n,{backstage:i.backstage},i.getMothership(),C),x=()=>oo(We.fromDom(n.getContainer()),".tox-promotion").map(_=>_.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:ie(h),getNotificationManagerImpl:S,getPromotionElement:x}})};oY()})();(function(){var pr=tinymce.util.Tools.resolve("tinymce.ModelManager");const ua=(l,m,p)=>{var y;return p(l,m.prototype)?!0:((y=l.constructor)==null?void 0:y.name)===m.name},Jc=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&ua(l,String,(p,y)=>y.isPrototypeOf(p))?"string":m},ec=l=>m=>Jc(m)===l,Oc=l=>m=>typeof m===l,tc=l=>m=>l===m,Na=ec("string"),on=ec("object"),bo=ec("array"),qu=tc(null),Qr=Oc("boolean"),nc=tc(void 0),br=l=>l==null,Is=l=>!br(l),oc=Oc("function"),Jn=Oc("number"),Dt=()=>{},Pa=(l,m)=>(...p)=>l(m.apply(null,p)),sc=(l,m)=>p=>l(m(p)),Y=l=>()=>l,en=l=>l,Qc=(l,m)=>l===m;function dn(l,...m){return(...p)=>{const y=m.concat(p);return l.apply(null,y)}}const ie=l=>m=>!l(m),an=l=>()=>{throw new Error(l)},es=l=>l(),gn=Y(!1),ve=Y(!0),Ci=class Ci{constructor(m,p){Ie(this,"tag");Ie(this,"value");this.tag=m,this.value=p}static some(m){return new Ci(!0,m)}static none(){return Ci.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?Ci.some(m(this.value)):Ci.none()}bind(m){return this.tag?m(this.value):Ci.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:Ci.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Is(m)?Ci.some(m):Ci.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(Ci,"singletonNone",new Ci(!1));let ne=Ci;const lr=Array.prototype.slice,In=Array.prototype.indexOf,Ot=Array.prototype.push,T=(l,m)=>In.call(l,m),Uo=(l,m)=>T(l,m)>-1,Xe=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];if(m(E,p))return!0}return!1},Zo=(l,m)=>{const p=[];for(let y=0;y<l;y++)p.push(m(y));return p},zt=(l,m)=>{const p=l.length,y=new Array(p);for(let E=0;E<p;E++){const A=l[E];y[E]=m(A,E)}return y},Me=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];m(E,p)}},to=(l,m)=>{for(let p=l.length-1;p>=0;p--){const y=l[p];m(y,p)}},js=(l,m)=>{const p=[],y=[];for(let E=0,A=l.length;E<A;E++){const M=l[E];(m(M,E)?p:y).push(M)}return{pass:p,fail:y}},Ro=(l,m)=>{const p=[];for(let y=0,E=l.length;y<E;y++){const A=l[y];m(A,y)&&p.push(A)}return p},ls=(l,m,p)=>(to(l,(y,E)=>{p=m(p,y,E)}),p),De=(l,m,p)=>(Me(l,(y,E)=>{p=m(p,y,E)}),p),et=(l,m,p)=>{for(let y=0,E=l.length;y<E;y++){const A=l[y];if(m(A,y))return ne.some(A);if(p(A,y))break}return ne.none()},N=(l,m)=>et(l,m,gn),Dc=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];if(m(E,p))return ne.some(p)}return ne.none()},no=l=>{const m=[];for(let p=0,y=l.length;p<y;++p){if(!bo(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);Ot.apply(m,l[p])}return m},ts=(l,m)=>no(zt(l,m)),po=(l,m)=>{for(let p=0,y=l.length;p<y;++p){const E=l[p];if(m(E,p)!==!0)return!1}return!0},ea=l=>{const m=lr.call(l,0);return m.reverse(),m},vt=(l,m)=>{const p={};for(let y=0,E=l.length;y<E;y++){const A=l[y];p[String(A)]=m(A,y)}return p},zn=(l,m)=>{const p=lr.call(l,0);return p.sort(m),p},Rt=(l,m)=>m>=0&&m<l.length?ne.some(l[m]):ne.none(),le=l=>Rt(l,0),ks=l=>Rt(l,l.length-1),_e=(l,m)=>{for(let p=0;p<l.length;p++){const y=m(l[p],p);if(y.isSome())return y}return ne.none()},ge=Object.keys,tn=Object.hasOwnProperty,yn=(l,m)=>{const p=ge(l);for(let y=0,E=p.length;y<E;y++){const A=p[y],M=l[A];m(M,A)}},cn=(l,m)=>Ls(l,(p,y)=>({k:y,v:m(p,y)})),Ls=(l,m)=>{const p={};return yn(l,(y,E)=>{const A=m(y,E);p[A.k]=A.v}),p},Qn=l=>(m,p)=>{l[p]=m},cl=(l,m,p,y)=>{yn(l,(E,A)=>{(m(E,A)?p:y)(E,A)})},Lh=(l,m)=>{const p={};return cl(l,m,Qn(p),Dt),p},ta=(l,m)=>{const p=[];return yn(l,(y,E)=>{p.push(m(y,E))}),p},Vn=l=>ta(l,en),$a=(l,m)=>Mo(l,m)?ne.from(l[m]):ne.none(),Mo=(l,m)=>tn.call(l,m),ns=(l,m)=>Mo(l,m)&&l[m]!==void 0&&l[m]!==null,Ku=l=>{for(const m in l)if(tn.call(l,m))return!1;return!0},Ir={generate:l=>{if(!bo(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return Me(l,(y,E)=>{const A=ge(y);if(A.length!==1)throw new Error("one and only one name per case");const M=A[0],L=y[M];if(p[M]!==void 0)throw new Error("duplicate key detected:"+M);if(M==="cata")throw new Error("cannot have a case named cata (sorry)");if(!bo(L))throw new Error("case arguments must be an array");m.push(M),p[M]=(...Z)=>{const Q=Z.length;if(Q!==L.length)throw new Error("Wrong number of arguments to case "+M+". Expected "+L.length+" ("+L+"), got "+Q);return{fold:(...Fe)=>{if(Fe.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Fe.length);return Fe[E].apply(null,Z)},match:Fe=>{const at=ge(Fe);if(m.length!==at.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+at.join(","));if(!po(m,Le=>Uo(at,Le)))throw new Error("Not all branches were specified when using match. Specified: "+at.join(", ")+`
Required: `+m.join(", "));return Fe[M].apply(null,Z)},log:Fe=>{console.log(Fe,{constructors:m,constructor:M,params:Z})}}}}),p}},us=l=>{let m=l;return{get:()=>m,set:E=>{m=E}}},Fs=l=>l.slice(0).sort(),Bo=(l,m)=>{throw new Error("All required keys ("+Fs(l).join(", ")+") were not specified. Specified keys were: "+Fs(m).join(", ")+".")},rc=l=>{throw new Error("Unsupported keys for object: "+Fs(l).join(", "))},ac=(l,m)=>{if(!bo(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Me(m,p=>{if(!Na(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},bt=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Fs(l).join(", ")+") were not.")},Mn=l=>{const m=Fs(l);N(m,(y,E)=>E<m.length-1&&y===m[E+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},hn=(l,m)=>cc(l,m,{validate:oc,label:"function"}),cc=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return ac("required",m),Mn(m),y=>{const E=ge(y);po(m,L=>Uo(E,L))||Bo(m,E),l(m,E);const M=Ro(m,L=>!p.validate(y[L],L));return M.length>0&&bt(M,p.label),y}},da=(l,m)=>{const p=Ro(m,y=>!Uo(l,y));p.length>0&&rc(p)},pt=l=>hn(da,l),il=l=>{const m=A=>A(l),p=Y(l),y=()=>E,E={tag:!0,inner:l,fold:(A,M)=>M(l),isValue:ve,isError:gn,map:A=>Rc.value(A(l)),mapError:y,bind:m,exists:m,forall:m,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:A=>{A(l)},toOptional:()=>ne.some(l)};return E},Qm=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(y,E)=>y(l),isValue:gn,isError:ve,map:m,mapError:y=>Rc.error(y(l)),bind:m,exists:gn,forall:ve,getOr:en,or:en,getOrThunk:es,orThunk:es,getOrDie:an(String(l)),each:Dt,toOptional:ne.none};return p},Rc={value:il,error:Qm,fromOption:(l,m)=>l.fold(()=>Qm(m),il)},Ia=typeof window<"u"?window:Function("return this;")(),vo=l=>{const m=l.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},Kt=(l,m,p=Qc)=>l.exists(y=>p(y,m)),Wo=l=>{const m=[],p=y=>{m.push(y)};for(let y=0;y<l.length;y++)l[y].each(p);return m},ef=(l,m)=>l!=null?m(l):ne.none(),Yu=(l,m)=>l?ne.some(m):ne.none(),ei=(l,m)=>{let p=m??Ia;for(let y=0;y<l.length&&p!==void 0&&p!==null;++y)p=p[l[y]];return p},Bt=(l,m)=>{const p=l.split(".");return ei(p,m)},ma=l=>{const m=us(ne.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(ne.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:L=>{p(),m.set(ne.some(L))}}},ll=()=>{const l=ma(Dt);return{...l,on:p=>l.get().each(p)}},Fh=(l,m)=>l.substring(m),vr=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,tf=(l,m)=>Wd(l,m)?Fh(l,m.length):l,Ko=(l,m,p=0,y)=>{const E=l.indexOf(m,p);return E!==-1?nc(y)?!0:E+m.length<=y:!1},Wd=(l,m)=>vr(l,m,0),jd=(l,m)=>vr(l,m,l.length-m.length),_i=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),_s=l=>l.length>0,nu=l=>{const m=parseFloat(l);return isNaN(m)?ne.none():ne.some(m)},dg=(l,m)=>{let p=null;const y=()=>{qu(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...A)=>{y(),p=setTimeout(()=>{p=null,l.apply(null,A)},m)}}},st=l=>{let m=!1,p;return(...y)=>(m||(m=!0,p=l.apply(null,y)),p)},La=" ",Gd=["tfoot","thead","tbody","colgroup"],qd=l=>Uo(Gd,l),ro=(l,m)=>({rows:l,columns:m}),Kd=(l,m)=>({row:l,column:m}),ic=(l,m,p)=>({element:l,rowspan:m,colspan:p}),Cs=(l,m,p,y)=>({element:l,rowspan:m,colspan:p,isNew:y}),Ai=(l,m,p,y,E,A)=>({element:l,rowspan:m,colspan:p,row:y,column:E,isLocked:A}),Yd=(l,m,p)=>({element:l,cells:m,section:p}),lc=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),yr=(l,m,p)=>({element:l,isNew:m,isLocked:p}),ti=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),fa=(l,m,p,y)=>({startRow:l,startCol:m,finishRow:p,finishCol:y}),z1=(l,m,p)=>({element:l,colspan:m,column:p}),mg=(l,m)=>({element:l,columns:m}),Mc=(l,m,p)=>{const y=l.cells,E=y.slice(0,m),A=y.slice(m),M=E.concat(p).concat(A);return fg(l,M)},dl=(l,m,p)=>Mc(l,m,[p]),ml=(l,m,p)=>{const y=l.cells;y[m]=p},fg=(l,m)=>ti(l.element,m,l.section,l.isNew),ps=(l,m)=>{const p=l.cells,y=zt(p,m);return ti(l.element,y,l.section,l.isNew)},Zt=(l,m)=>l.cells[m],Lr=(l,m)=>Zt(l,m).element,Cr=l=>l.cells.length,os=l=>{const m=js(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},nf=(l,m,p)=>{const y=zt(l.cells,p);return ti(m(l.element),y,l.section,!0)},Xd=(l,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,l),new Error(E)}return ni(y.childNodes[0])},jo=(l,m)=>{const y=(m||document).createElement(l);return ni(y)},Xu=(l,m)=>{const y=(m||document).createTextNode(l);return ni(y)},ni=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},ot={fromHtml:Xd,fromTag:jo,fromText:Xu,fromDom:ni,fromPoint:(l,m,p)=>ne.from(l.dom.elementFromPoint(m,p)).map(ni)},ou=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},ga=(l,m)=>{const p=l.document.createRange();return Ju(p,m),p},Ju=(l,m)=>l.selectNodeContents(m.dom),ss=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,y)=>{l.setStart(p.dom,y)},p=>{l.setStartAfter(p.dom)})},zh=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,y)=>{l.setEnd(p.dom,y)},p=>{l.setEndAfter(p.dom)})},oi=(l,m,p)=>{const y=l.document.createRange();return ss(y,m),zh(y,p),y},Bc=(l,m,p,y,E)=>{const A=l.document.createRange();return A.setStart(m.dom,p),A.setEnd(y.dom,E),A},gg=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),hg=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?ne.some(p).map(gg):ne.none()},fl=Ir.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),pg=(l,m,p)=>m(ot.fromDom(p.startContainer),p.startOffset,ot.fromDom(p.endContainer),p.endOffset),Jd=(l,m)=>m.match({domRange:p=>({ltr:Y(p),rtl:ne.none}),relative:(p,y)=>({ltr:st(()=>oi(l,p,y)),rtl:st(()=>ne.some(oi(l,y,p)))}),exact:(p,y,E,A)=>({ltr:st(()=>Bc(l,p,y,E,A)),rtl:st(()=>ne.some(Bc(l,E,A,p,y)))})}),gl=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(E=>E.collapsed===!1).map(E=>fl.rtl(ot.fromDom(E.endContainer),E.endOffset,ot.fromDom(E.startContainer),E.startOffset)).getOrThunk(()=>pg(l,fl.ltr,p)):pg(l,fl.ltr,p)},Qu=(l,m)=>{const p=Jd(l,m);return gl(l,p)},We=(l,m)=>Qu(l,m).match({ltr:(y,E,A,M)=>{const L=l.document.createRange();return L.setStart(y.dom,E),L.setEnd(A.dom,M),L},rtl:(y,E,A,M)=>{const L=l.document.createRange();return L.setStart(A.dom,M),L.setEnd(y.dom,E),L}});fl.ltr,fl.rtl;const Qd=8,of=9,si=11,su=1,em=3,ha=(l,m)=>{const p=l.dom;if(p.nodeType!==su)return!1;{const y=p;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},ed=l=>l.nodeType!==su&&l.nodeType!==of&&l.nodeType!==si||l.childElementCount===0,ru=(l,m)=>{const p=m===void 0?document:m.dom;return ed(p)?[]:zt(p.querySelectorAll(l),ot.fromDom)},hl=(l,m)=>{const p=m===void 0?document:m.dom;return ed(p)?ne.none():ne.from(p.querySelector(l)).map(ot.fromDom)},ao=(l,m)=>l.dom===m.dom,tm=(l,m)=>{const p=l.dom,y=m.dom;return p===y?!1:p.contains(y)},Fr=ha,B=(l,m,p,y)=>{const E=l.isiOS()&&/ipad/i.test(p)===!0,A=l.isiOS()&&!E,M=l.isiOS()||l.isAndroid(),L=M||y("(pointer:coarse)"),Z=E||!A&&M&&y("(min-device-width:768px)"),Q=A||M&&!Z,ce=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,Fe=!Q&&!Z&&!ce;return{isiPad:Y(E),isiPhone:Y(A),isTablet:Y(Z),isPhone:Y(Q),isTouch:Y(L),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Y(ce),isDesktop:Y(Fe)}},V=(l,m)=>{for(let p=0;p<l.length;p++){const y=l[p];if(y.test(m))return y}},X=(l,m)=>{const p=V(l,m);if(!p)return{major:0,minor:0};const y=E=>Number(m.replace(p,"$"+E));return ln(y(1),y(2))},ye=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?yt():X(l,p)},yt=()=>ln(0,0),ln=(l,m)=>({major:l,minor:m}),Oo={nu:ln,detect:ye,unknown:yt},pa=(l,m)=>_e(m.brands,p=>{const y=p.brand.toLowerCase();return N(l,E=>{var A;return y===((A=E.brand)==null?void 0:A.toLowerCase())}).map(E=>({current:E.name,version:Oo.nu(parseInt(p.version,10),0)}))}),Nc=(l,m)=>{const p=String(m).toLowerCase();return N(l,y=>y.search(p))},un=(l,m)=>Nc(l,m).map(p=>{const y=Oo.detect(p.versionRegexes,m);return{current:p.name,version:y}}),$=(l,m)=>Nc(l,m).map(p=>{const y=Oo.detect(p.versionRegexes,m);return{current:p.name,version:y}}),K=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,te=l=>m=>Ko(m,l),we=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Ko(l,"edge/")&&Ko(l,"chrome")&&Ko(l,"safari")&&Ko(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,K],search:l=>Ko(l,"chrome")&&!Ko(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Ko(l,"msie")||Ko(l,"trident")},{name:"Opera",versionRegexes:[K,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:te("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:te("firefox")},{name:"Safari",versionRegexes:[K,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Ko(l,"safari")||Ko(l,"mobile/"))&&Ko(l,"applewebkit")}],Ue=[{name:"Windows",search:te("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Ko(l,"iphone")||Ko(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:te("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:te("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:te("linux"),versionRegexes:[]},{name:"Solaris",search:te("sunos"),versionRegexes:[]},{name:"FreeBSD",search:te("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:te("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],dt={browsers:Y(we),oses:Y(Ue)},nn="Edge",Gn="Chromium",Un="IE",As="Opera",Ss="Firefox",sf="Safari",rf=()=>ri({current:void 0,version:Oo.unknown()}),ri=l=>{const m=l.current,p=l.version,y=E=>()=>m===E;return{current:m,version:p,isEdge:y(nn),isChromium:y(Gn),isIE:y(Un),isOpera:y(As),isFirefox:y(Ss),isSafari:y(sf)}},V1={unknown:rf,nu:ri},$S="Windows",Iv="iOS",I5="Android",YT="Linux",XT="macOS",JT="Solaris",au="FreeBSD",QT="ChromeOS",e3=()=>Lv({current:void 0,version:Oo.unknown()}),Lv=l=>{const m=l.current,p=l.version,y=E=>()=>m===E;return{current:m,version:p,isWindows:y($S),isiOS:y(Iv),isAndroid:y(I5),isMacOS:y(XT),isLinux:y(YT),isSolaris:y(JT),isFreeBSD:y(au),isChromeOS:y(QT)}},Fv={unknown:e3,nu:Lv},t3={detect:(l,m,p)=>{const y=dt.browsers(),E=dt.oses(),A=m.bind(Z=>pa(y,Z)).orThunk(()=>un(y,l)).fold(V1.unknown,V1.nu),M=$(E,l).fold(Fv.unknown,Fv.nu),L=B(M,A,l,p);return{browser:A,os:M,deviceType:L}}},Hv=l=>window.matchMedia(l).matches;let cu=st(()=>t3.detect(window.navigator.userAgent,ne.from(window.navigator.userAgentData),Hv));const pl=()=>cu(),af=(l,m)=>Bt(l,m),n3=(l,m)=>{const p=af(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},Nn=Object.getPrototypeOf,o3=l=>n3("HTMLElement",l),zv=l=>{const m=Bt("ownerDocument.defaultView",l);return on(l)&&(o3(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Nn(l).constructor.name))},bs=l=>l.dom.nodeName.toLowerCase(),s3=l=>l.dom.nodeType,U1=l=>m=>s3(m)===l,r3=l=>s3(l)===Qd||bs(l)==="#comment",Vv=l=>Hr(l)&&zv(l.dom),Hr=U1(su),bg=U1(em),a3=U1(of),He=U1(si),Pc=l=>m=>Hr(m)&&bs(m)===l,Z1=l=>ot.fromDom(l.dom.ownerDocument),Oi=l=>a3(l)?l:Z1(l),Vh=l=>ot.fromDom(Oi(l).dom.documentElement),Uv=l=>ot.fromDom(Oi(l).dom.defaultView),q=l=>ne.from(l.dom.parentNode).map(ot.fromDom),uc=l=>ne.from(l.dom.parentElement).map(ot.fromDom),nm=(l,m)=>{const p=oc(m)?m:gn;let y=l.dom;const E=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const A=y.parentNode,M=ot.fromDom(A);if(E.push(M),p(M)===!0)break;y=A}return E},Zv=l=>ne.from(l.dom.previousSibling).map(ot.fromDom),vg=l=>ne.from(l.dom.nextSibling).map(ot.fromDom),na=l=>zt(l.dom.childNodes,ot.fromDom),dc=(l,m)=>{const p=l.dom.childNodes;return ne.from(p[m]).map(ot.fromDom)},Wv=l=>dc(l,0),jv=(l,m,p,y)=>{const A=Z1(l).dom.createRange();return A.setStart(l.dom,m),A.setEnd(p.dom,y),A},Uh=(l,m,p,y)=>{const E=jv(l,m,p,y),A=ao(l,p)&&m===y;return E.collapsed&&!A},Fa=l=>He(l)&&Is(l.dom.host),Gv=l=>ot.fromDom(l.dom.getRootNode()),iu=l=>Fa(l)?l:ot.fromDom(Oi(l).dom.body),Zh=l=>{const m=Gv(l);return Fa(m)?ne.some(m):ne.none()},qv=l=>ot.fromDom(l.dom.host),$c=l=>{if(Is(l.target)){const m=ot.fromDom(l.target);if(Hr(m)&&Kv(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return le(p)}}return ne.from(l.target)},Kv=l=>Is(l.dom.shadowRoot),bl=(l,m,p,y,E,A,M)=>({target:l,x:m,y:p,stop:y,prevent:E,kill:A,raw:M}),om=l=>{const m=ot.fromDom($c(l).getOr(l.target)),p=()=>l.stopPropagation(),y=()=>l.preventDefault(),E=Pa(y,p);return bl(m,l.clientX,l.clientY,p,y,E,l)},xn=(l,m)=>p=>{l(p)&&m(om(p))},ai=(l,m,p,y,E)=>{const A=xn(p,y);return l.dom.addEventListener(m,A,E),{unbind:dn(IS,l,m,A,E)}},W1=(l,m,p,y)=>ai(l,m,p,y,!1),IS=(l,m,p,y)=>{l.dom.removeEventListener(m,p,y)},mn=ve,td=(l,m,p)=>W1(l,m,mn,p),Hs=om,vl=(l,m)=>{q(l).each(y=>{y.dom.insertBefore(m.dom,l.dom)})},yl=(l,m)=>{vg(l).fold(()=>{q(l).each(E=>{qn(E,m)})},y=>{vl(y,m)})},ds=(l,m)=>{Wv(l).fold(()=>{qn(l,m)},y=>{l.dom.insertBefore(m.dom,y.dom)})},qn=(l,m)=>{l.dom.appendChild(m.dom)},c3=(l,m,p)=>{dc(l,p).fold(()=>{qn(l,m)},y=>{vl(y,m)})},i3=(l,m)=>{vl(l,m),qn(m,l)},lu=(l,m)=>{Me(m,(p,y)=>{const E=y===0?l:m[y-1];yl(E,p)})},Di=(l,m)=>{Me(m,p=>{qn(l,p)})},Cl=(l,m,p)=>{if(Na(p)||Qr(p)||Jn(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},Gs=(l,m,p)=>{Cl(l.dom,m,p)},nd=(l,m)=>{const p=l.dom;yn(m,(y,E)=>{Cl(p,E,y)})},Ic=(l,m)=>{yn(m,(p,y)=>{p.fold(()=>{Kn(l,y)},E=>{Cl(l.dom,y,E)})})},Ri=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},ci=(l,m)=>ne.from(Ri(l,m)),Kn=(l,m)=>{l.dom.removeAttribute(m)},ii=l=>De(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),uu=l=>{l.dom.textContent="",Me(na(l),m=>{oa(m)})},oa=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},ur=l=>{const m=na(l);m.length>0&&lu(l,m),oa(l)},ms=(l,m)=>ot.fromDom(l.dom.cloneNode(m)),Mi=l=>ms(l,!1),Sr=l=>ms(l,!0),zs=(l,m)=>{const p=ot.fromTag(m),y=ii(l);return nd(p,y),p},cf=(l,m)=>{const p=zs(l,m),y=na(Sr(l));return Di(p,y),p},LS=(l,m)=>{const p=zs(l,m);yl(l,p);const y=na(l);return Di(p,y),oa(l),p},Yv=(l,m)=>{const y=document.createElement("div");return y.innerHTML=l,na(ot.fromDom(y))},wr=l=>zt(l,ot.fromDom),Xv=l=>l.dom.innerHTML,FS=l=>{const m=ot.fromTag("div"),p=ot.fromDom(l.dom.cloneNode(!0));return qn(m,p),Xv(m)},lf=l=>l.style!==void 0&&oc(l.style.getPropertyValue),Nt=l=>{const m=bg(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return Zh(ot.fromDom(m)).fold(()=>p.body.contains(m),sc(Nt,qv))},Jv=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return ot.fromDom(m)},tr=(l,m,p)=>{if(!Na(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);lf(l)&&l.style.setProperty(m,p)},xr=(l,m)=>{lf(l)&&l.style.removeProperty(m)},Er=(l,m,p)=>{const y=l.dom;tr(y,m,p)},No=(l,m)=>{const p=l.dom;yn(m,(y,E)=>{tr(p,E,y)})},uf=(l,m)=>{const p=l.dom,E=window.getComputedStyle(p).getPropertyValue(m);return E===""&&!Nt(l)?j1(p,m):E},j1=(l,m)=>lf(l)?l.style.getPropertyValue(m):"",Bi=(l,m)=>{const p=l.dom,y=j1(p,m);return ne.from(y).filter(E=>E.length>0)},Sl=(l,m)=>{const p=l.dom;xr(p,m),Kt(ci(l,"style").map(_i),"")&&Kn(l,"style")},Qv=(l,m)=>{const p=l.dom,y=m.dom;lf(p)&&lf(y)&&(y.style.cssText=p.style.cssText)},G1=(l,m)=>{const p=(L,Z)=>{if(!Jn(Z)&&!Z.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+Z);const Q=L.dom;lf(Q)&&(Q.style[l]=Z+"px")},y=L=>{const Z=m(L);if(Z<=0||Z===null){const Q=uf(L,l);return parseFloat(Q)||0}return Z},E=y,A=(L,Z)=>De(Z,(Q,ce)=>{const Fe=uf(L,ce),at=Fe===void 0?0:parseInt(Fe,10);return isNaN(at)?Q:Q+at},0);return{set:p,get:y,getOuter:E,aggregate:A,max:(L,Z,Q)=>{const ce=A(L,Q);return Z>ce?Z-ce:0}}},q1=(l,m)=>nu(l).getOr(m),od=(l,m,p)=>q1(uf(l,m),p),wl=(l,m,p,y)=>{const E=od(l,`padding-${p}`,0),A=od(l,`padding-${y}`,0),M=od(l,`border-${p}-width`,0),L=od(l,`border-${y}-width`,0);return m-E-A-M-L},l3=(l,m)=>{const p=l.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return wl(l,y,"left","right")},zr=l=>od(l,"height",l.dom.offsetHeight),xl=l=>od(l,"width",l.dom.offsetWidth),du=l=>l3(l),Pn=G1("height",l=>{const m=l.dom;return Nt(l)?m.getBoundingClientRect().height:m.offsetHeight}),Lc=l=>Pn.get(l),HS=l=>Pn.getOuter(l),K1=zr,li=G1("width",l=>{const m=l.dom;return Nt(l)?m.getBoundingClientRect().width:m.offsetWidth}),Ft=l=>li.get(l),rs=l=>li.getOuter(l),Tr=du,Po=xl,Ni=(l,m)=>({left:l,top:m,translate:(y,E)=>Ni(l+y,m+E)}),Go=Ni,Vs=l=>{const m=l.getBoundingClientRect();return Go(m.left,m.top)},yg=(l,m)=>l!==void 0?l:m!==void 0?m:0,Cn=l=>{const m=l.dom.ownerDocument,p=m.body,y=m.defaultView,E=m.documentElement;if(p===l.dom)return Go(p.offsetLeft,p.offsetTop);const A=yg(y==null?void 0:y.pageYOffset,E.scrollTop),M=yg(y==null?void 0:y.pageXOffset,E.scrollLeft),L=yg(E.clientTop,p.clientTop),Z=yg(E.clientLeft,p.clientLeft);return Pi(l).translate(M-Z,A-L)},Pi=l=>{const m=l.dom,y=m.ownerDocument.body;return y===m?Go(y.offsetLeft,y.offsetTop):Nt(l)?Vs(m):Go(0,0)},xo=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return Go(p,y)},ui=(l,m,p)=>{const E=(p!==void 0?p.dom:document).defaultView;E&&E.scrollBy(l,m)},sa=((l,m)=>{const p=A=>{if(!l(A))throw new Error("Can only get "+m+" value of a "+m+" node");return y(A).getOr("")},y=A=>l(A)?ne.from(A.dom.nodeValue):ne.none();return{get:p,getOption:y,set:(A,M)=>{if(!l(A))throw new Error("Can only set raw "+m+" value of a "+m+" node");A.dom.nodeValue=M}}})(bg,"text"),Wh=l=>sa.get(l),zS=l=>sa.getOption(l),jh=(l,m)=>sa.set(l,m),Gh=(l,m)=>p=>df(p)==="rtl"?m:l,df=l=>uf(l,"direction")==="rtl"?"rtl":"ltr",ra=(l,m)=>{const p=Ri(l,m);return p===void 0||p===""?[]:p.split(" ")},sd=(l,m,p)=>{const E=ra(l,m).concat([p]);return Gs(l,m,E.join(" ")),!0},u3=(l,m,p)=>{const y=Ro(ra(l,m),E=>E!==p);return y.length>0?Gs(l,m,y.join(" ")):Kn(l,m),!1};var mf=(l,m,p,y,E)=>l(p,y)?ne.some(p):oc(E)&&E(p)?ne.none():m(p,y,E);const co=(l,m,p)=>{let y=l.dom;const E=oc(p)?p:gn;for(;y.parentNode;){y=y.parentNode;const A=ot.fromDom(y);if(m(A))return ne.some(A);if(E(A))break}return ne.none()},Y1=(l,m,p)=>mf((E,A)=>A(E),co,l,m,p),X1=(l,m)=>{const p=E=>m(ot.fromDom(E));return N(l.dom.childNodes,p).map(ot.fromDom)},mc=(l,m)=>{const p=y=>{for(let E=0;E<y.childNodes.length;E++){const A=ot.fromDom(y.childNodes[E]);if(m(A))return ne.some(A);const M=p(y.childNodes[E]);if(M.isSome())return M}return ne.none()};return p(l.dom)},di=(l,m,p)=>co(l,y=>ha(y,m),p),vs=(l,m)=>X1(l,p=>ha(p,m)),sm=(l,m)=>hl(m,l),qs=(l,m,p)=>mf((E,A)=>ha(E,A),di,l,m,p),Cg=l=>l.dom.classList!==void 0,J1=l=>ra(l,"class"),e2=(l,m)=>sd(l,"class",m),F5=(l,m)=>u3(l,"class",m),El=(l,m)=>{Cg(l)?l.dom.classList.add(m):e2(l,m)},d3=l=>{(Cg(l)?l.dom.classList:J1(l)).length===0&&Kn(l,"class")},VS=(l,m)=>{Cg(l)?l.dom.classList.remove(m):F5(l,m),d3(l)},Tl=(l,m)=>Cg(l)&&l.dom.classList.contains(m),US=(l,m)=>{Me(m,p=>{VS(l,p)})},Sg=l=>qs(l,"[contenteditable]"),qh=(l,m=!1)=>Nt(l)?l.dom.isContentEditable:Sg(l).fold(Y(m),p=>Kh(p)==="true"),Kh=l=>l.dom.contentEditable,t2=l=>m=>{El(m,l)},ZS=l=>m=>{US(m,l)},$i=(l,m,p)=>Ro(nm(l,p),m),m3=(l,m)=>Ro(na(l),m),rm=(l,m)=>{let p=[];return Me(na(l),y=>{m(y)&&(p=p.concat([y])),p=p.concat(rm(y,m))}),p},oo=(l,m,p)=>$i(l,y=>ha(y,m),p),aa=(l,m)=>m3(l,p=>ha(p,m)),mu=(l,m)=>ru(m,l),n2=(l,m,p,y)=>({parent:l,children:m,element:p,index:y}),am=l=>q(l).bind(m=>{const p=na(m);return o2(p,l).map(y=>n2(m,p,l,y))}),o2=(l,m)=>Dc(l,dn(ao,m)),WS=(l,m,p)=>co(l,m,p).isSome(),fu=l=>bs(l)==="img"?1:zS(l).fold(()=>na(l).length,m=>m.length),gu=l=>zS(l).filter(m=>m.trim().length!==0||m.indexOf(La)>-1).isSome(),mo=l=>Vv(l)&&Ri(l,"contenteditable")==="false",jS=["img","br"],Yo=l=>gu(l)||Uo(jS,bs(l))||mo(l),Yh=l=>mc(l,Yo),Os=l=>hu(l,Yo),hu=(l,m)=>{const p=y=>{const E=na(y);for(let A=E.length-1;A>=0;A--){const M=E[A];if(m(M))return ne.some(M);const L=p(M);if(L.isSome())return L}return ne.none()};return p(l)},rd={create:(l,m,p,y)=>({start:l,soffset:m,finish:p,foffset:y})},Q1=Ir.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),GS=(l,m,p,y)=>l.fold(m,p,y),s2=l=>l.fold(en,en,en),f3=Q1.before,Fc=Q1.on,cm=Q1.after,or={before:f3,on:Fc,after:cm,cata:GS,getStart:s2},kr=Ir.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),e0=l=>kr.exact(l.start,l.soffset,l.finish,l.foffset),Xh=l=>l.match({domRange:m=>ot.fromDom(m.startContainer),relative:(m,p)=>or.getStart(m),exact:(m,p,y,E)=>m}),qS=kr.domRange,KS=kr.relative,Ii=kr.exact,H5=l=>{const m=Xh(l);return Uv(m)},ff=rd.create,ad={domRange:qS,relative:KS,exact:Ii,exactFromRange:e0,getWin:H5,range:ff},g3=(l,m,p)=>{var y;return ne.from((y=l.caretPositionFromPoint)==null?void 0:y.call(l,m,p)).bind(E=>{if(E.offsetNode===null)return ne.none();const A=l.createRange();return A.setStart(E.offsetNode,E.offset),A.collapse(),ne.some(A)})},t0=(l,m,p)=>{var y;return ne.from((y=l.caretRangeFromPoint)==null?void 0:y.call(l,m,p))},h3=(l,m,p)=>l.caretPositionFromPoint?g3(l,m,p):l.caretRangeFromPoint?t0(l,m,p):ne.none(),_r=(l,m,p)=>{const y=l.document;return h3(y,m,p).map(E=>rd.create(ot.fromDom(E.startContainer),E.startOffset,ot.fromDom(E.endContainer),E.endOffset))},wg=(l,m)=>{const p=bs(l);return p==="input"?or.after(l):Uo(["br","img"],p)?m===0?or.before(l):or.after(l):or.on(l,m)},p3=(l,m)=>{const p=l.fold(or.before,wg,or.after),y=m.fold(or.before,wg,or.after);return ad.relative(p,y)},xg=(l,m,p,y)=>{const E=wg(l,m),A=wg(p,y);return ad.relative(E,A)},n0=l=>ne.from(l.getSelection()),YS=(l,m)=>{n0(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},r2=(l,m,p,y,E)=>{const A=Bc(l,m,p,y,E);YS(l,A)},XS=(l,m,p,y,E,A)=>{m.collapse(p.dom,y),m.extend(E.dom,A)},JS=(l,m)=>Qu(l,m).match({ltr:(p,y,E,A)=>{r2(l,p,y,E,A)},rtl:(p,y,E,A)=>{n0(l).each(M=>{if(M.setBaseAndExtent)M.setBaseAndExtent(p.dom,y,E.dom,A);else if(M.extend)try{XS(l,M,p,y,E,A)}catch{r2(l,E,A,p,y)}else r2(l,E,A,p,y)})}}),o0=(l,m,p,y,E)=>{const A=xg(m,p,y,E);JS(l,A)},QS=(l,m,p)=>{const y=p3(m,p);JS(l,y)},Eg=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return ne.some(rd.create(ot.fromDom(m.startContainer),m.startOffset,ot.fromDom(p.endContainer),p.endOffset))}else return ne.none()},b3=l=>{if(l.anchorNode===null||l.focusNode===null)return Eg(l);{const m=ot.fromDom(l.anchorNode),p=ot.fromDom(l.focusNode);return Uh(m,l.anchorOffset,p,l.focusOffset)?ne.some(rd.create(m,l.anchorOffset,p,l.focusOffset)):Eg(l)}},a2=(l,m,p=!0)=>{const E=(p?ga:ou)(l,m);YS(l,E)},v3=l=>n0(l).filter(m=>m.rangeCount>0).bind(b3),y3=l=>v3(l).map(m=>ad.exact(m.start,m.soffset,m.finish,m.foffset)),c2=(l,m)=>{const p=We(l,m);return hg(p)},i2=(l,m,p)=>_r(l,m,p),C3=l=>{n0(l).each(m=>m.removeAllRanges())},S3={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},w3=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),y="\\.",E=L=>`(?:${L})?`,M=`[+-]?(?:${["Infinity",l+y+E(l)+E(p),y+l+E(p),l+E(p)].join("|")})`;return new RegExp(`^(${M})(.*)$`)})(),s0=(l,m)=>Xe(m,p=>Xe(S3[p],y=>l===y)),x3=(l,m)=>ne.from(w3.exec(l)).bind(y=>{const E=Number(y[1]),A=y[2];return s0(A,m)?ne.some({value:E,unit:A}):ne.none()}),Li=l=>zt(l,Y(0)),Tg=(l,m,p,y,E)=>E(l.slice(0,m)).concat(y).concat(E(l.slice(p))),r0=l=>(m,p,y,E)=>{if(l(y)){const A=Math.max(E,m[p]-Math.abs(y)),M=Math.abs(A-m[p]);return y>=0?M:-M}else return y},Jh=r0(l=>l<0),E3=r0(ve),T3=()=>{const l=(L,Z,Q,ce,Fe)=>{const at=Jh(L,Z,ce,Fe);return Tg(L,Z,Q+1,[at,0],Li)},m=(L,Z,Q,ce)=>{const Fe=(100+Q)/100,at=Math.max(ce,(L[Z]+Q)/Fe);return zt(L,(tt,Le)=>(Le===Z?at:tt/Fe)-tt)},p=(L,Z,Q,ce,Fe,at)=>at?m(L,Z,ce,Fe):l(L,Z,Q,ce,Fe);return{resizeTable:(L,Z)=>L(Z),clampTableDelta:Jh,calcLeftEdgeDeltas:p,calcMiddleDeltas:(L,Z,Q,ce,Fe,at,tt)=>p(L,Q,ce,Fe,at,tt),calcRightEdgeDeltas:(L,Z,Q,ce,Fe,at)=>{if(at)return m(L,Q,ce,Fe);{const tt=Jh(L,Q,ce,Fe);return Li(L.slice(0,Q)).concat([tt])}},calcRedestributedWidths:(L,Z,Q,ce)=>{if(ce){const at=(Z+Q)/Z,tt=zt(L,Le=>Le/at);return{delta:at*100-100,newSizes:tt}}else return{delta:Q,newSizes:L}}}},ew=()=>{const l=(M,L,Z,Q,ce)=>{const Fe=Q>=0?Z:L,at=E3(M,Fe,Q,ce);return Tg(M,L,Z+1,[at,-at],Li)};return{resizeTable:(M,L,Z)=>{Z&&M(L)},clampTableDelta:(M,L,Z,Q,ce)=>{if(ce){if(Z>=0)return Z;{const Fe=De(M,(at,tt)=>at+tt-Q,0);return Math.max(-Fe,Z)}}else return Jh(M,L,Z,Q)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(M,L,Z,Q,ce,Fe)=>l(M,Z,Q,ce,Fe),calcRightEdgeDeltas:(M,L,Z,Q,ce,Fe)=>{if(Fe)return Li(M);{const at=Q/M.length;return zt(M,Y(at))}},calcRedestributedWidths:(M,L,Z,Q)=>({delta:0,newSizes:M})}},cd=(l,m,p=0)=>ci(l,m).map(y=>parseInt(y,10)).getOr(p),Qh=(l,m)=>cd(l,m,1),im=l=>Pc("col")(l)?cd(l,"span",1)>1:Qh(l,"colspan")>1,k3=l=>Qh(l,"rowspan")>1,Us=(l,m)=>parseInt(uf(l,m),10),Ds=Y(10),lm=Y(10),id=(l,m)=>l2(l,m,ve),l2=(l,m,p)=>ts(na(l),y=>ha(y,m)?p(y)?[y]:[]:l2(y,m,p)),Ur=(l,m,p=gn)=>{if(p(m))return ne.none();if(Uo(l,bs(m)))return ne.some(m);const y=E=>ha(E,"table")||p(E);return di(m,l.join(","),y)},u2=(l,m)=>Ur(["td","th"],l,m),um=l=>id(l,"th,td"),a0=l=>ha(l,"colgroup")?aa(l,"col"):ts(fc(l),m=>aa(m,"col")),Hc=(l,m)=>qs(l,"table",m),d2=l=>id(l,"tr"),fc=l=>Hc(l).fold(Y([]),m=>aa(m,"colgroup")),fs=Pc("th"),c0=l=>po(l,m=>fs(m.element)),kg=(l,m)=>l&&m?"sectionCells":l?"section":"cells",tw=l=>{const m=l.section==="thead",p=Kt(m2(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:kg(m,p)}:{type:"body"}},m2=l=>{const m=Ro(l,p=>fs(p.element));return m.length===0?ne.some("td"):m.length===l.length?ne.some("th"):ne.none()},nw=l=>{const m=zt(l,E=>tw(E).type),p=Uo(m,"header"),y=Uo(m,"footer");if(!p&&!y)return ne.some("body");{const E=Uo(m,"body");return p&&!E&&!y?ne.some("header"):!p&&!E&&y?ne.some("footer"):ne.none()}},ow=l=>_e(l.all,m=>{const p=tw(m);return p.type==="header"?ne.from(p.subType):ne.none()}),i0=(l,m)=>zt(l,p=>{if(bs(p)==="colgroup"){const y=zt(a0(p),E=>{const A=cd(E,"span",1);return ic(E,1,A)});return Yd(p,y,"colgroup")}else{const y=zt(um(p),E=>{const A=cd(E,"rowspan",1),M=cd(E,"colspan",1);return ic(E,A,M)});return Yd(p,y,m(p))}}),_g=l=>q(l).map(m=>{const p=bs(m);return qd(p)?p:"tbody"}).getOr("tbody"),l0=l=>{const m=d2(l),y=[...fc(l),...m];return i0(y,_g)},Ye=(l,m)=>i0(l,()=>m),Ha="data-snooker-locked-cols",_3=l=>ci(l,Ha).bind(m=>ne.from(m.match(/\d+/g))).map(m=>vt(m,ve)),ba=l=>{const m=De(os(l).rows,(y,E)=>(Me(E.cells,(A,M)=>{A.isLocked&&(y[M]=!0)}),y),{}),p=ta(m,(y,E)=>parseInt(E,10));return zn(p)},mi=(l,m)=>l+","+m,u0=(l,m,p)=>ne.from(l.access[mi(m,p)]),A3=(l,m,p)=>{const y=dm(l,E=>p(m,E.element));return y.length>0?ne.some(y[0]):ne.none()},dm=(l,m)=>{const p=ts(l.all,y=>y.cells);return Ro(p,m)},O3=l=>{const m={};let p=0;return Me(l.cells,y=>{const E=y.colspan;Zo(E,A=>{const M=p+A;m[M]=z1(y.element,E,M)}),p+=E}),m},za=l=>{const m={},p=[],E=le(l).map(tt=>tt.element).bind(Hc).bind(_3).getOr({});let A=0,M=0,L=0;const{pass:Z,fail:Q}=js(l,tt=>tt.section==="colgroup");Me(Q,tt=>{const Le=[];Me(tt.cells,je=>{let Pe=0;for(;m[mi(L,Pe)]!==void 0;)Pe++;const Mt=ns(E,Pe.toString()),Jt=Ai(je.element,je.rowspan,je.colspan,L,Pe,Mt);for(let mt=0;mt<je.colspan;mt++)for(let Wn=0;Wn<je.rowspan;Wn++){const Gt=L+Wn,Xn=Pe+mt,ws=mi(Gt,Xn);m[ws]=Jt,M=Math.max(M,Xn+1)}Le.push(Jt)}),A++,p.push(Yd(tt.element,Le,tt.section)),L++});const{columns:ce,colgroups:Fe}=ks(Z).map(tt=>{const Le=O3(tt);return{colgroups:[mg(tt.element,Vn(Le))],columns:Le}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ro(A,M),access:m,all:p,columns:ce,colgroups:Fe}},rn={fromTable:l=>{const m=l0(l);return za(m)},generate:za,getAt:u0,findItem:A3,filterItems:dm,justCells:l=>ts(l.all,m=>m.cells),justColumns:l=>Vn(l.columns),hasColumns:l=>ge(l.columns).length>0,getColumnAt:(l,m)=>ne.from(l.columns[m])},ld=(l,m,p)=>yr(p(l.element,m),!0,l.isLocked),Ag=(l,m)=>l.section!==m?ti(l.element,l.cells,m,l.isNew):l,Xo=()=>({transformRow:Ag,transformCell:(l,m,p)=>{const y=p(l.element,m),E=bs(y)!=="td"?LS(y,"td"):y;return yr(E,l.isNew,l.isLocked)}}),gi=()=>({transformRow:Ag,transformCell:ld}),ep=()=>({transformRow:(l,m)=>Ag(l,m==="thead"?"tbody":m),transformCell:ld}),ud={getTableSectionType:(l,m)=>{const p=rn.fromTable(l);switch(ow(p).getOr(m)){case"section":return Xo();case"sectionCells":return gi();case"cells":return ep()}},section:Xo,sectionCells:gi,cells:ep,fallback:()=>({transformRow:en,transformCell:ld})},Og=(l,m=ve)=>{const p=l.grid,y=Zo(p.columns,en),E=Zo(p.rows,en);return zt(y,A=>g2(()=>ts(E,Q=>rn.getAt(l,Q,A).filter(ce=>ce.column===A).toArray()),Q=>Q.colspan===1&&m(Q.element),()=>rn.getAt(l,0,A)))},g2=(l,m,p)=>{const y=l();return N(y,m).orThunk(()=>ne.from(y[0]).orThunk(p)).map(M=>M.element)},h2=l=>{const m=l.grid,p=Zo(m.rows,en),y=Zo(m.columns,en);return zt(p,E=>g2(()=>ts(y,Z=>rn.getAt(l,E,Z).filter(Q=>Q.row===E).fold(Y([]),Q=>[Q])),Z=>Z.rowspan===1,()=>rn.getAt(l,E,0)))},hi=(l,m)=>{if(m<0||m>=l.length-1)return ne.none();const p=l[m].fold(()=>{const E=ea(l.slice(0,m));return _e(E,(A,M)=>A.map(L=>({value:L,delta:M+1})))},E=>ne.some({value:E,delta:0})),y=l[m+1].fold(()=>{const E=l.slice(m+1);return _e(E,(A,M)=>A.map(L=>({value:L,delta:M+1})))},E=>ne.some({value:E,delta:1}));return p.bind(E=>y.map(A=>{const M=A.delta+E.delta;return Math.abs(A.value-E.value)/M}))},tp=(l,m)=>({row:l,y:m}),np=(l,m)=>({col:l,x:m}),D3=l=>Cn(l).left+rs(l),rw=l=>Cn(l).left,op=(l,m)=>np(l,rw(m)),p2=(l,m)=>np(l,D3(m)),d0=l=>Cn(l).top,R3=(l,m)=>tp(l,d0(m)),M3=(l,m)=>tp(l,d0(m)+HS(m)),b2=(l,m,p)=>{if(p.length===0)return[];const y=zt(p.slice(1),(A,M)=>A.map(L=>l(M,L))),E=p[p.length-1].map(A=>m(p.length-1,A));return y.concat([E])},B3=l=>-l,sp={delta:en,positions:l=>b2(R3,M3,l),edge:d0},Tt=Gh({delta:en,edge:rw,positions:l=>b2(op,p2,l)},{delta:B3,edge:D3,positions:l=>b2(p2,op,l)}),gs={delta:(l,m)=>Tt(m).delta(l,m),positions:(l,m)=>Tt(m).positions(l,m),edge:l=>Tt(l).edge(l)},Dg=/(\d+(\.\d+)?)%/,aw=/(\d+(\.\d+)?)px|em/,gf=Pc("col"),Rg=Pc("tr"),v2=(l,m,p)=>{const y=uc(l).getOrThunk(()=>Jv(Z1(l)));return m(l)/p(y)*100},hf=(l,m)=>{Er(l,"width",m+"px")},cw=(l,m)=>{Er(l,"width",m+"%")},pu=(l,m)=>{Er(l,"height",m+"px")},iw=l=>{Sl(l,"height")},y2=l=>K1(l)+"px",qo=(l,m,p,y)=>{const E=Hc(l).map(A=>{const M=p(A);return Math.floor(m/100*M)}).getOr(m);return y(l,E),E},pi=(l,m,p,y)=>{const E=parseFloat(l);return jd(l,"%")&&bs(m)!=="table"?qo(m,E,p,y):E},va=l=>{const m=y2(l);return m?pi(m,l,Lc,pu):Lc(l)},Mg=(l,m,p)=>{const y=p(l),E=Qh(l,m);return y/E},ya=(l,m)=>Bi(l,m).orThunk(()=>ci(l,m).map(p=>p+"px")),pf=l=>ya(l,"width"),sr=l=>ya(l,"height"),Ca=l=>v2(l,Ft,Tr),m0=l=>gf(l)?Math.round(Ft(l)):Po(l),Be=l=>Rg(l)?Lc(l):Mg(l,"rowspan",va),Va=l=>pf(l).bind(p=>x3(p,["fixed","relative","empty"])),rp=(l,m,p)=>{Er(l,"width",m+p)},as=l=>Ft(l)+"px",Fi=l=>Lc(l)+"px",pc=l=>v2(l,Ft,Tr)+"%",N3=l=>pf(l).exists(m=>Dg.test(m)),bu=l=>pf(l).exists(m=>aw.test(m)),lw=l=>pf(l).isNone(),Ua=Y(Dg),Yn=Pc("col"),kl=l=>pf(l).getOrThunk(()=>m0(l)+"px"),Bg=l=>sr(l).getOrThunk(()=>Be(l)+"px"),cs=l=>zt(rn.justColumns(l),m=>ne.from(m.element)),C2=l=>{const m=pl().browser,p=m.isChromium()||m.isFirefox();return Yn(l)?p:!0},S2=(l,m,p,y,E,A)=>l.filter(y).fold(()=>A(hi(p,m)),M=>E(M)),Hi=(l,m,p,y)=>{const E=Og(l),A=rn.hasColumns(l)?cs(l):E,M=[ne.some(gs.edge(m))].concat(zt(gs.positions(E,m),Z=>Z.map(Q=>Q.x))),L=ie(im);return zt(A,(Z,Q)=>S2(Z,Q,M,L,ce=>{if(C2(ce))return p(ce);{const Fe=ef(E[Q],en);return S2(Fe,Q,M,L,at=>y(ne.some(Math.round(Ft(at)))),y)}},y))},f0=l=>l.map(m=>m+"px").getOr(""),Za=(l,m)=>Hi(l,m,kl,f0),P3=(l,m,p)=>Hi(l,m,Ca,y=>y.fold(()=>p.minCellWidth(),E=>E/p.pixelWidth()*100)),de=(l,m,p)=>Hi(l,m,m0,y=>y.getOrThunk(p.minCellWidth)),zc=(l,m,p,y)=>{const E=h2(l),A=zt(l.all,L=>ne.some(L.element)),M=[ne.some(sp.edge(m))].concat(zt(sp.positions(E,m),L=>L.map(Z=>Z.y)));return zt(A,(L,Z)=>S2(L,Z,M,ve,p,y))},ap=(l,m)=>zc(l,m,Be,p=>p.getOrThunk(lm)),Jo=(l,m)=>zc(l,m,Bg,f0),Sa=(l,m)=>()=>Nt(l)?m(l):parseFloat(Bi(l,"width").getOr("0")),Ys=l=>{const m=Sa(l,Ft),p=Y(0);return{width:m,pixelWidth:m,getWidths:(E,A)=>de(E,l,A),getCellDelta:p,singleColumnWidth:Y([0]),minCellWidth:p,setElementWidth:Dt,adjustTableWidth:Dt,isRelative:!0,label:"none"}},yo=l=>{const m=Sa(l,Z=>parseFloat(pc(Z))),p=Sa(l,Ft);return{width:m,pixelWidth:p,getWidths:(Z,Q)=>P3(Z,l,Q),getCellDelta:Z=>Z/p()*100,singleColumnWidth:(Z,Q)=>[100-Z],minCellWidth:()=>Ds()/p()*100,setElementWidth:cw,adjustTableWidth:Z=>{const Q=m(),ce=Z/100*Q,Fe=Q+ce;cw(l,Fe)},isRelative:!0,label:"percent"}},uw=l=>{const m=Sa(l,Ft);return{width:m,pixelWidth:m,getWidths:(M,L)=>de(M,l,L),getCellDelta:en,singleColumnWidth:(M,L)=>[Math.max(Ds(),M+L)-M],minCellWidth:Ds,setElementWidth:hf,adjustTableWidth:M=>{const L=m()+M;hf(l,L)},isRelative:!1,label:"pixel"}},mm=(l,m)=>Ua().exec(m)!==null?yo(l):uw(l),Ng={getTableSize:l=>pf(l).fold(()=>Ys(l),p=>mm(l,p)),pixelSize:uw,percentageSize:yo,noneSize:Ys},cp=(l,m,p,y)=>{p===y?Kn(l,m):Gs(l,m,p)},w2=(l,m,p)=>{ks(aa(l,m)).fold(()=>ds(l,p),y=>yl(y,p))},x2=(l,m)=>{const p=vs(l,m).getOrThunk(()=>{const y=ot.fromTag(m,Z1(l).dom);return m==="thead"?w2(l,"caption,colgroup",y):m==="colgroup"?w2(l,"caption",y):qn(l,y),y});return uu(p),p},gm=(l,m)=>{const p=[],y=[],E=tt=>zt(tt,Le=>{Le.isNew&&p.push(Le.element);const je=Le.element;return uu(je),Me(Le.cells,Pe=>{Pe.isNew&&y.push(Pe.element),cp(Pe.element,"colspan",Pe.colspan,1),cp(Pe.element,"rowspan",Pe.rowspan,1),qn(je,Pe.element)}),je}),A=tt=>ts(tt,Le=>zt(Le.cells,je=>(cp(je.element,"span",je.colspan,1),je.element))),M=(tt,Le)=>{const je=x2(l,Le),Mt=(Le==="colgroup"?A:E)(tt);Di(je,Mt)},L=tt=>{vs(l,tt).each(oa)},Z=(tt,Le)=>{tt.length>0?M(tt,Le):L(Le)},Q=[],ce=[],Fe=[],at=[];return Me(m,tt=>{switch(tt.section){case"thead":Q.push(tt);break;case"tbody":ce.push(tt);break;case"tfoot":Fe.push(tt);break;case"colgroup":at.push(tt);break}}),Z(at,"colgroup"),Z(Q,"thead"),Z(ce,"tbody"),Z(Fe,"tfoot"),{newRows:p,newCells:y}},Pg=l=>zt(l,m=>{const p=Mi(m.element);return Me(m.cells,y=>{const E=Sr(y.element);cp(E,"colspan",y.colspan,1),cp(E,"rowspan",y.rowspan,1),qn(p,E)}),p}),dw=(l,m)=>zt(l,p=>Zt(p,m)),E2=(l,m)=>l[m],$3=(l,m)=>{if(l.length===0)return 0;const p=l[0];return Dc(l,E=>!m(p.element,E.element)).getOr(l.length)},Zr=(l,m,p,y)=>{const E=E2(l,m),A=E.section==="colgroup",M=$3(E.cells.slice(p),y),L=A?1:$3(dw(l.slice(m),p),y);return{colspan:M,rowspan:L}},bc=(l,m)=>{const p=zt(l,E=>zt(E.cells,gn)),y=(E,A,M,L)=>{for(let Z=E;Z<E+M;Z++)for(let Q=A;Q<A+L;Q++)p[Z][Q]=!0};return zt(l,(E,A)=>{const M=ts(E.cells,(L,Z)=>{if(p[A][Z]===!1){const Q=Zr(l,A,Z,m);return y(A,Z,Q.rowspan,Q.colspan),[Cs(L.element,Q.rowspan,Q.colspan,L.isNew)]}else return[]});return lc(E.element,M,E.section,E.isNew)})},ys=(l,m,p)=>{const y=[];Me(l.colgroups,E=>{const A=[];for(let M=0;M<l.grid.columns;M++){const L=rn.getColumnAt(l,M).map(Z=>yr(Z.element,p,!1)).getOrThunk(()=>yr(m.colGap(),!0,!1));A.push(L)}y.push(ti(E.element,A,"colgroup",p))});for(let E=0;E<l.grid.rows;E++){const A=[];for(let Z=0;Z<l.grid.columns;Z++){const Q=rn.getAt(l,E,Z).map(ce=>yr(ce.element,p,ce.isLocked)).getOrThunk(()=>yr(m.gap(),!0,!1));A.push(Q)}const M=l.all[E],L=ti(M.element,A,M.section,p);y.push(L)}return y},hm=(l,m)=>ys(l,m,!1),ip=l=>bc(l,ao),Wa=(l,m)=>_e(l.all,p=>N(p.cells,y=>ao(m,y.element))),$g=(l,m,p)=>{const y=zt(m.selection,A=>u2(A).bind(M=>Wa(l,M)).filter(p)),E=Wo(y);return Yu(E.length>0,E)},Zs=(l,m,p,y,E,A,M,L,Z)=>{const Q=rn.fromTable(A),ce=ne.from(Z==null?void 0:Z.section).getOrThunk(ud.fallback);return m(Q,M).map(at=>{const tt=hm(Q,L),Le=l(tt,at,ao,E(L),ce),je=ba(Le.grid),Pe=ip(Le.grid);return{info:at,grid:Pe,cursor:Le.cursor,lockedColumns:je}}).bind(at=>{const tt=gm(A,at.grid),Le=ne.from(Z==null?void 0:Z.sizing).getOrThunk(()=>Ng.getTableSize(A)),je=ne.from(Z==null?void 0:Z.resize).getOrThunk(ew);return p(A,at.grid,at.info,{sizing:Le,resize:je,section:ce}),y(A),Kn(A,Ha),at.lockedColumns.length>0&&Gs(A,Ha,at.lockedColumns.join(",")),ne.some({cursor:at.cursor,newRows:tt.newRows,newCells:tt.newCells})})},g0=(l,m)=>u2(m.element).bind(p=>Wa(l,p).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),Vc=(l,m)=>$g(l,m,ve).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),zi=(l,m)=>m.mergable,T2=(l,m)=>m.unmergable,rr=(l,m)=>$g(l,m,ve),Ig=(l,m)=>$g(l,m,p=>!p.isLocked),_l=(l,m)=>Wa(l,m).exists(p=>!p.isLocked),bf=(l,m)=>po(m,p=>_l(l,p)),vf=(l,m)=>zi(l,m).filter(p=>bf(l,p.cells)),I3=(l,m)=>T2(l,m).filter(p=>bf(l,p)),dd={...Ir.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},lp=(l,m)=>l.length===0?dd.none():l.length===1?dd.only(0):m===0?dd.left(0,1):m===l.length-1?dd.right(m-1,m):m>0&&m<l.length-1?dd.middle(m-1,m,m+1):dd.none(),Co=(l,m,p,y,E)=>{const A=l.slice(0),M=lp(l,m),L=Y(zt(A,Y(0))),Z=at=>y.singleColumnWidth(A[at],p),Q=(at,tt)=>E.calcLeftEdgeDeltas(A,at,tt,p,y.minCellWidth(),y.isRelative),ce=(at,tt,Le)=>E.calcMiddleDeltas(A,at,tt,Le,p,y.minCellWidth(),y.isRelative),Fe=(at,tt)=>E.calcRightEdgeDeltas(A,at,tt,p,y.minCellWidth(),y.isRelative);return M.fold(L,Z,Q,ce,Fe)},mw=(l,m,p)=>{let y=0;for(let E=l;E<m;E++)y+=p[E]!==void 0?p[E]:0;return y},md=(l,m)=>{const p=rn.justCells(l);return zt(p,y=>{const E=mw(y.column,y.column+y.colspan,m);return{element:y.element,width:E,colspan:y.colspan}})},Lg=(l,m)=>{const p=rn.justColumns(l);return zt(p,(y,E)=>({element:y.element,width:m[E],colspan:y.colspan}))},p0=(l,m)=>zt(l.all,(p,y)=>({element:p.element,height:m[y]})),fd=l=>ls(l,(m,p)=>m+p,0),Ar=(l,m)=>rn.hasColumns(l)?Lg(l,m):md(l,m),yf=(l,m,p)=>{const y=Ar(l,m);Me(y,E=>{p.setElementWidth(E.element,E.width)})},Fg=(l,m,p,y,E)=>{const A=rn.fromTable(l),M=E.getCellDelta(m),L=E.getWidths(A,E),Z=p===A.grid.columns-1,Q=y.clampTableDelta(L,p,M,E.minCellWidth(),Z),ce=Co(L,p,Q,E,y),Fe=zt(ce,(at,tt)=>at+L[tt]);yf(A,Fe,E),y.resizeTable(E.adjustTableWidth,Q,Z)},b0=(l,m,p)=>{const y=rn.fromTable(l),E=ap(y,l),A=zt(E,(Z,Q)=>p===Q?Math.max(m+Z,lm()):Z),M=p0(y,A);Me(M,Z=>{pu(Z.element,Z.height)}),Me(rn.justCells(y),Z=>{iw(Z.element)});const L=fd(A);pu(l,L)},v0=(l,m,p,y,E)=>{const A=rn.generate(m),M=y.getWidths(A,y),L=y.pixelWidth(),{newSizes:Z,delta:Q}=E.calcRedestributedWidths(M,L,p.pixelDelta,y.isRelative);yf(A,Z,y),y.adjustTableWidth(Q)},y0=(l,m,p,y)=>{const E=rn.generate(m),A=y.getWidths(E,y);yf(E,A,y)},up=(l,m)=>{im(l)||Va(l).each(y=>{const E=y.value/2;rp(l,E,y.unit),rp(m,E,y.unit)})},fw=(l,m,p)=>{const y=cd(l,m,1);p===1||y<=1?Kn(l,m):Gs(l,m,Math.min(p,y))},k2=(l,m)=>p=>{const y=p.column+p.colspan-1,E=p.column;return y>=l&&E<m},_2=(l,m,p)=>{if(rn.hasColumns(l)){const y=Ro(rn.justColumns(l),k2(m,p)),E=zt(y,M=>{const L=Sr(M.element);return fw(L,"span",p-m),L}),A=ot.fromTag("colgroup");return Di(A,E),[A]}else return[]},Hg=(l,m,p)=>zt(l.all,y=>{const E=Ro(y.cells,k2(m,p)),A=zt(E,L=>{const Z=Sr(L.element);return fw(Z,"colspan",p-m),Z}),M=ot.fromTag("tr");return Di(M,A),M}),Al=(l,m)=>{const p=rn.fromTable(l);return Ig(p,m).map(E=>{const A=E[E.length-1],M=E[0].column,L=A.column+A.colspan,Z=_2(p,M,L),Q=Hg(p,M,L);return[...Z,...Q]})},bi=(l,m,p)=>{const y=rn.fromTable(l);return rr(y,m).bind(A=>{const M=ys(y,p,!1),Z=os(M).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),Q=ts(Z,Fe=>{const at=Ro(Fe.cells,tt=>!tt.isLocked);return at.length>0?[{...Fe,cells:at}]:[]}),ce=ip(Q);return Yu(ce.length>0,ce)}).map(A=>Pg(A))},gd=(l,m,p,y,E,A)=>({minRow:l,minCol:m,maxRow:p,maxCol:y,allCells:E,selectedCells:A}),gw=(l,m)=>{const p=l.grid.columns;let E=l.grid.rows,A=p,M=0,L=0;const Z=[],Q=[];return yn(l.access,ce=>{if(Z.push(ce),m(ce)){Q.push(ce);const Fe=ce.row,at=Fe+ce.rowspan-1,tt=ce.column,Le=tt+ce.colspan-1;Fe<E?E=Fe:at>M&&(M=at),tt<A?A=tt:Le>L&&(L=Le)}}),gd(E,A,M,L,Z,Q)},C0=(l,m,p)=>{const y=l[p].element,E=ot.fromTag("td");qn(E,ot.fromTag("br")),(m?qn:ds)(y,E)},A2=(l,m,p,y)=>{const E=Ro(l,L=>L.section!=="colgroup"),A=m.grid.columns,M=m.grid.rows;for(let L=0;L<M;L++){let Z=!1;for(let Q=0;Q<A;Q++)L<p.minRow||L>p.maxRow||Q<p.minCol||Q>p.maxCol||(rn.getAt(m,L,Q).filter(y).isNone()?C0(E,Z,L):Z=!0)}},hw=(l,m,p,y)=>{yn(p.columns,M=>{(M.column<m.minCol||M.column>m.maxCol)&&oa(M.element)});const E=Ro(id(l,"tr"),M=>M.dom.childElementCount===0);Me(E,oa),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Me(id(l,"th,td"),M=>{Kn(M,"rowspan"),Kn(M,"colspan")}),Kn(l,Ha),Kn(l,"data-snooker-col-series"),Ng.getTableSize(l).adjustTableWidth(y)},O2=(l,m,p,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const E=de(m,l,p),A=De(E,(Q,ce)=>Q+ce,0),Z=De(E.slice(y.minCol,y.maxCol+1),(Q,ce)=>Q+ce,0)/A*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(Z)},S0=(l,m)=>{const p=at=>ha(at.element,m),y=Sr(l),E=l0(y),A=Ng.getTableSize(l),M=rn.generate(E),L=gw(M,p),Z="th:not("+m+"),td:not("+m+")",Q=l2(y,"th,td",at=>ha(at,Z));Me(Q,oa),A2(E,M,L,p);const ce=rn.fromTable(l),Fe=O2(l,ce,A,L);return hw(y,L,M,Fe),y},w0=Pc("col"),x0=Pc("colgroup"),Ol=l=>bs(l)==="tr"||x0(l),dp=l=>{const m=cd(l,"colspan",1),p=cd(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},zg=(l,m=dp)=>{const p=L=>w0(L.element)?l.col(L):l.cell(L),y=L=>x0(L.element)?l.colgroup(L):l.row(L),E=L=>{if(Ol(L))return y({element:L});{const Z=L,Q=p(m(Z));return A=ne.some({item:Z,replacement:Q}),Q}};let A=ne.none();return{getOrInit:(L,Z)=>A.fold(()=>E(L),Q=>Z(L,Q.item)?Q.replacement:E(L))}},Cf=l=>m=>{const p=[],y=(M,L)=>N(p,Z=>L(Z.item,M)),E=M=>{const L=l==="td"?{scope:null}:{},Z=m.replace(M,l,L);return p.push({item:M,sub:Z}),Z};return{replaceOrInit:(M,L)=>{if(Ol(M)||w0(M))return M;{const Z=M;return y(Z,L).fold(()=>E(Z),Q=>L(M,Q.item)?Q.sub:E(Z))}}}},pw=l=>ci(l,"scope").map(m=>m.substr(0,3)),wa={modification:zg,transform:Cf,merging:l=>({unmerge:y=>{const E=pw(y);return E.each(A=>Gs(y,"scope",A)),()=>{const A=l.cell({element:y,colspan:1,rowspan:1});return Sl(A,"width"),Sl(y,"width"),E.each(M=>Gs(A,"scope",M)),A}},merge:y=>{const E=()=>{const A=Wo(zt(y,pw));if(A.length===0)return ne.none();{const M=A[0],L=["row","col"];return Xe(A,Q=>Q!==M&&Uo(L,Q))?ne.none():ne.from(M)}};return Sl(y[0],"width"),E().fold(()=>Kn(y[0],"scope"),A=>Gs(y[0],"scope",A+"group")),Y(y[0])}})},L3=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),y=ip(p);return ts(y,E=>{const A=E.cells.slice(0,m[m.length-1].column+1);return zt(A,M=>M.element)})},D2=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),y=ip(p);return ts(y,E=>{const A=E.cells.slice(m[0].column+m[0].colspan-1,E.cells.length);return zt(A,M=>M.element)})},R2=(l,m,p)=>{const y=rn.fromTable(l);return rr(y,m).map(A=>{const M=ys(y,p,!1),{rows:L}=os(M),Z=L3(L,A),Q=D2(L,A);return{upOrLeftCells:Z,downOrRightCells:Q}})},vw={only:(l,m)=>{const p=a3(l)?Vh(l):l;return{parent:Y(p),view:Y(l),dragContainer:Y(p),origin:Y(Go(0,0)),isResizable:m}},detached:(l,m,p)=>{const y=()=>Cn(m);return{parent:Y(m),view:Y(l),dragContainer:Y(m),origin:y,isResizable:p}},body:(l,m)=>({parent:Y(l),view:Y(l),dragContainer:Y(l),origin:()=>Cn(l),isResizable:m})},mp=Ir.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),M2=(l,m,p)=>{const y=p.substring(0,p.length-l.length),E=parseFloat(y);return y===E.toString()?m(E):mp.invalid(p)},Tn={...mp,from:l=>jd(l,"%")?M2("%",mp.percent,l):jd(l,"px")?M2("px",mp.pixels,l):mp.invalid(l)},T0=(l,m)=>zt(l,p=>Tn.from(p).fold(()=>p,E=>E/m*100+"%",E=>E+"%")),Dn=(l,m,p)=>{const y=p/m;return zt(l,E=>Tn.from(E).fold(()=>E,M=>M*y+"px",M=>M/100*p+"px"))},vc=(l,m)=>{const p=l.fold(()=>Y(""),y=>{const E=y/m;return Y(E+"px")},()=>{const y=100/m;return Y(y+"%")});return Zo(m,p)},pm=(l,m,p)=>l.fold(()=>m,y=>Dn(m,p,y),y=>T0(m,p)),fp=(l,m,p)=>{const y=Tn.from(p),E=po(l,A=>A==="0px")?vc(y,l.length):pm(y,l,m);return F3(E)},Zn=(l,m)=>l.length===0?m:ls(l,(p,y)=>Tn.from(y).fold(Y(0),en,en)+p,0),Cw=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},Sw=(l,m)=>Tn.from(l).fold(Y(l),p=>p+m+"px",p=>p+m+"%"),F3=l=>{if(l.length===0)return l;const m=ls(l,(y,E)=>{const A=Tn.from(E).fold(()=>({value:E,remainder:0}),M=>Cw(M,"px"),M=>({value:M+"%",remainder:0}));return{output:[A.value].concat(y.output),remainder:y.remainder+A.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([Sw(p[p.length-1],Math.round(m.remainder))])},wf=Tn.from,gp=(l,m,p)=>{Me(m,y=>{const E=l.slice(y.column,y.colspan+y.column),A=Zn(E,Ds());Er(y.element,"width",A+p)})},ww=(l,m,p)=>{Me(m,(y,E)=>{const A=Zn([l[E]],Ds());Er(y.element,"width",A+p)})},H3=(l,m,p)=>{Me(p,y=>{Sl(y.element,"height")}),Me(m,(y,E)=>{Er(y.element,"height",l[E])})},z3=l=>wf(l).fold(Y("px"),Y("px"),Y("%")),xw=(l,m,p)=>{const y=rn.fromTable(l),E=y.all,A=rn.justCells(y),M=rn.justColumns(y);m.each(L=>{const Z=z3(L),Q=Ft(l),ce=Za(y,l),Fe=fp(ce,Q,L);rn.hasColumns(y)?ww(Fe,M,Z):gp(Fe,A,Z),Er(l,"width",L)}),p.each(L=>{const Z=Lc(l),Q=Jo(y,l),ce=fp(Q,Z,L);H3(ce,E,A),Er(l,"height",L)})},Ew=N3,V3=bu,U3=lw;var xf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],yc=()=>{const l=Q=>ot.fromDom(Q.dom.cloneNode(!1)),m=Q=>Oi(Q).dom,p=Q=>Hr(Q)?bs(Q)==="body"?!0:Uo(xf,bs(Q)):!1,y=Q=>Hr(Q)?Uo(["br","img","hr","input"],bs(Q)):!1,E=Q=>Hr(Q)&&Ri(Q,"contenteditable")==="false",A=(Q,ce)=>Q.dom.compareDocumentPosition(ce.dom),M=(Q,ce)=>{const Fe=ii(Q);nd(ce,Fe)},L=Q=>{const ce=bs(Q);return Uo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ce)},Z=Q=>Hr(Q)?ci(Q,"lang"):ne.none();return{up:Y({selector:di,closest:qs,predicate:co,all:nm}),down:Y({selector:mu,predicate:rm}),styles:Y({get:uf,getRaw:Bi,set:Er,remove:Sl}),attrs:Y({get:Ri,set:Gs,remove:Kn,copyTo:M}),insert:Y({before:vl,after:yl,afterAll:lu,append:qn,appendAll:Di,prepend:ds,wrap:i3}),remove:Y({unwrap:ur,remove:oa}),create:Y({nu:ot.fromTag,clone:l,text:ot.fromText}),query:Y({comparePosition:A,prevSibling:Zv,nextSibling:vg}),property:Y({children:na,name:bs,parent:q,document:m,isText:bg,isComment:r3,isElement:Hr,isSpecial:L,getLanguage:Z,getText:Wh,setText:jh,isBoundary:p,isEmptyTag:y,isNonEditable:E}),eq:ao,is:Fr}};const Xs=(l,m)=>({item:l,mode:m}),bm=(l,m,p,y=Vi)=>l.property().parent(m).map(E=>Xs(E,y)),Vi=(l,m,p,y=vu)=>p.sibling(l,m).map(E=>Xs(E,y)),vu=(l,m,p,y=vu)=>{const E=l.property().children(m);return p.first(E).map(M=>Xs(M,y))},Ug=[{current:bm,next:Vi,fallback:ne.none()},{current:Vi,next:vu,fallback:ne.some(bm)},{current:vu,next:vu,fallback:ne.some(Vi)}],Zg=(l,m,p,y,E=Ug)=>N(E,M=>M.current===p).bind(M=>M.current(l,m,y,M.next).orThunk(()=>M.fallback.bind(L=>Zg(l,m,L,y)))),_0={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?ne.some(p[p.length-1]):ne.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?ne.some(p[0]):ne.none()})},B2=(l,m,p,y,E,A)=>Zg(l,m,y,E).bind(L=>A(L.item)?ne.none():p(L.item)?ne.some(L.item):B2(l,L.item,p,L.mode,E,A)),N2=(l,m,p,y)=>B2(l,m,p,Vi,_0.left(),y),hp=(l,m,p,y)=>B2(l,m,p,Vi,_0.right(),y),hd=(l,m)=>({element:l,offset:m}),A0=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(y=>A0(l,y,p).orThunk(()=>ne.some(y))):ne.none(),pp=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,O0=(l,m)=>{const p=A0(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return hd(p,pp(l,p));const y=l.property().children(p);return y.length>0?O0(l,y[y.length-1]):hd(p,pp(l,p))},Tw=O0,yu=yc(),D0=l=>Tw(yu,l),kw=l=>m=>l.property().children(m).length===0,W3=(l,m,p)=>_w(l,m,kw(l),p),j3=(l,m,p)=>P2(l,m,kw(l),p),_w=N2,P2=hp,Cu=yc(),Aw=(l,m)=>W3(Cu,l,m),Ui=(l,m)=>j3(Cu,l,m),ca=(l,m,p)=>_w(Cu,l,m,p),vi=(l,m,p)=>P2(Cu,l,m,p),xa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],R0=(l,m)=>{const p=l.property().name(m);return Uo(["ol","ul"],p)},Ef=(l,m)=>{const p=l.property().name(m);return Uo(xa,p)},M0=(l,m)=>Uo(["br","img","hr","input"],l.property().name(m)),$2=(l,m,p,y)=>{const E=p[0],A=p.slice(1);return y(l,m,E,A)},G3=(l,m,p)=>p.length>0?$2(l,m,p,vm):ne.none(),vm=(l,m,p,y)=>{const E=m(l,p);return ls(y,(A,M)=>{const L=m(l,M);return ym(l,A,L)},E)},ym=(l,m,p)=>m.bind(y=>p.filter(dn(l.eq,y))),I2=(l,m)=>dn(l.eq,m),Js=(l,m,p,y=gn)=>{const E=[m].concat(l.up().all(m)),A=[p].concat(l.up().all(p)),M=ce=>Dc(ce,y).fold(()=>ce,at=>ce.slice(0,at+1)),L=M(E),Z=M(A),Q=N(L,ce=>Xe(Z,I2(l,ce)));return{firstpath:L,secondpath:Z,shared:Q}},bp=G3,ja=Js,B0=yc(),fo=(l,m)=>bp(B0,(p,y)=>l(y),m),Dl=(l,m,p)=>ja(B0,l,m,p),pd=yc(),Rl=l=>Ef(pd,l),Uc=l=>R0(pd,l),N0=l=>M0(pd,l),Ow=l=>{const m=Pc("br"),p=Z=>po(Z,Q=>m(Q)||bg(Q)&&Wh(Q).trim().length===0),y=Z=>bs(Z)==="li"||co(Z,Uc).isSome(),E=Z=>vg(Z).map(Q=>Rl(Q)?!0:N0(Q)?bs(Q)!=="img":!1).getOr(!1),A=Z=>Os(Z).bind(Q=>{const ce=E(Q);return q(Q).map(Fe=>ce===!0||y(Fe)||m(Q)||Rl(Fe)&&!ao(Z,Fe)?[]:[ot.fromTag("br")])}).getOr([]),L=(()=>{const Z=ts(l,Q=>{const ce=na(Q);return p(ce)?[]:ce.concat(A(Q))});return Z.length===0?[ot.fromTag("br")]:Z})();uu(l[0]),Di(l[0],L)},bd=l=>{Kn(l,"width"),Kn(l,"height")},Tf=l=>{const m=pc(l);xw(l,ne.some(m),ne.none()),bd(l)},L2=l=>{const m=as(l);xw(l,ne.some(m),ne.none()),bd(l)},Cc=l=>{const m=Fi(l);xw(l,ne.none(),ne.some(m)),bd(l)},Cm=l=>{Sl(l,"width");const m=a0(l),p=m.length>0?m:um(l);Me(p,y=>{Sl(y,"width"),bd(y)}),bd(l)},Or={scope:["row","col"]},Zi=l=>()=>{const m=ot.fromTag("td",l.dom);return qn(m,ot.fromTag("br",l.dom)),m},P0=l=>()=>ot.fromTag("col",l.dom),kf=l=>()=>ot.fromTag("colgroup",l.dom),Sm=l=>()=>ot.fromTag("tr",l.dom),vp=(l,m,p)=>{const y=cf(l,m);return yn(p,(E,A)=>{E===null?Kn(y,A):Gs(y,A,E)}),y},F2=l=>l,$0=(l,m,p)=>Yh(l).map(E=>{const A=p.join(","),M=oo(E,A,L=>ao(L,l));return ls(M,(L,Z)=>{const Q=Mi(Z);return qn(L,Q),Q},m)}).getOr(m),_f=(l,m)=>{yn(Or,(p,y)=>ci(l,y).filter(E=>Uo(p,E)).each(E=>Gs(m,y,E)))},wm=(l,m,p)=>{const y=(M,L)=>{Qv(M.element,L),Sl(L,"height"),M.colspan!==1&&Sl(L,"width")},E=M=>{const L=ot.fromTag(bs(M.element),m.dom),Z=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Q=Z.length>0?$0(M.element,L,Z):L;return qn(Q,ot.fromTag("br")),y(M,L),_f(M.element,L),l(M.element,L),L};return{col:M=>{const L=ot.fromTag(bs(M.element),m.dom);return y(M,L),l(M.element,L),L},colgroup:kf(m),row:Sm(m),cell:E,replace:vp,colGap:P0(m),gap:Zi(m)}},H2=l=>({col:P0(l),colgroup:kf(l),row:Sm(l),cell:Zi(l),replace:F2,colGap:P0(l),gap:Zi(l)}),yp=l=>rn.fromTable(l).grid,z2=(l,m,p,y)=>{const E=os(l).rows;if(E.length===0)return l;for(let A=m.startRow;A<=m.finishRow;A++)for(let M=m.startCol;M<=m.finishCol;M++){const L=E[A],Z=Zt(L,M).isLocked;ml(L,M,yr(y(),!1,Z))}return l},Dw=(l,m,p,y)=>{const E=os(l).rows;let A=!0;for(let M=0;M<E.length;M++)for(let L=0;L<Cr(E[0]);L++){const Z=E[M],Q=Zt(Z,L),ce=Q.element,Fe=p(ce,m);Fe&&!A?ml(Z,L,yr(y(),!0,Q.isLocked)):Fe&&(A=!1)}return l},Qs=(l,m)=>De(l,(p,y)=>Xe(p,E=>m(E.element,y.element))?p:p.concat([y]),[]),xm=(l,m,p,y)=>(m>0&&m<l[0].cells.length&&Me(l,E=>{const A=E.cells[m-1];let M=0;const L=y();for(;E.cells.length>m+M&&p(A.element,E.cells[m+M].element);)ml(E,m+M,yr(L,!0,E.cells[m+M].isLocked)),M++}),l),Em=(l,m,p,y)=>{const E=os(l).rows;if(m>0&&m<E.length){const A=E[m-1].cells,M=Qs(A,p);Me(M,L=>{let Z=ne.none();for(let Q=m;Q<E.length;Q++)for(let ce=0;ce<Cr(E[0]);ce++){const Fe=E[Q],at=Zt(Fe,ce);p(at.element,L.element)&&(Z.isNone()&&(Z=ne.some(y())),Z.each(Le=>{ml(Fe,ce,yr(Le,!0,at.isLocked))}))}})}return l},Rw=(l,m,p)=>{if(l.row>=m.length||l.column>Cr(m[0]))return Rc.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=m.slice(l.row),E=y[0].cells.slice(l.column),A=Cr(p[0]),M=p.length;return Rc.value({rowDelta:y.length-M,colDelta:E.length-A})},I0=(l,m)=>{const p=Cr(l[0]),y=Cr(m[0]);return{rowDelta:0,colDelta:p-y}},V2=(l,m)=>{const p=l.length,y=m.length;return{rowDelta:p-y,colDelta:0}},Cp=(l,m,p,y)=>{const E=m.section==="colgroup"?p.col:p.cell;return Zo(l,A=>yr(E(),!0,y(A)))},L0=(l,m,p,y)=>{const E=l[l.length-1];return l.concat(Zo(m,()=>{const A=E.section==="colgroup"?p.colgroup:p.row,M=nf(E,A,en),L=Cp(M.cells.length,M,p,Z=>Mo(y,Z.toString()));return fg(M,L)}))},Mw=(l,m,p,y)=>zt(l,E=>{const A=Cp(m,E,p,gn);return Mc(E,y,A)}),q3=(l,m,p)=>zt(l,y=>De(p,(E,A)=>{const M=Cp(1,y,m,ve)[0];return dl(E,A,M)},y)),Sp=(l,m,p)=>{const y=m.colDelta<0?Mw:en,E=m.rowDelta<0?L0:en,A=ba(l),M=Cr(l[0]),L=Xe(A,ce=>ce===M-1),Z=y(l,Math.abs(m.colDelta),p,L?M-1:M),Q=ba(Z);return E(Z,Math.abs(m.rowDelta),p,vt(Q,ve))},Ws=(l,m,p,y)=>{const E=Zt(l[m],p),A=dn(y,E.element),M=l[m];return l.length>1&&Cr(M)>1&&(p>0&&A(Lr(M,p-1))||p<M.cells.length-1&&A(Lr(M,p+1))||m>0&&A(Lr(l[m-1],p))||m<l.length-1&&A(Lr(l[m+1],p)))},Rs=(l,m,p,y,E,A)=>{const M=l.row,L=l.column,Z=p.length,Q=Cr(p[0]),ce=M+Z,Fe=L+Q+A.length,at=vt(A,ve);for(let tt=M;tt<ce;tt++){let Le=0;for(let je=L;je<Fe;je++){if(at[je]){Le++;continue}Ws(m,tt,je,E)&&Dw(m,Lr(m[tt],je),E,y.cell);const Pe=je-L-Le,Mt=Zt(p[tt-M],Pe),Jt=Mt.element,mt=y.replace(Jt);ml(m[tt],je,yr(mt,!0,Mt.isLocked))}}return m},Dr=(l,m,p)=>{const y=Cr(m[0]),E=os(m).cols.length+l.row,A=Zo(y-l.column,L=>L+l.column),M=N(A,L=>po(p,Z=>Z!==L)).getOr(y-1);return{row:E,column:M}},dr=(l,m,p)=>Ro(p,y=>y>=l.column&&y<=Cr(m[0])+l.column),Fo=(l,m,p,y,E)=>{const A=ba(m),M=Dr(l,m,A),L=os(p).rows,Z=dr(M,L,A);return Rw(M,m,L).map(ce=>{const Fe={...ce,colDelta:ce.colDelta-Z.length},at=Sp(m,Fe,y),tt=ba(at),Le=dr(M,L,tt);return Rs(M,at,L,y,E,Le)})},Ms=(l,m,p,y,E)=>{xm(m,l,E,y.cell);const A=V2(p,m),M=Sp(p,A,y),L=V2(m,M),Z=Sp(m,L,y);return zt(Z,(Q,ce)=>Mc(Q,l,M[ce].cells))},Wg=(l,m,p,y,E)=>{Em(m,l,E,y.cell);const A=ba(m),M=I0(m,p),L={...M,colDelta:M.colDelta-A.length},Z=Sp(m,L,y),{cols:Q,rows:ce}=os(Z),Fe=ba(Z),at=I0(p,m),tt={...at,colDelta:at.colDelta+Fe.length},Le=q3(p,y,Fe),je=Sp(Le,tt,y);return[...Q,...ce.slice(0,l),...je,...ce.slice(l,ce.length)]},U2=(l,m,p,y)=>nf(l,E=>y(E,p),m),Z2=(l,m,p,y,E)=>{const{rows:A,cols:M}=os(l),L=A.slice(0,m),Z=A.slice(m),Q=U2(A[p],(ce,Fe)=>m>0&&m<A.length&&y(Lr(A[m-1],Fe),Lr(A[m],Fe))?Zt(A[m],Fe):yr(E(ce.element,y),!0,ce.isLocked),y,E);return[...M,...L,Q,...Z]},Bw=(l,m,p,y,E,A,M)=>{if(p==="colgroup"||!y){const L=Zt(l,E);return yr(M(L.element,A),!0,!1)}else return Zt(l,m)},F0=(l,m,p,y,E)=>zt(l,A=>{const M=m>0&&m<Cr(A)&&y(Lr(A,m-1),Lr(A,m)),L=Bw(A,m,A.section,M,p,y,E);return dl(A,m,L)}),W2=(l,m)=>ts(l,p=>{const y=p.cells,E=ls(m,(A,M)=>M>=0&&M<A.length?A.slice(0,M).concat(A.slice(M+1)):A,y);return E.length>0?[ti(p.element,E,p.section,p.isNew)]:[]}),j2=(l,m,p)=>{const{rows:y,cols:E}=os(l);return[...E,...y.slice(0,m),...y.slice(p+1)]},H0=(l,m,p,y)=>Lr(l[m],p)!==void 0&&m>0&&y(Lr(l[m-1],p),Lr(l[m],p)),G2=(l,m,p)=>m>0&&p(Lr(l,m-1),Lr(l,m)),jg=(l,m,p,y)=>H0(l,m,p,y)||G2(l[m],p,y),Nw=(l,m)=>po(m,en)&&c0(l.cells)?ve:(y,E,A)=>!(bs(y.element)==="th"&&m[A]),wp=(l,m)=>po(m,en)&&c0(l)?ve:(y,E,A)=>!(bs(y.element)==="th"&&m[E]),Ml=(l,m,p,y)=>{const E=M=>M==="row"?k3(m):im(m),A=M=>E(M)?`${M}group`:M;return l?fs(m)?A(p):null:y&&fs(m)?A(p==="row"?"col":"row"):null},z0=(l,m)=>(p,y,E)=>ne.some(Ml(l,p.element,"col",m[E])),xp=(l,m)=>(p,y)=>ne.some(Ml(l,p.element,"row",m[y])),Gg=(l,m,p)=>yr(p(l.element,m),!0,l.isLocked),Af=(l,m,p,y,E,A,M)=>{const L=Z=>Xe(m,Q=>p(Z.element,Q.element));return zt(l,(Z,Q)=>ps(Z,(ce,Fe)=>{if(L(ce)){const at=M(ce,Q,Fe)?E(ce,p,y):ce;return A(at,Q,Fe).each(tt=>{Ic(at.element,{scope:ne.from(tt)})}),at}else return ce}))},Ep=(l,m,p)=>ts(l,(y,E)=>jg(l,E,m,p)?[]:[Zt(y,m)]),V0=(l,m,p)=>{const y=l[m];return ts(y.cells,(E,A)=>jg(l,m,A,p)?[]:[E])},Tp=(l,m,p,y,E)=>{const A=os(l).rows,M=ts(m,ce=>Ep(A,ce,y)),L=zt(A,ce=>c0(ce.cells)),Z=wp(M,L),Q=xp(p,L);return Af(l,M,y,E,Gg,Q,Z)},U0=(l,m,p,y,E,A,M)=>{const{cols:L,rows:Z}=os(l),Q=Z[m[0]],ce=ts(m,Pe=>V0(Z,Pe,E)),Fe=zt(Q.cells,(Pe,Mt)=>c0(Ep(Z,Mt,E))),at=[...Z];Me(m,Pe=>{at[Pe]=M.transformRow(Z[Pe],p)});const tt=[...L,...at],Le=Nw(Q,Fe),je=z0(y,Fe);return Af(tt,ce,E,A,M.transformCell,je,Le)},Of=(l,m,p,y)=>{const E=os(l).rows,A=zt(m,M=>Zt(E[M.row],M.column));return Af(l,A,p,y,Gg,ne.none,ve)},Ea=l=>De(l,(p,y)=>Xe(p,A=>A.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),Wr=l=>qh(l,!0),qg=l=>{um(l).length===0&&oa(l)},Ce=(l,m)=>({grid:l,cursor:m}),kp=l=>_e(l,m=>_e(m.cells,p=>{const y=p.element;return Yu(Wr(y),y)})),K3=(l,m,p)=>{var E,A;const y=os(l).rows;return ne.from((A=(E=y[m])==null?void 0:E.cells[p])==null?void 0:A.element).filter(Wr).orThunk(()=>kp(y))},Ta=(l,m,p)=>{const y=K3(l,m,p);return Ce(l,y)},Kg=l=>De(l,(p,y)=>Xe(p,A=>A.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),Bl=(l,m,p,y)=>{const E=m[0].row,A=Kg(m),M=ls(A,(L,Z)=>({grid:Z2(L.grid,E,Z.row+L.delta,p,y.getOrInit),delta:L.delta+1}),{grid:l,delta:0}).grid;return Ta(M,E,m[0].column)},q2=(l,m,p,y)=>{const E=Kg(m),A=E[E.length-1],M=A.row+A.rowspan,L=ls(E,(Z,Q)=>Z2(Z,M,Q.row,p,y.getOrInit),l);return Ta(L,M,m[0].column)},K2=(l,m,p,y)=>{const E=m.details,A=Ea(E),M=A[0].column,L=ls(A,(Z,Q)=>({grid:F0(Z.grid,M,Q.column+Z.delta,p,y.getOrInit),delta:Z.delta+1}),{grid:l,delta:0}).grid;return Ta(L,E[0].row,M)},Df=(l,m,p,y)=>{const E=m.details,A=E[E.length-1],M=A.column+A.colspan,L=Ea(E),Z=ls(L,(Q,ce)=>F0(Q,M,ce.column,p,y.getOrInit),l);return Ta(Z,E[0].row,M)},_p=(l,m,p,y)=>{const E=Ea(m),A=zt(E,L=>L.column),M=Tp(l,A,!0,p,y.replaceOrInit);return Ta(M,m[0].row,m[0].column)},vd=(l,m,p,y)=>{const E=Of(l,m,p,y.replaceOrInit);return Ta(E,m[0].row,m[0].column)},Z0=(l,m,p,y)=>{const E=Ea(m),A=zt(E,L=>L.column),M=Tp(l,A,!1,p,y.replaceOrInit);return Ta(M,m[0].row,m[0].column)},Y3=(l,m,p,y)=>{const E=Of(l,m,p,y.replaceOrInit);return Ta(E,m[0].row,m[0].column)},jr=(l,m)=>(p,y,E,A,M)=>{const L=Kg(y),Z=zt(L,ce=>ce.row),Q=U0(p,Z,l,m,E,A.replaceOrInit,M);return Ta(Q,y[0].row,y[0].column)},Nl=jr("thead",!0),Sc=jr("tbody",!1),X3=jr("tfoot",!1),Yg=(l,m,p,y)=>{const E=Ea(m.details),A=W2(l,zt(E,L=>L.column)),M=A.length>0?A[0].cells.length-1:0;return Ta(A,E[0].row,Math.min(E[0].column,M))},Pw=(l,m,p,y)=>{const E=Kg(m),A=j2(l,E[0].row,E[E.length-1].row),M=Math.max(os(A).rows.length-1,0);return Ta(A,Math.min(m[0].row,M),m[0].column)},W0=(l,m,p,y)=>{const E=m.cells;Ow(E);const A=z2(l,m.bounds,p,y.merge(E));return Ce(A,ne.from(E[0]))},J3=(l,m,p,y)=>{const A=ls(m,(M,L)=>Dw(M,L,p,y.unmerge(L)),l);return Ce(A,ne.from(m[0]))},$w=(l,m,p,y)=>{const A=((Z,Q)=>{const ce=rn.fromTable(Z);return ys(ce,Q,!0)})(m.clipboard,m.generators),M=Kd(m.row,m.column);return Fo(M,l,A,m.generators,p).fold(()=>Ce(l,ne.some(m.element)),Z=>Ta(Z,m.row,m.column))},fn=(l,m,p)=>{const y=Ye(l,p.section),E=rn.generate(y);return ys(E,m,!0)},xt=(l,m,p,y)=>{const E=os(l).rows,A=m.cells[0].column,M=E[m.cells[0].row],L=fn(m.clipboard,m.generators,M),Z=Ms(A,l,L,m.generators,p);return Ta(Z,m.cells[0].row,m.cells[0].column)},Xg=(l,m,p,y)=>{const E=os(l).rows,A=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,M=E[m.cells[0].row],L=fn(m.clipboard,m.generators,M),Z=Ms(A,l,L,m.generators,p);return Ta(Z,m.cells[0].row,A)},j0=(l,m,p,y)=>{const E=os(l).rows,A=m.cells[0].row,M=E[A],L=fn(m.clipboard,m.generators,M),Z=Wg(A,l,L,m.generators,p);return Ta(Z,m.cells[0].row,m.cells[0].column)},G0=(l,m,p,y)=>{const E=os(l).rows,A=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,M=E[m.cells[0].row],L=fn(m.clipboard,m.generators,M),Z=Wg(A,l,L,m.generators,p);return Ta(Z,A,m.cells[0].column)},Q3=(l,m)=>{const p=rn.fromTable(l);return rr(p,m).bind(E=>{const A=E[E.length-1],M=E[0].column,L=A.column+A.colspan,Z=no(zt(p.all,Q=>Ro(Q.cells,ce=>ce.column>=M&&ce.column<L)));return m2(Z)}).getOr("")},Y2=(l,m)=>{const p=rn.fromTable(l);return rr(p,m).bind(m2).getOr("")},Io=(l,m)=>{const p=rn.fromTable(l);return rr(p,m).bind(E=>{const A=E[E.length-1],M=E[0].row,L=A.row+A.rowspan,Z=p.all.slice(M,L);return nw(Z)}).getOr("")},q0=(l,m,p,y)=>y0(l,m,p,y.sizing),K0=(l,m,p,y)=>v0(l,m,p,y.sizing,y.resize),X2=(l,m)=>Xe(m,p=>p.column===0&&p.isLocked),Te=(l,m)=>Xe(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),Jg=(l,m)=>{const p=Og(l),y=Ea(m);return De(y,(E,A)=>{const L=p[A.column].map(rs).getOr(0);return E+L},0)},Rf=l=>(m,p)=>rr(m,p).filter(y=>!(l?X2:Te)(m,y)).map(y=>({details:y,pixelDelta:Jg(m,y)})),Su=(l,m)=>Ig(l,m).map(p=>({details:p,pixelDelta:-Jg(l,p)})),Wi=l=>(m,p)=>Vc(m,p).filter(y=>!(l?X2:Te)(m,y.cells)),wu=wa.transform("th"),Qg=wa.transform("td"),Mf=(l,m,p,y)=>Zs(Bl,rr,Dt,Dt,wa.modification,l,m,p,y),ek=(l,m,p,y)=>Zs(q2,rr,Dt,Dt,wa.modification,l,m,p,y),eh=(l,m,p,y)=>Zs(K2,Rf(!0),K0,Dt,wa.modification,l,m,p,y),Eo=(l,m,p,y)=>Zs(Df,Rf(!1),K0,Dt,wa.modification,l,m,p,y),ji=(l,m,p,y)=>Zs(Yg,Su,K0,qg,wa.modification,l,m,p,y),J2=(l,m,p,y)=>Zs(Pw,rr,Dt,qg,wa.modification,l,m,p,y),Tm=(l,m,p,y)=>Zs(_p,Ig,Dt,Dt,wu,l,m,p,y),Pl=(l,m,p,y)=>Zs(Z0,Ig,Dt,Dt,Qg,l,m,p,y),Gr=(l,m,p,y)=>Zs(Nl,rr,Dt,Dt,wu,l,m,p,y),Iw=(l,m,p,y)=>Zs(Sc,rr,Dt,Dt,Qg,l,m,p,y),Q2=(l,m,p,y)=>Zs(X3,rr,Dt,Dt,Qg,l,m,p,y),Lw=(l,m,p,y)=>Zs(vd,Ig,Dt,Dt,wu,l,m,p,y),tk=(l,m,p,y)=>Zs(Y3,Ig,Dt,Dt,Qg,l,m,p,y),nk=(l,m,p,y)=>Zs(W0,vf,q0,Dt,wa.merging,l,m,p,y),ey=(l,m,p,y)=>Zs(J3,I3,q0,Dt,wa.merging,l,m,p,y),Fw=(l,m,p,y)=>Zs($w,g0,q0,Dt,wa.modification,l,m,p,y),Ve=(l,m,p,y)=>Zs(xt,Wi(!0),Dt,Dt,wa.modification,l,m,p,y),ty=(l,m,p,y)=>Zs(Xg,Wi(!1),Dt,Dt,wa.modification,l,m,p,y),mr=(l,m,p,y)=>Zs(j0,Vc,Dt,Dt,wa.modification,l,m,p,y),ny=(l,m,p,y)=>Zs(G0,Vc,Dt,Dt,wa.modification,l,m,p,y),oy=Q3,sy=Y2,ok=Io,Vt=(l,m)=>{const p=m.column,y=m.column+m.colspan-1,E=m.row,A=m.row+m.rowspan-1;return p<=l.finishCol&&y>=l.startCol&&E<=l.finishRow&&A>=l.startRow},Hw=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,zw=(l,m)=>{let p=!0;const y=dn(Hw,m);for(let E=m.startRow;E<=m.finishRow;E++)for(let A=m.startCol;A<=m.finishCol;A++)p=p&&rn.getAt(l,E,A).exists(y);return p?ne.some(m):ne.none()},sk=(l,m)=>fa(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),rk=(l,m,p)=>{const y=rn.findItem(l,m,ao),E=rn.findItem(l,p,ao);return y.bind(A=>E.map(M=>sk(A,M)))},Vw=(l,m,p)=>rk(l,m,p).bind(y=>zw(l,y)),XL=(l,m,p,y)=>rn.findItem(l,m,ao).bind(E=>{const A=p>0?E.row+E.rowspan-1:E.row,M=y>0?E.column+E.colspan-1:E.column;return rn.getAt(l,A+p,M+y).map(Z=>Z.element)}),V5=(l,m,p)=>rk(l,m,p).map(y=>{const E=rn.filterItems(l,dn(Vt,y));return zt(E,A=>A.element)}),Uw=(l,m)=>{const p=(y,E)=>tm(E,y);return rn.findItem(l,m,p).map(y=>y.element)},ak=(l,m,p)=>Hc(l).bind(y=>{const E=yi(y);return XL(E,l,m,p)}),Ut=(l,m,p)=>{const y=yi(l);return V5(y,m,p)},ry=(l,m,p,y,E)=>{const A=yi(l),M=ao(l,p)?ne.some(m):Uw(A,m),L=ao(l,E)?ne.some(y):Uw(A,y);return M.bind(Z=>L.bind(Q=>V5(A,Z,Q)))},yd=(l,m,p)=>{const y=yi(l);return Vw(y,m,p)},yi=rn.fromTable,Y0={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},ka=()=>ot.fromTag("th"),th=()=>ot.fromTag("td"),Ap=()=>ot.fromTag("col"),X0=(l,m,p,y)=>{const E=ot.fromTag("tr");for(let A=0;A<l;A++){const M=y<m||A<p?ka():th();A<p&&Gs(M,"scope","row"),y<m&&Gs(M,"scope","col"),qn(M,ot.fromTag("br")),qn(E,M)}return E},nh=l=>{const m=ot.fromTag("colgroup");return Zo(l,()=>qn(m,Ap())),m},oh=(l,m,p,y)=>Zo(l,E=>X0(m,p,y,E)),xu=(l,m,p,y,E,A=Y0)=>{const M=ot.fromTag("table"),L=E!=="cells";No(M,A.styles),nd(M,A.attributes),A.colGroups&&qn(M,nh(m));const Z=Math.min(l,p);if(L&&p>0){const tt=ot.fromTag("thead");qn(M,tt);const je=oh(p,m,E==="sectionCells"?Z:0,y);Di(tt,je)}const Q=ot.fromTag("tbody");qn(M,Q);const ce=L?l-Z:l,at=oh(ce,m,L?0:p,y);return Di(Q,at),M},Bs=l=>{let m=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");m.push(A)},unbind:A=>{m=Ro(m,M=>M!==A)},trigger:(...A)=>{const M={};Me(l,(L,Z)=>{M[L]=A[Z]}),Me(m,L=>{L(M)})}}},Cd=l=>{const m=cn(l,y=>({bind:y.bind,unbind:y.unbind})),p=cn(l,y=>y.trigger);return{registry:m,trigger:p}},Zw=pt(["compare","extract","mutate","sink"]),ay=pt(["element","start","stop","destroy"]),Ww=pt(["forceDrop","drop","move","delayDrop"]),ck=()=>{let l=ne.none();const m=()=>{l=ne.none()},p=(A,M)=>{const L=l.map(Z=>A.compare(Z,M));return l=ne.some(M),L},y=(A,M)=>{M.extract(A).each(Z=>{p(M,Z).each(ce=>{E.trigger.move(ce)})})},E=Cd({move:Bs(["info"])});return{onEvent:y,reset:m,events:E.registry}},kn=()=>{const l=Cd({move:Bs(["info"])});return{onEvent:Dt,reset:Dt,events:l.registry}},Gi=()=>{const l=kn(),m=ck();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(L,Z)=>{p.onEvent(L,Z)},events:m.events}},km=(l,m,p)=>{let y=!1;const E=Cd({start:Bs([]),stop:Bs([])}),A=Gi(),M=()=>{Le.stop(),A.isOn()&&(A.off(),E.trigger.stop())},L=dg(M,200),Z=Pe=>{Le.start(Pe),A.on(),E.trigger.start()},Q=Pe=>{L.cancel(),A.onEvent(Pe,m)};A.events.move.bind(Pe=>{m.mutate(l,Pe.info)});const ce=()=>{y=!0},Fe=()=>{y=!1},at=()=>y,tt=Pe=>(...Mt)=>{y&&Pe.apply(null,Mt)},Le=m.sink(Ww({forceDrop:M,drop:tt(M),move:tt(Q),delayDrop:tt(L.throttle)}),p),je=()=>{Le.destroy()};return{element:Le.element,go:Z,on:ce,off:Fe,isActive:at,destroy:je,events:E.registry}},sh=vo("ephox-dragster").resolve,An=l=>{const m={layerClass:sh("blocker"),...l},p=ot.fromTag("div");return Gs(p,"role","presentation"),Gs(p,"data-mce-bogus","all"),No(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),El(p,sh("blocker")),El(p,m.layerClass),{element:Y(p),destroy:()=>{oa(p)}}};var Op=Zw({compare:(l,m)=>Go(m.left-l.left,m.top-l.top),extract:l=>ne.some(Go(l.x,l.y)),sink:(l,m)=>{const p=An(m),y=td(p.element(),"mousedown",l.forceDrop),E=td(p.element(),"mouseup",l.drop),A=td(p.element(),"mousemove",l.move),M=td(p.element(),"mouseout",l.delayDrop),L=()=>{p.destroy(),E.unbind(),A.unbind(),M.unbind(),y.unbind()},Z=ce=>{qn(ce,p.element())},Q=()=>{oa(p.element())};return ay({element:p.element,start:Z,stop:Q,destroy:L})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const uk=(l,m={})=>{const p=m.mode??Op;return km(l,p,m)},Dp=vo("ephox-snooker").resolve,mk=()=>{const l=Cd({drag:Bs(["xDelta","yDelta"])});return{mutate:(p,y)=>{l.trigger.drag(p,y)},events:l.registry}},Rp=()=>{const l=Cd({drag:Bs(["xDelta","yDelta","target"])});let m=ne.none();const p=mk();return p.events.drag.bind(A=>{m.each(M=>{l.trigger.drag(A.xDelta,A.yDelta,M)})}),{assign:A=>{m=ne.some(A)},get:()=>m,mutate:p.mutate,events:l.registry}},jw=(l,m,p,y,E)=>{const A=ot.fromTag("div");return No(A,{position:"absolute",left:m-y/2+"px",top:p+"px",height:E+"px",width:y+"px"}),nd(A,{"data-mce-bogus":"all","data-column":l,role:"presentation"}),A},fk=(l,m,p,y,E)=>{const A=ot.fromTag("div");return No(A,{position:"absolute",left:m+"px",top:p-E/2+"px",height:E+"px",width:y+"px"}),nd(A,{"data-mce-bogus":"all","data-row":l,role:"presentation"}),A},J0=Dp("resizer-bar"),cy=Dp("resizer-rows"),iy=Dp("resizer-cols"),Gw=7,gk=(l,m)=>ts(l.all,(p,y)=>m(p.element)?[y]:[]),qw=(l,m)=>{const p=[];return Zo(l.grid.columns,y=>{rn.getColumnAt(l,y).map(A=>A.element).forall(m)&&p.push(y)}),Ro(p,y=>{const E=rn.filterItems(l,A=>A.column===y);return po(E,A=>m(A.element))})},ly=l=>{const m=mu(l.parent(),"."+J0);Me(m,oa)},Kw=(l,m,p)=>{const y=l.origin();Me(m,E=>{E.each(A=>{const M=p(y,A);El(M,J0),qn(l.parent(),M)})})},$n=(l,m,p,y)=>{Kw(l,m,(E,A)=>{const M=jw(A.col,A.x-E.left,p.top-E.top,Gw,y);return El(M,iy),M})},Yw=(l,m,p,y)=>{Kw(l,m,(E,A)=>{const M=fk(A.row,p.left-E.left,A.y-E.top,y,Gw);return El(M,cy),M})},uy=(l,m,p,y,E)=>{const A=Cn(p),M=m.isResizable,L=y.length>0?sp.positions(y,p):[],Z=L.length>0?gk(l,M):[],Q=Ro(L,(tt,Le)=>Xe(Z,je=>Le===je));Yw(m,Q,A,rs(p));const ce=E.length>0?gs.positions(E,p):[],Fe=ce.length>0?qw(l,M):[],at=Ro(ce,(tt,Le)=>Xe(Fe,je=>Le===je));$n(m,at,A,HS(p))},Q0=(l,m)=>{if(ly(l),l.isResizable(m)){const p=rn.fromTable(m),y=h2(p),E=Og(p);uy(p,l,m,y,E)}},Sd=(l,m)=>{const p=mu(l.parent(),"."+J0);Me(p,m)},dy=l=>{Sd(l,m=>{Er(m,"display","none")})},hk=l=>{Sd(l,m=>{Er(m,"display","block")})},Xw=l=>Tl(l,cy),rh=l=>Tl(l,iy),Jw=Dp("resizer-bar-dragging"),Mp=l=>{const m=Rp(),p=uk(m,{});let y=ne.none();const E=(je,Pe)=>ne.from(Ri(je,Pe));m.events.drag.bind(je=>{E(je.target,"data-row").each(Pe=>{const Mt=Us(je.target,"top");Er(je.target,"top",Mt+je.yDelta+"px")}),E(je.target,"data-column").each(Pe=>{const Mt=Us(je.target,"left");Er(je.target,"left",Mt+je.xDelta+"px")})});const A=(je,Pe)=>{const Mt=Us(je,Pe),Jt=cd(je,"data-initial-"+Pe,0);return Mt-Jt};p.events.stop.bind(()=>{m.get().each(je=>{y.each(Pe=>{E(je,"data-row").each(Mt=>{const Jt=A(je,"top");Kn(je,"data-initial-top"),Le.trigger.adjustHeight(Pe,Jt,parseInt(Mt,10))}),E(je,"data-column").each(Mt=>{const Jt=A(je,"left");Kn(je,"data-initial-left"),Le.trigger.adjustWidth(Pe,Jt,parseInt(Mt,10))}),Q0(l,Pe)})})});const M=(je,Pe)=>{Le.trigger.startAdjust(),m.assign(je),Gs(je,"data-initial-"+Pe,Us(je,Pe)),El(je,Jw),Er(je,"opacity","0.2"),p.go(l.dragContainer())},L=td(l.parent(),"mousedown",je=>{Xw(je.target)&&M(je.target,"top"),rh(je.target)&&M(je.target,"left")}),Z=je=>ao(je,l.view()),Q=je=>qs(je,"table",Z).filter(qh),ce=je=>Tl(je,"ephox-snooker-resizer-bar")||Tl(je,"ephox-dragster-blocker"),Fe=td(l.view(),"mouseover",je=>{Q(je.target).fold(()=>{Nt(je.target)&&!ce(je.target)&&ly(l)},Pe=>{p.isActive()&&(y=ne.some(Pe),Q0(l,Pe))})}),at=()=>{L.unbind(),Fe.unbind(),p.destroy(),ly(l)},tt=je=>{Q0(l,je)},Le=Cd({adjustHeight:Bs(["table","delta","row"]),adjustWidth:Bs(["table","delta","column"]),startAdjust:Bs([])});return{destroy:at,refresh:tt,on:p.on,off:p.off,hideBars:dn(dy,l),showBars:dn(hk,l),events:Le.registry}},my={create:(l,m,p)=>{const y=sp,E=gs,A=Mp(l),M=Cd({beforeResize:Bs(["table","type"]),afterResize:Bs(["table","type"]),startDrag:Bs([])});return A.events.adjustHeight.bind(L=>{const Z=L.table;M.trigger.beforeResize(Z,"row");const Q=y.delta(L.delta,Z);b0(Z,Q,L.row),M.trigger.afterResize(Z,"row")}),A.events.startAdjust.bind(L=>{M.trigger.startDrag()}),A.events.adjustWidth.bind(L=>{const Z=L.table;M.trigger.beforeResize(Z,"col");const Q=E.delta(L.delta,Z),ce=p(Z);Fg(Z,Q,L.column,m,ce),M.trigger.afterResize(Z,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:M.registry}}},_m=l=>m=>m.options.get(l),Qw="100%",ex=l=>{const m=l.dom,p=m.getParent(l.selection.getStart(),m.isBlock)??l.getBody();return Tr(ot.fromDom(p))+"px"},tx=(l,m)=>Pp(l)||!fy(l)?m:Eu(l)?{...m,width:ex(l)}:{...m,width:Qw},nx=(l,m)=>Pp(l)||fy(l)?m:Eu(l)?{...m,width:ex(l)}:{...m,width:Qw},j5=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const y=Uo(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const y=Uo(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},ox=l=>ne.from(l.options.get("table_clone_elements")),eb=l=>{const m=l.options.get("object_resizing");return Uo(m.split(","),"table")},tb=_m("table_header_type"),Np=_m("table_column_resizing"),nb=l=>Np(l)==="preservetable",ob=l=>Np(l)==="resizetable",lt=_m("table_sizing_mode"),Am=l=>lt(l)==="relative",Eu=l=>lt(l)==="fixed",Pp=l=>lt(l)==="responsive",sx=_m("table_resize_bars"),fy=_m("table_style_by_css"),gy=_m("table_merge_content_on_paste"),rx=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:nx(l,p)},ax=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:tx(l,p)},cx=_m("table_use_colgroups"),sb=l=>ot.fromDom(l.getBody()),Ns=l=>m=>ao(m,sb(l)),qi=l=>{Kn(l,"data-mce-style");const m=p=>Kn(p,"data-mce-style");Me(um(l),m),Me(a0(l),m),Me(d2(l),m)},rb=l=>ot.fromDom(l.selection.getStart()),ix=l=>l.getBoundingClientRect().width,lx=l=>l.getBoundingClientRect().height,ux=l=>(m,p)=>{const y=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return ne.from(y).filter(_s)},ab=ux("width"),hy=ux("height"),dx=l=>/^(\d+(\.\d+)?)%$/.test(l),mx=l=>/^(\d+(\.\d+)?)px$/.test(l),$p=l=>Y1(l,Pc("table")).exists(qh),py=l=>di(l,"table"),cb=(l,m,p)=>{const y=E=>A=>p!==void 0&&p(A)||ao(A,E);return ao(l,m)?ne.some({boxes:ne.some([l]),start:l,finish:m}):py(l).bind(E=>py(m).bind(A=>{if(ao(E,A))return ne.some({boxes:Ut(E,l,m),start:l,finish:m});if(tm(E,A)){const M=oo(m,"td,th",y(E)),L=M.length>0?M[M.length-1]:m;return ne.some({boxes:ry(E,l,E,m,A),start:l,finish:L})}else if(tm(A,E)){const M=oo(l,"td,th",y(A)),L=M.length>0?M[M.length-1]:l;return ne.some({boxes:ry(A,l,E,m,A),start:l,finish:L})}else return Dl(l,m).shared.bind(M=>qs(M,"table",p).bind(L=>{const Z=oo(m,"td,th",y(L)),Q=Z.length>0?Z[Z.length-1]:m,ce=oo(l,"td,th",y(L)),Fe=ce.length>0?ce[ce.length-1]:l;return ne.some({boxes:ry(L,l,E,m,A),start:Fe,finish:Q})}))}))},by=(l,m)=>{const p=mu(l,m);return p.length>0?ne.some(p):ne.none()},pk=(l,m)=>N(l,p=>ha(p,m)),fx=(l,m,p)=>sm(l,m).bind(y=>sm(l,p).bind(E=>fo(py,[y,E]).map(A=>({first:y,last:E,table:A})))),gx=(l,m)=>di(l,"table").bind(p=>sm(p,m).bind(y=>cb(y,l).bind(E=>E.boxes.map(A=>({boxes:A,start:E.start,finish:E.finish}))))),ib=(l,m,p,y,E)=>pk(l,E).bind(A=>ak(A,m,p).bind(M=>gx(M,y))),Bf=(l,m)=>by(l,m),hx=(l,m,p)=>fx(l,m,p).bind(y=>{const E=Z=>ao(l,Z),A="thead,tfoot,tbody,table",M=di(y.first,A,E),L=di(y.last,A,E);return M.bind(Z=>L.bind(Q=>ao(Z,Q)?yd(y.table,y.first,y.last):ne.none()))}),px=en,lb=l=>{const m=(y,E)=>ci(y,E).exists(A=>parseInt(A,10)>1),p=y=>m(y,"rowspan")||m(y,"colspan");return l.length>0&&po(l,p)?ne.some(l):ne.none()},bk=(l,m,p)=>m.length<=1?ne.none():hx(l,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:m})),Nf={create:(l,m)=>({selection:l,kill:m})},vy=(l,m,p,y)=>{switch(l.tag){case"none":return m();case"single":return y(l.element);case"multiple":return p(l.elements)}},yk=()=>({tag:"none"}),Ck=l=>({tag:"multiple",elements:l}),bx=l=>({tag:"single",element:l}),Sk=(l,m,p)=>({get:()=>Bf(l(),p).fold(()=>m().fold(yk,bx),Ck)}),ub={create:(l,m,p,y)=>({start:or.on(l,m),finish:or.on(p,y)})},Cy=(l,m)=>{const p=We(l,m);return rd.create(ot.fromDom(p.startContainer),p.startOffset,ot.fromDom(p.endContainer),p.endOffset)},Tu=ub.create,vx=(l,m,p,y,E,A,M)=>ao(p,E)&&y===A?ne.none():qs(p,"td,th",m).bind(L=>qs(E,"td,th",m).bind(Z=>db(l,m,L,Z,M))),db=(l,m,p,y,E)=>ao(p,y)?ne.none():cb(p,y,m).bind(A=>{const M=A.boxes.getOr([]);return M.length>1?(E(l,M,A.start,A.finish),ne.some(Nf.create(ne.some(Tu(p,0,p,fu(p))),!0))):ne.none()}),wk=(l,m,p,y,E)=>{const A=M=>(E.clearBeforeUpdate(p),E.selectRange(p,M.boxes,M.start,M.finish),M.boxes);return ib(y,l,m,E.firstSelectedSelector,E.lastSelectedSelector).map(A)},Om=Ir.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),xk=(l,m,p)=>{const y=l.getRect(m),E=l.getRect(p);return E.right>y.left&&E.left<y.right},Ek=l=>qs(l,"tr"),ah={...Om,verify:(l,m,p,y,E,A,M)=>qs(y,"td,th",M).bind(L=>qs(m,"td,th",M).map(Z=>ao(L,Z)?ao(y,L)&&fu(L)===E?A(Z):Om.none("in same cell"):fo(Ek,[L,Z]).fold(()=>xk(l,Z,L)?Om.success():A(Z),Q=>A(Z)))).getOr(Om.none("default")),cata:(l,m,p,y,E)=>l.fold(m,p,y,E)},Ip=Pc("br"),Sy=(l,m,p)=>m(l,p).bind(y=>bg(y)&&Wh(y).trim().length===0?Sy(y,m,p):ne.some(y)),Tk=(l,m,p)=>p.traverse(m).orThunk(()=>Sy(m,p.gather,l)).map(p.relative),kk=(l,m)=>dc(l,m).filter(Ip).orThunk(()=>dc(l,m-1).filter(Ip)),mb=(l,m,p,y)=>kk(m,p).bind(E=>y.traverse(E).fold(()=>Sy(E,y.gather,l).map(y.relative),A=>am(A).map(M=>or.on(M.parent,M.index)))),yx=(l,m,p,y)=>(Ip(m)?Tk(l,m,y):mb(l,m,p,y)).map(A=>({start:A,finish:A})),Cx=l=>ah.cata(l,m=>ne.none(),()=>ne.none(),m=>ne.some(hd(m,0)),m=>ne.some(hd(m,fu(m)))),Lp=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),fb=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),wy=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),Fp=l=>l.top,xy=l=>l.bottom,_k=(l,m,p)=>p>=0&&p<fu(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):ne.none(),Hp=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Sx=(l,m)=>ne.some(l.getRect(m)),gb=(l,m,p)=>Hr(m)?Sx(l,m).map(Hp):bg(m)?_k(l,m,p).map(Hp):ne.none(),hb=(l,m)=>Hr(m)?Sx(l,m).map(Hp):bg(m)?l.getRangedRect(m,0,m,fu(m)).map(Hp):ne.none(),Pf=5,Ak=100,ku=Ir.generate([{none:[]},{retry:["caret"]}]),Ok=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,wx=(l,m,p)=>Y1(m,Rl).fold(gn,y=>hb(l,y).exists(E=>Ok(p,E))),Dk=(l,m,p,y,E)=>{const A=Lp(E,Pf);return Math.abs(p.bottom-y.bottom)<1||p.top>E.bottom?ku.retry(A):p.top===E.bottom?ku.retry(Lp(E,1)):wx(l,m,E)?ku.retry(wy(A,Pf,0)):ku.none()},pb={point:Fp,adjuster:(l,m,p,y,E)=>{const A=fb(E,Pf);return Math.abs(p.top-y.top)<1||p.bottom<E.top?ku.retry(A):p.bottom===E.top?ku.retry(fb(E,1)):wx(l,m,E)?ku.retry(wy(A,Pf,0)):ku.none()},move:fb,gather:Aw},Rk={point:xy,adjuster:Dk,move:Lp,gather:Ui},Mk=(l,m,p)=>l.elementFromPoint(m,p).filter(y=>bs(y)==="table").isSome(),Bk=(l,m,p,y,E)=>Ey(l,m,p,m.move(y,Pf),E),Ey=(l,m,p,y,E)=>E===0?ne.some(y):Mk(l,y.left,m.point(y))?Bk(l,m,p,y,E-1):l.situsFromPoint(y.left,m.point(y)).bind(A=>A.start.fold(ne.none,M=>hb(l,M).bind(L=>m.adjuster(l,M,L,p,y).fold(ne.none,Z=>Ey(l,m,p,Z,E-1))).orThunk(()=>ne.some(y)),ne.none)),Nk=(l,m,p)=>l.point(m)>p.getInnerHeight()?ne.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?ne.some(-l.point(m)):ne.none(),xx=(l,m,p)=>{const y=l.move(p,Pf),E=Ey(m,l,p,y,Ak).getOr(y);return Nk(l,E,m).fold(()=>m.situsFromPoint(E.left,l.point(E)),A=>(m.scrollBy(0,A),m.situsFromPoint(E.left,l.point(E)-A)))},Ty={tryUp:dn(xx,pb),tryDown:dn(xx,Rk),getJumpSize:Y(Pf)},Pk=20,$k=(l,m,p)=>l.getSelection().bind(y=>yx(m,y.finish,y.foffset,p).fold(()=>ne.some(hd(y.finish,y.foffset)),E=>{const A=l.fromSitus(E),M=ah.verify(l,y.finish,y.foffset,A.finish,A.foffset,p.failure,m);return Cx(M)})),ky=(l,m,p,y,E,A)=>A===0?ne.none():zp(l,m,p,y,E).bind(M=>{const L=l.fromSitus(M),Z=ah.verify(l,p,y,L.finish,L.foffset,E.failure,m);return ah.cata(Z,()=>ne.none(),()=>ne.some(M),Q=>ao(p,Q)&&y===0?Ex(l,p,y,fb,E):ky(l,m,Q,0,E,A-1),Q=>ao(p,Q)&&y===fu(Q)?Ex(l,p,y,Lp,E):ky(l,m,Q,fu(Q),E,A-1))}),Ex=(l,m,p,y,E)=>gb(l,m,p).bind(A=>wt(l,E,y(A,Ty.getJumpSize()))),wt=(l,m,p)=>{const y=pl().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(l,p):ne.none()},zp=(l,m,p,y,E)=>gb(l,p,y).bind(A=>wt(l,E,A)),Tx=(l,m,p)=>$k(l,m,p).bind(y=>ky(l,m,y.element,y.offset,p,Pk).map(l.fromSitus)),Ik=(l,m)=>WS(l,p=>q(p).exists(y=>ao(y,m))),_y=(l,m,p,y,E)=>qs(y,"td,th",m).bind(A=>qs(A,"table",m).bind(M=>Ik(E,M)?Tx(l,m,p).bind(L=>qs(L.finish,"td,th",m).map(Z=>({start:A,finish:Z,range:L}))):ne.none())),Vp=(l,m,p,y,E,A)=>A(y,m).orThunk(()=>_y(l,m,p,y,E).map(M=>{const L=M.range;return Nf.create(ne.some(Tu(L.start,L.soffset,L.finish,L.foffset)),!0)})),bb=(l,m)=>qs(l,"tr",m).bind(p=>qs(p,"table",m).bind(y=>{const E=mu(y,"tr");return ao(p,E[0])?ca(y,A=>Os(A).isSome(),m).map(A=>{const M=fu(A);return Nf.create(ne.some(Tu(A,M,A,M)),!0)}):ne.none()})),Up=(l,m)=>qs(l,"tr",m).bind(p=>qs(p,"table",m).bind(y=>{const E=mu(y,"tr");return ao(p,E[E.length-1])?vi(y,A=>Yh(A).isSome(),m).map(A=>Nf.create(ne.some(Tu(A,0,A,0)),!0)):ne.none()})),ch=(l,m,p,y,E,A,M)=>_y(l,p,y,E,A).bind(L=>db(m,p,L.start,L.finish,M)),Ay=(l,m)=>qs(l,"td,th",m),Oy=l=>uc(l).exists(qh),kx=(l,m,p,y)=>{const E=ll(),A=E.clear,M=ce=>{E.on(Fe=>{y.clearBeforeUpdate(m),Ay(ce.target,p).each(at=>{cb(Fe,at,p).each(tt=>{const Le=tt.boxes.getOr([]);if(Le.length===1){const je=Le[0],Pe=Kh(je)==="false",Mt=Kt(Sg(ce.target),je,ao);Pe&&Mt&&y.selectRange(m,Le,je,je)}else Le.length>1&&(y.selectRange(m,Le,tt.start,tt.finish),l.selectContents(at))})})})};return{clearstate:A,mousedown:ce=>{y.clear(m),Ay(ce.target,p).filter(Oy).each(E.set)},mouseover:ce=>{M(ce)},mouseup:ce=>{M(ce),A()}}},Dy={traverse:vg,gather:Ui,relative:or.before,retry:Ty.tryDown,failure:ah.failedDown},_x={traverse:Zv,gather:Aw,relative:or.before,retry:Ty.tryUp,failure:ah.failedUp},ih=l=>m=>m===l,wd=ih(38),lh=ih(40),xd=l=>l>=37&&l<=40,Ed={isBackward:ih(37),isForward:ih(39)},Ax={isBackward:ih(39),isForward:ih(37)},Zp=l=>({elementFromPoint:(Pe,Mt)=>ot.fromPoint(ot.fromDom(l.document),Pe,Mt),getRect:Pe=>Pe.dom.getBoundingClientRect(),getRangedRect:(Pe,Mt,Jt,mt)=>{const Wn=ad.exact(Pe,Mt,Jt,mt);return c2(l,Wn)},getSelection:()=>y3(l).map(Pe=>Cy(l,Pe)),fromSitus:Pe=>{const Mt=ad.relative(Pe.start,Pe.finish);return Cy(l,Mt)},situsFromPoint:(Pe,Mt)=>i2(l,Pe,Mt).map(Jt=>ub.create(Jt.start,Jt.soffset,Jt.finish,Jt.foffset)),clearSelection:()=>{C3(l)},collapseSelection:(Pe=!1)=>{y3(l).each(Mt=>Mt.fold(Jt=>Jt.collapse(Pe),(Jt,mt)=>{const Wn=Pe?Jt:mt;QS(l,Wn,Wn)},(Jt,mt,Wn,Gt)=>{const Xn=Pe?Jt:Wn,ws=Pe?mt:Gt;o0(l,Xn,ws,Xn,ws)}))},setSelection:Pe=>{o0(l,Pe.start,Pe.soffset,Pe.finish,Pe.foffset)},setRelativeSelection:(Pe,Mt)=>{QS(l,Pe,Mt)},selectNode:Pe=>{a2(l,Pe,!1)},selectContents:Pe=>{a2(l,Pe)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>xo(ot.fromDom(l.document)).top,scrollBy:(Pe,Mt)=>{ui(Pe,Mt,ot.fromDom(l.document))}}),Ki=(l,m)=>({rows:l,cols:m}),Ox=(l,m,p,y)=>{const E=Zp(l),A=kx(E,m,p,y);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},Dx=l=>Y1(l,Vv).exists(qh),Ry=(l,m)=>Dx(l)||Dx(m),My=(l,m,p,y)=>{const E=Zp(l),A=()=>(y.clear(m),ne.none());return{keydown:(Z,Q,ce,Fe,at,tt)=>{const Le=Z.raw,je=Le.which,Pe=Le.shiftKey===!0;return by(m,y.selectedSelector).fold(()=>(xd(je)&&!Pe&&y.clearBeforeUpdate(m),xd(je)&&Pe&&!Ry(Q,Fe)?ne.none:lh(je)&&Pe?dn(ch,E,m,p,Dy,Fe,Q,y.selectRange):wd(je)&&Pe?dn(ch,E,m,p,_x,Fe,Q,y.selectRange):lh(je)?dn(Vp,E,p,Dy,Fe,Q,Up):wd(je)?dn(Vp,E,p,_x,Fe,Q,bb):ne.none),Jt=>{const mt=Wn=>()=>_e(Wn,Xn=>wk(Xn.rows,Xn.cols,m,Jt,y)).fold(()=>fx(m,y.firstSelectedSelector,y.lastSelectedSelector).map(Xn=>{const ws=lh(je)||tt.isForward(je)?or.after:or.before;return E.setRelativeSelection(or.on(Xn.first,0),ws(Xn.table)),y.clear(m),Nf.create(ne.none(),!0)}),Xn=>ne.some(Nf.create(ne.none(),!0)));return xd(je)&&Pe&&!Ry(Q,Fe)?ne.none:lh(je)&&Pe?mt([Ki(1,0)]):wd(je)&&Pe?mt([Ki(-1,0)]):tt.isBackward(je)&&Pe?mt([Ki(0,-1),Ki(-1,0)]):tt.isForward(je)&&Pe?mt([Ki(0,1),Ki(1,0)]):xd(je)&&!Pe?A:ne.none})()},keyup:(Z,Q,ce,Fe,at)=>by(m,y.selectedSelector).fold(()=>{const tt=Z.raw,Le=tt.which;return tt.shiftKey===!0&&xd(Le)&&Ry(Q,Fe)?vx(m,p,Q,ce,Fe,at,y.selectRange):ne.none()},ne.none)}},Rx=(l,m,p,y)=>{const E=Zp(l);return(A,M)=>{y.clearBeforeUpdate(m),cb(A,M,p).each(L=>{const Z=L.boxes.getOr([]);y.selectRange(m,Z,L.start,L.finish),E.selectContents(M),E.collapseSelection()})}},Bx={byClass:l=>{const m=t2(l.selected),p=ZS([l.selected,l.lastSelected,l.firstSelected]),y=A=>{const M=mu(A,l.selectedSelector);Me(M,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(A,M,L,Z)=>{y(A),Me(M,m),El(L,l.firstSelected),El(Z,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const y=Z=>{Kn(Z,l.selected),Kn(Z,l.firstSelected),Kn(Z,l.lastSelected)},E=Z=>{Gs(Z,l.selected,"1")},A=Z=>{M(Z),p()},M=Z=>{const Q=mu(Z,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Me(Q,y)};return{clearBeforeUpdate:M,clear:A,selectRange:(Z,Q,ce,Fe)=>{A(Z),Me(Q,E),Gs(ce,l.firstSelected,"1"),Gs(Fe,l.lastSelected,"1"),m(Q,ce,Fe)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},$f="data-mce-selected",By="td["+$f+"],th["+$f+"]",Nx="["+$f+"]",Ny="data-mce-first-selected",Py="td["+Ny+"],th["+Ny+"]",$y="data-mce-last-selected",Fk="td["+$y+"],th["+$y+"]",If=Nx,Lf={selected:$f,selectedSelector:By,firstSelected:Ny,firstSelectedSelector:Py,lastSelected:$y,lastSelectedSelector:Fk},vb=(l,m,p)=>({element:p,mergable:bk(m,l,Lf),unmergable:lb(l),selection:px(l)}),yb=(l,m,p)=>({element:l,clipboard:m,generators:p}),Px=(l,m,p,y)=>({selection:px(l),clipboard:p,generators:y}),Hk=l=>Hc(l).bind(m=>Bf(m,Lf.firstSelectedSelector)).fold(Y(l),m=>m[0]),$x=l=>(m,p)=>{const y=bs(m),E=y==="col"||y==="colgroup"?Hk(m):m;return qs(E,l,p)},jt=$x("th,td,caption"),Cb=$x("th,td"),Zc=l=>wr(l.model.table.getSelectedCells()),Wp=l=>Ro(Zc(l),m=>ha(m,Lf.selectedSelector)),zk=l=>Hc(l[0]).map(m=>{const p=S0(m,If);return qi(p),[p]}),Sb=(l,m)=>zt(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),Vk=(l,m)=>{const p=l.getDoc(),y=Gv(ot.fromDom(l.getBody())),E=ot.fromTag("div",p);Gs(E,"data-mce-bogus","all"),No(E,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const A=iu(y);Di(E,m),qn(A,E);const M=E.dom.innerText;return oa(E),M},Iy=(l,m)=>{l.on("BeforeGetContent",p=>{const y=E=>{p.preventDefault(),zk(E).each(A=>{const M=p.format==="text"?Vk(l,A):Sb(l,A);p.content=M})};if(p.selection===!0){const E=Wp(l);E.length>=1&&y(E)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=Zc(l);le(y).each(E=>{Hc(E).each(A=>{const M=Ro(Yv(p.content),Z=>bs(Z)!=="meta"),L=Pc("table");if(gy(l)&&M.length===1&&L(M[0])){p.preventDefault();const Z=ot.fromDom(l.getDoc()),Q=H2(Z),ce=yb(E,M[0],Q);m.pasteCells(A,ce).each(()=>{l.focus()})}})})}})},Ly=(l,m)=>l.dispatch("NewRow",{node:m}),jp=(l,m)=>l.dispatch("NewCell",{node:m}),$l=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},uh=(l,m,p,y,E)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:y,otherCells:E})},Uk=l=>{l.dispatch("TableSelectionClear")},Ff=(l,m,p,y,E)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:y,origin:E})},Gp=(l,m,p,y,E)=>{l.dispatch("ObjectResized",{target:m,width:p,height:y,origin:E})},wb={structure:!1,style:!0},er={structure:!0,style:!1},Zk={structure:!0,style:!0},Fy=(l,m)=>Am(l)?Ng.percentageSize(m):Eu(l)?Ng.pixelSize(m):Ng.getTableSize(m),Dm=(l,m,p)=>{const y=ia=>bs(sb(ia))==="table",E=ia=>!y(l)||yp(ia).rows>1,A=ia=>!y(l)||yp(ia).columns>1,M=ox(l),L=ob(l)?Dt:up,Z=ia=>{switch(tb(l)){case"section":return ud.section();case"sectionCells":return ud.sectionCells();case"cells":return ud.cells();default:return ud.getTableSectionType(ia,"section")}},Q=(ia,Wy)=>Wy.cursor.fold(()=>{const Db=um(ia);return le(Db).filter(Nt).map(kd=>{p.clearSelectedCells(ia.dom);const qr=l.dom.createRng();return qr.selectNode(kd.dom),l.selection.setRng(qr),Gs(kd,"data-mce-selected","1"),qr})},Db=>{const kd=D0(Db),qr=l.dom.createRng();return qr.setStart(kd.element.dom,kd.offset),qr.setEnd(kd.element.dom,kd.offset),l.selection.setRng(qr),p.clearSelectedCells(ia.dom),ne.some(qr)}),ce=(ia,Wy,Db,kd)=>(qr,Ux,ft=!1)=>{qi(qr);const qa=ot.fromDom(l.getDoc()),Yk=wm(Db,qa,M),Zx={sizing:Fy(l,qr),resize:ob(l)?T3():ew(),section:Z(qr)};return Wy(qr)?ia(qr,Ux,Yk,Zx).bind(Rb=>{m.refresh(qr.dom),Me(Rb.newRows,Vf=>{Ly(l,Vf.dom)}),Me(Rb.newCells,Vf=>{jp(l,Vf.dom)});const jy=Q(qr,Rb);return Nt(qr)&&(qi(qr),ft||$l(l,qr.dom,kd)),jy.map(Vf=>({rng:Vf,effect:kd}))}):ne.none()},Fe=ce(J2,E,Dt,er),at=ce(ji,A,Dt,er),tt=ce(Mf,ve,Dt,er),Le=ce(ek,ve,Dt,er),je=ce(eh,ve,L,er),Pe=ce(Eo,ve,L,er),Mt=ce(nk,ve,Dt,er),Jt=ce(ey,ve,Dt,er),mt=ce(Ve,ve,Dt,er),Wn=ce(ty,ve,Dt,er),Gt=ce(mr,ve,Dt,er),Xn=ce(ny,ve,Dt,er),ws=ce(Fw,ve,Dt,Zk),jc=ce(Lw,ve,Dt,er),Hf=ce(tk,ve,Dt,er),Bm=ce(Tm,ve,Dt,er),zf=ce(Pl,ve,Dt,er),io=ce(Gr,ve,Dt,er),is=ce(Iw,ve,Dt,er),Ga=ce(Q2,ve,Dt,er);return{deleteRow:Fe,deleteColumn:at,insertRowsBefore:tt,insertRowsAfter:Le,insertColumnsBefore:je,insertColumnsAfter:Pe,mergeCells:Mt,unmergeCells:Jt,pasteColsBefore:mt,pasteColsAfter:Wn,pasteRowsBefore:Gt,pasteRowsAfter:Xn,pasteCells:ws,makeCellsHeader:jc,unmakeCellsHeader:Hf,makeColumnsHeader:Bm,unmakeColumnsHeader:zf,makeRowsHeader:io,makeRowsBody:is,makeRowsFooter:Ga,getTableRowType:ok,getTableCellType:sy,getTableColType:oy}},_u=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},Hy=(l,m)=>{sm(m,"td,th").each(dn(_u,l))},Ix=(l,m)=>{Me(mu(m,"tr"),p=>{Ly(l,p.dom),Me(mu(p,"th,td"),y=>{jp(l,y.dom)})})},Wk=l=>Na(l)&&l.indexOf("%")!==-1,xb=(l,m,p,y,E)=>{const A=ax(l),M={styles:A,attributes:rx(l),colGroups:cx(l)};return l.undoManager.ignore(()=>{const L=xu(p,m,E,y,tb(l),M);Gs(L,"data-mce-id","__mce");const Z=FS(L);l.insertContent(Z),l.addVisual()}),sm(sb(l),'table[data-mce-id="__mce"]').map(L=>(Eu(l)?L2(L):Pp(l)?Cm(L):(Am(l)||Wk(A.width))&&Tf(L),qi(L),Kn(L,"data-mce-id"),Ix(l,L),Hy(l,L),L.dom)).getOrNull()},qp=(l,m,p,y={})=>{const E=A=>Jn(A)&&A>0;if(E(m)&&E(p)){const A=y.headerRows||0,M=y.headerColumns||0;return xb(l,p,m,M,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Rm=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Eb="x-tinymce/dom-table-",Tb=Eb+"rows",Mm=Eb+"columns",Kp=l=>{const m=Rm.FakeClipboardItem(l);Rm.write([m])},zy=l=>{const m=Rm.read()??[];return _e(m,p=>ne.from(p.getType(l)))},kb=l=>{zy(l).isSome()&&Rm.clear()},Il=l=>{l.fold(Au,m=>Kp({[Tb]:m}))},Lx=()=>zy(Tb),Au=()=>kb(Tb),Vy=l=>{l.fold(dh,m=>Kp({[Mm]:m}))},_b=()=>zy(Mm),dh=()=>kb(Mm),Yp=l=>jt(rb(l),Ns(l)).filter($p),Ab=l=>Cb(rb(l),Ns(l)).filter($p),jk=(l,m)=>{const p=Ns(l),y=()=>Yp(l).each(Pe=>{Hc(Pe,p).filter(ie(p)).each(Mt=>{const Jt=ot.fromText("");if(yl(Mt,Jt),oa(Mt),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const mt=l.dom.createRng();mt.setStart(Jt.dom,0),mt.setEnd(Jt.dom,0),l.selection.setRng(mt),l.nodeChanged()}})}),E=Pe=>Yp(l).each(Mt=>{Pp(l)||Eu(l)||Am(l)||Hc(Mt,p).each(mt=>{Pe==="relative"&&!Ew(mt)?Tf(mt):Pe==="fixed"&&!V3(mt)?L2(mt):Pe==="responsive"&&!U3(mt)&&Cm(mt),qi(mt),$l(l,mt.dom,er)})}),A=Pe=>Hc(Pe,p),M=Pe=>Ab(l).bind(Mt=>A(Mt).map(Jt=>Pe(Jt,Mt))),L=(Pe,Mt)=>{M(Jt=>{l.formatter.toggle("tableclass",{value:Mt},Jt.dom),$l(l,Jt.dom,wb)})},Z=(Pe,Mt)=>{M(Jt=>{const mt=Zc(l),Gt=po(mt,Xn=>l.formatter.match("tablecellclass",{value:Mt},Xn.dom))?l.formatter.remove:l.formatter.apply;Me(mt,Xn=>Gt("tablecellclass",{value:Mt},Xn.dom)),$l(l,Jt.dom,wb)})},Q=()=>{Yp(l).each(Pe=>{Hc(Pe,p).each(Mt=>{vs(Mt,"caption").fold(()=>{const Jt=ot.fromTag("caption");qn(Jt,ot.fromText("Caption")),c3(Mt,Jt,0),l.selection.setCursorLocation(Jt.dom,0)},Jt=>{Pc("caption")(Pe)&&hl("td",Mt).each(mt=>l.selection.setCursorLocation(mt.dom,0)),oa(Jt)}),$l(l,Mt.dom,er)})})},ce=Pe=>{l.focus()},Fe=(Pe,Mt=!1)=>M((Jt,mt)=>{const Wn=vb(Zc(l),Jt,mt);Pe(Jt,Wn,Mt).each(ce)}),at=()=>M((Pe,Mt)=>{const Jt=vb(Zc(l),Pe,Mt),mt=wm(Dt,ot.fromDom(l.getDoc()),ne.none());return bi(Pe,Jt,mt)}),tt=()=>M((Pe,Mt)=>{const Jt=vb(Zc(l),Pe,Mt);return Al(Pe,Jt)}),Le=(Pe,Mt)=>Mt().each(Jt=>{const mt=zt(Jt,Wn=>Sr(Wn));M((Wn,Gt)=>{const Xn=H2(ot.fromDom(l.getDoc())),ws=Px(Zc(l),Gt,mt,Xn);Pe(Wn,ws).each(ce)})}),je=Pe=>(Mt,Jt)=>$a(Jt,"type").each(mt=>{Fe(Pe(mt),Jt.no_events)});yn({mceTableSplitCells:()=>Fe(m.unmergeCells),mceTableMergeCells:()=>Fe(m.mergeCells),mceTableInsertRowBefore:()=>Fe(m.insertRowsBefore),mceTableInsertRowAfter:()=>Fe(m.insertRowsAfter),mceTableInsertColBefore:()=>Fe(m.insertColumnsBefore),mceTableInsertColAfter:()=>Fe(m.insertColumnsAfter),mceTableDeleteCol:()=>Fe(m.deleteColumn),mceTableDeleteRow:()=>Fe(m.deleteRow),mceTableCutCol:()=>tt().each(Pe=>{Vy(Pe),Fe(m.deleteColumn)}),mceTableCutRow:()=>at().each(Pe=>{Il(Pe),Fe(m.deleteRow)}),mceTableCopyCol:()=>tt().each(Pe=>Vy(Pe)),mceTableCopyRow:()=>at().each(Pe=>Il(Pe)),mceTablePasteColBefore:()=>Le(m.pasteColsBefore,_b),mceTablePasteColAfter:()=>Le(m.pasteColsAfter,_b),mceTablePasteRowBefore:()=>Le(m.pasteRowsBefore,Lx),mceTablePasteRowAfter:()=>Le(m.pasteRowsAfter,Lx),mceTableDelete:y,mceTableCellToggleClass:Z,mceTableToggleClass:L,mceTableToggleCaption:Q,mceTableSizingMode:(Pe,Mt)=>E(Mt),mceTableCellType:je(Pe=>Pe==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:je(Pe=>Pe==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:je(Pe=>{switch(Pe){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Pe,Mt)=>l.addCommand(Mt,Pe)),l.addCommand("mceInsertTable",(Pe,Mt)=>{qp(l,Mt.rows,Mt.columns,Mt.options)}),l.addCommand("mceTableApplyCellStyle",(Pe,Mt)=>{const Jt=Gt=>"tablecell"+Gt.toLowerCase().replace("-","");if(!on(Mt))return;const mt=Ro(Zc(l),$p);if(mt.length===0)return;const Wn=Lh(Mt,(Gt,Xn)=>l.formatter.has(Jt(Xn))&&Na(Gt));Ku(Wn)||(yn(Wn,(Gt,Xn)=>{const ws=Jt(Xn);Me(mt,jc=>{Gt===""?l.formatter.remove(ws,{value:null},jc.dom,!0):l.formatter.apply(ws,{value:Gt},jc.dom)})}),A(mt[0]).each(Gt=>$l(l,Gt.dom,wb)))})},Fx=(l,m)=>{const p=Ns(l),y=E=>Cb(rb(l)).bind(A=>Hc(A,p).map(M=>{const L=vb(Zc(l),M,A);return E(M,L)})).getOr("");yn({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(E,A)=>l.addQueryValueHandler(A,E))},Ob=l=>!Tl(ot.fromDom(l.target),"ephox-snooker-resizer-bar"),Gk=(l,m)=>{const p=Sk(()=>ot.fromDom(l.getBody()),()=>Cb(rb(l),Ns(l)),Lf.selectedSelector),y=(Z,Q,ce)=>{Hc(Q).each(at=>{const tt=zt(Z,Jt=>Jt.dom),Le=ox(l),je=wm(Dt,ot.fromDom(l.getDoc()),Le),Pe=Zc(l),Mt=R2(at,{selection:Pe},je).map(Jt=>cn(Jt,mt=>zt(mt,Wn=>Wn.dom))).getOrUndefined();uh(l,tt,Q.dom,ce.dom,Mt)})},E=()=>Uk(l),A=Bx.byAttr(Lf,y,E);return l.on("init",Z=>{const Q=l.getWin(),ce=sb(l),Fe=Ns(l),at=()=>{const io=l.selection,is=ot.fromDom(io.getStart()),Ga=ot.fromDom(io.getEnd());fo(Hc,[is,Ga]).fold(()=>A.clear(ce),Dt)},tt=Ox(Q,ce,Fe,A),Le=My(Q,ce,Fe,A),je=Rx(Q,ce,Fe,A),Pe=io=>io.raw.shiftKey===!0;l.on("TableSelectorChange",io=>je(io.start,io.finish));const Mt=(io,is)=>{Pe(io)&&(is.kill&&io.kill(),is.selection.each(Ga=>{const _a=ad.relative(Ga.start,Ga.finish),fr=We(Q,_a);l.selection.setRng(fr)}))},Jt=io=>{const is=Hs(io);if(is.raw.shiftKey&&xd(is.raw.which)){const Ga=l.selection.getRng(),_a=ot.fromDom(Ga.startContainer),fr=ot.fromDom(Ga.endContainer);Le.keyup(is,_a,Ga.startOffset,fr,Ga.endOffset).each(Td=>{Mt(is,Td)})}},mt=io=>{const is=Hs(io);m.hide();const Ga=l.selection.getRng(),_a=ot.fromDom(Ga.startContainer),fr=ot.fromDom(Ga.endContainer),Td=Gh(Ed,Ax)(ot.fromDom(l.selection.getStart()));Le.keydown(is,_a,Ga.startOffset,fr,Ga.endOffset,Td).each(ia=>{Mt(is,ia)}),m.show()},Wn=io=>io.button===0,Gt=io=>io.buttons===void 0?!0:(io.buttons&1)!==0,Xn=io=>{tt.clearstate()},ws=io=>{Wn(io)&&Ob(io)&&tt.mousedown(Hs(io))},jc=io=>{Gt(io)&&Ob(io)&&tt.mouseover(Hs(io))},Hf=io=>{Wn(io)&&Ob(io)&&tt.mouseup(Hs(io))},zf=(()=>{const io=us(ot.fromDom(ce)),is=us(0);return{touchEnd:_a=>{const fr=ot.fromDom(_a.target);if(Pc("td")(fr)||Pc("th")(fr)){const Td=io.get(),ia=is.get();ao(Td,fr)&&_a.timeStamp-ia<300&&(_a.preventDefault(),je(fr,fr))}io.set(fr),is.set(_a.timeStamp)}}})();l.on("dragstart",Xn),l.on("mousedown",ws),l.on("mouseover",jc),l.on("mouseup",Hf),l.on("touchend",zf.touchEnd),l.on("keyup",Jt),l.on("keydown",mt),l.on("NodeChange",at)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Lf.firstSelected),l.serializer.addTempAttr(Lf.lastSelected)}),{getSelectedCells:()=>vy(p.get(),Y([]),Z=>zt(Z,Q=>Q.dom),Z=>[Z.dom]),clearSelectedCells:Z=>A.clear(ot.fromDom(Z))}},Uy=(l,m)=>{const p=ot.fromDom(l.getBody());return vw.body(p,m)},Ll=l=>Is(l)&&l.nodeName==="TABLE",Zy="bar-",qk=l=>Ri(l,"data-mce-resize")!=="false",Hx=l=>{const m=rn.fromTable(l);rn.hasColumns(m)||Me(um(l),p=>{const y=uf(p,"width");Er(p,"width",y),Kn(p,"width")})},zx=l=>Wd(l,"corner-"),Vx=l=>tf(l,"corner-"),Kk=l=>{const m=ll(),p=ll(),y=ll();let E,A,M,L;const Z=mt=>Fy(l,mt),Q=()=>nb(l)?ew():T3(),ce=mt=>yp(mt).columns,Fe=mt=>yp(mt).rows,at=(mt,Wn,Gt,Xn)=>{const ws=Vx(Wn),jc=jd(ws,"e"),Hf=Wd(ws,"n");if(A===""&&Tf(mt),L===""&&Cc(mt),Gt!==E&&A!==""){Er(mt,"width",A);const Bm=Q(),zf=Z(mt),io=nb(l)||jc?ce(mt)-1:0;Fg(mt,Gt-E,io,Bm,zf)}else if(dx(A)){const Bm=parseFloat(A.replace("%","")),zf=Gt*Bm/E;Er(mt,"width",zf+"%")}if(mx(A)&&Hx(mt),Xn!==M&&L!==""){Er(mt,"height",L);const Bm=Hf?0:Fe(mt)-1;b0(mt,Xn-M,Bm)}},tt=()=>{p.on(mt=>{mt.destroy()})};l.on("init",()=>{const mt=Uy(l,qk);if(y.set(mt),eb(l)&&sx(l)){const Wn=Q(),Gt=my.create(mt,Wn,Z);l.mode.isReadOnly()||Gt.on(),Gt.events.startDrag.bind(Xn=>{m.set(l.selection.getRng())}),Gt.events.beforeResize.bind(Xn=>{const ws=Xn.table.dom;Ff(l,ws,ix(ws),lx(ws),Zy+Xn.type)}),Gt.events.afterResize.bind(Xn=>{const ws=Xn.table,jc=ws.dom;qi(ws),m.on(Hf=>{l.selection.setRng(Hf),l.focus()}),Gp(l,jc,ix(jc),lx(jc),Zy+Xn.type),l.undoManager.add()}),p.set(Gt)}}),l.on("ObjectResizeStart",mt=>{const Wn=mt.target;if(Ll(Wn)&&!l.mode.isReadOnly()){const Gt=ot.fromDom(Wn);Me(l.dom.select(".mce-clonedresizable"),Xn=>{l.dom.addClass(Xn,"mce-"+Np(l)+"-columns")}),!V3(Gt)&&Eu(l)?L2(Gt):!Ew(Gt)&&Am(l)&&Tf(Gt),U3(Gt)&&Wd(mt.origin,Zy)&&Tf(Gt),E=mt.width,A=Pp(l)?"":ab(l,Wn).getOr(""),M=mt.height,L=hy(l,Wn).getOr("")}}),l.on("ObjectResized",mt=>{const Wn=mt.target;if(Ll(Wn)){const Gt=ot.fromDom(Wn),Xn=mt.origin;zx(Xn)&&at(Gt,Xn,mt.width,mt.height),qi(Gt),$l(l,Gt.dom,wb)}});const Le=()=>{p.on(mt=>{mt.on(),mt.showBars()})},je=()=>{p.on(mt=>{mt.off(),mt.hideBars()})};return l.on("DisabledStateChange",mt=>{mt.state?je():Le()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?je():Le()}),l.on("dragstart dragend",mt=>{mt.type==="dragstart"?je():Le()}),l.on("remove",()=>{tt()}),{refresh:mt=>{p.on(Wn=>Wn.refreshBars(ot.fromDom(mt)))},hide:()=>{p.on(mt=>mt.hideBars())},show:()=>{p.on(mt=>mt.showBars())}}},Do=l=>{j5(l);const m=Kk(l),p=Gk(l,m),y=Dm(l,m,p);return jk(l,y),Fx(l,y),Iy(l,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},Wc=l=>({table:Do(l)});var mh=()=>{pr.add("dom",Wc)};mh()})();(function(){var pr=tinymce.util.Tools.resolve("tinymce.PluginManager");const ua=_e=>({backspaceDelete:ge=>{_e.execCommand("mceListBackspaceDelete",!1,ge)}}),Jc=_e=>_e==null,ec=_e=>!Jc(_e),Oc=_e=>()=>_e,tc=(_e,ge)=>_e===ge,Na=Oc(!1),ks=class ks{constructor(ge,tn){Ie(this,"tag");Ie(this,"value");this.tag=ge,this.value=tn}static some(ge){return new ks(!0,ge)}static none(){return ks.singletonNone}fold(ge,tn){return this.tag?tn(this.value):ge()}isSome(){return this.tag}isNone(){return!this.tag}map(ge){return this.tag?ks.some(ge(this.value)):ks.none()}bind(ge){return this.tag?ge(this.value):ks.none()}exists(ge){return this.tag&&ge(this.value)}forall(ge){return!this.tag||ge(this.value)}filter(ge){return!this.tag||ge(this.value)?this:ks.none()}getOr(ge){return this.tag?this.value:ge}or(ge){return this.tag?this:ge}getOrThunk(ge){return this.tag?this.value:ge()}orThunk(ge){return this.tag?this:ge()}getOrDie(ge){if(this.tag)return this.value;throw new Error(ge??"Called getOrDie on None")}static from(ge){return ec(ge)?ks.some(ge):ks.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ge){this.tag&&ge(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(ks,"singletonNone",new ks(!1));let on=ks;const bo=Array.prototype.slice,qu=(_e,ge)=>{for(let tn=0,yn=_e.length;tn<yn;tn++){const cn=_e[tn];if(ge(cn,tn))return!0}return!1},Qr=(_e,ge)=>{const tn=_e.length,yn=new Array(tn);for(let cn=0;cn<tn;cn++){const Ls=_e[cn];yn[cn]=ge(Ls,cn)}return yn},nc=(_e,ge)=>{for(let tn=0,yn=_e.length;tn<yn;tn++){const cn=_e[tn];ge(cn,tn)}},br=(_e,ge,tn)=>(nc(_e,(yn,cn)=>{tn=ge(tn,yn,cn)}),tn),Is=(_e,ge,tn)=>{for(let yn=0,cn=_e.length;yn<cn;yn++){const Ls=_e[yn];if(ge(Ls,yn))return on.some(Ls);if(tn(Ls,yn))break}return on.none()},oc=(_e,ge)=>Is(_e,ge,Na),Jn=_e=>{const ge=bo.call(_e,0);return ge.reverse(),ge},Dt=(_e,ge,tn=tc)=>_e.exists(yn=>tn(yn,ge)),sc=(_e=>ge=>ge.replace(_e,""))(/^\s+|\s+$/g),Y=_e=>_e.length>0,en=_e=>!Y(_e),Qc=_e=>{const ge=Jn(sc(_e).split("")),tn=Qr(ge,(yn,cn)=>{const Ls=yn.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,cn)*Ls});return br(tn,(yn,cn)=>yn+cn,0)},dn=_e=>{if(_e--,_e<0)return"";{const ge=_e%26,tn=Math.floor(_e/26),yn=dn(tn),cn=String.fromCharCode(65+ge);return yn+cn}},ie=_e=>/^[A-Z]+$/.test(_e),an=_e=>/^[a-z]+$/.test(_e),es=_e=>/^[0-9]+$/.test(_e),gn=_e=>es(_e)?2:ie(_e)?0:an(_e)?1:en(_e)?3:4,ve=_e=>{switch(gn(_e)){case 2:return on.some({listStyleType:on.none(),start:_e});case 0:return on.some({listStyleType:on.some("upper-alpha"),start:Qc(_e).toString()});case 1:return on.some({listStyleType:on.some("lower-alpha"),start:Qc(_e).toString()});case 3:return on.some({listStyleType:on.none(),start:""});case 4:return on.none()}},ne=_e=>{const ge=parseInt(_e.start,10);return Dt(_e.listStyleType,"upper-alpha")?dn(ge):Dt(_e.listStyleType,"lower-alpha")?dn(ge).toLowerCase():_e.start},In=(_e=>ge=>ge.options.get(_e))("forced_root_block"),Ot=_e=>/\btox\-/.test(_e.className),T=_e=>ge=>ec(ge)&&_e.test(ge.nodeName),Uo=_e=>ge=>ec(ge)&&ge.nodeName.toLowerCase()===_e,Xe=T(/^(OL|UL|DL)$/),Zo=T(/^(TH|TD)$/),zt=T(/^(LI|DT|DD)$/),Me=(_e,ge)=>Is(_e,Xe,Zo).exists(tn=>tn.nodeName===ge&&!Ot(tn)),to=(_e,ge)=>{const tn=_e.selection.getNode();return ge({parents:_e.dom.getParents(tn),element:tn}),_e.on("NodeChange",ge),()=>_e.off("NodeChange",ge)},js=(_e,ge)=>ge!==null&&!_e.dom.isEditable(ge),Ro=(_e,ge)=>{const tn=_e.dom.getParent(ge,"ol,ul,dl");return js(_e,tn)||!_e.selection.isEditable()},ls=Uo("ol"),De=["OL","UL","DL"],et=De.join(","),N=(_e,ge)=>{const tn=ge||_e.selection.getStart(!0);return _e.dom.getParent(tn,et,Dc(_e,tn))},Dc=(_e,ge)=>{const tn=_e.dom.getParents(ge,_e.dom.isBlock),yn=Ls=>Ls.nodeName.toLowerCase()!==In(_e);return oc(tn,Ls=>yn(Ls)&&no(_e.schema,Ls)).getOr(_e.getBody())},no=(_e,ge)=>!Xe(ge)&&!zt(ge)&&qu(De,tn=>_e.isValidChild(ge.nodeName,tn)),ts=_e=>{const ge=N(_e);!ls(ge)||Ro(_e,ge)||_e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:ne({start:_e.dom.getAttrib(ge,"start","1"),listStyleType:on.from(_e.dom.getStyle(ge,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:tn=>{const yn=tn.getData();ve(yn.start).each(cn=>{_e.execCommand("mceListUpdate",!1,{attrs:{start:cn.start==="1"?"":cn.start},styles:{"list-style-type":cn.listStyleType.getOr("")}})}),tn.close()}})},po=_e=>{_e.addCommand("mceListProps",()=>{ts(_e)})},ea=(_e,ge)=>tn=>{const yn=cn=>{tn.setActive(Me(cn.parents,ge)),tn.setEnabled(!Ro(_e,cn.element)&&_e.selection.isEditable())};return tn.setEnabled(_e.selection.isEditable()),to(_e,yn)},vt=_e=>{const ge=tn=>()=>_e.execCommand(tn);_e.hasPlugin("advlist")||(_e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:ge("InsertOrderedList"),onSetup:ea(_e,"OL")}),_e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:ge("InsertUnorderedList"),onSetup:ea(_e,"UL")}))},zn=(_e,ge)=>tn=>to(_e,cn=>tn.setEnabled(Me(cn.parents,ge)&&!Ro(_e,cn.element))),Rt=_e=>{const ge={text:"List properties...",icon:"ordered-list",onAction:()=>_e.execCommand("mceListProps"),onSetup:zn(_e,"OL")};_e.ui.registry.addMenuItem("listprops",ge),_e.ui.registry.addContextMenu("lists",{update:tn=>{const yn=N(_e,tn);return ls(yn)?["listprops"]:[]}})};var le=()=>{pr.add("lists",_e=>(po(_e),vt(_e),Rt(_e),ua(_e)))};le()})();(function(){var pr=tinymce.util.Tools.resolve("tinymce.PluginManager");const ua=($,K,te)=>{var we;return te($,K.prototype)?!0:((we=$.constructor)==null?void 0:we.name)===K.name},Jc=$=>{const K=typeof $;return $===null?"null":K==="object"&&Array.isArray($)?"array":K==="object"&&ua($,String,(te,we)=>we.isPrototypeOf(te))?"string":K},ec=$=>K=>Jc(K)===$,Oc=$=>K=>typeof K===$,tc=$=>K=>$===K,Na=ec("string"),on=ec("object"),bo=ec("array"),qu=tc(null),Qr=Oc("boolean"),nc=$=>$==null,br=$=>!nc($),Is=Oc("function"),oc=($,K)=>{if(bo($)){for(let te=0,we=$.length;te<we;++te)if(!K($[te]))return!1;return!0}return!1},Jn=()=>{},Dt=$=>()=>$,Pa=$=>$,sc=($,K)=>$===K,un=class un{constructor(K,te){Ie(this,"tag");Ie(this,"value");this.tag=K,this.value=te}static some(K){return new un(!0,K)}static none(){return un.singletonNone}fold(K,te){return this.tag?te(this.value):K()}isSome(){return this.tag}isNone(){return!this.tag}map(K){return this.tag?un.some(K(this.value)):un.none()}bind(K){return this.tag?K(this.value):un.none()}exists(K){return this.tag&&K(this.value)}forall(K){return!this.tag||K(this.value)}filter(K){return!this.tag||K(this.value)?this:un.none()}getOr(K){return this.tag?this.value:K}or(K){return this.tag?this:K}getOrThunk(K){return this.tag?this.value:K()}orThunk(K){return this.tag?this:K()}getOrDie(K){if(this.tag)return this.value;throw new Error(K??"Called getOrDie on None")}static from(K){return br(K)?un.some(K):un.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(K){this.tag&&K(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(un,"singletonNone",new un(!1));let Y=un;const en=Array.prototype.indexOf,Qc=Array.prototype.push,dn=($,K)=>en.call($,K),ie=($,K)=>dn($,K)>-1,an=($,K)=>{const te=$.length,we=new Array(te);for(let Ue=0;Ue<te;Ue++){const dt=$[Ue];we[Ue]=K(dt,Ue)}return we},es=($,K)=>{for(let te=0,we=$.length;te<we;te++){const Ue=$[te];K(Ue,te)}},gn=($,K,te)=>(es($,(we,Ue)=>{te=K(te,we,Ue)}),te),ve=$=>{const K=[];for(let te=0,we=$.length;te<we;++te){if(!bo($[te]))throw new Error("Arr.flatten item "+te+" was not an array, input: "+$);Qc.apply(K,$[te])}return K},ne=($,K)=>ve(an($,K)),lr=($,K)=>K>=0&&K<$.length?Y.some($[K]):Y.none(),In=$=>lr($,0),Ot=($,K)=>{for(let te=0;te<$.length;te++){const we=K($[te],te);if(we.isSome())return we}return Y.none()},T=Object.keys,Uo=Object.hasOwnProperty,Xe=($,K)=>{const te=T($);for(let we=0,Ue=te.length;we<Ue;we++){const dt=te[we],nn=$[dt];K(nn,dt)}},Zo=$=>(K,te)=>{$[te]=K},zt=($,K,te,we)=>{Xe($,(Ue,dt)=>{(K(Ue,dt)?te:we)(Ue,dt)})},Me=($,K)=>{const te={};return zt($,K,Zo(te),Jn),te},to=($,K)=>Uo.call($,K),js=($,K)=>to($,K)&&$[K]!==void 0&&$[K]!==null,Ro=$=>{let K=$;return{get:()=>K,set:Ue=>{K=Ue}}},ls=($,K,te=sc)=>$.exists(we=>te(we,K)),De=$=>{const K=[],te=we=>{K.push(we)};for(let we=0;we<$.length;we++)$[we].each(te);return K},et=($,K)=>$?Y.some(K):Y.none(),N=$=>{const K=Ro(Y.none()),te=()=>K.get().each($);return{clear:()=>{te(),K.set(Y.none())},isSet:()=>K.get().isSome(),get:()=>K.get(),set:Gn=>{te(),K.set(Y.some(Gn))}}},Dc=()=>{const $=N(Jn);return{...$,on:te=>$.get().each(te)}},no=($,K)=>$.substring(K),ts=($,K,te)=>K===""||$.length>=K.length&&$.substr(te,te+K.length)===K,po=($,K)=>ea($,K)?no($,K.length):$,ea=($,K)=>ts($,K,0),vt=$=>K=>K.options.get($),zn=$=>{const K=$.options.register;K("link_assume_external_targets",{processor:te=>{const we=Na(te)||Qr(te);return we?te===!0?{value:1,valid:we}:te==="http"||te==="https"?{value:te,valid:we}:{value:0,valid:we}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),K("link_context_toolbar",{processor:"boolean",default:!1}),K("link_list",{processor:te=>Na(te)||Is(te)||oc(te,on)}),K("link_default_target",{processor:"string"}),K("link_default_protocol",{processor:"string",default:"https"}),K("link_target_list",{processor:te=>Qr(te)||oc(te,on),default:!0}),K("link_rel_list",{processor:"object[]",default:[]}),K("link_class_list",{processor:"object[]",default:[]}),K("link_title",{processor:"boolean",default:!0}),K("allow_unsafe_link_target",{processor:"boolean",default:!1}),K("link_quicklink",{processor:"boolean",default:!1}),K("link_attributes_postprocess",{processor:"function"}),K("files_upload_handler",{processor:"function"}),K("link_uploadtab",{processor:"boolean",default:!0})},Rt=vt("link_assume_external_targets"),le=vt("link_context_toolbar"),ks=vt("link_list"),_e=vt("link_default_target"),ge=vt("link_default_protocol"),tn=vt("link_target_list"),yn=vt("link_rel_list"),cn=vt("link_class_list"),Ls=vt("link_title"),Qn=vt("allow_unsafe_link_target"),cl=vt("link_quicklink"),Lh=vt("link_attributes_postprocess"),ta=vt("files_upload_handler"),Vn=vt("link_uploadtab"),$a=vt("documents_file_types"),Mo=$=>br($.options.get("files_upload_handler")),ns=$=>br($.options.get("documents_file_types"));var Ku=tinymce.util.Tools.resolve("tinymce.util.URI"),ki=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ir=tinymce.util.Tools.resolve("tinymce.util.Tools");const us=$=>br($)&&$.nodeName.toLowerCase()==="a",Fs=$=>us($)&&!!ac($),Bo=($,K)=>{if($.collapsed)return[];{const te=$.cloneContents(),we=te.firstChild,Ue=new ki(we,te),dt=[];let nn=we;do K(nn)&&dt.push(nn);while(nn=Ue.next());return dt}},rc=$=>/^\w+:/i.test($),ac=$=>$.getAttribute("data-mce-href")??$.getAttribute("href")??"",bt=($,K)=>{const te=["noopener"],we=$?$.split(/\s+/):[],Ue=Un=>Ir.trim(Un.sort().join(" ")),dt=Un=>(Un=nn(Un),Un.length>0?Un.concat(te):te),nn=Un=>Un.filter(As=>Ir.inArray(te,As)===-1),Gn=K?dt(we):nn(we);return Gn.length>0?Ue(Gn):""},Mn=$=>$.replace(/\uFEFF/g,""),hn=($,K)=>(K=K||pt($.selection.getRng())[0]||$.selection.getNode(),Ia(K)?Y.from($.dom.select("a[href]",K)[0]):Y.from($.dom.getParent(K,"a[href]"))),cc=($,K)=>hn($,K).isSome(),da=($,K)=>{const te=K.fold(()=>$.getContent({format:"text"}),we=>we.innerText||we.textContent||"");return Mn(te)},pt=$=>Bo($,Fs),il=$=>Ir.grep($,Fs),Qm=$=>il($).length>0,tu=$=>pt($).length>0,Rc=$=>{const K=$.schema.getTextInlineElements(),te=dt=>dt.nodeType===1&&!us(dt)&&!to(K,dt.nodeName.toLowerCase());if(hn($).exists(dt=>dt.hasAttribute("data-mce-block")))return!1;const Ue=$.selection.getRng();return Ue.collapsed?!0:Bo(Ue,te).length===0},Ia=$=>br($)&&$.nodeName==="FIGURE"&&/\bimage\b/i.test($.className),vo=$=>new Promise((K,te)=>{const we=new FileReader;we.onload=()=>{K(we.result)},we.onerror=()=>{var Ue;te(new Error(((Ue=we.error)==null?void 0:Ue.message)??"Failed to convert blob to a data url"))},we.readAsDataURL($)}),Kt=$=>gn(["title","rel","class","target"],(te,we)=>($[we].each(Ue=>{te[we]=Ue.length>0?Ue:null}),te),{href:$.href}),Wo=($,K)=>(K==="http"||K==="https")&&!rc($)?K+"://"+$:$,ef=($,K)=>{const te={...K};if(yn($).length===0&&!Qn($)){const we=bt(te.rel,te.target==="_blank");te.rel=we||null}return Y.from(te.target).isNone()&&tn($)===!1&&(te.target=_e($)),te.href=Wo(te.href,Rt($)),te},Yu=($,K,te,we)=>{te.each(dt=>{to(K,"innerText")?K.innerText=dt:K.textContent=dt}),$.dom.setAttribs(K,we);const Ue=$.dom.createRng();Ue.setStartAfter(K),Ue.setEndAfter(K),$.selection.setRng(Ue)},ei=($,K,te,we)=>{const Ue=$.dom;Ia(K)?jd(Ue,K,we):te.fold(()=>{$.execCommand("mceInsertLink",!1,we);const dt=$.selection.getEnd(),nn=Ue.createRng();nn.setStartAfter(dt),nn.setEndAfter(dt),$.selection.setRng(nn)},dt=>{$.insertContent(Ue.createHTML("a",we,Ue.encode(dt)))})},Bt=($,K,te)=>{const we=$.selection.getNode(),Ue=hn($,we),dt=ef($,Kt(te)),nn=Lh($);br(nn)&&nn(dt),$.undoManager.transact(()=>{te.href===K.href&&K.attach(),Ue.fold(()=>{ei($,we,te.text,dt)},Gn=>{$.focus(),Yu($,Gn,te.text,dt)})})},ma=$=>{const K=$.dom,te=$.selection,we=te.getBookmark(),Ue=te.getRng().cloneRange(),dt=K.getParent(Ue.startContainer,"a[href]",$.getBody()),nn=K.getParent(Ue.endContainer,"a[href]",$.getBody());dt&&Ue.setStartBefore(dt),nn&&Ue.setEndAfter(nn),te.setRng(Ue),$.execCommand("unlink"),te.moveToBookmark(we)},ll=$=>{$.undoManager.transact(()=>{const K=$.selection.getNode();Ia(K)?Wd($,K):ma($),$.focus()})},Fh=$=>{const{class:K,href:te,rel:we,target:Ue,text:dt,title:nn}=$;return Me({class:K.getOrNull(),href:te,rel:we.getOrNull(),target:Ue.getOrNull(),text:dt.getOrNull(),title:nn.getOrNull()},(Gn,Un)=>qu(Gn)===!1)},vr=($,K)=>{const te=$.options.get,we={allow_html_data_urls:te("allow_html_data_urls"),allow_script_urls:te("allow_script_urls"),allow_svg_data_urls:te("allow_svg_data_urls")},Ue=K.href;return{...K,href:Ku.isDomSafe(Ue,"a",we)?Ue:""}},tf=($,K,te)=>{const we=vr($,te);$.hasPlugin("rtc",!0)?$.execCommand("createlink",!1,Fh(we)):Bt($,K,we)},Ko=$=>{$.hasPlugin("rtc",!0)?$.execCommand("unlink"):ll($)},Wd=($,K)=>{var we;const te=$.dom.select("img",K)[0];if(te){const Ue=$.dom.getParents(te,"a[href]",K)[0];Ue&&((we=Ue.parentNode)==null||we.insertBefore(te,Ue),$.dom.remove(Ue))}},jd=($,K,te)=>{var Ue;const we=$.select("img",K)[0];if(we){const dt=$.create("a",te);(Ue=we.parentNode)==null||Ue.insertBefore(dt,we),dt.appendChild(we)}},ul=$=>Na($.value)?$.value:"",_i=$=>Na($.text)?$.text:Na($.title)?$.title:"",_s=($,K)=>{const te=[];return Ir.each($,we=>{const Ue=_i(we);if(we.menu!==void 0){const dt=_s(we.menu,K);te.push({text:Ue,items:dt})}else{const dt=K(we);te.push({text:Ue,value:dt})}}),te},nu=($=ul)=>K=>Y.from(K).map(te=>_s(te,$)),La={sanitize:$=>nu(ul)($),sanitizeWith:nu,createUi:($,K)=>te=>({name:$,type:"listbox",label:K,items:te}),getValue:ul},Gd=$=>js($,"items"),qd=($,K)=>Ot(K,te=>Gd(te)?qd($,te.items):et(te.value===$,te)),ro=($,K,te,we)=>{const Ue=we[K],dt=$.length>0;return Ue!==void 0?qd(Ue,te).map(nn=>({url:{value:nn.value,meta:{text:dt?$:nn.text,attach:Jn}},text:dt?$:nn.text})):Y.none()},Kd=($,K)=>K==="link"?$.link:K==="anchor"?$.anchor:Y.none(),Cs={init:($,K)=>{const te={text:$.text,title:$.title},we=Un=>{var As;return et(te.title.length<=0,Y.from((As=Un.meta)==null?void 0:As.title).getOr(""))},Ue=Un=>{var As;return et(te.text.length<=0,Y.from((As=Un.meta)==null?void 0:As.text).getOr(Un.value))},dt=Un=>{const As=Ue(Un.url),Ss=we(Un.url);return As.isSome()||Ss.isSome()?Y.some({...As.map(sf=>({text:sf})).getOr({}),...Ss.map(sf=>({title:sf})).getOr({})}):Y.none()},nn=(Un,As)=>{const Ss=Kd(K,As).getOr([]);return ro(te.text,As,Ss,Un)};return{onChange:(Un,As)=>{const Ss=As.name;return Ss==="url"?dt(Un()):ie(["anchor","link"],Ss)?nn(Un(),Ss):((Ss==="text"||Ss==="title")&&(te[Ss]=Un()[Ss]),Y.none())}}},getDelta:ro};var Ai=tinymce.util.Tools.resolve("tinymce.util.Delay");const Yd=($,K,te)=>{const we=$.selection.getRng();Ai.setEditorTimeout($,()=>{$.windowManager.confirm(K,Ue=>{$.selection.setRng(we),te(Ue)})})},lc=$=>{const K=$.href;return K.indexOf("@")>0&&K.indexOf("/")===-1&&K.indexOf("mailto:")===-1?Y.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:we=>({...we,href:"mailto:"+K})}):Y.none()},yr=($,K)=>te=>{const we=te.href;return $===1&&!rc(we)||$===0&&/^\s*www(\.|\d\.)/i.test(we)?Y.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${K}:// prefix?`,preprocess:dt=>({...dt,href:K+"://"+we})}):Y.none()},fa={preprocess:($,K)=>Ot([lc,yr(Rt($),ge($))],te=>te(K)).fold(()=>Promise.resolve(K),te=>new Promise(we=>{Yd($,te.message,Ue=>{we(Ue?te.preprocess(K):K)})}))},mg={getAnchors:$=>{const K=$.dom.select("a:not([href])"),te=ne(K,we=>{const Ue=we.name||we.id;return Ue?[{text:Ue,value:"#"+Ue}]:[]});return te.length>0?Y.some([{text:"None",value:""}].concat(te)):Y.none()}},dl={getClasses:$=>{const K=cn($);return K.length>0?La.sanitize(K):Y.none()}},ml=$=>{try{return Y.some(JSON.parse($))}catch{return Y.none()}},ps={getLinks:$=>{const K=we=>$.convertURL(we.value||we.url||"","href"),te=ks($);return new Promise(we=>{Na(te)?fetch(te).then(Ue=>Ue.ok?Ue.text().then(ml):Promise.reject()).then(we,()=>we(Y.none())):Is(te)?te(Ue=>we(Y.some(Ue))):we(Y.from(te))}).then(we=>we.bind(La.sanitizeWith(K)).map(Ue=>Ue.length>0?[{text:"None",value:""}].concat(Ue):Ue))}},Lr={getRels:($,K)=>{const te=yn($);if(te.length>0){const we=ls(K,"_blank"),Ue=Qn($)===!1,dt=Gn=>bt(La.getValue(Gn),we);return(Ue?La.sanitizeWith(dt):La.sanitize)(te)}return Y.none()}},Cr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],nf={getTargets:$=>{const K=tn($);return bo(K)?La.sanitize(K).orThunk(()=>Y.some(Cr)):K===!1?Y.none():Y.some(Cr)}},Xd=($,K,te)=>{const we=$.getAttrib(K,te);return we!==null&&we.length>0?Y.some(we):Y.none()},jo=($,K)=>{const te=$.dom,Ue=Rc($)?Y.some(da($.selection,K)):Y.none(),dt=K.bind(Ss=>Y.from(te.getAttrib(Ss,"href"))),nn=K.bind(Ss=>Y.from(te.getAttrib(Ss,"target"))),Gn=K.bind(Ss=>Xd(te,Ss,"rel")),Un=K.bind(Ss=>Xd(te,Ss,"class")),As=K.bind(Ss=>Xd(te,Ss,"title"));return{url:dt,text:Ue,title:As,target:nn,rel:Gn,linkClass:Un}},ni={collect:($,K)=>ps.getLinks($).then(te=>{const we=Mo($)&&ns($)&&Vn($),Ue=jo($,K);return{anchor:Ue,catalogs:{targets:nf.getTargets($),rels:Lr.getRels($,Ue.target),classes:dl.getClasses($),anchor:mg.getAnchors($),link:te},hasUploadPanel:we,optNode:K,flags:{titleEnabled:Ls($)}}})},ot={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput",buttonLabel:"Browse for a file",dropAreaLabel:"Drop a file here",allowedFileTypes:$.map(te=>te.mimeType).join(","),allowedFileExtensions:ve($.map(te=>te.extensions))}]})},ou=($,K)=>te=>{const we=te.getData();if(!we.url.value){Ko($),te.close();return}const Ue=Gn=>Y.from(we[Gn]).filter(Un=>!ls(K.anchor[Gn],Un)),dt={href:we.url.value,text:Ue("text"),target:Ue("target"),rel:Ue("rel"),class:Ue("linkClass"),title:Ue("title")},nn={href:we.url.value,attach:we.url.meta!==void 0&&we.url.meta.attach?we.url.meta.attach:Jn};fa.preprocess($,dt).then(Gn=>{tf($,nn,Gn)}),te.close()},ga=$=>(K,te)=>ta($)(K,te),Ju=$=>Y.from($.split(",")[1]).getOr(""),ss=($,K)=>{const te=K.getData();K.block("Uploading file"),In(te.fileinput).fold(()=>{K.unblock()},we=>{const Ue=URL.createObjectURL(we),dt=({url:Gn,fileName:Un})=>{K.setData({text:Un,title:Un,url:{value:Gn,meta:{}}}),K.showTab("general"),K.focus("url")},nn=()=>{K.unblock(),URL.revokeObjectURL(Ue)};vo(we).then(Gn=>{const Un=$.getExistingBlobInfo(Ju(Gn),we.type),As=Un&&Un.filename()===we.name?Un:$.createBlobCache(we,Ue,Gn);return $.addToBlobCache(As),$.uploadFile(As,Pa)}).then(Gn=>{dt(Gn),nn()}).catch(Gn=>{nn(),$.alertErr(Gn,()=>{K.focus("fileinput")})})})},zh=$=>(K,te,we)=>{var Ue;return $.editorUpload.blobCache.create({blob:K,blobUri:te,name:(Ue=K.name)==null?void 0:Ue.replace(/\.[^\.]+$/,""),filename:K.name,base64:we.split(",")[1]})},oi=$=>K=>{$.editorUpload.blobCache.add(K)},Bc=$=>(K,te)=>$.editorUpload.blobCache.getByData(K,te),gg=$=>(K,te)=>{$.windowManager.alert(K,te)},hg=$=>{const K=hn($);return ni.collect($,K)},fl=($,K)=>{const te=$.anchor,we=te.url.getOr("");return{url:{value:we,meta:{original:{value:we}}},text:te.text.getOr(""),title:te.title.getOr(""),anchor:we,link:we,rel:te.rel.getOr(""),target:te.target.or(K).getOr(""),linkClass:te.linkClass.getOr(""),fileinput:[]}},pg=($,K,te,we,Ue,dt)=>{const nn=ve([$,K,te,De([we.anchor.map(La.createUi("anchor","Anchors")),we.rels.map(La.createUi("rel","Rel")),we.targets.map(La.createUi("target","Open link in...")),we.link.map(La.createUi("link","Link list")),we.classes.map(La.createUi("linkClass","Class"))])]);return Ue?{type:"tabpanel",tabs:ve([[{title:"General",name:"general",items:nn}],[ot.makeTab(dt)]])}:{type:"panel",items:nn}},Jd=($,K,te)=>{const we=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Ue=$.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),dt=$.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],nn=Y.from(_e(te)),Gn=fl($,nn),Un=$.catalogs,As=Cs.init(Gn,Un),Ss=pg(we,Ue,dt,Un,$.hasUploadPanel,$a(te)),sf={addToBlobCache:oi(te),createBlobCache:zh(te),alertErr:gg(te),uploadFile:ga(te),getExistingBlobInfo:Bc(te)};return{title:"Insert/Edit Link",size:"normal",body:Ss,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Gn,onChange:(rf,{name:ri})=>{ri==="fileinput"?ss(sf,rf):As.onChange(rf.getData,{name:ri}).each(V1=>{rf.setData(V1)})},onSubmit:K}},gl=$=>{hg($).then(te=>{const we=ou($,te);return Jd(te,we,$)}).then(te=>{$.windowManager.open(te)})},Qu=$=>{$.addCommand("mceLink",(K,te)=>{(te==null?void 0:te.dialog)===!0||!cl($)?gl($):$.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},We=$=>{$.addShortcut("Meta+K","",()=>{$.execCommand("mceLink")})};var Qd=tinymce.util.Tools.resolve("tinymce.util.VK");const of=($,K)=>{document.body.appendChild($),$.dispatchEvent(K),document.body.removeChild($)},si=$=>{const K=document.createElement("a");K.target="_blank",K.href=$,K.rel="noreferrer noopener";const te=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(te),of(K,te)},su=$=>$.altKey===!0&&$.shiftKey===!1&&$.ctrlKey===!1&&$.metaKey===!1,em=($,K)=>{if(K){const te=ac(K);if(/^#/.test(te)){const we=$.dom.select(`${te},[name="${po(te,"#")}"]`);we.length&&$.selection.scrollIntoView(we[0],!0)}else si(K.href)}},ha=$=>{const K=$.selection.getRng(),te=K.startContainer;return Fs(te)&&K.startContainer===K.endContainer&&$.dom.select("img",te).length===1},ed=($,K)=>{const te=il($.dom.getParents(K));return et(te.length===1,te[0])},ru=$=>{const K=pt($.selection.getRng());return et(K.length>0,K[0]).or(ed($,$.selection.getNode()))},hl=$=>$.selection.isCollapsed()||ha($)?ed($,$.selection.getStart()):ru($),ao=$=>{const K=Dc(),te=()=>K.get().or(hl($)),we=()=>te().each(Ue=>em($,Ue));return $.on("contextmenu",Ue=>{ed($,Ue.target).each(K.set)}),$.on("SelectionChange",()=>{K.isSet()||hl($).each(K.set)}),$.on("click",Ue=>{K.clear();const dt=il($.dom.getParents(Ue.target));dt.length===1&&Qd.metaKeyPressed(Ue)&&(Ue.preventDefault(),em($,dt[0]))}),$.on("keydown",Ue=>{K.clear(),!Ue.isDefaultPrevented()&&Ue.keyCode===13&&su(Ue)&&te().each(dt=>{Ue.preventDefault(),em($,dt)})}),{gotoSelectedLink:we}},tm=$=>()=>{$.execCommand("mceLink",!1,{dialog:!0})},Fr=($,K)=>($.on("NodeChange",K),()=>$.off("NodeChange",K)),B=$=>K=>{const te=()=>{K.setActive(!$.mode.isReadOnly()&&cc($,$.selection.getNode())),K.setEnabled($.selection.isEditable())};return te(),Fr($,te)},V=$=>K=>{const te=()=>{K.setEnabled($.selection.isEditable())};return te(),Fr($,te)},X=$=>K=>{const te=dt=>Qm(dt)||tu($.selection.getRng()),we=$.dom.getParents($.selection.getStart()),Ue=dt=>{K.setEnabled(te(dt)&&$.selection.isEditable())};return Ue(we),Fr($,dt=>Ue(dt.parents))},ye=($,K)=>{$.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:tm($),onSetup:B($)}),$.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:K.gotoSelectedLink,onSetup:X($)}),$.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Ko($),onSetup:X($)})},yt=($,K)=>{$.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:K.gotoSelectedLink,onSetup:X($)}),$.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:tm($),onSetup:V($)}),$.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Ko($),onSetup:X($)})},ln=$=>{const K="link unlink openlink",te="link";$.ui.registry.addContextMenu("link",{update:we=>$.dom.isEditable(we)?Qm($.dom.getParents(we,"a"))?K:te:""})},Oo=($,K)=>{const te=dt=>{dt.selection.collapse(!1)},we=dt=>{const nn=$.selection.getNode();return dt.setEnabled(cc($,nn)&&$.selection.isEditable()),Jn},Ue=dt=>{const nn=hn($),Gn=Rc($);if(nn.isNone()&&Gn){const Un=da($.selection,nn);return et(Un.length===0,dt)}else return Y.none()};$.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:B($)},label:"Link",predicate:dt=>le($)&&cc($,dt),initValue:()=>hn($).fold(Dt(""),ac),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:dt=>{const nn=$.selection.getNode();return dt.setActive(cc($,nn)),B($)(dt)},onAction:dt=>{const nn=dt.getValue(),Gn=Ue(nn);tf($,{href:nn,attach:Jn},{href:nn,text:Gn,title:Y.none(),rel:Y.none(),target:Y.from(_e($)),class:Y.none()}),te($),dt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:we,onAction:dt=>{Ko($),dt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:we,onAction:dt=>{K.gotoSelectedLink(),dt.hide()}}]})},pa=$=>{const K=ao($);ye($,K),yt($,K),ln($),Oo($,K)};var Nc=()=>{pr.add("link",$=>{zn($),Qu($),pa($),We($)})};Nc()})();(function(){var pr=tinymce.util.Tools.resolve("tinymce.PluginManager");const ua=Object.getPrototypeOf,Jc=(B,V,X)=>{var ye;return X(B,V.prototype)?!0:((ye=B.constructor)==null?void 0:ye.name)===V.name},ec=B=>{const V=typeof B;return B===null?"null":V==="object"&&Array.isArray(B)?"array":V==="object"&&Jc(B,String,(X,ye)=>ye.isPrototypeOf(X))?"string":V},Oc=B=>V=>ec(V)===B,tc=B=>V=>typeof V===B,Na=B=>V=>B===V,on=(B,V)=>qu(B)&&Jc(B,V,(X,ye)=>ua(X)===ye),bo=Oc("string"),qu=Oc("object"),Qr=B=>on(B,Object),nc=Oc("array"),br=Na(null),Is=tc("boolean"),oc=B=>B==null,Jn=B=>!oc(B),Dt=tc("function"),Pa=tc("number"),sc=(B,V)=>{if(nc(B)){for(let X=0,ye=B.length;X<ye;++X)if(!V(B[X]))return!1;return!0}return!1},Y=()=>{},Fr=class Fr{constructor(V,X){Ie(this,"tag");Ie(this,"value");this.tag=V,this.value=X}static some(V){return new Fr(!0,V)}static none(){return Fr.singletonNone}fold(V,X){return this.tag?X(this.value):V()}isSome(){return this.tag}isNone(){return!this.tag}map(V){return this.tag?Fr.some(V(this.value)):Fr.none()}bind(V){return this.tag?V(this.value):Fr.none()}exists(V){return this.tag&&V(this.value)}forall(V){return!this.tag||V(this.value)}filter(V){return!this.tag||V(this.value)?this:Fr.none()}getOr(V){return this.tag?this.value:V}or(V){return this.tag?this:V}getOrThunk(V){return this.tag?this.value:V()}orThunk(V){return this.tag?this:V()}getOrDie(V){if(this.tag)return this.value;throw new Error(V??"Called getOrDie on None")}static from(V){return Jn(V)?Fr.some(V):Fr.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(V){this.tag&&V(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};Ie(Fr,"singletonNone",new Fr(!1));let en=Fr;const Qc=Array.prototype.push,dn=B=>{const V=[];for(let X=0,ye=B.length;X<ye;++X){if(!nc(B[X]))throw new Error("Arr.flatten item "+X+" was not an array, input: "+B);Qc.apply(V,B[X])}return V},ie=(B,V)=>V>=0&&V<B.length?en.some(B[V]):en.none(),an=B=>ie(B,0),es=(B,V)=>{for(let X=0;X<B.length;X++){const ye=V(B[X],X);if(ye.isSome())return ye}return en.none()},gn=Object.keys,ve=Object.hasOwnProperty,ne=(B,V)=>{const X=gn(B);for(let ye=0,yt=X.length;ye<yt;ye++){const ln=X[ye],Oo=B[ln];V(Oo,ln)}},lr=B=>(V,X)=>{B[X]=V},In=(B,V,X,ye)=>{ne(B,(yt,ln)=>{(V(yt,ln)?X:ye)(yt,ln)})},Ot=(B,V)=>{const X={};return In(B,V,lr(X),Y),X},T=(B,V)=>ve.call(B,V),Uo=(B,V)=>T(B,V)&&B[V]!==void 0&&B[V]!==null,zt=(B=>(...V)=>{if(V.length===0)throw new Error("Can't merge zero objects");const X={};for(let ye=0;ye<V.length;ye++){const yt=V[ye];for(const ln in yt)T(yt,ln)&&(X[ln]=B(X[ln],yt[ln]))}return X})((B,V)=>Qr(B)&&Qr(V)?zt(B,V):V),Me=B=>B.length>0,to=(B,V)=>{const ye=(V||document).createElement("div");if(ye.innerHTML=B,!ye.hasChildNodes()||ye.childNodes.length>1){const yt="HTML does not have a single root node";throw console.error(yt,B),new Error(yt)}return ls(ye.childNodes[0])},js=(B,V)=>{const ye=(V||document).createElement(B);return ls(ye)},Ro=(B,V)=>{const ye=(V||document).createTextNode(B);return ls(ye)},ls=B=>{if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},et={fromHtml:to,fromTag:js,fromText:Ro,fromDom:ls,fromPoint:(B,V,X)=>en.from(B.dom.elementFromPoint(V,X)).map(ls)},N=(B,V,X)=>{if(bo(X)||Is(X)||Pa(X))B.setAttribute(V,X+"");else throw console.error("Invalid call to Attribute.set. Key ",V,":: Value ",X,":: Element ",B),new Error("Attribute value was not simple")},Dc=(B,V,X)=>{N(B.dom,V,X)},no=(B,V)=>{B.dom.removeAttribute(V)};var ts=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),po=tinymce.util.Tools.resolve("tinymce.util.URI");const ea=B=>V=>V.options.get(B),vt=B=>{const V=B.options.register;V("image_dimensions",{processor:"boolean",default:!0}),V("image_advtab",{processor:"boolean",default:!1}),V("image_uploadtab",{processor:"boolean",default:!0}),V("image_prepend_url",{processor:"string",default:""}),V("image_class_list",{processor:"object[]"}),V("image_description",{processor:"boolean",default:!0}),V("image_title",{processor:"boolean",default:!1}),V("image_caption",{processor:"boolean",default:!1}),V("image_list",{processor:X=>{const ye=X===!1||bo(X)||sc(X,qu)||Dt(X);return ye?{value:X,valid:ye}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},zn=ea("image_dimensions"),Rt=ea("image_advtab"),le=ea("image_uploadtab"),ks=ea("image_prepend_url"),_e=ea("image_class_list"),ge=ea("image_description"),tn=ea("image_title"),yn=ea("image_caption"),cn=ea("image_list"),Ls=ea("a11y_advanced_options"),Qn=ea("automatic_uploads"),cl=B=>Me(B.options.get("images_upload_url")),Lh=B=>Jn(B.options.get("images_upload_handler")),ta=(B,V)=>Math.max(parseInt(B,10),parseInt(V,10)),Vn=B=>new Promise(V=>{const X=document.createElement("img"),ye=ln=>{X.parentNode&&X.parentNode.removeChild(X),V(ln)};X.addEventListener("load",()=>{const ln=ta(X.width,X.clientWidth),Oo=ta(X.height,X.clientHeight),pa={width:ln,height:Oo};ye(Promise.resolve(pa))}),X.addEventListener("error",()=>{ye(Promise.reject(`Failed to get image dimensions for: ${B}`))});const yt=X.style;yt.visibility="hidden",yt.position="fixed",yt.bottom=yt.left="0px",yt.width=yt.height="auto",document.body.appendChild(X),X.src=B}),$a=B=>(B&&(B=B.replace(/px$/,"")),B),Mo=B=>(B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B),ns=B=>{if(B.margin){const V=String(B.margin).split(" ");switch(V.length){case 1:B["margin-top"]=B["margin-top"]||V[0],B["margin-right"]=B["margin-right"]||V[0],B["margin-bottom"]=B["margin-bottom"]||V[0],B["margin-left"]=B["margin-left"]||V[0];break;case 2:B["margin-top"]=B["margin-top"]||V[0],B["margin-right"]=B["margin-right"]||V[1],B["margin-bottom"]=B["margin-bottom"]||V[0],B["margin-left"]=B["margin-left"]||V[1];break;case 3:B["margin-top"]=B["margin-top"]||V[0],B["margin-right"]=B["margin-right"]||V[1],B["margin-bottom"]=B["margin-bottom"]||V[2],B["margin-left"]=B["margin-left"]||V[1];break;case 4:B["margin-top"]=B["margin-top"]||V[0],B["margin-right"]=B["margin-right"]||V[1],B["margin-bottom"]=B["margin-bottom"]||V[2],B["margin-left"]=B["margin-left"]||V[3]}delete B.margin}return B},Ku=(B,V)=>{const X=cn(B);bo(X)?fetch(X).then(ye=>{ye.ok&&ye.json().then(V)}):Dt(X)?X(V):V(X)},ki=(B,V,X)=>{const ye=()=>{X.onload=X.onerror=null,B.selection&&(B.selection.select(X),B.nodeChanged())};X.onload=()=>{!V.width&&!V.height&&zn(B)&&B.dom.setAttribs(X,{width:String(X.clientWidth),height:String(X.clientHeight)}),ye()},X.onerror=ye},Ir=B=>new Promise((V,X)=>{const ye=new FileReader;ye.onload=()=>{V(ye.result)},ye.onerror=()=>{var yt;X((yt=ye.error)==null?void 0:yt.message)},ye.readAsDataURL(B)}),us=B=>B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder")),Fs=(B,V)=>{const X=B.options.get;return po.isDomSafe(V,"img",{allow_html_data_urls:X("allow_html_data_urls"),allow_script_urls:X("allow_script_urls"),allow_svg_data_urls:X("allow_svg_data_urls")})},Bo=ts.DOM,rc=B=>B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?$a(B.style.marginLeft):"",ac=B=>B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?$a(B.style.marginTop):"",bt=B=>B.style.borderWidth?$a(B.style.borderWidth):"",Mn=(B,V)=>B.hasAttribute(V)?B.getAttribute(V)??"":"",hn=B=>B.parentNode!==null&&B.parentNode.nodeName==="FIGURE",cc=(B,V,X)=>{X===""||X===null?B.removeAttribute(V):B.setAttribute(V,X)},da=B=>{const V=Bo.create("figure",{class:"image"});Bo.insertAfter(V,B),V.appendChild(B),V.appendChild(Bo.create("figcaption",{contentEditable:"true"},"Caption")),V.contentEditable="false"},pt=B=>{const V=B.parentNode;Jn(V)&&(Bo.insertAfter(B,V),Bo.remove(V))},il=B=>{hn(B)?pt(B):da(B)},Qm=(B,V)=>{const X=B.getAttribute("style"),ye=V(X!==null?X:"");ye.length>0?(B.setAttribute("style",ye),B.setAttribute("data-mce-style",ye)):B.removeAttribute("style")},tu=(B,V)=>(X,ye,yt)=>{const ln=X.style;ln[ye]?(ln[ye]=Mo(yt),Qm(X,V)):cc(X,ye,yt)},Rc=(B,V)=>B.style[V]?$a(B.style[V]):Mn(B,V),Ia=(B,V)=>{const X=Mo(V);B.style.marginLeft=X,B.style.marginRight=X},vo=(B,V)=>{const X=Mo(V);B.style.marginTop=X,B.style.marginBottom=X},Kt=(B,V)=>{const X=Mo(V);B.style.borderWidth=X},Wo=(B,V)=>{B.style.borderStyle=V},ef=B=>B.style.borderStyle??"",Yu=B=>Jn(B)&&B.nodeName==="FIGURE",ei=B=>B.nodeName==="IMG",Bt=B=>{const V=Bo.getAttrib(B,"alt"),X=Bo.getAttrib(B,"role");return B.hasAttribute("alt")&&V.length===0||X==="presentation"||X==="none"},ma=B=>Bt(B)?"":Mn(B,"alt"),ll=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Fh=(B,V)=>{const X=document.createElement("img");return cc(X,"style",V.style),(rc(X)||V.hspace!=="")&&Ia(X,V.hspace),(ac(X)||V.vspace!=="")&&vo(X,V.vspace),(bt(X)||V.border!=="")&&Kt(X,V.border),(ef(X)||V.borderStyle!=="")&&Wo(X,V.borderStyle),B(X.getAttribute("style")??"")},vr=(B,V)=>{const X=document.createElement("img");if(_i(B,{...V,caption:!1},X),Wd(X,V.alt,V.isDecorative),V.caption){const ye=Bo.create("figure",{class:"image"});return ye.appendChild(X),ye.appendChild(Bo.create("figcaption",{contentEditable:"true"},"Caption")),ye.contentEditable="false",ye}else return X},tf=(B,V)=>({src:Mn(V,"src"),alt:ma(V),title:Mn(V,"title"),width:Rc(V,"width"),height:Rc(V,"height"),class:Mn(V,"class"),style:B(Mn(V,"style")),caption:hn(V),hspace:rc(V),vspace:ac(V),border:bt(V),borderStyle:ef(V),isDecorative:Bt(V)}),Ko=(B,V,X,ye,yt)=>{X[ye]!==V[ye]&&yt(B,ye,String(X[ye]))},Wd=(B,V,X)=>{if(X){Bo.setAttrib(B,"role","presentation");const ye=et.fromDom(B);Dc(ye,"alt","")}else{if(br(V)){const ye=et.fromDom(B);no(ye,"alt")}else{const ye=et.fromDom(B);Dc(ye,"alt",V)}Bo.getAttrib(B,"role")==="presentation"&&Bo.setAttrib(B,"role","")}},jd=(B,V,X)=>{(X.alt!==V.alt||X.isDecorative!==V.isDecorative)&&Wd(B,X.alt,X.isDecorative)},ul=(B,V)=>(X,ye,yt)=>{B(X,yt),Qm(X,V)},_i=(B,V,X)=>{const ye=tf(B,X);Ko(X,ye,V,"caption",(yt,ln,Oo)=>il(yt)),Ko(X,ye,V,"src",cc),Ko(X,ye,V,"title",cc),Ko(X,ye,V,"width",tu("width",B)),Ko(X,ye,V,"height",tu("height",B)),Ko(X,ye,V,"class",cc),Ko(X,ye,V,"style",ul((yt,ln)=>cc(yt,"style",ln),B)),Ko(X,ye,V,"hspace",ul(Ia,B)),Ko(X,ye,V,"vspace",ul(vo,B)),Ko(X,ye,V,"border",ul(Kt,B)),Ko(X,ye,V,"borderStyle",ul(Wo,B)),jd(X,ye,V)},_s=(B,V)=>{const X=B.dom.styles.parse(V),ye=ns(X),yt=B.dom.styles.parse(B.dom.styles.serialize(ye));return B.dom.styles.serialize(yt)},nu=B=>{const V=B.selection.getNode(),X=B.dom.getParent(V,"figure.image");return X?B.dom.select("img",X)[0]:V&&(V.nodeName!=="IMG"||us(V))?null:V},dg=(B,V)=>{const X=B.dom,ye=Ot(B.schema.getTextBlockElements(),(ln,Oo)=>!B.schema.isValidChild(Oo,"figure")),yt=X.getParent(V.parentNode,ln=>Uo(ye,ln.nodeName),B.getBody());return yt?X.split(yt,V)??V:V},st=B=>{const V=nu(B);return V?tf(X=>_s(B,X),V):ll()},La=(B,V)=>{const X=vr(yt=>_s(B,yt),V);B.dom.setAttrib(X,"data-mce-id","__mcenew"),B.focus(),B.insertContent(X.outerHTML);const ye=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(ye,"data-mce-id",null),Yu(ye)){const yt=dg(B,ye);B.selection.select(yt)}else B.selection.select(ye)},Gd=(B,V)=>{B.dom.setAttrib(V,"src",V.getAttribute("src"))},qd=(B,V)=>{if(V){const X=B.dom.is(V.parentNode,"figure.image")?V.parentNode:V;B.dom.remove(X),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},ro=(B,V)=>{const X=nu(B);if(X)if(_i(ye=>_s(B,ye),V,X),Gd(B,X),Yu(X.parentNode)){B.dom.setStyle(X,"float","");const ye=X.parentNode;dg(B,ye),B.selection.select(X.parentNode)}else B.selection.select(X),ki(B,V,X)},Kd=(B,V)=>{const X=V.src;return{...V,src:Fs(B,X)?X:""}},ic=(B,V)=>{const X=nu(B);if(X){const yt={...tf(Oo=>_s(B,Oo),X),...V},ln=Kd(B,yt);yt.src?ro(B,ln):qd(B,X)}else V.src&&La(B,{...ll(),...V})};var Cs=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ai=tinymce.util.Tools.resolve("tinymce.util.Tools");const Yd=B=>bo(B.value)?B.value:"",lc=B=>bo(B.text)?B.text:bo(B.title)?B.title:"",yr=(B,V)=>{const X=[];return Ai.each(B,ye=>{const yt=lc(ye);if(ye.menu!==void 0){const ln=yr(ye.menu,V);X.push({text:yt,items:ln})}else{const ln=V(ye);X.push({text:yt,value:ln})}}),X},ti=(B=Yd)=>V=>V?en.from(V).map(X=>yr(X,B)):en.none(),fa=B=>ti(Yd)(B),z1=B=>T(B,"items"),mg=(B,V)=>es(B,X=>z1(X)?mg(X.items,V):X.value===V?en.some(X):en.none()),dl={sanitizer:ti,sanitize:fa,findEntry:(B,V)=>B.bind(X=>mg(X,V))},fg={makeTab:B=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},ps=B=>{const V=dl.sanitizer(nn=>B.convertURL(nn.value||nn.url||"","src")),X=new Promise(nn=>{Ku(B,Gn=>{nn(V(Gn).map(Un=>dn([[{text:"None",value:""}],Un])))})}),ye=dl.sanitize(_e(B)),yt=Rt(B),ln=le(B),Oo=cl(B),pa=Lh(B),Nc=st(B),un=ge(B),$=tn(B),K=zn(B),te=yn(B),we=Ls(B),Ue=Qn(B),dt=en.some(ks(B)).filter(nn=>bo(nn)&&nn.length>0);return X.then(nn=>({image:Nc,imageList:nn,classList:ye,hasAdvTab:yt,hasUploadTab:ln,hasUploadUrl:Oo,hasUploadHandler:pa,hasDescription:un,hasImageTitle:$,hasDimensions:K,hasImageCaption:te,prependURL:dt,hasAccessibilityOptions:we,automaticUploads:Ue}))},Zt=B=>{const V={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},X=B.imageList.map($=>({name:"images",type:"listbox",label:"Image list",items:$})),ye={name:"alt",type:"input",label:"Alternative description",enabled:!(B.hasAccessibilityOptions&&B.image.isDecorative)},yt={name:"title",type:"input",label:"Image title"},ln={name:"dimensions",type:"sizeinput"},Oo={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},pa=B.classList.map($=>({name:"classes",type:"listbox",label:"Class",items:$})),Nc={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},un=$=>$?{type:"grid",columns:2}:{type:"panel"};return dn([[V],X.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[Oo]:[],B.hasDescription?[ye]:[],B.hasImageTitle?[yt]:[],B.hasDimensions?[ln]:[],[{...un(B.classList.isSome()&&B.hasImageCaption),items:dn([pa.toArray(),B.hasImageCaption?[Nc]:[]])}]])},Cr={makeTab:B=>({title:"General",name:"general",items:Zt(B)}),makeItems:Zt},nf={makeTab:B=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Xd=B=>({prevImage:dl.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}),jo=B=>({src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}),Xu=(B,V)=>({src:B.src.value,alt:(B.alt===null||B.alt.length===0)&&V?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}),ni=(B,V)=>/^(?:[a-zA-Z]+:)?\/\//.test(V)?en.none():B.prependURL.bind(X=>V.substring(0,X.length)!==X?en.some(X+V):en.none()),Hh=(B,V)=>{const X=V.getData();ni(B,X.src.value).each(ye=>{V.setData({src:{value:ye,meta:X.src.meta}})})},ot=(B,V,X)=>{B.hasDescription&&bo(X.alt)&&(V.alt=X.alt),B.hasAccessibilityOptions&&(V.isDecorative=X.isDecorative||V.isDecorative||!1),B.hasImageTitle&&bo(X.title)&&(V.title=X.title),B.hasDimensions&&(bo(X.width)&&(V.dimensions.width=X.width),bo(X.height)&&(V.dimensions.height=X.height)),bo(X.class)&&dl.findEntry(B.classList,X.class).each(ye=>{V.classes=ye.value}),B.hasImageCaption&&Is(X.caption)&&(V.caption=X.caption),B.hasAdvTab&&(bo(X.style)&&(V.style=X.style),bo(X.vspace)&&(V.vspace=X.vspace),bo(X.border)&&(V.border=X.border),bo(X.hspace)&&(V.hspace=X.hspace),bo(X.borderstyle)&&(V.borderstyle=X.borderstyle))},ou=(B,V)=>{const X=V.getData(),ye=X.src.meta;if(ye!==void 0){const yt=zt({},X);ot(B,yt,ye),V.setData(yt)}},ga=(B,V,X,ye)=>{const yt=ye.getData(),ln=yt.src.value,Oo=yt.src.meta||{};!Oo.width&&!Oo.height&&V.hasDimensions&&(Me(ln)?B.imageSize(ln).then(pa=>{X.open&&ye.setData({dimensions:pa})}).catch(pa=>console.error(pa)):ye.setData({dimensions:{width:"",height:""}}))},Ju=(B,V,X)=>{const ye=X.getData(),yt=dl.findEntry(B.imageList,ye.src.value);V.prevImage=yt,X.setData({images:yt.map(ln=>ln.value).getOr("")})},ss=(B,V,X,ye)=>{Hh(V,ye),ou(V,ye),ga(B,V,X,ye),Ju(V,X,ye)},zh=(B,V,X,ye)=>{const yt=ye.getData(),ln=dl.findEntry(V.imageList,yt.images);ln.each(Oo=>{yt.alt===""||X.prevImage.map(Nc=>Nc.text===yt.alt).getOr(!1)?Oo.value===""?ye.setData({src:Oo,alt:X.prevAlt}):ye.setData({src:Oo,alt:Oo.text}):ye.setData({src:Oo})}),X.prevImage=ln,ss(B,V,X,ye)},oi=(B,V,X,ye)=>{const yt=ye.getData();ye.block("Uploading image"),an(yt.fileinput).fold(()=>{ye.unblock()},ln=>{const Oo=URL.createObjectURL(ln),pa=()=>{ye.unblock(),URL.revokeObjectURL(Oo)},Nc=un=>{ye.setData({src:{value:un,meta:{}}}),ye.showTab("general"),ss(B,V,X,ye),ye.focus("src")};Ir(ln).then(un=>{const $=B.createBlobCache(ln,Oo,un);V.automaticUploads?B.uploadImage($).then(K=>{Nc(K.url),pa()}).catch(K=>{pa(),B.alertErr(K,()=>{ye.focus("fileinput")})}):(B.addToBlobCache($),Nc($.blobUri()),ye.unblock())})})},Bc=(B,V,X)=>(ye,yt)=>{yt.name==="src"?ss(B,V,X,ye):yt.name==="images"?zh(B,V,X,ye):yt.name==="alt"?X.prevAlt=ye.getData().alt:yt.name==="fileinput"?oi(B,V,X,ye):yt.name==="isDecorative"&&ye.setEnabled("alt",!ye.getData().isDecorative)},gg=B=>()=>{B.open=!1},hg=B=>B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler?{type:"tabpanel",tabs:dn([[Cr.makeTab(B)],B.hasAdvTab?[fg.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[nf.makeTab(B)]:[]])}:{type:"panel",items:Cr.makeItems(B)},fl=(B,V,X)=>ye=>{const yt=zt(jo(V.image),ye.getData()),ln={...yt,style:Fh(X.normalizeCss,Xu(yt,!1))};B.execCommand("mceUpdateImage",!1,Xu(ln,V.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),ye.close()},pg=B=>V=>Fs(B,V)?Vn(B.documentBaseURI.toAbsolute(V)).then(X=>({width:String(X.width),height:String(X.height)})):Promise.resolve({width:"",height:""}),Jd=B=>(V,X,ye)=>{var yt;return B.editorUpload.blobCache.create({blob:V,blobUri:X,name:(yt=V.name)==null?void 0:yt.replace(/\.[^\.]+$/,""),filename:V.name,base64:ye.split(",")[1]})},gl=B=>V=>{B.editorUpload.blobCache.add(V)},Qu=B=>(V,X)=>{B.windowManager.alert(V,X)},We=B=>V=>_s(B,V),Qd=B=>V=>B.dom.parseStyle(V),of=B=>(V,X)=>B.dom.serializeStyle(V,X),si=B=>V=>Cs(B).upload([V],!1).then(X=>{var ye;return X.length===0?Promise.reject("Failed to upload image"):X[0].status===!1?Promise.reject((ye=X[0].error)==null?void 0:ye.message):X[0]}),su=B=>{const V={imageSize:pg(B),addToBlobCache:gl(B),createBlobCache:Jd(B),alertErr:Qu(B),normalizeCss:We(B),parseStyle:Qd(B),serializeStyle:of(B),uploadImage:si(B)};return{open:()=>{ps(B).then(ye=>{const yt=Xd(ye);return{title:"Insert/Edit Image",size:"normal",body:hg(ye),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:jo(ye.image),onSubmit:fl(B,ye,V),onChange:Bc(V,ye,yt),onClose:gg(yt)}}).then(B.windowManager.open)}}},em=B=>{B.addCommand("mceImage",su(B).open),B.addCommand("mceUpdateImage",(V,X)=>{B.undoManager.transact(()=>ic(B,X))})},ha=B=>{const V=B.attr("class");return Jn(V)&&/\bimage\b/.test(V)},ed=B=>V=>{let X=V.length;const ye=yt=>{yt.attr("contenteditable",B?"true":null)};for(;X--;){const yt=V[X];ha(yt)&&(yt.attr("contenteditable",B?"false":null),Ai.each(yt.getAll("figcaption"),ye))}},ru=B=>{B.on("PreInit",()=>{B.parser.addNodeFilter("figure",ed(!0)),B.serializer.addNodeFilter("figure",ed(!1))})},hl=B=>V=>{const X=()=>{V.setEnabled(B.selection.isEditable())};return B.on("NodeChange",X),X(),()=>{B.off("NodeChange",X)}},ao=B=>{B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:su(B).open,onSetup:V=>{V.setActive(Jn(nu(B)));const X=B.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",V.setActive).unbind,ye=hl(B)(V);return()=>{X(),ye()}}}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:su(B).open,onSetup:hl(B)}),B.ui.registry.addContextMenu("image",{update:V=>B.selection.isEditable()&&(Yu(V)||ei(V)&&!us(V))?["image"]:[]})};var tm=()=>{pr.add("image",B=>{vt(B),ru(B),ao(B),em(B)})};tm()})();document.addEventListener("DOMContentLoaded",()=>{document.getElementById("editor")&&TX.init({selector:"#editor",height:420,license_key:"gpl",plugins:"lists link image",toolbar:"undo redo | bold italic | bullist numlist | link image",menubar:!1,images_upload_url:"/admin/images/upload",images_upload_credentials:!0,content_style:`
            body {
                font-family: "Noto Sans JP", sans-serif;
                font-size: 14px;
                line-height: 1.8;
            }
        `})});
